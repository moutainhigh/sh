// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.14/esri/copyright.txt for details.
//>>built
define("require exports ../../../core/maybe ../../../core/libs/gl-matrix-2/mat4 ../../../core/libs/gl-matrix-2/vec3 ../../../layers/graphics/dehydratedFeatures ../layers/graphics/graphicUtils ../support/stack ../webgl-engine/lib/Geometry ../webgl-engine/lib/GeometryUtil ../webgl-engine/materials/DefaultMaterial ../../interactive/Manipulator3D".split(" "),function(v,e,h,m,g,n,p,f,q,r,t,u){function k(b,a){var c=1!==a;b=new t({diffuse:b,transparent:c,writeDepth:!c,cullFace:2,opacity:a,castShadows:!1,
softwareInstanced:!0},"manipulator");b.renderOccluded=4;return b}function l(b,a,c,d){b=g.vec3.normalize(f.sv3d.get(),b);a=g.vec3.normalize(f.sv3d.get(),a);var e=g.vec3.cross(f.sv3d.get(),b,a);d[0]=b[0];d[1]=b[1];d[2]=b[2];d[3]=0;d[4]=a[0];d[5]=a[1];d[6]=a[2];d[7]=0;d[8]=e[0];d[9]=e[1];d[10]=e[2];d[11]=0;d[12]=c[0];d[13]=c[1];d[14]=c[2];d[15]=1;return d}Object.defineProperty(e,"__esModule",{value:!0});e.createManipulatorMaterial=k;e.createSphereManipulator=function(b,a,c){return new u.Manipulator3D({view:b,
renderObjects:[{geometry:new q(r.createSphereGeometry(1,32,32),"manipulator"),material:k(a,c)}]})};e.calculateInputRotationTransform=function(b,a,c,d){b=g.vec3.subtract(f.sv3d.get(),b,c);d=g.vec3.cross(f.sv3d.get(),d,b);c=l(b,d,c,f.sm4d.get());m.mat4.invert(c,c);a=g.vec3.transformMat4(f.sv3d.get(),a,c);return Math.atan2(a[1],a[0])};e.calculateTranslateRotateFromBases=l;e.placeManipulatorAtGraphic=function(b,a){var c=b.view.getViewForGraphic(a),c=h.isSome(c)&&"computeAttachmentOrigin"in c?c.computeAttachmentOrigin(a,
b.view.spatialReference):null;h.isSome(c)?b.elevationAlignedLocation=c:(a=a.geometry,h.isNone(a)||(a=p.computeCentroid(a),h.isNone(a)||(b.location=n.hydrateGeometry(a))))}});