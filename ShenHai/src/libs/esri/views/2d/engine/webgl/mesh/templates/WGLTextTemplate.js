// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.14/esri/copyright.txt for details.
//>>built
define("require exports ../../../../../../core/tsSupport/extendsHelper ../../../../../../core/screenUtils ../../alignmentUtils ../../color ../../fontUtils ../../materialKey/MaterialKey ./WGLBaseTextTemplate ./WGLMeshTemplate ../../util/BidiText".split(" "),function(h,k,m,d,n,g,t,r,p,q,l){Object.defineProperty(k,"__esModule",{value:!0});h=function(h){function e(b,a,f,e,g,k,l,m,p,q,u,v,w){var c=h.call(this)||this;c._xOffset=d.pt2px(u);c._yOffset=d.pt2px(v);c._decorationTop=t.getFontDecorationTop(m);
c._color=e;c._haloColor=g;c._haloSize=Math.min(Math.floor(5*d.pt2px(d.toPt(f))),127);c._size=Math.min(Math.round(d.pt2px(a)),127);a=Math.min(Math.round(d.pt2px(a)),127);c._referenceSize=Math.round(Math.sqrt(256*a));c._scale=c._size/24;c._angle=q;c._justify=n.getJustification(k||"center");c._xAlignD=n.getXAnchorDirection(k||"center");c._yAlignD=-n.getYAnchorDirection(l||"baseline");c._baseline="baseline"===(l||"baseline");c._bitset=p?1:0;b=r.MaterialKeyBase.load(r.createMaterialKey(c.geometryType,
b,!1));b.sdf=!0;c._materialKey=b.data;c.symbolId=w;return c}m(e,h);e.fromText=function(b,a,f){b=new e(b,a.font.size,a.haloSize||0,a.color&&g.premultiplyAlphaRGBA(a.color)||0,a.haloColor&&g.premultiplyAlphaRGBA(a.haloColor)||0,a.horizontalAlignment,a.verticalAlignment,a.font.decoration,!1,a.angle||0,a.xoffset,a.yoffset,a.id);a=l.bidiText(a.text);b.bindTextInfo(f,a[0],a[1]);b._computeGlyphs(b._shapedGlyphs,b._shapedBox);return b};e.fromCIMText=function(b,a,f,d){b=new e(b,a.size*a.sizeRatio*f,a.outlineSize*
a.sizeRatio,g.premultiplyAlphaRGBA(a.color),g.premultiplyAlphaRGBA(a.outlineColor),a.horizontalAlignment,a.verticalAlignment,a.decoration,a.colorLocked,a.angle,a.offsetX*a.sizeRatio*f,a.offsetY*a.sizeRatio*f,a.materialHash);a=l.bidiText(a.text);b.bindTextInfo(d,a[0],a[1]);b._computeGlyphs(b._shapedGlyphs,b._shapedBox);return b};return e}(p.default(q.default));k.default=h});