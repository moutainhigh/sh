// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.14/esri/copyright.txt for details.
//>>built
/*
 MIT
*/
require({cache:{"esri/libs/sortablejs/Sortable":function(){(function(K,z){"object"===typeof exports&&"undefined"!==typeof module?module.exports=z():"function"===typeof define&&define.amd?define(z):(K=K||self,K.Sortable=z())})(this,function(){function K(a){K="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"===typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a};return K(a)}function z(){z=Object.assign||
function(a){for(var c=1;c<arguments.length;c++){var e=arguments[c],l;for(l in e)Object.prototype.hasOwnProperty.call(e,l)&&(a[l]=e[l])}return a};return z.apply(this,arguments)}function L(a){for(var c=1;c<arguments.length;c++){var e=null!=arguments[c]?arguments[c]:{},l=Object.keys(e);"function"===typeof Object.getOwnPropertySymbols&&(l=l.concat(Object.getOwnPropertySymbols(e).filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})));l.forEach(function(c){var l=e[c];c in a?Object.defineProperty(a,
c,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[c]=l})}return a}function h(a,c){if(null==a)return{};var e;if(null==a)e={};else{e={};var l=Object.keys(a),b,m;for(m=0;m<l.length;m++)b=l[m],0<=c.indexOf(b)||(e[b]=a[b])}if(Object.getOwnPropertySymbols)for(m=Object.getOwnPropertySymbols(a),b=0;b<m.length;b++)l=m[b],0<=c.indexOf(l)||Object.prototype.propertyIsEnumerable.call(a,l)&&(e[l]=a[l]);return e}function O(a){var c;if(Array.isArray(a)){c=0;for(var e=Array(a.length);c<a.length;c++)e[c]=a[c];
c=e}else c=void 0;c||(c=Symbol.iterator in Object(a)||"[object Arguments]"===Object.prototype.toString.call(a)?Array.from(a):void 0);if(!(a=c))throw new TypeError("Invalid attempt to spread non-iterable instance");return a}function r(a){return!!navigator.userAgent.match(a)}function v(a,c,e){a.addEventListener(c,e,!ga&&ib)}function k(a,c,e){a.removeEventListener(c,e,!ga&&ib)}function E(a,c){if(c){"\x3e"===c[0]&&(c=c.substring(1));if(a)try{if(a.matches)return a.matches(c);if(a.msMatchesSelector)return a.msMatchesSelector(c);
if(a.webkitMatchesSelector)return a.webkitMatchesSelector(c)}catch(e){}return!1}}function F(a,c,e,l){if(a){e=e||document;do{if(null!=c&&("\x3e"===c[0]?a.parentNode===e&&E(a,c):E(a,c))||l&&a===e)return a;if(a===e)break}while(a=a.host&&a!==document&&a.host.nodeType?a.host:a.parentNode)}return null}function y(a,c,e){if(a&&c)if(a.classList)a.classList[e?"add":"remove"](c);else{var l=(" "+a.className+" ").replace(jb," ").replace(" "+c+" "," ");a.className=(l+(e?" "+c:"")).replace(jb," ")}}function n(a,
c,e){var l=a&&a.style;if(l){if(void 0===e)return document.defaultView&&document.defaultView.getComputedStyle?e=document.defaultView.getComputedStyle(a,""):a.currentStyle&&(e=a.currentStyle),void 0===c?e:e[c];c in l||-1!==c.indexOf("webkit")||(c="-webkit-"+c);l[c]=e+("string"===typeof e?"":"px")}}function C(a,c){var e="";if("string"===typeof a)e=a;else{do{var l=n(a,"transform");l&&"none"!==l&&(e=l+" "+e)}while(!c&&(a=a.parentNode))}return(a=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix)&&
new a(e)}function f(a,c,e){if(a){a=a.getElementsByTagName(c);c=0;var l=a.length;if(e)for(;c<l;c++)e(a[c],c);return a}return[]}function d(){return ga?document.documentElement:document.scrollingElement}function D(a,c,e,l,b){if(a.getBoundingClientRect||a===window){var m,M,g,q,t,h,f;a!==window&&a!==d()?(m=a.getBoundingClientRect(),M=m.top,g=m.left,q=m.bottom,t=m.right,h=m.height,f=m.width):(g=M=0,q=window.innerHeight,t=window.innerWidth,h=window.innerHeight,f=window.innerWidth);if((c||e)&&a!==window&&
(b=b||a.parentNode,!ga)){do if(b&&b.getBoundingClientRect&&("none"!==n(b,"transform")||e&&"static"!==n(b,"position"))){q=b.getBoundingClientRect();M-=q.top+parseInt(n(b,"border-top-width"));g-=q.left+parseInt(n(b,"border-left-width"));q=M+m.height;t=g+m.width;break}while(b=b.parentNode)}l&&a!==window&&(l=(a=C(b||a))&&a.a,b=a&&a.d,a&&(M/=b,g/=l,f/=l,h/=b,q=M+h,t=g+f));return{top:M,left:g,bottom:q,right:t,width:f,height:h}}}function x(a,c,e){var l=g(a,!0);for(a=D(a)[c];l;){c=D(l)[e];var b=void 0,b=
"top"===e||"left"===e?a>=c:a<=c;if(!b)return l;if(l===d())break;l=g(l,!1)}return!1}function w(a,c,e){for(var l=0,b=0,m=a.children;b<m.length;){if("none"!==m[b].style.display&&m[b]!==t.ghost&&m[b]!==t.dragged&&F(m[b],e.draggable,a,!1)){if(l===c)return m[b];l++}b++}return null}function U(a,c){for(a=a.lastElementChild;a&&(a===t.ghost||"none"===n(a,"display")||c&&!E(a,c));)a=a.previousElementSibling;return a||null}function G(a,c){var e=0;if(!a||!a.parentNode)return-1;for(;a=a.previousElementSibling;)"TEMPLATE"===
a.nodeName.toUpperCase()||a===t.clone||c&&!E(a,c)||e++;return e}function R(a){var c=0,e=0,l=d();if(a){do var b=C(a),m=b.d,c=c+a.scrollLeft*b.a,e=e+a.scrollTop*m;while(a!==l&&(a=a.parentNode))}return[c,e]}function b(a,c){for(var e in a)if(a.hasOwnProperty(e))for(var l in c)if(c.hasOwnProperty(l)&&c[l]===a[e][l])return Number(e);return-1}function g(a,c){if(!a||!a.getBoundingClientRect)return d();var e=!1;do if(a.clientWidth<a.scrollWidth||a.clientHeight<a.scrollHeight){var l=n(a);if(a.clientWidth<a.scrollWidth&&
("auto"==l.overflowX||"scroll"==l.overflowX)||a.clientHeight<a.scrollHeight&&("auto"==l.overflowY||"scroll"==l.overflowY)){if(!a.getBoundingClientRect||a===document.body)break;if(e||c)return a;e=!0}}while(a=a.parentNode);return d()}function q(a,c){return Math.round(a.top)===Math.round(c.top)&&Math.round(a.left)===Math.round(c.left)&&Math.round(a.height)===Math.round(c.height)&&Math.round(a.width)===Math.round(c.width)}function I(a,c){return function(){if(!wa){var e=arguments;1===e.length?a.call(this,
e[0]):a.apply(this,e);wa=setTimeout(function(){wa=void 0},c)}}}function ia(a,c,e){a.scrollLeft+=c;a.scrollTop+=e}function H(a){var c=window.Polymer,e=window.jQuery||window.Zepto;return c&&c.dom?c.dom(a).cloneNode(!0):e?e(a).clone(!0)[0]:a.cloneNode(!0)}function ha(a,c){n(a,"position","absolute");n(a,"top",c.top);n(a,"left",c.left);n(a,"width",c.width);n(a,"height",c.height)}function ca(a){n(a,"position","");n(a,"top","");n(a,"left","");n(a,"width","");n(a,"height","")}function p(){var a=[],c;return{captureAnimationState:function(){a=
[];this.options.animation&&[].slice.call(this.el.children).forEach(function(c){if("none"!==n(c,"display")&&c!==t.ghost){a.push({target:c,rect:D(c)});var e=L({},a[a.length-1].rect);if(c.thisAnimationDuration){var b=C(c,!0);b&&(e.top-=b.f,e.left-=b.e)}c.fromRect=e}})},addAnimationState:function(c){a.push(c)},removeAnimationState:function(c){a.splice(b(a,{target:c}),1)},animateAll:function(e){var l=this;if(this.options.animation){var b=!1,m=0;a.forEach(function(a){var c=0,e=a.target,M=e.fromRect,g=D(e),
t=e.prevFromRect,va=e.prevToRect;a=a.rect;var Wa=C(e,!0);Wa&&(g.top-=Wa.f,g.left-=Wa.e);e.toRect=g;e.thisAnimationDuration&&q(t,g)&&!q(M,g)&&(a.top-g.top)/(a.left-g.left)===(M.top-g.top)/(M.left-g.left)&&(c=Math.sqrt(Math.pow(t.top-a.top,2)+Math.pow(t.left-a.left,2))/Math.sqrt(Math.pow(t.top-va.top,2)+Math.pow(t.left-va.left,2))*l.options.animation);q(g,M)||(e.prevFromRect=M,e.prevToRect=g,c||(c=l.options.animation),l.animate(e,a,g,c));c&&(b=!0,m=Math.max(m,c),clearTimeout(e.animationResetTimer),
e.animationResetTimer=setTimeout(function(){e.animationTime=0;e.prevFromRect=null;e.fromRect=null;e.prevToRect=null;e.thisAnimationDuration=null},c),e.thisAnimationDuration=c)});clearTimeout(c);b?c=setTimeout(function(){"function"===typeof e&&e()},m):"function"===typeof e&&e();a=[]}else clearTimeout(c),"function"===typeof e&&e()},animate:function(a,c,b,m){if(m){n(a,"transition","");n(a,"transform","");var e=C(this.el),l=(c.left-b.left)/(e&&e.a||1);c=(c.top-b.top)/(e&&e.d||1);a.animatingX=!!l;a.animatingY=
!!c;n(a,"transform","translate3d("+l+"px,"+c+"px,0)");n(a,"transition","transform "+m+"ms"+(this.options.easing?" "+this.options.easing:""));n(a,"transform","translate3d(0,0,0)");"number"===typeof a.animated&&clearTimeout(a.animated);a.animated=setTimeout(function(){n(a,"transition","");n(a,"transform","");a.animated=!1;a.animatingX=!1;a.animatingY=!1},m)}}}}function xa(a){var c=a.sortable,e=a.rootEl,l=a.name,b=a.targetEl,m=a.cloneEl,g=a.toEl,q=a.fromEl,t=a.oldIndex,d=a.newIndex,h=a.oldDraggableIndex,
f=a.newDraggableIndex,n=a.originalEvent,N=a.putSortable,p=a.extraEventProperties;if(c=c||e&&e[W]){var I=c.options,ia="on"+l.charAt(0).toUpperCase()+l.substr(1);!window.CustomEvent||ga||ya?(a=document.createEvent("Event"),a.initEvent(l,!0,!0)):a=new CustomEvent(l,{bubbles:!0,cancelable:!0});a.to=g||e;a.from=q||e;a.item=b||e;a.clone=m;a.oldIndex=t;a.newIndex=d;a.oldDraggableIndex=h;a.newDraggableIndex=f;a.originalEvent=n;a.pullMode=N?N.lastPutMode:void 0;var l=L({},p,za.getEventProperties(l,c)),x;for(x in l)a[x]=
l[x];e&&e.dispatchEvent(a);I[ia]&&I[ia].call(c,a)}}function m(a){xa(L({putSortable:V,cloneEl:Q,targetEl:u,rootEl:P,oldIndex:ra,oldDraggableIndex:Aa,newIndex:Z,newDraggableIndex:ja},a))}function t(a,c){if(!a||!a.nodeType||1!==a.nodeType)throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(a));this.el=a;this.options=c=z({},c);a[W]=this;var e={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(a.nodeName)?"\x3eli":"\x3e*",swapThreshold:1,invertSwap:!1,
invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return kb(a,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(a,c){a.setData("Text",c.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",
fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:!1!==t.supportPointer&&"PointerEvent"in window,emptyInsertThreshold:5};za.initializePlugins(this,a,e);for(var l in e)l in c||(c[l]=e[l]);lb(c);for(var b in this)"_"===b.charAt(0)&&"function"===typeof this[b]&&(this[b]=this[b].bind(this));if(this.nativeDraggable=c.forceFallback?!1:vb)this.options.touchStartThreshold=1;c.supportPointer?v(a,"pointerdown",this._onTapStart):(v(a,"mousedown",this._onTapStart),v(a,"touchstart",
this._onTapStart));this.nativeDraggable&&(v(a,"dragover",this),v(a,"dragenter",this));Ka.push(this.el);c.store&&c.store.get&&this.sort(c.store.get(this)||[]);z(this,p())}function la(a,c,e,b,m,g,q,t){var l,M=a[W],va=M.options.onMove,d;!window.CustomEvent||ga||ya?(l=document.createEvent("Event"),l.initEvent("move",!0,!0)):l=new CustomEvent("move",{bubbles:!0,cancelable:!0});l.to=c;l.from=a;l.dragged=e;l.draggedRect=b;l.related=m||c;l.relatedRect=g||D(c);l.willInsertAfter=t;l.originalEvent=q;a.dispatchEvent(l);
va&&(d=va.call(M,l,q));return d}function N(a){a.draggable=!1}function wb(){Xa=!1}function xb(a,c,e){e=D(U(e.el,e.options.draggable));return c?a.clientX>e.right+10||a.clientX<=e.right&&a.clientY>e.bottom&&a.clientX>=e.left:a.clientX>e.right&&a.clientY>e.top||a.clientX<=e.right&&a.clientY>e.bottom+10}function yb(a,c,e,l,b,m,g,q){a=l?a.clientY:a.clientX;var M=l?e.height:e.width,t=l?e.top:e.left;e=l?e.bottom:e.right;l=!1;if(!g)if(q&&La<M*b)if(!Ba&&(1===Ca?a>t+M*m/2:a<e-M*m/2)&&(Ba=!0),Ba)l=!0;else{if(1===
Ca?a<t+La:a>e-La)return-Ca}else if(a>t+M*(1-b)/2&&a<e-M*(1-b)/2)return c=G(u)<G(c)?1:-1,c;if(l||g)if(a<t+M*m/2||a>e-M*m/2)return a>t+M/2?1:-1;return 0}function zb(a){a=a.tagName+a.className+a.src+a.href+a.textContent;for(var c=a.length,e=0;c--;)e+=a.charCodeAt(c);return e.toString(36)}function Ab(a){Ma.length=0;a=a.getElementsByTagName("input");for(var c=a.length;c--;){var e=a[c];e.checked&&Ma.push(e)}}function Na(a){return setTimeout(a,0)}function Oa(){S.forEach(function(a){clearInterval(a.pid)});
S=[]}function Ya(){}function ma(){}function Bb(a,c){A.forEach(function(e,l){(l=c.children[e.sortableIndex+(a?Number(l):0)])?c.insertBefore(e,l):c.appendChild(e)})}function mb(a,c){aa.forEach(function(e,l){(l=c.children[e.sortableIndex+(a?Number(l):0)])?c.insertBefore(e,l):c.appendChild(e)})}function Pa(){A.forEach(function(a){a!==J&&a.parentNode&&a.parentNode.removeChild(a)})}var ga=r(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),ya=r(/Edge/i),nb=r(/firefox/i),Za=r(/safari/i)&&!r(/chrome/i)&&
!r(/android/i),Da=r(/iP(ad|od|hone)/i),Cb=r(/chrome/i)&&r(/android/i),ib={capture:!1,passive:!1},jb=/\s+/g,wa,W="Sortable"+(new Date).getTime(),Ea=[],$a={initializeByDefault:!0},za={mount:function(a){for(var c in $a)!$a.hasOwnProperty(c)||c in a||(a[c]=$a[c]);Ea.push(a)},pluginEvent:function(a,c,e){var l=this;this.eventCanceled=!1;e.cancel=function(){l.eventCanceled=!0};var b=a+"Global";Ea.forEach(function(l){if(c[l.pluginName]){if(c[l.pluginName][b])c[l.pluginName][b](L({sortable:c},e));if(c.options[l.pluginName]&&
c[l.pluginName][a])c[l.pluginName][a](L({sortable:c},e))}})},initializePlugins:function(a,c,e,l){Ea.forEach(function(l){var b=l.pluginName;if(a.options[b]||l.initializeByDefault)l=new l(a,c,a.options),l.sortable=a,l.options=a.options,a[b]=l,z(e,l.defaults)});for(var b in a.options)a.options.hasOwnProperty(b)&&(l=this.modifyOption(a,b,a.options[b]),"undefined"!==typeof l&&(a.options[b]=l))},getEventProperties:function(a,c){var e={};Ea.forEach(function(l){"function"===typeof l.eventProperties&&z(e,
l.eventProperties.call(c[l.pluginName],a))});return e},modifyOption:function(a,c,e){var l;Ea.forEach(function(b){a[b.pluginName]&&b.optionListeners&&"function"===typeof b.optionListeners[c]&&(l=b.optionListeners[c].call(a[b.pluginName],e))});return l}},Y=function(a,c){var e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},l=e.evt,e=h(e,["evt"]);za.pluginEvent.bind(t)(a,c,L({dragEl:u,parentEl:T,ghostEl:B,rootEl:P,nextEl:na,lastDownEl:Qa,cloneEl:Q,cloneHidden:ka,dragStarted:Fa,putSortable:V,
activeSortable:t.active,originalEvent:l,oldIndex:ra,oldDraggableIndex:Aa,newIndex:Z,newDraggableIndex:ja,hideGhostForTarget:ob,unhideGhostForTarget:pb,cloneNowHidden:function(){ka=!0},cloneNowShown:function(){ka=!1},dispatchSortableEvent:function(a){m({sortable:c,name:a,originalEvent:l})}},e))};if("undefined"===typeof window||!window.document)throw Error("Sortable.js requires a window with a document");var u,T,B,P,na,Qa,Q,ka,ra,Z,Aa,ja,Ra,V,sa=!1,Sa=!1,Ka=[],oa,ea,ab,bb,qb,rb,Fa,ta,Ca,Ba=!1,Ta=!1,
La,X,cb=[],Xa=!1,Ma=[],sb=ya||ga?"cssFloat":"float",vb=!Cb&&!Da&&"draggable"in document.createElement("div"),tb=function(){if(ga)return!1;var a=document.createElement("x");a.style.cssText="pointer-events:auto";return"auto"===a.style.pointerEvents}(),kb=function(a,c){var e=n(a),l=parseInt(e.width)-parseInt(e.paddingLeft)-parseInt(e.paddingRight)-parseInt(e.borderLeftWidth)-parseInt(e.borderRightWidth),b=w(a,0,c);a=w(a,1,c);var m=b&&n(b);c=a&&n(a);var g=m&&parseInt(m.marginLeft)+parseInt(m.marginRight)+
D(b).width,q=c&&parseInt(c.marginLeft)+parseInt(c.marginRight)+D(a).width;return"flex"===e.display?"column"===e.flexDirection||"column-reverse"===e.flexDirection?"vertical":"horizontal":"grid"===e.display?1>=e.gridTemplateColumns.split(" ").length?"vertical":"horizontal":b&&m["float"]&&"none"!==m["float"]?(e="left"===m["float"]?"left":"right",!a||"both"!==c.clear&&c.clear!==e?"horizontal":"vertical"):b&&("block"===m.display||"flex"===m.display||"table"===m.display||"grid"===m.display||g>=l&&"none"===
e[sb]||a&&"none"===e[sb]&&g+q>l)?"vertical":"horizontal"},Db=function(a,c,e){var b=e?a.left:a.top,m=e?a.right:a.bottom;a=e?a.width:a.height;var g=e?c.left:c.top,q=e?c.right:c.bottom;c=e?c.width:c.height;return b===g||m===q||b+a/2===g+c/2},Eb=function(a,c){var e;Ka.some(function(b){if(!U(b)){var l=D(b),m=b[W].options.emptyInsertThreshold,g=a>=l.left-m&&a<=l.right+m,l=c>=l.top-m&&c<=l.bottom+m;if(m&&g&&l)return e=b}});return e},lb=function(a){function c(a,e){return function(b,l,m,g){var q=b.options.group.name&&
l.options.group.name&&b.options.group.name===l.options.group.name;if(null==a&&(e||q))return!0;if(null==a||!1===a)return!1;if(e&&"clone"===a)return a;if("function"===typeof a)return c(a(b,l,m,g),e)(b,l,m,g);b=(e?b:l).options.group.name;return!0===a||"string"===typeof a&&a===b||a.join&&-1<a.indexOf(b)}}var e={},b=a.group;b&&"object"==K(b)||(b={name:b});e.name=b.name;e.checkPull=c(b.pull,!0);e.checkPut=c(b.put);e.revertClone=b.revertClone;a.group=e},ob=function(){!tb&&B&&n(B,"display","none")},pb=function(){!tb&&
B&&n(B,"display","")};document.addEventListener("click",function(a){if(Sa)return a.preventDefault(),a.stopPropagation&&a.stopPropagation(),a.stopImmediatePropagation&&a.stopImmediatePropagation(),Sa=!1},!0);var pa=function(a){if(u){a=a.touches?a.touches[0]:a;var c=Eb(a.clientX,a.clientY);if(c){var e={},b;for(b in a)a.hasOwnProperty(b)&&(e[b]=a[b]);e.target=e.rootEl=c;e.preventDefault=void 0;e.stopPropagation=void 0;c[W]._onDragOver(e)}}},Fb=function(a){u&&u.parentNode[W]._isOutsideThisEl(a.target)};
t.prototype={constructor:t,_isOutsideThisEl:function(a){this.el.contains(a)||a===this.el||(ta=null)},_getDirection:function(a,c){return"function"===typeof this.options.direction?this.options.direction.call(this,a,c,u):this.options.direction},_onTapStart:function(a){if(a.cancelable){var c=this,e=this.el,b=this.options,g=b.preventOnFilter,q=a.type,t=a.touches&&a.touches[0]||a.pointerType&&"touch"===a.pointerType&&a,d=(t||a).target,h=a.target.shadowRoot&&(a.path&&a.path[0]||a.composedPath&&a.composedPath()[0])||
d,f=b.filter;Ab(e);if(!(u||/mousedown|pointerdown/.test(q)&&0!==a.button||b.disabled||h.isContentEditable||(d=F(d,b.draggable,e,!1),d&&d.animated||Qa===d))){ra=G(d);Aa=G(d,b.draggable);if("function"===typeof f){if(f.call(this,a,d,this)){m({sortable:c,rootEl:h,name:"filter",targetEl:d,toEl:e,fromEl:e});Y("filter",c,{evt:a});g&&a.cancelable&&a.preventDefault();return}}else if(f&&(f=f.split(",").some(function(b){if(b=F(h,b.trim(),e,!1))return m({sortable:c,rootEl:b,name:"filter",targetEl:d,fromEl:e,
toEl:e}),Y("filter",c,{evt:a}),!0}))){g&&a.cancelable&&a.preventDefault();return}b.handle&&!F(h,b.handle,e,!1)||this._prepareDragStart(a,t,d)}}},_prepareDragStart:function(a,c,e){var b=this,g=b.el,q=b.options,d=g.ownerDocument;if(e&&!u&&e.parentNode===g){var h=D(e);P=g;u=e;T=u.parentNode;na=u.nextSibling;Qa=e;Ra=q.group;t.dragged=u;oa={target:u,clientX:(c||a).clientX,clientY:(c||a).clientY};qb=oa.clientX-h.left;rb=oa.clientY-h.top;this._lastX=(c||a).clientX;this._lastY=(c||a).clientY;u.style["will-change"]=
"all";e=function(){Y("delayEnded",b,{evt:a});t.eventCanceled?b._onDrop():(b._disableDelayedDragEvents(),!nb&&b.nativeDraggable&&(u.draggable=!0),b._triggerDragStart(a,c),m({sortable:b,name:"choose",originalEvent:a}),y(u,q.chosenClass,!0))};q.ignore.split(",").forEach(function(a){f(u,a.trim(),N)});v(d,"dragover",pa);v(d,"mousemove",pa);v(d,"touchmove",pa);v(d,"mouseup",b._onDrop);v(d,"touchend",b._onDrop);v(d,"touchcancel",b._onDrop);nb&&this.nativeDraggable&&(this.options.touchStartThreshold=4,u.draggable=
!0);Y("delayStart",this,{evt:a});!q.delay||q.delayOnTouchOnly&&!c||this.nativeDraggable&&(ya||ga)?e():t.eventCanceled?this._onDrop():(v(d,"mouseup",b._disableDelayedDrag),v(d,"touchend",b._disableDelayedDrag),v(d,"touchcancel",b._disableDelayedDrag),v(d,"mousemove",b._delayedDragTouchMoveHandler),v(d,"touchmove",b._delayedDragTouchMoveHandler),q.supportPointer&&v(d,"pointermove",b._delayedDragTouchMoveHandler),b._dragStartTimer=setTimeout(e,q.delay))}},_delayedDragTouchMoveHandler:function(a){a=a.touches?
a.touches[0]:a;Math.max(Math.abs(a.clientX-this._lastX),Math.abs(a.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){u&&N(u);clearTimeout(this._dragStartTimer);this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var a=this.el.ownerDocument;k(a,"mouseup",this._disableDelayedDrag);k(a,"touchend",this._disableDelayedDrag);k(a,"touchcancel",this._disableDelayedDrag);
k(a,"mousemove",this._delayedDragTouchMoveHandler);k(a,"touchmove",this._delayedDragTouchMoveHandler);k(a,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(a,c){c=c||"touch"==a.pointerType&&a;!this.nativeDraggable||c?this.options.supportPointer?v(document,"pointermove",this._onTouchMove):c?v(document,"touchmove",this._onTouchMove):v(document,"mousemove",this._onTouchMove):(v(u,"dragend",this),v(P,"dragstart",this._onDragStart));try{document.selection?Na(function(){document.selection.empty()}):
window.getSelection().removeAllRanges()}catch(e){}},_dragStarted:function(a,c){sa=!1;if(P&&u){Y("dragStarted",this,{evt:c});this.nativeDraggable&&v(document,"dragover",Fb);var e=this.options;!a&&y(u,e.dragClass,!1);y(u,e.ghostClass,!0);t.active=this;a&&this._appendGhost();m({sortable:this,name:"start",originalEvent:c})}else this._nulling()},_emulateDragOver:function(){if(ea){this._lastX=ea.clientX;this._lastY=ea.clientY;ob();for(var a=document.elementFromPoint(ea.clientX,ea.clientY),c=a;a&&a.shadowRoot;){a=
a.shadowRoot.elementFromPoint(ea.clientX,ea.clientY);if(a===c)break;c=a}u.parentNode[W]._isOutsideThisEl(a);if(c){do{if(c[W]){var e=void 0;if((e=c[W]._onDragOver({clientX:ea.clientX,clientY:ea.clientY,target:a,rootEl:c}))&&!this.options.dragoverBubble)break}a=c}while(c=c.parentNode)}pb()}},_onTouchMove:function(a){if(oa){var c=this.options,e=c.fallbackTolerance,b=c.fallbackOffset,c=a.touches?a.touches[0]:a,m=B&&C(B),g=B&&m&&m.a,q=B&&m&&m.d,d=Da&&X&&R(X),g=(c.clientX-oa.clientX+b.x)/(g||1)+(d?d[0]-
cb[0]:0)/(g||1),b=(c.clientY-oa.clientY+b.y)/(q||1)+(d?d[1]-cb[1]:0)/(q||1);if(!t.active&&!sa){if(e&&Math.max(Math.abs(c.clientX-this._lastX),Math.abs(c.clientY-this._lastY))<e)return;this._onDragStart(a,!0)}B&&(m?(m.e+=g-(ab||0),m.f+=b-(bb||0)):m={a:1,b:0,c:0,d:1,e:g,f:b},e="matrix(".concat(m.a,",").concat(m.b,",").concat(m.c,",").concat(m.d,",").concat(m.e,",").concat(m.f,")"),n(B,"webkitTransform",e),n(B,"mozTransform",e),n(B,"msTransform",e),n(B,"transform",e),ab=g,bb=b,ea=c);a.cancelable&&a.preventDefault()}},
_appendGhost:function(){if(!B){var a=this.options.fallbackOnBody?document.body:P,c=D(u,!0,Da,!0,a),e=this.options;if(Da){for(X=a;"static"===n(X,"position")&&"none"===n(X,"transform")&&X!==document;)X=X.parentNode;X!==document.body&&X!==document.documentElement?(X===document&&(X=d()),c.top+=X.scrollTop,c.left+=X.scrollLeft):X=d();cb=R(X)}B=u.cloneNode(!0);y(B,e.ghostClass,!1);y(B,e.fallbackClass,!0);y(B,e.dragClass,!0);n(B,"transition","");n(B,"transform","");n(B,"box-sizing","border-box");n(B,"margin",
0);n(B,"top",c.top);n(B,"left",c.left);n(B,"width",c.width);n(B,"height",c.height);n(B,"opacity","0.8");n(B,"position",Da?"absolute":"fixed");n(B,"zIndex","100000");n(B,"pointerEvents","none");t.ghost=B;a.appendChild(B);n(B,"transform-origin",qb/parseInt(B.style.width)*100+"% "+rb/parseInt(B.style.height)*100+"%")}},_onDragStart:function(a,c){var e=this,b=a.dataTransfer,g=e.options;Y("dragStart",this,{evt:a});t.eventCanceled?this._onDrop():(Y("setupClone",this),t.eventCanceled||(Q=H(u),Q.draggable=
!1,Q.style["will-change"]="",this._hideClone(),y(Q,this.options.chosenClass,!1),t.clone=Q),e.cloneId=Na(function(){Y("clone",e);t.eventCanceled||(e.options.removeCloneOnHide||P.insertBefore(Q,u),e._hideClone(),m({sortable:e,name:"clone"}))}),!c&&y(u,g.dragClass,!0),c?(Sa=!0,e._loopId=setInterval(e._emulateDragOver,50)):(k(document,"mouseup",e._onDrop),k(document,"touchend",e._onDrop),k(document,"touchcancel",e._onDrop),b&&(b.effectAllowed="move",g.setData&&g.setData.call(e,b,u)),v(document,"drop",
e),n(u,"transform","translateZ(0)")),sa=!0,e._dragStartId=Na(e._dragStarted.bind(e,c,a)),v(document,"selectstart",e),Fa=!0,Za&&n(document.body,"user-select","none"))},_onDragOver:function(a){function c(c,e){Y(c,H,L({evt:a,isOwner:v,axis:r?"vertical":"horizontal",revert:N,dragRect:h,targetRect:f,canSort:w,fromSortable:R,target:d,completed:b,onMove:function(c,e){return la(P,q,u,h,c,D(c),a,e)},changed:g},e))}function e(){c("dragOverAnimationCapture");H.captureAnimationState();H!==R&&R.captureAnimationState()}
function b(e){c("dragOverCompleted",{insertion:e});e&&(v?k._hideClone():k._showClone(H),H!==R&&(y(u,V?V.options.ghostClass:k.options.ghostClass,!1),y(u,p.ghostClass,!0)),V!==H&&H!==t.active?V=H:H===t.active&&V&&(V=null),R===H&&(H._ignoreWhileAnimating=d),H.animateAll(function(){c("dragOverAnimationComplete");H._ignoreWhileAnimating=null}),H!==R&&(R.animateAll(),R._ignoreWhileAnimating=null));if(d===u&&!u.animated||d===q&&!d.animated)ta=null;p.dragoverBubble||a.rootEl||d===document||(u.parentNode[W]._isOutsideThisEl(a.target),
!e&&pa(a));!p.dragoverBubble&&a.stopPropagation&&a.stopPropagation();return A=!0}function g(){Z=G(u);ja=G(u,p.draggable);m({sortable:H,name:"change",toEl:q,newIndex:Z,newDraggableIndex:ja,originalEvent:a})}var q=this.el,d=a.target,h,f,N,p=this.options,I=p.group,k=t.active,v=Ra===I,w=p.sort,R=V||k,r,H=this,A=!1;if(!Xa){void 0!==a.preventDefault&&a.cancelable&&a.preventDefault();d=F(d,p.draggable,q,!0);c("dragOver");if(t.eventCanceled)return A;if(u.contains(a.target)||d.animated&&d.animatingX&&d.animatingY||
H._ignoreWhileAnimating===d)return b(!1);Sa=!1;if(k&&!p.disabled&&(v?w||(N=!P.contains(u)):V===this||(this.lastPutMode=Ra.checkPull(this,k,u,a))&&I.checkPut(this,k,u,a))){r="vertical"===this._getDirection(a,d);h=D(u);c("dragOverValid");if(t.eventCanceled)return A;if(N)return T=P,e(),this._hideClone(),c("revert"),t.eventCanceled||(na?P.insertBefore(u,na):P.appendChild(u)),b(!0);I=U(q,p.draggable);if(!I||xb(a,r,this)&&!I.animated){if(I===u)return b(!1);I&&q===a.target&&(d=I);d&&(f=D(d));if(!1!==la(P,
q,u,h,d,f,a,!!d))return e(),q.appendChild(u),T=q,g(),b(!0)}else if(d.parentNode===q){f=D(d);var C=0,E,C=u.parentNode!==q,z=!Db(u.animated&&u.toRect||h,d.animated&&d.toRect||f,r),I=r?"top":"left",ha=x(d,"top","top")||x(u,"top","top"),J=ha?ha.scrollTop:void 0;ta!==d&&(E=f[I],Ba=!1,Ta=!z&&p.invertSwap||C);var C=yb(a,d,f,r,z?1:p.swapThreshold,null==p.invertedSwapThreshold?p.swapThreshold:p.invertedSwapThreshold,Ta,ta===d),ca;if(0!==C){z=G(u);do z-=C,ca=T.children[z];while(ca&&("none"===n(ca,"display")||
ca===B))}if(0===C||ca===d)return b(!1);ta=d;Ca=C;ca=d.nextElementSibling;z=!1;z=1===C;C=la(P,q,u,h,d,f,a,z);if(!1!==C){if(1===C||-1===C)z=1===C;Xa=!0;setTimeout(wb,30);e();z&&!ca?q.appendChild(u):d.parentNode.insertBefore(u,z?ca:d);ha&&ia(ha,0,J-ha.scrollTop);T=u.parentNode;void 0===E||Ta||(La=Math.abs(E-D(d)[I]));g();return b(!0)}}if(q.contains(u))return b(!1)}return!1}},_ignoreWhileAnimating:null,_offMoveEvents:function(){k(document,"mousemove",this._onTouchMove);k(document,"touchmove",this._onTouchMove);
k(document,"pointermove",this._onTouchMove);k(document,"dragover",pa);k(document,"mousemove",pa);k(document,"touchmove",pa)},_offUpEvents:function(){var a=this.el.ownerDocument;k(a,"mouseup",this._onDrop);k(a,"touchend",this._onDrop);k(a,"pointerup",this._onDrop);k(a,"touchcancel",this._onDrop);k(document,"selectstart",this)},_onDrop:function(a){var c=this.el,e=this.options;Z=G(u);ja=G(u,e.draggable);Y("drop",this,{evt:a});T=u&&u.parentNode;Z=G(u);ja=G(u,e.draggable);if(!t.eventCanceled&&(Ba=Ta=sa=
!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),clearTimeout(this.cloneId),clearTimeout(this._dragStartId),this.nativeDraggable&&(k(document,"drop",this),k(c,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),Za&&n(document.body,"user-select",""),a&&(Fa&&(a.cancelable&&a.preventDefault(),!e.dropBubble&&a.stopPropagation()),B&&B.parentNode&&B.parentNode.removeChild(B),(P===T||V&&"clone"!==V.lastPutMode)&&Q&&Q.parentNode&&Q.parentNode.removeChild(Q),u&&(this.nativeDraggable&&
k(u,"dragend",this),N(u),u.style["will-change"]="",Fa&&!sa&&y(u,V?V.options.ghostClass:this.options.ghostClass,!1),y(u,this.options.chosenClass,!1),m({sortable:this,name:"unchoose",toEl:T,newIndex:null,newDraggableIndex:null,originalEvent:a}),P!==T?(0<=Z&&(m({rootEl:T,name:"add",toEl:T,fromEl:P,originalEvent:a}),m({sortable:this,name:"remove",toEl:T,originalEvent:a}),m({rootEl:T,name:"sort",toEl:T,fromEl:P,originalEvent:a}),m({sortable:this,name:"sort",toEl:T,originalEvent:a})),V&&V.save()):Z!==ra&&
0<=Z&&(m({sortable:this,name:"update",toEl:T,originalEvent:a}),m({sortable:this,name:"sort",toEl:T,originalEvent:a})),t.active)))){if(null==Z||-1===Z)Z=ra,ja=Aa;m({sortable:this,name:"end",toEl:T,originalEvent:a});this.save()}this._nulling()},_nulling:function(){Y("nulling",this);P=u=T=B=na=Q=Qa=ka=oa=ea=Fa=Z=ja=ra=Aa=ta=Ca=V=Ra=t.dragged=t.ghost=t.clone=t.active=null;Ma.forEach(function(a){a.checked=!0});Ma.length=ab=bb=0},handleEvent:function(a){switch(a.type){case "drop":case "dragend":this._onDrop(a);
break;case "dragenter":case "dragover":u&&(this._onDragOver(a),a.dataTransfer&&(a.dataTransfer.dropEffect="move"),a.cancelable&&a.preventDefault());break;case "selectstart":a.preventDefault()}},toArray:function(){for(var a=[],c,e=this.el.children,b=0,m=e.length,g=this.options;b<m;b++)c=e[b],F(c,g.draggable,this.el,!1)&&a.push(c.getAttribute(g.dataIdAttr)||zb(c));return a},sort:function(a){var c={},e=this.el;this.toArray().forEach(function(a,b){b=e.children[b];F(b,this.options.draggable,e,!1)&&(c[a]=
b)},this);a.forEach(function(a){c[a]&&(e.removeChild(c[a]),e.appendChild(c[a]))})},save:function(){var a=this.options.store;a&&a.set&&a.set(this)},closest:function(a,c){return F(a,c||this.options.draggable,this.el,!1)},option:function(a,c){var e=this.options;if(void 0===c)return e[a];var b=za.modifyOption(this,a,c);e[a]="undefined"!==typeof b?b:c;"group"===a&&lb(e)},destroy:function(){Y("destroy",this);var a=this.el;a[W]=null;k(a,"mousedown",this._onTapStart);k(a,"touchstart",this._onTapStart);k(a,
"pointerdown",this._onTapStart);this.nativeDraggable&&(k(a,"dragover",this),k(a,"dragenter",this));Array.prototype.forEach.call(a.querySelectorAll("[draggable]"),function(a){a.removeAttribute("draggable")});this._onDrop();Ka.splice(Ka.indexOf(this.el),1);this.el=a=null},_hideClone:function(){ka||(Y("hideClone",this),t.eventCanceled||(n(Q,"display","none"),this.options.removeCloneOnHide&&Q.parentNode&&Q.parentNode.removeChild(Q),ka=!0))},_showClone:function(a){"clone"!==a.lastPutMode?this._hideClone():
ka&&(Y("showClone",this),t.eventCanceled||(P.contains(u)&&!this.options.group.revertClone?P.insertBefore(Q,u):na?P.insertBefore(Q,na):P.appendChild(Q),this.options.group.revertClone&&this.animate(u,Q),n(Q,"display",""),ka=!1))}};v(document,"touchmove",function(a){(t.active||sa)&&a.cancelable&&a.preventDefault()});t.utils={on:v,off:k,css:n,find:f,is:function(a,c){return!!F(a,c,a,!1)},extend:function(a,c){if(a&&c)for(var e in c)c.hasOwnProperty(e)&&(a[e]=c[e]);return a},throttle:I,closest:F,toggleClass:y,
clone:H,index:G,nextTick:Na,cancelNextTick:function(a){return clearTimeout(a)},detectDirection:kb,getChild:w};t.get=function(a){return a[W]};t.mount=function(){for(var a=arguments.length,c=Array(a),e=0;e<a;e++)c[e]=arguments[e];c[0].constructor===Array&&(c=c[0]);c.forEach(function(a){if(!a.prototype||!a.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(a));a.utils&&(t.utils=L({},t.utils,a.utils));za.mount(a)})};t.create=function(a,c){return new t(a,
c)};t.version="1.10.0";var S=[],Ga,db,eb=!1,fb,gb,Ua,ua,hb=I(function(a,c,e,b){if(c.scroll){var m=(a.touches?a.touches[0]:a).clientX,l=(a.touches?a.touches[0]:a).clientY,q=c.scrollSensitivity,h=c.scrollSpeed,f=d(),p=!1,I;db!==e&&(db=e,Oa(),Ga=c.scroll,I=c.scrollFn,!0===Ga&&(Ga=g(e,!0)));e=0;var N=Ga;do{var x=N,k=D(x),u=k.top,H=k.bottom,v=k.left,R=k.right,w=k.width,k=k.height,la=void 0,r=void 0,C=x.scrollWidth,y=x.scrollHeight,r=n(x),A=x.scrollLeft,z=x.scrollTop;x===f?(la=w<C&&("auto"===r.overflowX||
"scroll"===r.overflowX||"visible"===r.overflowX),r=k<y&&("auto"===r.overflowY||"scroll"===r.overflowY||"visible"===r.overflowY)):(la=w<C&&("auto"===r.overflowX||"scroll"===r.overflowX),r=k<y&&("auto"===r.overflowY||"scroll"===r.overflowY));v=la&&(Math.abs(R-m)<=q&&A+w<C)-(Math.abs(v-m)<=q&&!!A);u=r&&(Math.abs(H-l)<=q&&z+k<y)-(Math.abs(u-l)<=q&&!!z);if(!S[e])for(H=0;H<=e;H++)S[H]||(S[H]={});if(S[e].vx!=v||S[e].vy!=u||S[e].el!==x)if(S[e].el=x,S[e].vx=v,S[e].vy=u,clearInterval(S[e].pid),0!=v||0!=u)p=
!0,S[e].pid=setInterval(function(){b&&0===this.layer&&t.active._onTouchMove(Ua);var c=S[this.layer].vy?S[this.layer].vy*h:0,e=S[this.layer].vx?S[this.layer].vx*h:0;"function"===typeof I&&"continue"!==I.call(t.dragged.parentNode[W],e,c,a,Ua,S[this.layer].el)||ia(S[this.layer].el,e,c)}.bind({layer:e}),24);e++}while(c.bubbleScroll&&N!==f&&(N=g(N,!1)));eb=p}},30),ub=function(a){var c=a.originalEvent,e=a.putSortable,b=a.dragEl,m=a.activeSortable,g=a.dispatchSortableEvent,q=a.hideGhostForTarget;a=a.unhideGhostForTarget;
m=e||m;q();c=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:c;c=document.elementFromPoint(c.clientX,c.clientY);a();m&&!m.el.contains(c)&&(g("spill"),this.onSpill({dragEl:b,putSortable:e}))};Ya.prototype={startIndex:null,dragStart:function(a){this.startIndex=a.oldDraggableIndex},onSpill:function(a){var c=a.dragEl;a=a.putSortable;this.sortable.captureAnimationState();a&&a.captureAnimationState();var e=w(this.sortable.el,this.startIndex,this.options);e?this.sortable.el.insertBefore(c,
e):this.sortable.el.appendChild(c);this.sortable.animateAll();a&&a.animateAll()},drop:ub};z(Ya,{pluginName:"revertOnSpill"});ma.prototype={onSpill:function(a){var c=a.dragEl;a=a.putSortable||this.sortable;a.captureAnimationState();c.parentNode&&c.parentNode.removeChild(c);a.animateAll()},drop:ub};z(ma,{pluginName:"removeOnSpill"});var da,A=[],aa=[],Ha,fa,Ia=!1,ba=!1,Ja=!1,J,qa,Va;t.mount(new function(){function a(){this.defaults={scroll:!0,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var a in this)"_"===
a.charAt(0)&&"function"===typeof this[a]&&(this[a]=this[a].bind(this))}a.prototype={dragStarted:function(a){a=a.originalEvent;this.sortable.nativeDraggable?v(document,"dragover",this._handleAutoScroll):this.options.supportPointer?v(document,"pointermove",this._handleFallbackAutoScroll):a.touches?v(document,"touchmove",this._handleFallbackAutoScroll):v(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(a){a=a.originalEvent;this.options.dragOverBubble||a.rootEl||this._handleAutoScroll(a)},
drop:function(){this.sortable.nativeDraggable?k(document,"dragover",this._handleAutoScroll):(k(document,"pointermove",this._handleFallbackAutoScroll),k(document,"touchmove",this._handleFallbackAutoScroll),k(document,"mousemove",this._handleFallbackAutoScroll));clearInterval(ua);Oa();clearTimeout(wa);wa=void 0},nulling:function(){Ua=db=Ga=eb=ua=fb=gb=null;S.length=0},_handleFallbackAutoScroll:function(a){this._handleAutoScroll(a,!0)},_handleAutoScroll:function(a,e){var c=this,b=(a.touches?a.touches[0]:
a).clientX,m=(a.touches?a.touches[0]:a).clientY,q=document.elementFromPoint(b,m);Ua=a;if(e||ya||ga||Za){hb(a,this.options,q,e);var t=g(q,!0);!eb||ua&&b===fb&&m===gb||(ua&&clearInterval(ua),ua=setInterval(function(){var l=g(document.elementFromPoint(b,m),!0);l!==t&&(t=l,Oa());hb(a,c.options,l,e)},10),fb=b,gb=m)}else this.options.bubbleScroll&&g(q,!0)!==d()?hb(a,this.options,g(q,!1),!1):Oa()}};return z(a,{pluginName:"scroll",initializeByDefault:!0})});t.mount(ma,Ya);t.mount(new function(){function a(){this.defaults=
{swapClass:"sortable-swap-highlight"}}a.prototype={dragStart:function(a){da=a.dragEl},dragOverValid:function(a){var c=a.completed,b=a.target,m=a.onMove,g=a.changed,q=a.cancel;if(a.activeSortable.options.swap){var d=this.sortable.el;a=this.options;b&&b!==d&&(d=da,!1!==m(b)?(y(b,a.swapClass,!0),da=b):da=null,d&&d!==da&&y(d,a.swapClass,!1));g();c(!0);q()}},drop:function(a){var c=a.activeSortable,b=a.putSortable;a=a.dragEl;var m=b||this.sortable,g=this.options;da&&y(da,g.swapClass,!1);if(da&&(g.swap||
b&&b.options.swap)&&a!==da){m.captureAnimationState();m!==c&&c.captureAnimationState();var b=da,g=a.parentNode,q=b.parentNode,d,t;g&&q&&!g.isEqualNode(b)&&!q.isEqualNode(a)&&(d=G(a),t=G(b),g.isEqualNode(q)&&d<t&&t++,g.insertBefore(b,g.children[d]),q.insertBefore(a,q.children[t]));m.animateAll();m!==c&&c.animateAll()}},nulling:function(){da=null}};return z(a,{pluginName:"swap",eventProperties:function(){return{swapItem:da}}})});t.mount(new function(){function a(a){for(var c in this)"_"===c.charAt(0)&&
"function"===typeof this[c]&&(this[c]=this[c].bind(this));a.options.supportPointer?v(document,"pointerup",this._deselectMultiDrag):(v(document,"mouseup",this._deselectMultiDrag),v(document,"touchend",this._deselectMultiDrag));v(document,"keydown",this._checkKeyDown);v(document,"keyup",this._checkKeyUp);this.defaults={selectedClass:"sortable-selected",multiDragKey:null,setData:function(c,b){var e="";A.length&&fa===a?A.forEach(function(a,c){e+=(c?", ":"")+a.textContent}):e=b.textContent;c.setData("Text",
e)}}}a.prototype={multiDragKeyDown:!1,isMultiDrag:!1,delayStartGlobal:function(a){J=a.dragEl},delayEnded:function(){this.isMultiDrag=~A.indexOf(J)},setupClone:function(a){var c=a.sortable;a=a.cancel;if(this.isMultiDrag){for(var b=0;b<A.length;b++)aa.push(H(A[b])),aa[b].sortableIndex=A[b].sortableIndex,aa[b].draggable=!1,aa[b].style["will-change"]="",y(aa[b],this.options.selectedClass,!1),A[b]===J&&y(aa[b],this.options.chosenClass,!1);c._hideClone();a()}},clone:function(a){var c=a.sortable,b=a.rootEl,
m=a.dispatchSortableEvent;a=a.cancel;this.isMultiDrag&&!this.options.removeCloneOnHide&&A.length&&fa===c&&(mb(!0,b),m("clone"),a())},showClone:function(a){var c=a.cloneNowShown,b=a.cancel;this.isMultiDrag&&(mb(!1,a.rootEl),aa.forEach(function(a){n(a,"display","")}),c(),Va=!1,b())},hideClone:function(a){var c=this,b=a.cloneNowHidden;a=a.cancel;this.isMultiDrag&&(aa.forEach(function(a){n(a,"display","none");c.options.removeCloneOnHide&&a.parentNode&&a.parentNode.removeChild(a)}),b(),Va=!0,a())},dragStartGlobal:function(a){!this.isMultiDrag&&
fa&&fa.multiDrag._deselectMultiDrag();A.forEach(function(a){a.sortableIndex=G(a)});A=A.sort(function(a,c){return a.sortableIndex-c.sortableIndex});Ja=!0},dragStarted:function(a){var c=this;a=a.sortable;if(this.isMultiDrag){if(this.options.sort&&(a.captureAnimationState(),this.options.animation)){A.forEach(function(a){a!==J&&n(a,"position","absolute")});var b=D(J,!1,!0,!0);A.forEach(function(a){a!==J&&ha(a,b)});Ia=ba=!0}a.animateAll(function(){Ia=ba=!1;c.options.animation&&A.forEach(function(a){ca(a)});
c.options.sort&&Pa()})}},dragOver:function(a){var c=a.target,b=a.completed;a=a.cancel;ba&&~A.indexOf(c)&&(b(!1),a())},revert:function(a){var c=a.fromSortable,b=a.rootEl,m=a.sortable,g=a.dragRect;1<A.length&&(A.forEach(function(a){m.addAnimationState({target:a,rect:ba?D(a):g});ca(a);a.fromRect=g;c.removeAnimationState(a)}),ba=!1,Bb(!this.options.removeCloneOnHide,b))},dragOverCompleted:function(a){var c=a.sortable,b=a.isOwner,m=a.activeSortable,g=a.parentEl,q=a.putSortable,d=this.options;if(a.insertion){b&&
m._hideClone();Ia=!1;if(d.animation&&1<A.length&&(ba||!b&&!m.options.sort&&!q)){var t=D(J,!1,!0,!0);A.forEach(function(a){a!==J&&(ha(a,t),g.appendChild(a))});ba=!0}b||(ba||Pa(),1<A.length?(a=Va,m._showClone(c),m.options.animation&&!Va&&a&&aa.forEach(function(a){m.addAnimationState({target:a,rect:qa});a.fromRect=qa;a.thisAnimationDuration=null})):m._showClone(c))}},dragOverAnimationCapture:function(a){var b=a.dragRect,c=a.isOwner;a=a.activeSortable;A.forEach(function(a){a.thisAnimationDuration=null});
a.options.animation&&!c&&a.multiDrag.isMultiDrag&&(qa=z({},b),b=C(J,!0),qa.top-=b.f,qa.left-=b.e)},dragOverAnimationComplete:function(){ba&&(ba=!1,Pa())},drop:function(a){var b=a.originalEvent,c=a.rootEl,m=a.parentEl,g=a.sortable,q=a.dispatchSortableEvent,d=a.oldIndex,t=(a=a.putSortable)||this.sortable;if(b){var h=this.options,f=m.children;if(!Ja)if(h.multiDragKey&&!this.multiDragKeyDown&&this._deselectMultiDrag(),y(J,h.selectedClass,!~A.indexOf(J)),~A.indexOf(J))A.splice(A.indexOf(J),1),Ha=null,
xa({sortable:g,rootEl:c,name:"deselect",targetEl:J,originalEvt:b});else{A.push(J);xa({sortable:g,rootEl:c,name:"select",targetEl:J,originalEvt:b});if(b.shiftKey&&Ha&&g.el.contains(Ha)){var p=G(Ha),I=G(J);if(~p&&~I&&p!==I){var N;I>p?(N=p,p=I):(N=I,p+=1);for(;N<p;N++)~A.indexOf(f[N])||(y(f[N],h.selectedClass,!0),A.push(f[N]),xa({sortable:g,rootEl:c,name:"select",targetEl:f[N],originalEvt:b}))}}else Ha=J;fa=t}if(Ja&&this.isMultiDrag){if((m[W].options.sort||m!==c)&&1<A.length){var n=D(J),x=G(J,":not(."+
this.options.selectedClass+")");!Ia&&h.animation&&(J.thisAnimationDuration=null);t.captureAnimationState();if(!Ia&&(h.animation&&(J.fromRect=n,A.forEach(function(a){a.thisAnimationDuration=null;if(a!==J){var b=ba?D(a):n;a.fromRect=b;t.addAnimationState({target:a,rect:b})}})),Pa(),A.forEach(function(a){f[x]?m.insertBefore(a,f[x]):m.appendChild(a);x++}),d===G(J))){var k=!1;A.forEach(function(a){a.sortableIndex!==G(a)&&(k=!0)});k&&q("update")}A.forEach(function(a){ca(a)});t.animateAll()}fa=t}(c===m||
a&&"clone"!==a.lastPutMode)&&aa.forEach(function(a){a.parentNode&&a.parentNode.removeChild(a)})}},nullingGlobal:function(){this.isMultiDrag=Ja=!1;aa.length=0},destroyGlobal:function(){this._deselectMultiDrag();k(document,"pointerup",this._deselectMultiDrag);k(document,"mouseup",this._deselectMultiDrag);k(document,"touchend",this._deselectMultiDrag);k(document,"keydown",this._checkKeyDown);k(document,"keyup",this._checkKeyUp)},_deselectMultiDrag:function(a){if(!(Ja||fa!==this.sortable||a&&F(a.target,
this.options.draggable,this.sortable.el,!1)||a&&0!==a.button))for(;A.length;){var b=A[0];y(b,this.options.selectedClass,!1);A.shift();xa({sortable:this.sortable,rootEl:this.sortable.el,name:"deselect",targetEl:b,originalEvt:a})}},_checkKeyDown:function(a){a.key===this.options.multiDragKey&&(this.multiDragKeyDown=!0)},_checkKeyUp:function(a){a.key===this.options.multiDragKey&&(this.multiDragKeyDown=!1)}};return z(a,{pluginName:"multiDrag",utils:{select:function(a){var b=a.parentNode[W];b&&b.options.multiDrag&&
!~A.indexOf(a)&&(fa&&fa!==b&&(fa.multiDrag._deselectMultiDrag(),fa=b),y(a,b.options.selectedClass,!0),A.push(a))},deselect:function(a){var b=a.parentNode[W],c=A.indexOf(a);b&&b.options.multiDrag&&~c&&(y(a,b.options.selectedClass,!1),A.splice(c,1))}},eventProperties:function(){var a=this,b=[],m=[];A.forEach(function(c){b.push({multiDragElement:c,index:c.sortableIndex});var e;e=ba&&c!==J?-1:ba?G(c,":not(."+a.options.selectedClass+")"):G(c);m.push({multiDragElement:c,index:e})});return{items:O(A),clones:[].concat(aa),
oldIndicies:b,newIndicies:m}},optionListeners:{multiDragKey:function(a){a=a.toLowerCase();"ctrl"===a?a="Control":1<a.length&&(a=a.charAt(0).toUpperCase()+a.substr(1));return a}}})});return t})},"esri/widgets/LayerList/LayerListViewModel":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Collection ../../core/Evented ../../core/Handles ../../core/watchUtils ../../core/accessorSupport/decorators ./ListItem ./support/layerListUtils".split(" "),
function(K,z,L,h,O,r,v,k,E,F,y){var n=O.ofType(F);return function(r){function f(d){d=r.call(this,d)||this;d._handles=new v;d.listItemCreatedFunction=null;d.operationalItems=new n;d.view=null;return d}L(f,r);f.prototype.initialize=function(){var d=this;this._handles.add(k.init(this,["view","view.ready"],function(){return d._viewHandles()}),"view")};f.prototype.destroy=function(){this._handles.destroy();this.view=this._handles=null;this.operationalItems.removeAll()};Object.defineProperty(f.prototype,
"state",{get:function(){var d=this.get("view");return this.get("view.ready")?"ready":d?"loading":"disabled"},enumerable:!0,configurable:!0});f.prototype.triggerAction=function(d,f){d&&this.emit("trigger-action",{action:d,item:f})};f.prototype._createLayerViewHandles=function(d){var f=this,h=this._handles;h.remove("layer-views");this._compileList();d&&h.add(d.on("change",function(){return f._compileList()}),"layer-views")};f.prototype._createMapLayerHandles=function(d){var f=this,h=this._handles;h.remove("map-layers");
this._compileList();d&&h.add(d.on("change",function(){return f._compileList()}),"map-layers")};f.prototype._watchItemProperties=function(d){var f=this;this._handles.add([d.children.on("change",function(){f._modifyListItemChildren(d.children)})],"children-change-"+d.uid)};f.prototype._modifyListItemChildren=function(d){var f=this;d.forEach(function(d){return f._modifyListItem(d)})};f.prototype._modifyListItem=function(d){"function"===typeof this.listItemCreatedFunction&&this.listItemCreatedFunction.call(null,
{item:d});this._modifyListItemChildren(d.children)};f.prototype._createListItem=function(d){d=new F({layer:d,view:this.view});this._watchItemProperties(d);return d};f.prototype._removeAllItems=function(){var d=this._handles,f=this.operationalItems;f.forEach(function(f){d.remove("children-change-"+f.uid)});f.removeAll()};f.prototype._getViewableLayers=function(d){if(d)return d.filter(function(d){return"hide"!==y.findLayerListMode(d)})};f.prototype._watchLayersListMode=function(d){var f=this,h=this._handles;
h.remove("layer-list-mode");d&&d.forEach(function(d){h.add(k.watch(d,"listMode",function(){return f._compileList()}),"layer-list-mode")})};f.prototype._compileList=function(){var d=this.get("view.map.layers");this._watchLayersListMode(d);(d=this._getViewableLayers(d))&&d.length?(this._createNewItems(d),this._modifyOrRemoveItems(d),this._sortItems(d)):this._removeAllItems()};f.prototype._createNewItems=function(d){var f=this,h=this.operationalItems;d.forEach(function(d){h.find(function(f){return f.layer===
d})||h.add(f._createListItem(d))})};f.prototype._modifyOrRemoveItems=function(d){var f=this,h=this._handles,n=this.operationalItems;n.forEach(function(k){k&&(d.find(function(d){return k.layer===d})?f._modifyListItem(k):(h.remove("children-change-"+k.uid),n.remove(k)))})};f.prototype._sortItems=function(d){this.operationalItems.sort(function(f,h){f=d.indexOf(f.layer);h=d.indexOf(h.layer);return f>h?-1:f<h?1:0})};f.prototype._viewHandles=function(){var d=this,f=this._handles,h=this.view;f.remove(["map-layers",
"layer-views","view-layers"]);this._compileList();h&&h.ready&&f.add([k.init(this,"view.map.layers",function(f){return d._createMapLayerHandles(f)}),k.init(this,"view.layerViews",function(f){return d._createLayerViewHandles(f)}),k.init(this,"listItemCreatedFunction",function(){return d._compileList()})],"view-layers")};h([E.property()],f.prototype,"listItemCreatedFunction",void 0);h([E.property({type:n})],f.prototype,"operationalItems",void 0);h([E.property({dependsOn:["view.ready"],readOnly:!0})],
f.prototype,"state",null);h([E.property()],f.prototype,"view",void 0);return f=h([E.subclass("esri.widgets.LayerList.LayerListViewModel")],f)}(E.declared(r.EventedAccessor))})},"esri/widgets/LayerList/ListItem":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/tsSupport/generatorHelper ../../core/tsSupport/awaiterHelper ../../core/Accessor ../../core/Collection ../../core/Handles ../../core/Identifiable ../../core/watchUtils ../../core/accessorSupport/decorators ../../layers/support/Sublayer ../../support/actions/ActionBase ../../support/actions/ActionButton ../../support/actions/ActionSlider ../../support/actions/ActionToggle ./ListItemPanel ./support/layerListUtils".split(" "),
function(K,z,L,h,O,r,v,k,E,F,y,n,C,f,d,D,x,w,U){K=k.ofType({key:"type",defaultKeyValue:"button",base:f,typeMap:{button:d,toggle:x,slider:D}});var G=k.ofType(K);return function(d){function b(b){b=d.call(this,b)||this;b._handles=new E;b.actionsSections=new G;b.actionsOpen=!1;b.children=new (k.ofType(g));b.error=null;b.layer=null;b.layerView=null;b.open=!1;b.panel=null;b.parent=null;b.view=null;b.visible=null;return b}L(b,d);g=b;b.prototype.initialize=function(){var b=this;this._handles.add([y.init(this,
"layer",function(g){return b._watchLayerProperties(g)}),y.init(this,"view",function(g){return b._updateChildren(g)}),y.init(this,"panel",function(g){return b._setListItemOnPanel(g)}),y.init(this,["layer","view"],function(){return b._getLayerView()})])};b.prototype.destroy=function(){this._handles.destroy();this.view=this._handles=null};b.prototype.castPanel=function(b){this.get("panel.open")&&!b.hasOwnProperty("open")&&(b.open=!0);return b?new w(b):null};Object.defineProperty(b.prototype,"title",
{get:function(){var b=this.get("layer.layer");return(!b||b&&this.get("layer.layer.loaded"))&&this.get("layer.title")||""},set:function(b){void 0===b?this._clearOverride("title"):this._override("title",b)},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"updating",{get:function(){var b=this.layerView;return b?b.updating:this._isLayerUpdating(this.layer)},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"visibleAtCurrentScale",{get:function(){return!U.isLayerOutsideScaleRange(this.layer,
this.get("view.scale"))},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"visibilityMode",{get:function(){return U.findLayerVisibilityMode(this.layer)},enumerable:!0,configurable:!0});b.prototype.clone=function(){return new g({actionsSections:this.actionsSections.clone(),actionsOpen:this.actionsOpen,children:this.children.clone(),layer:this.layer,open:this.open,panel:this.panel,title:this.title,view:this.view,visible:this.visible})};b.prototype._setListItemOnPanel=function(b){b&&
(b.listItem=this)};b.prototype._updateChildren=function(b){var g=this.children;g&&g.forEach(function(g){return g.view=b})};b.prototype._addChildren=function(b){var d=this;this.children.removeAll();if(b){this._handles.remove("child-list-mode");b.forEach(function(g){d._handles.add(y.watch(g,"listMode",function(){return d._addChildren(b)}),"child-list-mode")});var q=[];b.filter(function(b){return"hide"!==U.findLayerListMode(b)}).forEach(function(b){U.canDisplayLayer(b)&&(b=new g({layer:b,parent:d,view:d.view}),
q.unshift(b))});this.children.addMany(q)}};b.prototype._watchSublayerChanges=function(b){var g=this;b&&this._handles.add(b.on("change",function(){g._addChildren(b)}),"layer")};b.prototype._initializeChildLayers=function(b){this._addChildren(b);this._watchSublayerChanges(b)};b.prototype._watchLayerProperties=function(b){var g=this;if(this._handles&&(this._handles.remove("layer"),b))if(this._handles.add(y.watch(b,"listMode",function(){return g._watchLayerProperties(b)}),"layer"),"hide-children"===U.findLayerListMode(b))this.children.removeAll();
else{var d=U.getNormalizedChildLayerProperty(b);d&&this._handles.add(y.init(b,d,function(){b.hasOwnProperty(d)&&g._initializeChildLayers(b[d])}),"layer")}};b.prototype._getLayerView=function(){return r(this,void 0,void 0,function(){var b,g,d,f;return O(this,function(q){switch(q.label){case 0:b=this;g=b.layer;d=b.view;if(!g||!d)return[2];q.label=1;case 1:return q.trys.push([1,3,,4]),[4,d.whenLayerView(g)];case 2:f=q.sent();if(f.layer!==this.layer)return[2];this._set("layerView",f);return[3,4];case 3:return q.sent(),
[3,4];case 4:return[2]}})})};b.prototype._isLayerUpdating=function(b){return b instanceof C?!1:b&&"loading"===b.loadStatus};var g;h([n.property({type:G})],b.prototype,"actionsSections",void 0);h([n.property()],b.prototype,"actionsOpen",void 0);h([n.property({type:k})],b.prototype,"children",void 0);h([n.aliasOf("layer.loadError?")],b.prototype,"error",void 0);h([n.property()],b.prototype,"layer",void 0);h([n.property({readOnly:!0})],b.prototype,"layerView",void 0);h([n.property()],b.prototype,"open",
void 0);h([n.property({type:w})],b.prototype,"panel",void 0);h([n.cast("panel")],b.prototype,"castPanel",null);h([n.property()],b.prototype,"parent",void 0);h([n.property({dependsOn:["layer.layer?.loaded","layer.title"]})],b.prototype,"title",null);h([n.property({dependsOn:["layer.loadStatus?","layerView.updating"],readOnly:!0})],b.prototype,"updating",null);h([n.property({value:null})],b.prototype,"view",void 0);h([n.aliasOf("layer.visible")],b.prototype,"visible",void 0);h([n.property({dependsOn:["layer.minScale?",
"layer.maxScale?","view.scale"],readOnly:!0})],b.prototype,"visibleAtCurrentScale",null);h([n.property({dependsOn:["layer.visibilityMode?","layer.capabilities?.exportMap?.supportsSublayerVisibility","layer.layer?.capabilities?.exportMap?.supportsSublayerVisibility"],readOnly:!0})],b.prototype,"visibilityMode",null);return b=g=h([n.subclass("esri.widgets.LayerList.ListItem")],b)}(n.declared(F.IdentifiableMixin(v)))})},"esri/layers/support/Sublayer":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/tsSupport/paramHelper ../../core/tsSupport/generatorHelper ../../core/tsSupport/awaiterHelper ../../PopupTemplate ../../renderers ../../symbols ../../core/Collection ../../core/Error ../../core/JSONSupport ../../core/lang ../../core/Logger ../../core/promiseUtils ../../core/urlUtils ../../core/accessorSupport/decorators ../../core/accessorSupport/ensureType ../../core/accessorSupport/write ./commonProperties ./LabelClass ./layerSourceUtils ../../renderers/support/jsonUtils ../../tasks/support/Query".split(" "),
function(K,z,L,h,O,r,v,k,E,F,y,n,C,f,d,D,x,w,U,G,R,b,g,q,I){function ia(b){return b&&"esriSMS"===b.type}var H=d.getLogger("esri.layers.support.Sublayer"),ha=0;return function(d){function p(b){b=d.call(this,b)||this;b._sublayersHandles=null;return b}L(p,d);C=p;Object.defineProperty(p.prototype,"definitionExpression",{get:function(){return this._get("definitionExpression")},set:function(b){this._setAndNotifyLayer("definitionExpression",b)},enumerable:!0,configurable:!0});Object.defineProperty(p.prototype,
"id",{get:function(){var b=this._get("id");return null==b?ha++:b},set:function(b){this._get("id")!==b&&(!1===this.get("layer.capabilities.exportMap.supportsDynamicLayers")?this._logLockedError("id"):this._set("id",b))},enumerable:!0,configurable:!0});Object.defineProperty(p.prototype,"labelingInfo",{get:function(){return this._get("labelingInfo")},set:function(b){this._setAndNotifyLayer("labelingInfo",b)},enumerable:!0,configurable:!0});p.prototype.writeLabelingInfo=function(b,g,d,f){(!f||f.writeAsDynamic)&&
b&&b.length&&(g.layerDefinition={drawingInfo:{labelingInfo:b.map(function(b){return b.write({},f)})}})};Object.defineProperty(p.prototype,"labelsVisible",{get:function(){return this._get("labelsVisible")},set:function(b){this._setAndNotifyLayer("labelsVisible",b)},enumerable:!0,configurable:!0});p.prototype.writeLabelsVisible=function(b,g,d,f){if(!f||f.writeAsDynamic)g.showLabels=b};Object.defineProperty(p.prototype,"layer",{set:function(b){this._set("layer",b);this.sublayers&&this.sublayers.forEach(function(m){return m.layer=
b})},enumerable:!0,configurable:!0});Object.defineProperty(p.prototype,"legendEnabled",{get:function(){return this._get("legendEnabled")},set:function(b){this._set("legendEnabled",b)},enumerable:!0,configurable:!0});Object.defineProperty(p.prototype,"listMode",{get:function(){return this._get("listMode")},set:function(b){this._set("listMode",b)},enumerable:!0,configurable:!0});Object.defineProperty(p.prototype,"minScale",{get:function(){return this._get("minScale")},set:function(b){this._setAndNotifyLayer("minScale",
b)},enumerable:!0,configurable:!0});p.prototype.readMinScale=function(b,g){return g.minScale||g.layerDefinition&&g.layerDefinition.minScale||0};p.prototype.writeMinScale=function(b,g,d,f){if(f&&f.writeOverridesOnly&&(d=f&&f.serviceSublayer)&&d.minScale===b&&d.maxScale===this.maxScale)return;g.minScale=b};Object.defineProperty(p.prototype,"maxScale",{get:function(){return this._get("maxScale")},set:function(b){this._setAndNotifyLayer("maxScale",b)},enumerable:!0,configurable:!0});p.prototype.readMaxScale=
function(b,g){return g.maxScale||g.layerDefinition&&g.layerDefinition.maxScale||0};p.prototype.writeMaxScale=function(b,g,d,f){if(f&&f.writeOverridesOnly&&(d=f&&f.serviceSublayer)&&d.maxScale===b&&d.minScale===this.minScale)return;g.maxScale=b};Object.defineProperty(p.prototype,"opacity",{get:function(){return this._get("opacity")},set:function(b){this._setAndNotifyLayer("opacity",b)},enumerable:!0,configurable:!0});p.prototype.readOpacity=function(b,g){b=g.layerDefinition;return 1-.01*(null!=b.transparency?
b.transparency:b.drawingInfo.transparency)};p.prototype.writeOpacity=function(b,g,d,f){if(!f||f.writeAsDynamic)g.layerDefinition={drawingInfo:{transparency:100-100*b}}};p.prototype.writeParent=function(b,g,d,f){f&&f.writeOverridesOnly||(g.parentLayerId=this.parent&&this.parent!==this.layer?this.parent.id:-1)};Object.defineProperty(p.prototype,"popupEnabled",{get:function(){return this._get("popupEnabled")},set:function(b){this._set("popupEnabled",b)},enumerable:!0,configurable:!0});Object.defineProperty(p.prototype,
"popupTemplate",{get:function(){return this._get("popupTemplate")},set:function(b){this._set("popupTemplate",b)},enumerable:!0,configurable:!0});Object.defineProperty(p.prototype,"renderer",{get:function(){return this._get("renderer")},set:function(b){if(b)for(var g=0,m=b.getSymbols();g<m.length;g++)if(F.isSymbol3D(m[g])){H.warn("Sublayer renderer should use 2D symbols");break}this._setAndNotifyLayer("renderer",b)},enumerable:!0,configurable:!0});p.prototype.readRenderer=function(b,g,d){if(b=g.layerDefinition.drawingInfo.renderer||
void 0)(b=q.read(b,g,d)||void 0)||H.error("Failed to create renderer",{rendererDefinition:g.drawingInfo.renderer,layer:this,context:d});return b};p.prototype.writeRenderer=function(b,g,d,f){if(!f||f.writeAsDynamic)g.layerDefinition={drawingInfo:{renderer:b.toJSON()}}};p.prototype.writeWebSceneRenderer=function(b,g,d,f){if(!f||f.writeAsDynamic)g.layerDefinition={drawingInfo:{renderer:b.toJSON()}}};Object.defineProperty(p.prototype,"source",{get:function(){return this._get("source")||{mapLayerId:this.id,
type:g.MAPLAYER}},set:function(b){this._setAndNotifyLayer("source",b)},enumerable:!0,configurable:!0});p.prototype.writeSource=function(b,d,f,q){q&&!q.writeAsDynamic&&q.writeOverridesOnly||(d.layerDefinition={source:g.sourceToJSON(b)})};Object.defineProperty(p.prototype,"sublayers",{set:function(b){this._handleSublayersChange(b,this._get("sublayers"));this._set("sublayers",b)},enumerable:!0,configurable:!0});p.prototype.castSublayers=function(b){return U.default(y.ofType(C),b)};p.prototype.writeSublayers=
function(b,g,d,f){f&&f.writeOverridesOnly||this.get("sublayers.length")&&(g[d]=this.sublayers.map(function(b){return b.id}).toArray().reverse())};Object.defineProperty(p.prototype,"title",{get:function(){return this._get("title")},set:function(b){this._set("title",b)},enumerable:!0,configurable:!0});p.prototype.writeTitle=function(b,g,d,f){if(f&&f.writeOverridesOnly&&(f=f&&f.serviceSublayer)&&f.title===b)return;g[d]=b};Object.defineProperty(p.prototype,"url",{get:function(){var b=this.layer,d=this.source;
if(!b)return null;if(g.isMapLayerSource(d))return b.parsedUrl.path+"/"+d.mapLayerId;d={layer:JSON.stringify({source:g.sourceToJSON(this.source)})};return b.parsedUrl.path+"/dynamicLayer?"+x.objectToQuery(d)},set:function(b){b?this._override("url",b):this._clearOverride("url")},enumerable:!0,configurable:!0});Object.defineProperty(p.prototype,"visible",{get:function(){return this._get("visible")},set:function(b){this._setAndNotifyLayer("visible",b)},enumerable:!0,configurable:!0});p.prototype.writeVisible=
function(b,g,d,f){if(f&&f.writeOverridesOnly&&(f=f&&f.serviceSublayer)&&f.visible===b)return;g[d]=b};p.prototype.clone=function(){var b=new C;this.hasOwnProperty("definitionExpression")&&(b.definitionExpression=this.definitionExpression);this.hasOwnProperty("id")&&(b.id=this.id);this.hasOwnProperty("labelingInfo")&&(b.labelingInfo=f.clone(this.labelingInfo));this.hasOwnProperty("labelsVisible")&&(b.labelsVisible=this.labelsVisible);this.hasOwnProperty("legendEnabled")&&(b.legendEnabled=this.legendEnabled);
this.hasOwnProperty("visible")&&(b.visible=this.visible);this.hasOwnProperty("layer")&&(b.layer=this.layer);this.hasOwnProperty("minScale")&&(b.minScale=this.minScale);this.hasOwnProperty("maxScale")&&(b.maxScale=this.maxScale);this.hasOwnProperty("opacity")&&(b.opacity=this.opacity);this.hasOwnProperty("parent")&&(b.parent=this.parent);this.hasOwnProperty("popupEnabled")&&(b.popupEnabled=this.popupEnabled);this.hasOwnProperty("popupTemplate")&&(b.popupTemplate=this.popupTemplate?this.popupTemplate.clone():
this.popupTemplate);this.hasOwnProperty("renderer")&&(b.renderer=this.renderer?this.renderer.clone():this.renderer);this.hasOwnProperty("source")&&(b.source=f.clone(this.source));this.hasOwnProperty("sublayers")&&(b.sublayers=this.sublayers?this.sublayers.clone():this.sublayers);this.hasOwnProperty("title")&&(b.title=this.title);return b};p.prototype.createQuery=function(){return new I({returnGeometry:!0,where:this.definitionExpression||"1\x3d1"})};p.prototype.createFeatureLayer=function(){return v(this,
void 0,void 0,function(){var b,d,q,h,p;return r(this,function(m){switch(m.label){case 0:if(this.hasOwnProperty("sublayers"))return[2,null];b=this.layer&&this.layer.parsedUrl;d=this.source;q=null;b&&(q=g.isMapLayerSource(d)?b.path+"/"+d.mapLayerId:b.path+"/dynamicLayer");return[4,D.create(function(b){return K(["../FeatureLayer"],b)})];case 1:return h=m.sent(),p=new h({url:q}),this.hasOwnProperty("definitionExpression")&&(p.definitionExpression=this.definitionExpression),this.hasOwnProperty("labelingInfo")&&
(p.labelingInfo=f.clone(this.labelingInfo)),this.hasOwnProperty("labelsVisible")&&(p.labelsVisible=this.labelsVisible),this.hasOwnProperty("legendEnabled")&&(p.legendEnabled=this.legendEnabled),this.hasOwnProperty("visible")&&(p.visible=this.visible),this.hasOwnProperty("minScale")&&(p.minScale=this.minScale),this.hasOwnProperty("maxScale")&&(p.maxScale=this.maxScale),this.hasOwnProperty("opacity")&&(p.opacity=this.opacity),this.hasOwnProperty("popupTemplate")&&(p.popupTemplate=this.popupTemplate?
this.popupTemplate.clone():this.popupTemplate),this.hasOwnProperty("renderer")&&(p.renderer=this.renderer?this.renderer.clone():this.renderer),this.hasOwnProperty("source")&&g.isDataLayerSource(this.source)&&(p.dynamicDataSource=f.clone(this.source)),this.hasOwnProperty("title")&&(p.title=this.title),[2,p]}})})};p.prototype.queryFeatures=function(b,g){var d=this;void 0===b&&(b=this.createQuery());return D.all([D.create(function(b){return K(["../../tasks/operations/query"],b)}),D.create(function(b){return K(["../../tasks/support/FeatureSet"],
b)})]).then(function(f){var m=f[0].executeQuery,q=f[1];return m(d.url,I.from(b),g).then(function(b){return q.fromJSON(b.data)})}).then(function(b){b&&b.features&&b.features.forEach(function(b){b.sourceLayer=d});return b})};p.prototype.toExportImageJSON=function(){var b={id:this.id,source:g.sourceToJSON(this.source)};this.definitionExpression&&(b.definitionExpression=this.definitionExpression);if(this.renderer||this.labelingInfo||null!=this.opacity||null!=this.labelsVisible){var d=b.drawingInfo={};
this.renderer&&(d.renderer=this.renderer.toJSON());null!=this.labelsVisible&&(d.showLabels=this.labelsVisible);!1!==this.labelsVisible&&this.labelingInfo&&(d.labelingInfo=this.labelingInfo.map(function(b){return b.write({},{origin:"service"})}),d.showLabels=!0);null!=this.opacity&&(d.transparency=100-100*this.opacity,this._assignDefaultSymbolColors(d.renderer))}return b};p.prototype._assignDefaultSymbolColors=function(b){this._forEachSimpleMarkerSymbols(b,function(b){b.color||"esriSMSX"!==b.style&&
"esriSMSCross"!==b.style||(b.color=b.outline&&b.outline.color?b.outline.color:[0,0,0,0])})};p.prototype._forEachSimpleMarkerSymbols=function(b,g){if(b){var d=0,f="uniqueValueInfos"in b?b.uniqueValueInfos:"classBreakInfos"in b?b.classBreakInfos:[];for(;d<f.length;d++){var m=f[d];ia(m.symbol)&&g(m.symbol)}"symbol"in b&&ia(b.symbol)&&g(b.symbol);"defaultSymbol"in b&&ia(b.defaultSymbol)&&g(b.defaultSymbol)}};p.prototype._setAndNotifyLayer=function(b,g){var d=this.layer,f=this._get(b),q;switch(b){case "definitionExpression":q=
"supportsSublayerDefinitionExpression";case "minScale":case "maxScale":case "visible":q="supportsSublayerVisibility";break;case "labelingInfo":case "labelsVisible":case "opacity":case "renderer":case "source":q="supportsDynamicLayers"}q&&!1===this.get("layer.capabilities.exportMap."+q)?this._logLockedError(b):(this._set(b,g),f!==g&&d&&d.emit&&d.emit("sublayer-update",{propertyName:b}))};p.prototype._handleSublayersChange=function(b,g){var d=this;g&&(g.forEach(function(b){b.parent=null;b.layer=null}),
this._sublayersHandles.forEach(function(b){return b.remove()}),this._sublayersHandles=null);b&&(b.forEach(function(b){b.parent=d;b.layer=d.layer}),this._sublayersHandles=[b.on("after-add",function(b){b=b.item;b.parent=d;b.layer=d.layer}),b.on("after-remove",function(b){b=b.item;b.parent=null;b.layer=null}),b.on("before-changes",function(b){var g=d.get("layer.capabilities.exportMap.supportsSublayersChanges");null==g||g||(H.error(new n("sublayer:sublayers-non-modifiable","Sublayer can't be added, moved, or removed from the layer's sublayers",
{layer:d})),b.preventDefault())})])};p.prototype._logLockedError=function(b){H.error(new n("sublayer:locked","Property '"+b+"' can't be changed on Sublayer from the layer '"+this.layer.id+"'",{sublayer:this,layer:this.layer}))};var C;h([w.property({type:String,value:null,json:{read:{source:"layerDefinition.definitionExpression"},write:{target:"layerDefinition.definitionExpression"}}})],p.prototype,"definitionExpression",null);h([w.property({type:Number,json:{write:{ignoreOrigin:!0}}})],p.prototype,
"id",null);h([w.property({value:null,type:[b],json:{read:{source:"layerDefinition.drawingInfo.labelingInfo"},write:{target:"layerDefinition.drawingInfo.labelingInfo"}}})],p.prototype,"labelingInfo",null);h([w.writer("labelingInfo")],p.prototype,"writeLabelingInfo",null);h([w.property({type:Boolean,json:{read:{source:"showLabels"},write:{target:"showLabels"}}})],p.prototype,"labelsVisible",null);h([w.writer("labelsVisible")],p.prototype,"writeLabelsVisible",null);h([w.property({value:null})],p.prototype,
"layer",null);h([w.property(R.legendEnabled)],p.prototype,"legendEnabled",null);h([w.property({type:["show","hide","hide-children"],value:"show",json:{read:!1,write:!1,origins:{"web-scene":{read:!0,write:!0}}}})],p.prototype,"listMode",null);h([w.property({type:Number,value:0,json:{write:{overridePolicy:function(b,g,d){if(G.willPropertyWrite(this,"maxScale",{},d))return{ignoreOrigin:!0}}}}})],p.prototype,"minScale",null);h([w.reader("portal-item","minScale",["minScale","layerDefinition.minScale"])],
p.prototype,"readMinScale",null);h([w.writer("minScale")],p.prototype,"writeMinScale",null);h([w.property({type:Number,value:0,json:{write:{overridePolicy:function(b,g,d){if(G.willPropertyWrite(this,"minScale",{},d))return{ignoreOrigin:!0}}}}})],p.prototype,"maxScale",null);h([w.reader("portal-item","maxScale",["maxScale","layerDefinition.maxScale"])],p.prototype,"readMaxScale",null);h([w.writer("maxScale")],p.prototype,"writeMaxScale",null);h([w.property({type:Number,json:{write:{target:"layerDefinition.drawingInfo.transparency"}}})],
p.prototype,"opacity",null);h([w.reader("opacity",["layerDefinition.drawingInfo.transparency","layerDefinition.transparency"])],p.prototype,"readOpacity",null);h([w.writer("opacity")],p.prototype,"writeOpacity",null);h([w.property({json:{type:Number,write:{target:"parentLayerId",allowNull:!0}}})],p.prototype,"parent",void 0);h([w.writer("parent")],p.prototype,"writeParent",null);h([w.property(R.popupEnabled)],p.prototype,"popupEnabled",null);h([w.property({value:null,type:k,json:{read:{source:"popupInfo"},
write:{target:"popupInfo"}}})],p.prototype,"popupTemplate",null);h([w.property({types:E.rendererTypes,value:null,json:{write:{target:"layerDefinition.drawingInfo.renderer"}}})],p.prototype,"renderer",null);h([w.reader("renderer",["layerDefinition.drawingInfo.renderer"])],p.prototype,"readRenderer",null);h([w.writer("renderer")],p.prototype,"writeRenderer",null);h([w.writer("web-scene","renderer",{"layerDefinition.drawingInfo.renderer":{types:E.webSceneRendererTypes}})],p.prototype,"writeWebSceneRenderer",
null);h([w.property({cast:g.castSource,json:{read:{source:"layerDefinition.source",reader:g.sourceFromJSON},write:{target:"layerDefinition.source"}}})],p.prototype,"source",null);h([w.writer("source")],p.prototype,"writeSource",null);h([w.property({value:null,json:{type:[U.Integer],write:{target:"subLayerIds",allowNull:!0}}})],p.prototype,"sublayers",null);h([w.cast("sublayers")],p.prototype,"castSublayers",null);h([w.writer("sublayers")],p.prototype,"writeSublayers",null);h([w.property({type:String,
value:null,json:{read:{source:"name"},write:{target:"name",allowNull:!0,ignoreOrigin:!0}}})],p.prototype,"title",null);h([w.writer("title")],p.prototype,"writeTitle",null);h([w.property({type:String,dependsOn:["layer","source"],json:{read:{source:"layerUrl"},write:{target:"layerUrl",overridePolicy:function(){return{enabled:this._isOverridden("url")}}}}})],p.prototype,"url",null);h([w.property({type:Boolean,value:!0,json:{read:{source:"defaultVisibility"},write:{target:"defaultVisibility"}}})],p.prototype,
"visible",null);h([w.writer("visible")],p.prototype,"writeVisible",null);return p=C=h([w.subclass("esri.layers.support.Sublayer")],p)}(w.declared(C.JSONSupport))})},"esri/support/actions/ActionSlider":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ./ActionBase".split(" "),function(K,z,L,h,O,r){return function(r){function k(h){h=r.call(this,h)||this;h.displayValueEnabled=!1;h.max=1;h.min=0;h.step=
.1;h.type="slider";h.value=null;return h}L(k,r);v=k;k.prototype.clone=function(){return new v({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,displayValueEnabled:this.displayValueEnabled,max:this.max,min:this.min,step:this.step,value:this.value})};var v;h([O.property()],k.prototype,"displayValueEnabled",void 0);h([O.property()],k.prototype,"max",void 0);h([O.property()],k.prototype,"min",void 0);h([O.property()],
k.prototype,"step",void 0);h([O.property()],k.prototype,"value",void 0);return k=v=h([O.subclass("esri.support.Action.ActionSlider")],k)}(O.declared(r))})},"esri/widgets/LayerList/ListItemPanel":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Handles ../../core/Identifiable ../../core/promiseUtils ../../core/watchUtils ../../core/accessorSupport/decorators ../Widget ../support/widget".split(" "),function(K,z,L,h,O,r,v,k,E,
F,y){return function(n){function r(f){f=n.call(this,f)||this;f._legend=null;f._handles=new O;f.content=null;f.image=null;f.listItem=null;f.open=!1;f.visible=!0;return f}L(r,n);r.prototype.postInitialize=function(){var f=this;this.own([k.init(this,"content",function(d){return f._createLegend(d)})])};r.prototype.destroy=function(){var f=this._legend;f&&f.destroy();this._legend=null};Object.defineProperty(r.prototype,"className",{get:function(){var f=this.image,d=this._getFirstWidget();return this._get("className")||
!f&&d?d.iconClass:""},set:function(f){void 0===f?this._clearOverride("className"):this._override("className",f)},enumerable:!0,configurable:!0});Object.defineProperty(r.prototype,"title",{get:function(){var f=this._getFirstWidget();return this._get("title")||f?f.label:""},set:function(f){void 0===f?this._clearOverride("title"):this._override("title",f)},enumerable:!0,configurable:!0});r.prototype.render=function(){return y.tsx("div",{class:"esri-layer-list-panel"},this._renderContents())};r.prototype._renderContent=
function(f){var d=this._legend,h=this.listItem;return f?"legend"===f?h&&h.view&&h.layer&&d?y.tsx("div",{class:this.classes("esri-layer-list-panel__content","esri-layer-list-panel__content--legend"),key:d},d.render()):null:"string"===typeof f?y.tsx("div",{class:this.classes("esri-layer-list-panel__content","esri-layer-list-panel__content--string"),key:f,innerHTML:f}):y.isWidget(f)?y.tsx("div",{class:this.classes("esri-layer-list-panel__content","esri-layer-list-panel__content--widget"),key:f},f.render()):
f instanceof HTMLElement?y.tsx("div",{class:this.classes("esri-layer-list-panel__content","esri-layer-list-panel__content--html-element"),key:f,bind:f,afterCreate:this._attachToNode}):null:null};r.prototype._renderContents=function(){var f=this,d=this.content;return Array.isArray(d)?d.map(function(d){return f._renderContent(d)}):this._renderContent(d)};r.prototype._getLegendOptions=function(f){if(f){var d=f.layer;f=f.view;if(d&&f)return{view:f,layerInfos:[{layer:d,title:""}]}}};r.prototype._createLegend=
function(f){var d=this;this._hasLegend(f)&&!this._legend&&v.create(function(d){K(["../Legend"],d)}).then(function(f){var h=d._handles,n=new f(d._getLegendOptions(d.listItem));d._legend=n;d.notifyChange("className");d.notifyChange("title");f=k.init(d,["listItem.view","listItem.layer"],function(){return d._updateLegend(n)});h.add(f,"legends");d.scheduleRender()})};r.prototype._hasLegend=function(f){return"legend"===f?!0:Array.isArray(f)?f.some(function(d){return"legend"===d}):!1};r.prototype._attachToNode=
function(f){f.appendChild(this)};r.prototype._updateLegend=function(f){var d=this.listItem;if(d){var h=d.layer;f.view=d.view;f.layerInfos=[{layer:h,title:null}];this.scheduleRender()}};r.prototype._getWidget=function(f){return"legend"===f?this._legend:y.isWidget(f)?f:null};r.prototype._getFirstWidget=function(){var f=this,d=this.content;if(Array.isArray(d)){var h=null;d.some(function(d){(d=f._getWidget(d))&&(h=d);return!!d});return h}return this._getWidget(d)};h([E.property({dependsOn:["content",
"image"]})],r.prototype,"className",null);h([E.property(),y.renderable()],r.prototype,"content",void 0);h([E.property()],r.prototype,"image",void 0);h([E.property()],r.prototype,"listItem",void 0);h([E.property({dependsOn:["content"]})],r.prototype,"title",null);h([E.property(),y.renderable()],r.prototype,"open",void 0);h([E.property()],r.prototype,"visible",void 0);return r=h([E.subclass("esri.widgets.LayerList.ListItemPanel")],r)}(E.declared(r.IdentifiableMixin(F)))})},"esri/widgets/LayerList/support/layerListUtils":function(){define(["require",
"exports"],function(K,z){function L(h){if(h)return null!=h.listMode?h.listMode:void 0}function h(h){if(h)return null!=h.minScale?h.minScale:void 0}function O(h){if(h)return null!=h.maxScale?h.maxScale:void 0}Object.defineProperty(z,"__esModule",{value:!0});z.findLayerListMode=L;z.findLayerMinScale=h;z.findLayerMaxScale=O;z.findLayerVisibilityMode=function(h){if(!h)return"inherited";var r=h.get("layer.capabilities.exportMap.supportsSublayerVisibility");if("boolean"===typeof r)return r?"independent":
"inherited";r=h.get("capabilities.exportMap.supportsSublayerVisibility");return"boolean"===typeof r?r?"independent":"inherited":null!=h.visibilityMode?h.visibilityMode:"independent"};z.getNormalizedChildLayerProperty=function(h){if(h&&"hide-children"!==h.listMode&&"wmts"!==h.type)return"group"===h.type?"layers":"sublayers"};z.canDisplayLayer=function(h){return"hide"!==L(h)};z.isLayerOutsideScaleRange=function(r,v){if(!r||isNaN(v))return!1;var k=h(r);r=O(r);k=!isNaN(k)&&0<k&&v>=k;v=!isNaN(r)&&0<r&&
v<=r;return k||v}})},"*now":function(K){K(['dojo/i18n!*preload*esri/widgets/nls/LayerList*["ar","bs","ca","cs","da","de","el","en-au","en-ca","en-gb","en-us","es","es-mx","et","fi","fr","he","hr","hu","id","it","ja","ko","lt","lv","nl","nb","pl","pt","pt-br","pt-pt","ro","ru","sl","sr","sv","th","tr","uk","vi","zh-cn","zh-hk","zh-tw","ROOT"]'])},"*noref":1}});
define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/assignHelper dojo/i18n!../nls/common dojo/i18n!./LayerList/nls/LayerList ../core/Collection ../core/events ../core/Handles ../core/watchUtils ../core/accessorSupport/decorators ../libs/sortablejs/Sortable ./Widget ./LayerList/LayerListViewModel ./LayerList/ListItem ./support/widget".split(" "),function(K,z,L,h,O,r,v,k,E,F,y,n,C,f,d,D,x){function w(d){var f=d.children;d.actionsOpen&&(d.actionsOpen=
!1);f.forEach(function(b){return w(b)})}var U=k.ofType(D);return function(f){function k(b){b=f.call(this,b)||this;b._handles=new F;b._sortable=null;b._sortableNode=null;b._focusSortUid=null;b.iconClass="esri-icon-layers";b.label=v.widgetLabel;b.listItemCreatedFunction=null;b.multipleSelectionEnabled=!1;b.operationalItems=null;b.selectionEnabled=!1;b.selectedItems=new U;b.statusIndicatorsVisible=!0;b.view=null;b.viewModel=new d;return b}L(k,f);k.prototype.postInitialize=function(){var b=this,g=this.operationalItems;
this.own(y.on(this,"operationalItems","change",function(){return b._itemsChanged(g)}),y.init(this,"selectionEnabled",function(){return b._toggleSorting()}))};k.prototype.destroy=function(){var b=this._sortable;b&&b.destroy();this._handles.destroy();this._handles=null};k.prototype.triggerAction=function(b,g){this.viewModel.triggerAction(b,g)};k.prototype.render=function(){var b=this,g,d=this._getItems(),f=this.get("viewModel.state"),d=0===d.length?x.tsx("div",{class:"esri-layer-list__no-items"},v.noItemsToDisplay):
x.tsx("ul",{"aria-label":v.widgetLabel,role:this.selectionEnabled?"listbox":void 0,afterCreate:this._sortNodeCreated,"data-node-ref":"_sortableNode",bind:this,class:this.classes("esri-layer-list__list","esri-layer-list__list--root","esri-layer-list__list--independent")},d.map(function(g){return b._renderItem(g,null)})),f=(g={},g["esri-hidden"]="loading"===f,g["esri-disabled"]="disabled"===f,g);return x.tsx("div",{class:this.classes("esri-layer-list esri-widget esri-widget--panel",f)},d)};k.prototype._toggleSorting=
function(){var b=this,g=this._sortable,d=this._sortableNode,f=this.selectionEnabled;if(d)if(g)g.option("disabled",!f);else{var h=C.create(d,{dataIdAttr:"data-layer-uid",group:"root-layers",disabled:!f,onSort:function(){return b._sortLayersToItems(h.toArray())}});this._sortable=h}};k.prototype._sortNodeCreated=function(b){this._sortableNode=b;this._toggleSorting()};k.prototype._sortLayersToItems=function(b){var g=this.get("view.map.layers");g&&g.sort(function(g,d){g=b.indexOf(g.uid);d=b.indexOf(d.uid);
return g>d?-1:g<d?1:0})};k.prototype._getItems=function(){var b=this;return this.operationalItems.toArray().filter(function(g){return b.errorsVisible||!g.error})};k.prototype._getSingleActionButton=function(b){return b.actionsSections.reduce(function(b){return b}).filter(function(b){return b&&"button"===b.type}).getItemAt(0)};k.prototype._renderItem=function(b,g){var d=this,f,h,k,n,y,p,w=this.id+"_"+b.uid,m=w+"_actions",t=w+"__list",w=w+"__title",z=!!b.error,C=!!b.children.length&&!z,E=z?v.layerError:
"",D=b.visibilityMode,G=b.children&&b.children.toArray(),L=(f={},f["esri-layer-list__list--exclusive"]="exclusive"===D,f["esri-layer-list__list--inherited"]="inherited"===D,f["esri-layer-list__list--independent"]="inherited"!==D&&"exclusive"!==D,f);f=(h={},h["esri-layer-list__item--has-children"]=C,h["esri-layer-list__item--error"]=!!z,h["esri-layer-list__item--updating"]=b.updating&&!g&&this.statusIndicatorsVisible,h["esri-layer-list__item--invisible-at-scale"]=!b.visibleAtCurrentScale,h["esri-layer-list__item--selectable"]=
this.selectionEnabled,h);var K=this._countActions(b.actionsSections),F=b.panel;h=F&&F.open?F.render():null;var F=F&&F.visible?this._renderPanelButton(F):null,R=(k={},k["esri-layer-list__item-actions-menu-item--active"]=b.actionsOpen,k),U=b.actionsOpen?r.close:r.open,ma=1===K&&this._getSingleActionButton(b);k=ma?this._renderAction({item:b,action:ma,singleAction:!0}):null;k=(R=!ma&&K?x.tsx("div",{key:"actions-menu-toggle","data-item":b,bind:this,onclick:this._toggleActionsOpen,onkeydown:this._toggleActionsOpen,
class:this.classes("esri-layer-list__item-actions-menu-item",R),tabindex:"0",role:"button","aria-controls":m,"aria-label":U,title:U},x.tsx("span",{"aria-hidden":"true",class:"esri-icon-handle-horizontal"})):null)||F||k?x.tsx("div",{key:"esri-layer-list__actions-menu",class:"esri-layer-list__item-actions-menu"},F,k,R):null;m=K?this._renderActionsSections(b,b.actionsSections,m):null;D=C?x.tsx("ul",{key:"esri-layer-list__list-items",id:t,class:this.classes("esri-layer-list__list",L),"aria-expanded":b.open?
"true":"false",role:"exclusive"===D?"radiogroup":"group",hidden:b.open?null:!0},G.map(function(g){return d._renderItem(g,b)})):null;G=(n={},n["esri-layer-list__child-toggle--open"]=b.open,n);n=b.open?r.collapse:r.expand;t=C?x.tsx("span",{onclick:this._toggleChildrenClick,onkeydown:this._toggleChildrenClick,"data-item":b,key:"esri-layer-list__toggle-children",class:this.classes("esri-layer-list__child-toggle",G),tabindex:"0",role:"button","aria-controls":t,"aria-label":n,title:n},x.tsx("span",{"aria-hidden":"true",
class:this.classes("esri-layer-list__child-toggle-icon--closed","esri-icon-right-triangle-arrow")}),x.tsx("span",{"aria-hidden":"true",class:this.classes("esri-layer-list__child-toggle-icon--opened","esri-icon-down-arrow")}),x.tsx("span",{"aria-hidden":"true",class:this.classes("esri-layer-list__child-toggle-icon--closed-rtl","esri-icon-left-triangle-arrow")})):null;n=this._createLabelNode(b,g,w);z=z?x.tsx("div",{key:"esri-layer-list__error",class:"esri-layer-list__item-error-message",role:"alert"},
x.tsx("span",null,E)):null;E=-1<this.selectedItems.indexOf(b);g=g?null:b.get("layer.uid");g=this.selectionEnabled?(y={bind:this,onclick:this._toggleSelection,onkeydown:this._selectionKeydown,"data-item":b,tabIndex:0,"aria-selected":E?"true":"false",role:"option","aria-labelledby":w},y["data-layer-uid"]=g,y):(p={bind:void 0,onclick:void 0,onkeydown:void 0,"data-item":void 0,tabIndex:void 0,"aria-selected":void 0,role:void 0,"aria-labelledby":void 0},p["data-layer-uid"]=void 0,p);return x.tsx("li",
O({key:b,bind:this,afterCreate:this._focusListItem,afterUpdate:this._focusListItem,class:this.classes("esri-layer-list__item",f),"aria-labelledby":w},g),x.tsx("div",{key:"esri-layer-list__list-item-container",class:"esri-layer-list__item-container"},t,n,k),z,m,h,D)};k.prototype._focusListItem=function(b){var g=this._focusSortUid;b&&g&&b.dataset.layerUid===g&&(b.focus(),this._focusSortUid=null)};k.prototype._createLabelNode=function(b,g,d){var f,h=this.selectionEnabled;g=g&&g.visibilityMode;var k=
(f={},f["esri-icon-radio-checked"]="exclusive"===g&&b.visible,f["esri-icon-radio-unchecked"]="exclusive"===g&&!b.visible,f["esri-icon-visible"]="exclusive"!==g&&b.visible,f["esri-icon-non-visible"]="exclusive"!==g&&!b.visible,f),q="exclusive"===g?"radio":"switch";f=b.title||v.untitledLayer;var n=b.visibleAtCurrentScale?f:f+" ("+v.layerInvisibleAtScale+")";f=x.tsx("span",{key:"layer-title-container",id:d,title:n,"aria-label":n,class:"esri-layer-list__item-title"},f);k=x.tsx("span",{class:this.classes("esri-layer-list__item-toggle-icon",
k),"aria-hidden":"true"});d={bind:this,onclick:this._toggleVisibility,onkeydown:this._toggleVisibility,"data-item":b,"data-parent-visibility":g,tabIndex:0,"aria-checked":b.visible?"true":"false",role:q,"aria-labelledby":d};q={bind:void 0,onclick:void 0,onkeydown:void 0,"data-item":void 0,"data-parent-visibility":void 0,tabIndex:void 0,"aria-checked":void 0,role:void 0,"aria-labelledby":void 0};n=h?d:q;h=x.tsx("div",O({key:b,class:"esri-layer-list__item-label"},h?q:d),x.tsx("span",O({class:"esri-layer-list__item-toggle"},
n),k),f);k=(d=!!b.error)?x.tsx("span",{key:"notice-triangle","aria-hidden":"true",class:"esri-icon-notice-triangle"}):null;return"inherited"===g||d?x.tsx("div",{key:b,class:"esri-layer-list__item-label"},k,f):h};k.prototype._renderPanelButton=function(b){var d,f,h=b.className,k=b.open,n=b.title,h=b.image||h?h:"esri-icon-default-action",r=this._getIconImageStyles(b),k=(d={},d["esri-layer-list__item-actions-menu-item--active"]=k,d);d=(f={},f["esri-layer-list__item-action-image"]=!!r["background-image"],
f);h&&(d[h]=!!h);return x.tsx("div",{key:b,bind:this,"data-panel":b,onclick:this._triggerPanel,onkeydown:this._triggerPanel,class:this.classes("esri-layer-list__item-actions-menu-item",k),role:"button",tabindex:"0",title:n,"aria-label":n},x.tsx("span",{class:this.classes(d),styles:r}))};k.prototype._watchActionSectionChanges=function(b,d){var g=this,f="action-section"+d;this._handles.add(b.on("change",this.scheduleRender.bind(this)),f);b.forEach(function(b){return g._renderOnActionChanges(b,d)})};
k.prototype._renderOnActionChanges=function(b,d){var g=this;d="actions"+d;"toggle"===b.type?this._handles.add([y.init(b,"className image id title visible value".split(" "),function(){return g.scheduleRender()})],d):"slider"===b.type?this._handles.add([y.init(b,"className id title visible value displayValueEnabled max min step".split(" "),function(){return g.scheduleRender()})],d):this._handles.add([y.init(b,["className","image","id","title","visible"],function(){return g.scheduleRender()})],d)};k.prototype._renderOnItemChanges=
function(b){var d=this,f=b.uid,h="items"+f;this._handles.add([y.init(b,"actionsOpen visible open updating title visibleAtCurrentScale error visibilityMode panel panel.title panel.content panel.className".split(" "),function(){return d.scheduleRender()}),b.actionsSections.on("change",function(){return d.scheduleRender()}),b.children.on("change",function(){return d.scheduleRender()})],h);b.children.forEach(function(b){return d._renderOnItemChanges(b)});b.actionsSections.forEach(function(b){return d._watchActionSectionChanges(b,
f)})};k.prototype._itemsChanged=function(b){var d=this;this._handles.removeAll();b.forEach(function(b){return d._renderOnItemChanges(b)});this.scheduleRender()};k.prototype._renderActionsSections=function(b,d,f){var g=this;d=d.toArray().map(function(d){return x.tsx("ul",{key:d,class:"esri-layer-list__item-actions-list"},g._renderActionSection(b,d))});return x.tsx("div",{role:"group","aria-expanded":b.actionsOpen?"true":"false",key:"esri-layer-list__actions-section",id:f,class:"esri-layer-list__item-actions",
hidden:b.actionsOpen?null:!0},d)};k.prototype._renderActionSection=function(b,d){var g=this;return(d&&d.toArray()).map(function(d){return g._renderAction({item:b,action:d})})};k.prototype._renderAction=function(b){var d,f,h=b.item,k=b.action;b=b.singleAction;var n=this._getIconImageStyles(k),r=k.active,v=k.className,p=k.disabled,w=k.title,v="button"!==k.type||k.image||v?v:"esri-icon-default-action",p=(d={},d["esri-layer-list__item-actions-menu-item"]=b&&"button"===k.type,d["esri-layer-list__item-action"]=
!b&&"toggle"!==k.type,d["esri-layer-list__action-toggle"]="toggle"===k.type,d["esri-layer-list__action-toggle--on"]="toggle"===k.type&&k.value,d["esri-disabled-element"]=p,d);d=(f={},f["esri-layer-list__item-action-image"]=!r&&!!n["background-image"],f["esri-icon-loading-indicator"]=r,f["esri-rotating"]=r,f);v&&(d[v]=!0);f=x.tsx("span",{key:"action-icon","aria-hidden":"true",class:this.classes("esri-layer-list__item-action-icon",d),styles:n});d=b?null:x.tsx("span",{key:"action-title",class:"esri-layer-list__item-action-title"},
w);f=[f,d];return b?x.tsx("div",{bind:this,"data-item":h,"data-action":k,role:"button",key:k,onclick:this._triggerAction,onkeydown:this._triggerAction,classes:p,tabindex:"0",title:w,"aria-label":w},f):x.tsx("li",{bind:this,"data-item":h,"data-action":k,key:k,onclick:this._triggerAction,onkeydown:this._triggerAction,classes:p,tabindex:"0",role:"button",title:w,"aria-label":w},f)};k.prototype._countActions=function(b){return b.reduce(function(b,d){return b+d.length},0)};k.prototype._getIconImageStyles=
function(b){b="esri.widgets.LayerList.ListItemPanel"===b.declaredClass||"esri.support.Action.ActionButton"===b.declaredClass||"esri.support.Action.ActionToggle"===b.declaredClass?b.image:null;return{"background-image":b?'url("'+b+'")':null}};k.prototype._selectionKeydown=function(b){var d=E.eventKey(b);if(-1===["ArrowDown","ArrowUp"].indexOf(d))this._toggleSelection(b);else{b.stopPropagation();var f=this._sortable,h=-1<this.selectedItems.indexOf(b.currentTarget["data-item"]),k=f.toArray();b=k.indexOf(b.target.dataset.layerUid);
if(-1!==b){if("ArrowDown"===d){var n=b+1;if(n>=k.length)return;h?(k.splice(n,0,k.splice(b,1)[0]),f.sort(k),this._sortLayersToItems(f.toArray()),this._focusSortUid=k[n]):(this._focusSortUid=k[n],this.scheduleRender())}"ArrowUp"===d&&(n=b-1,-1>=n||(h?(k.splice(n,0,k.splice(b,1)[0]),f.sort(k),this._sortLayersToItems(f.toArray()),this._focusSortUid=k[n]):(this._focusSortUid=k[n],this.scheduleRender())))}}};k.prototype._toggleActionsOpen=function(b){var d=b.currentTarget["data-item"],f=!d.actionsOpen;
f&&this.operationalItems.forEach(function(b){return w(b)});d.actionsOpen=f;b.stopPropagation()};k.prototype._triggerPanel=function(b){var d=b.currentTarget["data-panel"];d&&(d.open=!d.open);b.stopPropagation()};k.prototype._triggerAction=function(b){var d=b.currentTarget,f=d["data-action"],d=d["data-item"];"toggle"===f.type&&(f.value=!f.value);this.triggerAction(f,d);b.stopPropagation()};k.prototype._toggleVisibility=function(b){var d=b.currentTarget,f=d.getAttribute("data-parent-visibility"),d=d["data-item"];
"exclusive"===f&&d.visible||(d.visible=!d.visible);b.stopPropagation()};k.prototype._toggleChildrenClick=function(b){var d=b.currentTarget["data-item"];d.open=!d.open;b.stopPropagation()};k.prototype._toggleSelection=function(b){b.stopPropagation();var d=this.selectedItems,f=this.multipleSelectionEnabled&&(b.metaKey||b.ctrlKey);b=b.currentTarget["data-item"];var h=-1<d.indexOf(b),k=d.length,n=h&&1===k;f?h?d.remove(b):d.add(b):k&&!n?(d.removeAll(),d.add(b)):h?d.remove(b):d.add(b)};h([n.property()],
k.prototype,"iconClass",void 0);h([n.property(),x.renderable()],k.prototype,"errorsVisible",void 0);h([n.property()],k.prototype,"label",void 0);h([n.aliasOf("viewModel.listItemCreatedFunction"),x.renderable()],k.prototype,"listItemCreatedFunction",void 0);h([n.property()],k.prototype,"multipleSelectionEnabled",void 0);h([n.aliasOf("viewModel.operationalItems"),x.renderable()],k.prototype,"operationalItems",void 0);h([n.property(),x.renderable()],k.prototype,"selectionEnabled",void 0);h([n.property(),
x.renderable()],k.prototype,"selectedItems",void 0);h([n.property(),x.renderable()],k.prototype,"statusIndicatorsVisible",void 0);h([n.aliasOf("viewModel.view"),x.renderable()],k.prototype,"view",void 0);h([x.vmEvent("trigger-action"),n.property({type:d}),x.renderable("viewModel.state")],k.prototype,"viewModel",void 0);h([n.aliasOf("viewModel.triggerAction")],k.prototype,"triggerAction",null);h([x.accessibleHandler()],k.prototype,"_toggleActionsOpen",null);h([x.accessibleHandler()],k.prototype,"_triggerPanel",
null);h([x.accessibleHandler()],k.prototype,"_triggerAction",null);h([x.accessibleHandler()],k.prototype,"_toggleVisibility",null);h([x.accessibleHandler()],k.prototype,"_toggleChildrenClick",null);h([x.accessibleHandler()],k.prototype,"_toggleSelection",null);return k=h([n.subclass("esri.widgets.LayerList")],k)}(n.declared(f))});