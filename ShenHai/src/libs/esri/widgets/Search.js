// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.14/esri/copyright.txt for details.
//>>built
require({cache:{"esri/widgets/Search/SearchResultRenderer":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper dojo/i18n!./nls/Search ../../core/accessorSupport/decorators ../Widget ./SearchViewModel ../support/widget".split(" "),function(q,g,p,d,m,c,f,h,n){return function(a){function b(b){b=a.call(this,b)||this;b.showMoreResultsOpen=!1;b.viewModel=null;return b}p(b,a);b.prototype.render=function(){var b=this,a,k=this.get("viewModel.selectedResult"),
c=this.get("viewModel.results"),k=k&&k.name||"",f=1<this._countResults(c),h=f&&c.map(function(a){return b._moreResultsList(a)}),c=f?n.tsx("div",{key:"esri-search-renderer__more-results-button",class:"esri-search-result-renderer__more-results-item"},n.tsx("a",{class:"esri-widget__anchor",href:"#",bind:this,onclick:this._showMoreResultsClick,onkeydown:this._showMoreResultsClick},this.showMoreResultsOpen?m.hideMoreResults:m.showMoreResults)):null,f=f?n.tsx("div",{key:"esri-search-renderer__more-results-container",
class:"esri-search-result-renderer__more-results-list"},h):null,h=(a={},a["esri-search-result-renderer__more-results--show-more-results"]=this.showMoreResultsOpen,a);return n.tsx("div",{class:"esri-search-result-renderer esri-widget"},n.tsx("div",{key:"esri-search-renderer__container",class:this.classes("esri-search-result-renderer__more-results",h)},n.tsx("div",{key:"esri-search-renderer__result-name",class:"esri-search-result-renderer__more-results-item"},k),n.tsx("div",{key:"esri-search-renderer__more-results"},
c,f)))};b.prototype._showMoreResultsClick=function(b){b.preventDefault();this.showMoreResultsOpen=!this.showMoreResultsOpen;(b=this.get("viewModel.view.popup"))&&b.reposition()};b.prototype._selectResultClick=function(b){b.preventDefault();b=b.currentTarget["data-result"];this.viewModel&&this.viewModel.select(b)};b.prototype._moreResultsList=function(b){var a=this,e=b.results,c=e.length,f=!!c,h=this.get("viewModel.selectedResult"),c=1===c&&e[0]===h,h=this._getSourceName(b.source,b.sourceIndex),h=
1<this.get("viewModel.results").length&&!c?n.tsx("div",{key:"esri-search-result-renderer__header-"+b.sourceIndex,class:"esri-search-result-renderer__more-results-list-header"},h):null,e=f&&e.map(function(b,e){return a._moreResultsListItem(b,e)}),e=f&&!c?n.tsx("ul",{key:"esri-search-result-renderer__list-"+b.sourceIndex},e):null;return f?n.tsx("div",{key:"esri-search-result-renderer__results-"+b.sourceIndex},h,e):null};b.prototype._moreResultsListItem=function(b,a){var e=this.get("viewModel.selectedResult");
return b!==e?n.tsx("li",{key:"esri-search-result-renderer__list-item-"+a},n.tsx("a",{class:"esri-widget__anchor",href:"#",tabindex:"0",bind:this,"data-result":b,onclick:this._selectResultClick,onkeydown:this._selectResultClick},b.name)):null};b.prototype._getSourceName=function(b,a){return a===h.ALL_INDEX?m.all:b.name};b.prototype._countResults=function(b){return b?b.reduce(function(b,a){return b+a.results.length},0):0};d([n.renderable(),c.property()],b.prototype,"showMoreResultsOpen",void 0);d([c.property(),
n.renderable(["viewModel.results","viewModel.selectedResult"])],b.prototype,"viewModel",void 0);d([n.accessibleHandler()],b.prototype,"_showMoreResultsClick",null);d([n.accessibleHandler()],b.prototype,"_selectResultClick",null);return b=d([c.subclass("esri.widgets.Search.SearchResultRenderer")],b)}(c.declared(f))})},"esri/widgets/Search/SearchViewModel":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/tsSupport/generatorHelper ../../core/tsSupport/awaiterHelper dojo/i18n!./nls/Search ../../Graphic ../../PopupTemplate ../../core/Accessor ../../core/Collection ../../core/Error ../../core/Evented ../../core/geolocationUtils ../../core/Handles ../../core/has ../../core/Logger ../../core/maybe ../../core/promiseUtils ../../core/watchUtils ../../core/accessorSupport/decorators ../../geometry/Point ../../geometry/SpatialReference ../../portal/Portal ../../styles/basic ../../symbols/PictureMarkerSymbol ../../symbols/SimpleFillSymbol ../../symbols/SimpleLineSymbol ../../symbols/SimpleMarkerSymbol ../../symbols/TextSymbol ../../views/support/layerViewUtils ./LayerSearchSource ./LocatorSearchSource ./SearchSource ./support/geometryUtils ./support/locatorUtils ../support/GoTo".split(" "),
function(q,g,p,d,m,c,f,h,n,a,b,e,l,k,r,C,y,t,x,z,u,v,w,D,B,A,J,E,G,F,H,O,Q,N,P,L,R){function I(b,a){return b.hasOwnProperty(a)&&null!=b[a]&&""!==b[a]}var K=y.getLogger("esri.widgets.Search.SearchViewModel"),S=b.ofType({key:function(b){return b.layer?"layer":"locator"},base:N,typeMap:{layer:O,locator:Q}}),T=w.WGS84,V=/<(?:.|\s)*?>/g;return function(b){function a(a){a=b.call(this,a)||this;a._handles=new r;a._gotoController=null;a._searching=null;a._loadingDefaultSources=null;a.allPlaceholder=f.allPlaceholder;
a.autoNavigate=!0;a.autoSelect=!0;a.defaultSources=new S;a.defaultSymbol=new A({url:q.toUrl(C("trident")?"../../images/search/search-symbol-32.png":"../../images/search/search-symbol-32.svg"),size:24,width:24,height:24});a.includeDefaultSources=!0;a.maxInputLength=128;a.maxResults=6;a.maxSuggestions=6;a.minSuggestCharacters=1;a.popupEnabled=!0;a.popupTemplate=new n({title:f.searchResult,content:"{Match_addr}"});a.portal=D.getDefault();a.resultGraphicEnabled=!0;a.resultGraphic=null;a.results=null;
a.selectedSuggestion=null;a.searchAllEnabled=!0;a.selectedResult=null;a.sources=new S;a.suggestionDelay=150;a.suggestions=null;a.suggestionsEnabled=!0;a.view=null;return a}p(a,b);a.prototype.initialize=function(){var a=this;this._handles.add(z.on(this,["defaultSources","sources"],"change",function(){return a.notifyChange("allSources")}))};a.prototype.destroy=function(){this._abortGoTo();this.clearGraphics();this._loadingDefaultSources=null;this._clearLoadingDefaultSources();this._handles.destroy();
this._handles=null};Object.defineProperty(a.prototype,"activeSource",{get:function(){return this.allSources.getItemAt(this.activeSourceIndex)||null},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"activeSourceIndex",{get:function(){return 1!==this.allSources.length&&this.searchAllEnabled?-1:0},set:function(a){void 0===a?this._clearOverride("activeSourceIndex"):this._override("activeSourceIndex",a)},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"allSources",{get:function(){var a=
this.sources,b=this.defaultSources,e=this.includeDefaultSources,a="function"===typeof e?e.call(null,{sources:a,defaultSources:b}):e?b.concat(a):a,b=this._get("allSources")||new S;b.removeAll();b.addMany(a.filter(Boolean));return b},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"locationEnabled",{get:function(){return this._get("locationEnabled")||k.supported()},set:function(a){if(void 0===a)this._clearOverride("locationEnabled");else{var b=k.supported();if(a&&!b){var l=new e("locationEnabled:geolocation-unsupported",
"Geolocation API is unsupported.",{geolocation:navigator.geolocation});K.error(l)}this._override("locationEnabled",a&&b)}},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"placeholder",{get:function(){var a=this.activeSourceIndex,b=this.allPlaceholder,b=void 0===b?f.allPlaceholder:b;return-1===a?b:(a=this.allSources.getItemAt(a))?a.placeholder:""},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"searchTerm",{get:function(){return this._get("searchTerm")||""},set:function(a){this._set("searchTerm",
a||"");this.clearGraphics();this.selectedSuggestion&&this.selectedSuggestion.text!==a&&this._set("selectedSuggestion",null);""===a&&this._clear()},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"state",{get:function(){return this._searching?"searching":this._loadingDefaultSources?"loading":0===this.allSources.length?"disabled":"ready"},enumerable:!0,configurable:!0});a.prototype.load=function(){return c(this,void 0,void 0,function(){var a=this;return m(this,function(b){this._handles.add([z.init(this,
["portal","includeDefaultSources"],function(){return a._loadPortal()}),z.init(this,["view","portal","includeDefaultSources"],function(){return a._loadDefaultSources()})]);return[2]})})};a.prototype.clear=function(){this.searchTerm=""};a.prototype.clearGraphics=function(){this._removeHighlight();this._closePopup();this.view&&this.view.graphics.remove(this.resultGraphic);this._set("resultGraphic",null)};a.prototype.search=function(a,b){var e=this;this.emit("search-start");this.clearGraphics();var k=
this._createSuggestionForSearch(a);this._searching=a=this._whenViewAndPortalLoaded().then(function(){return e._getResultsFromSources(k,b).then(function(a){var b={activeSourceIndex:e.activeSourceIndex,searchTerm:k.text,numResults:0,numErrors:0,errors:[],results:[]};e._formatResponse(b,a,k);a=e._getFirstResult(b.results);var l=(k.location&&a?a.name:k.text).replace(V,"");e._set("searchTerm",l);(k.key&&"number"===typeof k.sourceIndex||k.location)&&e._set("selectedSuggestion",k);e._set("results",b.results);
e.emit("search-complete",b);return e._selectFirstResult(a).then(function(){return b})})}).then(function(a){e._clearSearching();return a},function(a){e._clearSearching();throw a;});this.notifyChange("state");return a};a.prototype.searchNearby=function(a){var b=this;if(!this.locationEnabled){var l=new e("searchNearby:geolocation-unsupported","Geolocation API is unsupported.",{geolocation:navigator.geolocation});K.error(l);return x.reject(l)}this._searching=l=k.getCurrentPosition().then(function(e){return k.positionToPoint({position:e,
view:b.view},a)}).then(function(e){return b.search(e,a)});this.notifyChange("state");l.catch(function(){}).then(function(){return b._clearSearching()});return l};a.prototype.select=function(a){var b=this;this.clearGraphics();if(!a){var k=new e("select:missing-parameter","Cannot select without a searchResult.",{searchResult:a});K.error(k);return x.reject(k)}var l=this.view,c=I(a,"sourceIndex")?a.sourceIndex:this._getSourceIndexOfResult(a),f=this.allSources.getItemAt(c);if(!f)return k=new e("select:missing-source",
"Cannot select without a source.",{source:f}),K.error(k),x.reject(k);var k=f instanceof O?this._getLayerSourcePopupTemplate(f):f.popupTemplate,r=f.resultSymbol||this._getDefaultSymbol(a),d=I(f,"resultGraphicEnabled")?f.resultGraphicEnabled:this.resultGraphicEnabled,n=I(f,"autoNavigate")?f.autoNavigate:this.autoNavigate,y=I(f,"popupEnabled")?f.popupEnabled:this.popupEnabled,C=y?k||this.popupTemplate:null,m=a.feature;if(!m)return k=new e("select:missing-feature","Cannot select without a feature.",{feature:m}),
K.error(k),x.reject(k);var g=m.attributes,v=m.geometry,z=m.layer,u=m.sourceLayer,w=P.getPointFromGeometry(v),k={layerViewQuery:this._getLayerView(m),elevationQuery:l&&t.isSome(w)?P.getPointWithElevation(w,l).catch(function(){return w}):x.resolve(w)};return x.eachAlways(k).then(function(e){var k=e.layerViewQuery.value,M=e.elevationQuery.value;r instanceof F&&(r.text=a.name);e=l&&n?b._getGoToTarget(a,f):null;return(t.isSome(e)?b._goToSearchResult(e):x.resolve()).then(function(){var e=k?m:new h({geometry:v,
symbol:r,attributes:g,layer:z,sourceLayer:u,popupTemplate:C}),t=y&&b.get("view.popup");(t=t&&e.getEffectivePopupTemplate(t.defaultPopupTemplateEnabled))&&l.popup.open({features:[e],location:M});k&&H.hasHighlight(k)&&!t&&b._highlightFeature({graphic:e,layerView:k});!k&&d&&l&&l.graphics.push(e);b._set("selectedResult",a);b._set("resultGraphic",e);b.emit("select-result",{result:a,source:f,sourceIndex:c});return a})})};a.prototype.suggest=function(a,b,e){var k=this,l=a||this.searchTerm;this.emit("suggest-start",
{searchTerm:l});return this._suggestTimer(b,e).then(function(){return k._suggestImmediate(l,e).then(function(a){k._set("suggestions",a.results);k.emit("suggest-complete",a);return a})})};a.prototype._loadPortal=function(){var a=this.portal;this.includeDefaultSources&&a&&!a.loaded&&a.load()};a.prototype._clearLoadingDefaultSources=function(){this._loadingDefaultSources=null;this.notifyChange("state")};a.prototype._clearSearching=function(){this._searching=null;this.notifyChange("state")};a.prototype._convertHelperServices=
function(){var a=this.get("portal.helperServices.geocode");return a?a.map(function(a){if(!1!==a.placefinding&&(a=Q.fromJSON(a),L.isArcGISWorldGeocoder(a.get("locator.url"))&&a.set({singleLineFieldName:"SingleLine",outFields:["Addr_type","Match_addr","StAddr","City"],placeholder:f.placeholder,defaultZoomScale:2500}),a.singleLineFieldName))return a}).filter(Boolean):[]};a.prototype._convertApplicationProperties=function(){var a=this,b=this.get("view.map.applicationProperties.viewing.search"),e=this.get("view.map");
if(!e||!b)return[];var k=b.hintText;return b.enabled?b.layers.map(function(b){var l=e.findLayerById(b.id);if(l){b=a._getLayerJSON(b);var c=O.fromJSON(b);c.placeholder=k;a._getLayer(l,b).then(function(a){c.layer=a});return c}}).filter(Boolean):[]};a.prototype._getSubLayer=function(a,b){return a&&a.allSublayers?(a=a.allSublayers.find(function(a){return a.id===b.subLayer}))?a.createFeatureLayer():x.reject():x.reject()};a.prototype._getLayer=function(a,b){var k=this;if("feature"===a.type||"scene"===a.type)return x.resolve(a);
if("map-image"===a.type)return a.load().then(function(){return k._getSubLayer(a,b).catch(function(){var b=new e("search:create-featurelayer","Could not create a FeatureLayer from the MapImageLayer",{layer:a});K.error(b);return null})})};a.prototype._getLayerJSON=function(a){return"function"===typeof a.toJSON?a.toJSON():a};a.prototype._updateDefaultSources=function(){var a=this.defaultSources,b=this.includeDefaultSources;a.removeAll();b&&a.addMany(this._convertApplicationProperties().concat(this._convertHelperServices()));
this.notifyChange("allSources")};a.prototype._abortGoTo=function(){this._gotoController&&this._gotoController.abort();this._gotoController=null};a.prototype._clear=function(){this._abortGoTo();this._set("results",null);this._set("suggestions",null);this._set("selectedResult",null);this._set("selectedSuggestion",null);this.emit("search-clear")};a.prototype._closePopup=function(){var a=this.get("view.popup"),b=this.resultGraphic;if(a&&b){var e=a.selectedFeature;e&&e===b&&a.close()}};a.prototype._suggestTimer=
function(a,b){return x.after(null!=a?a:this.suggestionDelay,null,b&&b.signal)};a.prototype._createLocationForSearch=function(a){return a instanceof h?P.getPointFromGeometry(a.geometry):a instanceof v?a:Array.isArray(a)&&2===a.length?new v({longitude:a[0],latitude:a[1]}):null};a.prototype._createSuggestionForSearch=function(a){if(a&&I(a,"key")&&I(a,"text")&&I(a,"sourceIndex"))return a;var b=this._createLocationForSearch(a),e="string"===typeof a?a:this.searchTerm,k=this.selectedSuggestion,l=this.selectedResult,
c=(a=!a&&k&&l)&&k.location;return a&&k.key===l.key&&k.sourceIndex===l.sourceIndex||c?k:{location:t.unwrap(b),text:b?"":e,sourceIndex:null,key:null}};a.prototype._getFirstResult=function(a){var b=null;a&&a.some(function(a){a=a.results[0];var e=!!a;e&&(b=a);return e});return b};a.prototype._selectFirstResult=function(a){return this.autoSelect&&a?this.select(a):x.resolve()};a.prototype._suggestImmediate=function(a,b){var e=this;return this._whenViewAndPortalLoaded().then(function(){return e._getSuggestionsFromSources(a,
b)}).then(function(b){var k={activeSourceIndex:e.activeSourceIndex,searchTerm:a,numResults:0,numErrors:0,errors:[],results:[]};e._formatResponse(k,b);return k})};a.prototype._formatSourceResponse=function(a,b,e){var k=b&&b.value||[];b=b&&b.error;var l=this.allSources.getItemAt(e);b?(a.errors.push({sourceIndex:e,source:l,error:b}),a.numErrors++):(a.results.push({sourceIndex:e,source:l,results:k}),a.numResults+=k.length)};a.prototype._formatResponse=function(a,b,e){var k=this;if(b)if(-1===a.activeSourceIndex){var l=
e&&I(e,"sourceIndex")&&-1!==e.sourceIndex?e.sourceIndex:void 0;b.forEach(function(b,e){k._formatSourceResponse(a,b,void 0!==l?l:e)})}else this._formatSourceResponse(a,b[0],a.activeSourceIndex)};a.prototype._getResultsFromSources=function(a,b){var k=this,l=this.allSources,c=!a.location&&I(a,"sourceIndex")?a.sourceIndex:this.activeSourceIndex,f=[];if(!l.length)return l=new e("search:no-sources-defined","At least one source is required.",{allSources:l}),K.error(l),x.reject(l);-1===c?l.forEach(function(e,
l){f.push(k._getResultsFromSource(a,l,b))}):f.push(this._getResultsFromSource(a,c,b));return x.eachAlways(f)};a.prototype._getSuggestionsFromSources=function(a,b){var k=this,l=this.allSources,c=this.activeSourceIndex,f=[];if(!l.length)return l=new e("suggest:no-sources-defined","At least one source is required.",{allSources:l}),K.error(l),x.reject(l);-1===c?l.forEach(function(e,l){f.push(k._getSuggestionsFromSource(a,l,b))}):f.push(this._getSuggestionsFromSource(a,c,b));return x.eachAlways(f)};a.prototype._getResultsFromSource=
function(a,b,e){var k=this.allSources.getItemAt(b),l=a.location,l=void 0===l?null:l,c=this.get("view.spatialReference")||T,f=I(k,"maxResults")?k.maxResults:this.maxResults,r=k instanceof O&&I(k,"exactMatch")?k.exactMatch:!1;return k.getResults({view:this.view,sourceIndex:b,location:l,suggestResult:a,spatialReference:c,exactMatch:r,maxResults:f},e)};a.prototype._getSuggestionsFromSource=function(a,b,e){var k=this.allSources.getItemAt(b),l=I(k,"suggestionsEnabled")?k.suggestionsEnabled:this.suggestionsEnabled,
c=a.length,f=I(k,"minSuggestCharacters")?k.minSuggestCharacters:this.minSuggestCharacters;return l&&a.trim()&&c>=f?(l=this.get("view.spatialReference")||T,c=I(k,"maxSuggestions")?k.maxSuggestions:this.maxSuggestions,k.getSuggestions({view:this.view,sourceIndex:b,suggestTerm:a,spatialReference:l,maxSuggestions:c},e)):x.resolve()};a.prototype.createDefaultSymbol=function(a,b){if("point"===b)return new G({color:a.color,size:a.size,outline:{color:a.outline.color,width:a.outline.width}});if("polyline"===
b)return new E({color:a.color,width:a.width});if("polygon"===b)return new J({color:a.color,outline:{color:a.outline.color,width:a.outline.width}})};a.prototype._getLayerSourcePopupTemplate=function(a){var b=a.layer;if(b)return I(a,"popupTemplate")?a.popupTemplate:b.popupTemplate};a.prototype._getSourceIndexOfResult=function(a){var b=null;this.results.some(function(e){return e.results.some(function(k){return k===a?(b=e.sourceIndex,!0):!1})});return b};a.prototype._getGoToTarget=function(a,b){var e=
a.extent;a=a.feature;return b instanceof O?a||e:e||a};a.prototype._goToSearchResult=function(a){return c(this,void 0,void 0,function(){var b,e,k;return m(this,function(l){switch(l.label){case 0:return b=!!a,this._abortGoTo(),this._gotoController=e=x.createAbortController(),k={target:{target:a},options:{animate:b,signal:e.signal}},[4,this.callGoTo(k)];case 1:return l.sent(),this._gotoController=null,[2]}})})};a.prototype._whenViewAndPortalLoaded=function(){var a=this.includeDefaultSources,b=this.portal,
e=this.view,e=e?e.when():x.resolve(),a=b&&a?b.when():x.resolve();return x.eachAlways([e,a]).then(function(){})};a.prototype._loadDefaultSources=function(){return c(this,void 0,void 0,function(){var a,b,e=this;return m(this,function(k){switch(k.label){case 0:return this._loadingDefaultSources=b=(a=this.includeDefaultSources)?this._whenViewAndPortalLoaded():x.resolve(),this.notifyChange("state"),[4,b.catch(function(){}).then(function(){e._loadingDefaultSources===b&&(e._clearLoadingDefaultSources(),
e._updateDefaultSources())})];case 1:return k.sent(),[2]}})})};a.prototype._getDefaultSymbol=function(a){var b=this.get("view.map.basemap.id");a=t.get(a,"feature","geometry","type");return t.isSome(a)&&(b=(b=B.getSchemes({theme:"default",basemap:b,geometryType:a})||B.getSchemes({theme:"default",basemap:"topo",geometryType:a}))&&b.primaryScheme)?(b.color&&I(b,"opacity")&&(b.color.a=b.opacity),this.createDefaultSymbol(b,a)):this.defaultSymbol};a.prototype._removeHighlight=function(){this._handles.remove("highlight")};
a.prototype._getLayerView=function(a){return c(this,void 0,void 0,function(){var b,e;return m(this,function(k){switch(k.label){case 0:b=this.view;if(!a||!b)return[2,x.resolve(null)];e=a.layer;return[4,b.when()];case 1:return k.sent(),[2,b.whenLayerView(e)]}})})};a.prototype._highlightFeature=function(a){var b=a.graphic,e=b.attributes,k=b.layer.objectIdField;a=a.layerView.highlight(e&&e[k]||b);this._handles.add(a,"highlight")};a.ALL_INDEX=-1;d([u.property({readOnly:!0,dependsOn:["activeSourceIndex",
"allSources.length"],value:null})],a.prototype,"activeSource",null);d([u.property({dependsOn:["allSources.length","searchAllEnabled"]})],a.prototype,"activeSourceIndex",null);d([u.property()],a.prototype,"allPlaceholder",void 0);d([u.property({dependsOn:["defaultSources.length","sources.length","includeDefaultSources"],readOnly:!0})],a.prototype,"allSources",null);d([u.property()],a.prototype,"autoNavigate",void 0);d([u.property()],a.prototype,"autoSelect",void 0);d([u.property({readOnly:!0})],a.prototype,
"defaultSources",void 0);d([u.property()],a.prototype,"defaultSymbol",void 0);d([u.property()],a.prototype,"includeDefaultSources",void 0);d([u.property()],a.prototype,"locationEnabled",null);d([u.property()],a.prototype,"maxInputLength",void 0);d([u.property()],a.prototype,"maxResults",void 0);d([u.property()],a.prototype,"maxSuggestions",void 0);d([u.property()],a.prototype,"minSuggestCharacters",void 0);d([u.property({readOnly:!0,dependsOn:["activeSourceIndex","activeSource.placeholder","allPlaceholder",
"allSources"]})],a.prototype,"placeholder",null);d([u.property()],a.prototype,"popupEnabled",void 0);d([u.property({type:n})],a.prototype,"popupTemplate",void 0);d([u.property({type:D})],a.prototype,"portal",void 0);d([u.property()],a.prototype,"resultGraphicEnabled",void 0);d([u.property({readOnly:!0})],a.prototype,"resultGraphic",void 0);d([u.property({readOnly:!0})],a.prototype,"results",void 0);d([u.property({readOnly:!0})],a.prototype,"selectedSuggestion",void 0);d([u.property()],a.prototype,
"searchAllEnabled",void 0);d([u.property({readOnly:!0})],a.prototype,"selectedResult",void 0);d([u.property()],a.prototype,"searchTerm",null);d([u.property({type:S})],a.prototype,"sources",void 0);d([u.property({readOnly:!0,dependsOn:["allSources.length"]})],a.prototype,"state",null);d([u.property()],a.prototype,"suggestionDelay",void 0);d([u.property({readOnly:!0})],a.prototype,"suggestions",void 0);d([u.property()],a.prototype,"suggestionsEnabled",void 0);d([u.property()],a.prototype,"view",void 0);
d([u.property()],a.prototype,"clear",null);return a=d([u.subclass("esri.widgets.Search.SearchViewModel")],a)}(u.declared(R.GoToMixin(l.EventedMixin(a))))})},"esri/core/geolocationUtils":function(){define("require exports ./tsSupport/assignHelper ../config ./Error ./has ./Logger ./promiseUtils ../geometry/Point ../geometry/support/webMercatorUtils ../portal/Portal ../tasks/GeometryService ../tasks/support/ProjectParameters".split(" "),function(q,g,p,d,m,c,f,h,n,a,b,e,l){function k(b,k,c){if(!k)return h.resolve(b);
var f=k.spatialReference;return f.isWGS84?h.resolve(b):f.isWebMercator?h.resolve(a.geographicToWebMercator(b)):r(c).then(function(a){if(!a)throw new m("geometry-service:missing-url","Geometry service URL is missing");a=new e({url:a});var k=new l({geometries:[b],outSR:f});return a.project(k,c).then(function(a){return a[0]})})}function r(a){if(d.geometryServiceUrl)return h.resolve(d.geometryServiceUrl);var e=b.getDefault();return e.load(a).catch(function(){}).then(function(){return e.get("helperServices.geometry.url")})}
Object.defineProperty(g,"__esModule",{value:!0});var C=f.getLogger("esri.core.geolocationUtils"),y={maximumAge:0,timeout:15E3,enableHighAccuracy:!0};g.supported=function(){var a=c("esri-geolocation");a||C.warn("geolocation-unsupported","Geolocation unsupported.");a&&((a=c("esri-secure-context"))||C.warn("insecure-context","Geolocation requires a secure origin."));return a};g.getCurrentPosition=function(a){a||(a=y);return h.create(function(b,e){setTimeout(function(){return e(new m("geolocation:timeout",
"getting the current geolocation position timed out"))},15E3);navigator.geolocation.getCurrentPosition(b,e,a)})};g.positionToPoint=function(a,b){var e=a.position;a=a.view;var l=e&&e.coords||{},l={accuracy:l.accuracy,altitude:l.altitude,altitudeAccuracy:l.altitudeAccuracy,heading:l.heading,latitude:l.latitude,longitude:l.longitude,speed:l.speed},e=e?{coords:l,timestamp:e.timestamp}:e;e=(e=e&&e.coords)?new n({longitude:e.longitude,latitude:e.latitude,z:e.altitude||null,spatialReference:{wkid:4326}}):
null;return k(e,a,b)}})},"esri/tasks/GeometryService":function(){define("../core/lang ../core/jsonMap ../core/accessorSupport/ensureType ../geometry/Extent ../geometry/Multipoint ../geometry/Polyline ../geometry/Polygon ../geometry/support/jsonUtils ../request ./Task ./support/ProjectParameters".split(" "),function(q,g,p,d,m,c,f,h,n,a,b){var e=new g.JSONMap({MGRS:"mgrs",USNG:"usng",UTM:"utm",GeoRef:"geo-ref",GARS:"gars",DMS:"dms",DDM:"ddm",DD:"dd"}),l=p.ensureType(b);g=a.createSubclass({declaredClass:"esri.tasks.GeometryService",
areasAndLengths:function(a,b){a={query:q.mixin({},this.parsedUrl.query,{f:"json"},a.toJSON())};if(this.requestOptions||b)a=q.mixin({},this.requestOptions,b,a);return n(this.parsedUrl.path+"/areasAndLengths",a).then(function(a){return a.data})},autoComplete:function(a,b,e){var k=a[0].spatialReference;a={query:q.mixin({},this.parsedUrl.query,{f:"json",sr:JSON.stringify(k.toJSON()),polygons:JSON.stringify(this._encodeGeometries(a).geometries),polylines:JSON.stringify(this._encodeGeometries(b).geometries)})};
if(this.requestOptions||e)a=q.mixin({},this.requestOptions,e,a);return n(this.parsedUrl.path+"/autoComplete",a).then(function(a){return(a.data.geometries||[]).map(function(a){return new f({spatialReference:k,rings:a.rings})})})},buffer:function(a,b){var e=q.mixin({},this.parsedUrl.query,{f:"json"},a.toJSON()),k=a.outSpatialReference||a.geometries[0].spatialReference;a={query:e};if(this.requestOptions||b)a=q.mixin({},this.requestOptions,b,a);return n(this.parsedUrl.path+"/buffer",a).then(function(a){return(a.data.geometries||
[]).map(function(a){return new f({spatialReference:k,rings:a.rings})})})},cut:function(a,b,e){var k=a[0].spatialReference,l=a.map(function(a){return a.toJSON()});a={query:q.mixin({},this.parsedUrl.query,{f:"json",sr:JSON.stringify(k.toJSON()),target:JSON.stringify({geometryType:h.getJsonType(a[0]),geometries:l}),cutter:JSON.stringify(b.toJSON())})};if(this.requestOptions||e)a=q.mixin({},this.requestOptions,e,a);return n(this.parsedUrl.path+"/cut",a).then(function(a){a=a.data;return{cutIndexes:a.cutIndexes,
geometries:(a.geometries||[]).map(function(a){return h.fromJSON(a).set("spatialReference",k)})}})},convexHull:function(a,b){var e=a[0].spatialReference;a={query:q.mixin({},this.parsedUrl.query,{f:"json",sr:JSON.stringify(e.toJSON()),geometries:JSON.stringify(this._encodeGeometries(a))})};if(this.requestOptions||b)a=q.mixin({},this.requestOptions,b,a);return n(this.parsedUrl.path+"/convexHull",a).then(function(a){return h.fromJSON(a.data.geometry).set("spatialReference",e)})},densify:function(a,b){var e=
q.mixin({},this.parsedUrl.query,{f:"json"},a.toJSON()),k=a.geometries[0].spatialReference;a={query:e};if(this.requestOptions||b)a=q.mixin({},this.requestOptions,b,a);return n(this.parsedUrl.path+"/densify",a).then(function(a){return(a.data.geometries||[]).map(function(a){return h.fromJSON(a).set("spatialReference",k)})})},difference:function(a,b,e){var k=a[0].spatialReference;a={query:q.mixin({},this.parsedUrl.query,{f:"json",sr:JSON.stringify(k.toJSON()),geometries:JSON.stringify(this._encodeGeometries(a)),
geometry:JSON.stringify({geometryType:h.getJsonType(b),geometry:b.toJSON()})})};if(this.requestOptions||e)a=q.mixin({},this.requestOptions,e,a);return n(this.parsedUrl.path+"/difference",a).then(function(a){return(a.data.geometries||[]).map(function(a){return h.fromJSON(a).set("spatialReference",k)})})},distance:function(a,b){a={query:q.mixin({},this.parsedUrl.query,{f:"json"},a.toJSON())};if(this.requestOptions||b)a=q.mixin({},this.requestOptions,b,a);return n(this.parsedUrl.path+"/distance",a).then(this._handleDistanceResponse)},
fromGeoCoordinateString:function(a,b){var k={};k.sr=null!=a.sr&&"object"===typeof a.sr?a.sr.wkid||JSON.stringify(a.sr):a.sr;k.strings=JSON.stringify(a.strings);k.conversionType=e.toJSON(a.conversionType||"mgrs");k.conversionMode=a.conversionMode;a={query:q.mixin({},this.parsedUrl.query,{f:"json"},k)};if(this.requestOptions||b)a=q.mixin({},this.requestOptions,b,a);return n(this.parsedUrl.path+"/fromGeoCoordinateString",a).then(this._handleFromGeoCoordinateResponse)},generalize:function(a,b){var e=
q.mixin({},this.parsedUrl.query,{f:"json"},a.toJSON()),k=a.geometries[0].spatialReference;a={query:e};if(this.requestOptions||b)a=q.mixin({},this.requestOptions,b,a);return n(this.parsedUrl.path+"/generalize",a).then(function(a){return(a.data.geometries||[]).map(function(a){return h.fromJSON(a).set("spatialReference",k)})})},intersect:function(a,b,e){var k=a[0].spatialReference;a={query:q.mixin({},this.parsedUrl.query,{f:"json",sr:JSON.stringify(k.toJSON()),geometries:JSON.stringify(this._encodeGeometries(a)),
geometry:JSON.stringify({geometryType:h.getJsonType(b),geometry:b.toJSON()})})};if(this.requestOptions||e)a=q.mixin({},this.requestOptions,e,a);return n(this.parsedUrl.path+"/intersect",a).then(function(a){return(a.data.geometries||[]).map(function(a){return h.fromJSON(a).set("spatialReference",k)})})},lengths:function(a,b){a={query:q.mixin({},this.parsedUrl.query,{f:"json"},a.toJSON())};if(this.requestOptions||b)a=q.mixin({},this.requestOptions,b,a);return n(this.parsedUrl.path+"/lengths",a).then(function(a){return a.data})},
labelPoints:function(a,b){var e=a.map(function(a){return a.toJSON()}),k=a[0].spatialReference;a={query:q.mixin({},this.parsedUrl.query,{f:"json",sr:k.wkid?k.wkid:JSON.stringify(k.toJSON()),polygons:JSON.stringify(e)})};if(this.requestOptions||b)a=q.mixin({},this.requestOptions,b,a);return n(this.parsedUrl.path+"/labelPoints",a).then(function(a){return(a.data.labelPoints||[]).map(function(a){return h.fromJSON(a).set("spatialReference",k)})})},offset:function(a,b){var e=q.mixin({},this.parsedUrl.query,
{f:"json"},a.toJSON()),k=a.geometries[0].spatialReference;a={query:e};if(this.requestOptions||b)a=q.mixin({},this.requestOptions,b,a);return n(this.parsedUrl.path+"/offset",a).then(function(a){return(a.data.geometries||[]).map(function(a){return h.fromJSON(a).set("spatialReference",k)})})},project:function(a,b){a=l(a);var e=q.mixin({},a.toJSON(),this.parsedUrl.query,{f:"json"}),k=a.outSpatialReference,c=h.getJsonType(a.geometries[0]),f=this._decodeGeometries;a={query:e};if(this.requestOptions||b)a=
q.mixin({},this.requestOptions,b,a);return n(this.parsedUrl.path+"/project",a).then(function(a){return f(a.data,c,k)})},relation:function(a,b){a={query:q.mixin({},this.parsedUrl.query,{f:"json"},a.toJSON())};if(this.requestOptions||b)a=q.mixin({},this.requestOptions,b,a);return n(this.parsedUrl.path+"/relation",a).then(this._handleRelationResponse)},reshape:function(a,b,e){var k=a.spatialReference;a={query:q.mixin({},this.parsedUrl.query,{f:"json",sr:JSON.stringify(k.toJSON()),target:JSON.stringify({geometryType:h.getJsonType(a),
geometry:a.toJSON()}),reshaper:JSON.stringify(b.toJSON())})};if(this.requestOptions||e)a=q.mixin({},this.requestOptions,e,a);return n(this.parsedUrl.path+"/reshape",a).then(function(a){return h.fromJSON(a.data.geometry).set("spatialReference",k)})},simplify:function(a,b){var e=a[0].spatialReference,k=q.mixin({},this.parsedUrl.query,{f:"json",sr:e.wkid?e.wkid:JSON.stringify(e.toJSON()),geometries:JSON.stringify(this._encodeGeometries(a))}),l=h.getJsonType(a[0]),c=this._decodeGeometries;a={query:k};
if(this.requestOptions||b)a=q.mixin({},this.requestOptions,b,a);return n(this.parsedUrl.path+"/simplify",a).then(function(a){return c(a.data,l,e)})},toGeoCoordinateString:function(a,b){var k={};k.sr=null!=a.sr&&"object"===typeof a.sr?a.sr.wkid||JSON.stringify(a.sr):a.sr;k.coordinates=JSON.stringify(a.coordinates);k.conversionType=e.toJSON(a.conversionType||"mgrs");k.conversionMode=a.conversionMode;k.numOfDigits=a.numOfDigits;k.rounding=a.rounding;k.addSpaces=a.addSpaces;a={query:q.mixin({},this.parsedUrl.query,
{f:"json"},k)};if(this.requestOptions||b)a=q.mixin({},this.requestOptions,b,a);return n(this.parsedUrl.path+"/toGeoCoordinateString",a).then(this._handleToGeoCoordinateResponse)},trimExtend:function(a,b){var e=q.mixin({},this.parsedUrl.query,{f:"json"},a.toJSON()),k=a.sr;a={query:e};if(this.requestOptions||b)a=q.mixin({},this.requestOptions,b,a);return n(this.parsedUrl.path+"/trimExtend",a).then(function(a){return(a.data.geometries||[]).map(function(a){return new c({spatialReference:k,paths:a.paths})})})},
union:function(a,b){var e=a[0].spatialReference;a={query:q.mixin({},this.parsedUrl.query,{f:"json",sr:JSON.stringify(e.toJSON()),geometries:JSON.stringify(this._encodeGeometries(a))})};if(this.requestOptions||b)a=q.mixin({},this.requestOptions,b,a);return n(this.parsedUrl.path+"/union",a).then(function(a){return h.fromJSON(a.data.geometry).set("spatialReference",e)})},_handleRelationResponse:function(a){return a.data.relations},_handleDistanceResponse:function(a){return(a=a.data)&&a.distance},_handleToGeoCoordinateResponse:function(a){return a.data.strings},
_handleFromGeoCoordinateResponse:function(a){return a.data.coordinates},_encodeGeometries:function(a){var b=[],e,k=a.length;for(e=0;e<k;e++)b.push(a[e].toJSON());return{geometryType:h.getJsonType(a[0]),geometries:b}},_decodeGeometries:function(a,b,e){var k=h.getGeometryType(b);a=a.geometries;var l=[],c={spatialReference:e.toJSON()},f=q.mixin;a.forEach(function(a,b){l[b]=new k(f(a,c))});return l},_toProjectGeometry:function(a){var b=a.spatialReference.toJSON();return a instanceof d?new f({rings:[[[a.xmin,
a.ymin],[a.xmin,a.ymax],[a.xmax,a.ymax],[a.xmax,a.ymin],[a.xmin,a.ymin]]],spatialReference:b}):new c({paths:[[].concat(a.points)],spatialReference:b})},_fromProjectedGeometry:function(a,b,e){return"extent"===b?(a=a.rings[0],new d(a[0][0],a[0][1],a[2][0],a[2][1],e)):new m({points:a.paths[0],spatialReference:e.toJSON()})}});q.mixin(g,{UNIT_METER:9001,UNIT_GERMAN_METER:9031,UNIT_FOOT:9002,UNIT_SURVEY_FOOT:9003,UNIT_CLARKE_FOOT:9005,UNIT_FATHOM:9014,UNIT_NAUTICAL_MILE:9030,UNIT_SURVEY_CHAIN:9033,UNIT_SURVEY_LINK:9034,
UNIT_SURVEY_MILE:9035,UNIT_KILOMETER:9036,UNIT_CLARKE_YARD:9037,UNIT_CLARKE_CHAIN:9038,UNIT_CLARKE_LINK:9039,UNIT_SEARS_YARD:9040,UNIT_SEARS_FOOT:9041,UNIT_SEARS_CHAIN:9042,UNIT_SEARS_LINK:9043,UNIT_BENOIT_1895A_YARD:9050,UNIT_BENOIT_1895A_FOOT:9051,UNIT_BENOIT_1895A_CHAIN:9052,UNIT_BENOIT_1895A_LINK:9053,UNIT_BENOIT_1895B_YARD:9060,UNIT_BENOIT_1895B_FOOT:9061,UNIT_BENOIT_1895B_CHAIN:9062,UNIT_BENOIT_1895B_LINK:9063,UNIT_INDIAN_FOOT:9080,UNIT_INDIAN_1937_FOOT:9081,UNIT_INDIAN_1962_FOOT:9082,UNIT_INDIAN_1975_FOOT:9083,
UNIT_INDIAN_YARD:9084,UNIT_INDIAN_1937_YARD:9085,UNIT_INDIAN_1962_YARD:9086,UNIT_INDIAN_1975_YARD:9087,UNIT_FOOT_1865:9070,UNIT_RADIAN:9101,UNIT_DEGREE:9102,UNIT_ARCMINUTE:9103,UNIT_ARCSECOND:9104,UNIT_GRAD:9105,UNIT_GON:9106,UNIT_MICRORADIAN:9109,UNIT_ARCMINUTE_CENTESIMAL:9112,UNIT_ARCSECOND_CENTESIMAL:9113,UNIT_MIL6400:9114,UNIT_BRITISH_1936_FOOT:9095,UNIT_GOLDCOAST_FOOT:9094,UNIT_INTERNATIONAL_CHAIN:109003,UNIT_INTERNATIONAL_LINK:109004,UNIT_INTERNATIONAL_YARD:109001,UNIT_STATUTE_MILE:9093,UNIT_SURVEY_YARD:109002,
UNIT_50KILOMETER_LENGTH:109030,UNIT_150KILOMETER_LENGTH:109031,UNIT_DECIMETER:109005,UNIT_CENTIMETER:109006,UNIT_MILLIMETER:109007,UNIT_INTERNATIONAL_INCH:109008,UNIT_US_SURVEY_INCH:109009,UNIT_INTERNATIONAL_ROD:109010,UNIT_US_SURVEY_ROD:109011,UNIT_US_NAUTICAL_MILE:109012,UNIT_UK_NAUTICAL_MILE:109013,UNIT_SQUARE_INCHES:"esriSquareInches",UNIT_SQUARE_FEET:"esriSquareFeet",UNIT_SQUARE_YARDS:"esriSquareYards",UNIT_ACRES:"esriAcres",UNIT_SQUARE_MILES:"esriSquareMiles",UNIT_SQUARE_MILLIMETERS:"esriSquareMillimeters",
UNIT_SQUARE_CENTIMETERS:"esriSquareCentimeters",UNIT_SQUARE_DECIMETERS:"esriSquareDecimeters",UNIT_SQUARE_METERS:"esriSquareMeters",UNIT_ARES:"esriAres",UNIT_HECTARES:"esriHectares",UNIT_SQUARE_KILOMETERS:"esriSquareKilometers"});return g})},"esri/tasks/support/ProjectParameters":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/Logger ../../core/accessorSupport/decorators ../../geometry/support/jsonUtils".split(" "),
function(q,g,p,d,m,c,f,h){var n=c.getLogger("esri.tasks.support.ProjectParameters");return function(a){function b(b){b=a.call(this,b)||this;b.geometries=null;b.outSpatialReference=null;b.transformation=null;b.transformForward=null;return b}p(b,a);Object.defineProperty(b.prototype,"outSR",{get:function(){n.warn("ProjectParameters.outSR is deprecated. Use outSpatialReference instead.");return this.outSpatialReference},set:function(a){n.warn("ProjectParameters.outSR is deprecated. Use outSpatialReference instead.");
this.outSpatialReference=a},enumerable:!0,configurable:!0});b.prototype.toJSON=function(){var a=this.geometries.map(function(a){return a.toJSON()}),b=this.geometries[0],k={};k.outSR=this.outSpatialReference.wkid||JSON.stringify(this.outSpatialReference.toJSON());k.inSR=b.spatialReference.wkid||JSON.stringify(b.spatialReference.toJSON());k.geometries=JSON.stringify({geometryType:h.getJsonType(b),geometries:a});this.transformation&&(k.transformation=this.transformation.wkid||JSON.stringify(this.transformation));
null!=this.transformForward&&(k.transformForward=this.transformForward);return k};d([f.property()],b.prototype,"geometries",void 0);d([f.property({json:{read:{source:"outSR"}}})],b.prototype,"outSpatialReference",void 0);d([f.property({json:{read:!1}})],b.prototype,"outSR",null);d([f.property()],b.prototype,"transformation",void 0);d([f.property()],b.prototype,"transformForward",void 0);return b=d([f.subclass("esri.tasks.support.ProjectParameters")],b)}(f.declared(m.JSONSupport))})},"esri/styles/basic":function(){define(["../core/lang",
"../Color"],function(q,g){function p(c,f){var h;if(c)switch(h={},h.color=new g(c.color),f){case "point":h.outline={color:new g(c.outline.color),width:c.outline.width};h.size=c.size;break;case "polyline":h.width=c.width;break;case "polygon":h.outline={color:new g(c.outline.color),width:c.outline.width}}return h}var d={"default":{name:"default",label:"Default",description:"Default theme for basic visualization of features.",basemapGroups:{light:"streets gray topo terrain national-geographic oceans osm gray-vector streets-vector topo-vector streets-relief-vector streets-navigation-vector".split(" "),
dark:["satellite","hybrid","dark-gray","dark-gray-vector","streets-night-vector"]},pointSchemes:{light:{primary:{color:[77,77,77,1],outline:{color:[255,255,255,1],width:1},size:8},secondary:[{color:[226,119,40,1],outline:{color:[255,255,255,1],width:1},size:8},{color:[255,255,255,1],outline:{color:[51,51,51,1],width:1},size:8}]},dark:{primary:{color:[255,255,255,1],outline:{color:[26,26,26,1],width:1},size:8},secondary:[{color:[226,119,40,1],outline:{color:[255,255,255,1],width:1},size:8},{color:[26,
26,26,1],outline:{color:[178,178,178,1],width:1},size:8}]}},lineSchemes:{light:{primary:{color:[77,77,77,1],width:2},secondary:[{color:[226,119,40,1],width:2},{color:[255,255,255,1],width:2}]},dark:{primary:{color:[255,255,255,1],width:2},secondary:[{color:[226,119,40,1],width:2},{color:[26,26,26,1],width:2}]}},polygonSchemes:{light:{primary:{color:[227,139,79,.8],outline:{color:[255,255,255,1],width:1}},secondary:[{color:[128,128,128,.8],outline:{color:[255,255,255,1],width:1}},{color:[255,255,255,
.8],outline:{color:[128,128,128,1],width:1}}]},dark:{primary:{color:[227,139,79,.8],outline:{color:[51,51,51,1],width:1}},secondary:[{color:[178,178,178,.8],outline:{color:[51,51,51,1],width:1}},{color:[26,26,26,.8],outline:{color:[128,128,128,1],width:1}}]}}}},m={};(function(){var c,f,h,n,a,b,e,l;for(c in d)for(n in f=d[c],h=f.basemapGroups,a=m[c]={basemaps:[].concat(h.light).concat(h.dark),point:{},polyline:{},polygon:{}},h)for(b=h[n],e=0;e<b.length;e++)l=b[e],f.pointSchemes&&(a.point[l]=f.pointSchemes[n]),
f.lineSchemes&&(a.polyline[l]=f.lineSchemes[n]),f.polygonSchemes&&(a.polygon[l]=f.polygonSchemes[n])})();return{getAvailableThemes:function(c){var f=[],h,n,a;for(h in d)n=d[h],a=m[h],c&&a.basemaps&&-1===a.basemaps.indexOf(c)||f.push({name:n.name,label:n.label,description:n.description,basemaps:a.basemaps.slice(0)});return f},getSchemes:function(c){var f=c.basemap,h=c.geometryType;c=m[c.theme];var d;(c=(c=c&&c[h])&&c[f])&&(d={primaryScheme:p(c.primary,h),secondarySchemes:c.secondary.map(function(a){return p(a,
h)})});return d},cloneScheme:function(c){var f;c&&(f=q.mixin({},c),f.color&&(f.color=new g(f.color)),f.outline&&(f.outline={color:f.outline.color&&new g(f.outline.color),width:f.outline.width}));return f}}})},"esri/widgets/Search/LayerSearchSource":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/tsSupport/assignHelper ../../core/lang ../../core/accessorSupport/decorators ./SearchSource ./support/layerSearchUtils".split(" "),
function(q,g,p,d,m,c,f,h,n){return function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;b.displayField=null;b.exactMatch=null;b.orderByFields=null;b.searchFields=null;b.searchQueryParams=null;b.searchTemplate=null;b.suggestionTemplate=null;b.suggestQueryParams=null;b.getResults=function(a,e){return n.getResults(m({source:b},a),e)};b.getSuggestions=function(a,e){return n.getSuggestions(m({source:b},a),e)};return b}p(b,a);e=b;Object.defineProperty(b.prototype,"layer",{set:function(a){this._set("layer",
a);a&&a.load()},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"name",{get:function(){return this._getLayerTitle()||""},set:function(a){void 0===a?this._clearOverride("name"):this._override("name",a)},enumerable:!0,configurable:!0});b.prototype.clone=function(){return new e({autoNavigate:this.autoNavigate,filter:this.filter,maxResults:this.maxResults,maxSuggestions:this.maxSuggestions,minSuggestCharacters:this.minSuggestCharacters,outFields:this.outFields?c.clone(this.outFields):
null,placeholder:this.placeholder,popupEnabled:this.popupEnabled,prefix:this.prefix,resultGraphicEnabled:this.resultGraphicEnabled,resultSymbol:this.resultSymbol?this.resultSymbol.clone():null,searchExtent:this.searchExtent?this.searchExtent.clone():null,suggestionsEnabled:this.suggestionsEnabled,suffix:this.suffix,withinViewEnabled:this.withinViewEnabled,displayField:this.displayField,exactMatch:this.exactMatch,layer:this.layer,searchFields:this.searchFields?c.clone(this.searchFields):null,searchQueryParams:this.searchQueryParams?
c.clone(this.searchQueryParams):null,suggestionTemplate:this.suggestionTemplate,suggestQueryParams:this.suggestQueryParams?c.clone(this.suggestQueryParams):null,zoomScale:this.zoomScale})};b.prototype._getFirstStringField=function(){var a=this.layer,b="";a&&a.fields&&a.fields.some(function(a){return"string"===a.type?(b=a.name,!0):!1});return b};b.prototype._getDisplayField=function(){return this.displayField||this.layer.displayField||this._getFirstStringField()};b.prototype._getSearchFieldsString=
function(){var a=this.layer;return a.loaded?": "+(this.searchFields||[this._getDisplayField()]).map(function(b){var e=a.getField(b);return e&&e.alias||b}).join(", "):""};b.prototype._getLayerTitle=function(){var a=this.layer;if(a&&(a=a.title))return""+a+this._getSearchFieldsString()};var e;d([f.property({json:{read:{source:"field.name"},write:{target:"field.name"}}})],b.prototype,"displayField",void 0);d([f.property({json:{read:{source:"field.exactMatch"},write:{target:"field.exactMatch"}}})],b.prototype,
"exactMatch",void 0);d([f.property({value:null})],b.prototype,"layer",null);d([f.property({dependsOn:["layer.title","layer.loaded"]})],b.prototype,"name",null);d([f.property({type:[String],json:{write:!0}})],b.prototype,"orderByFields",void 0);d([f.property()],b.prototype,"searchFields",void 0);d([f.property()],b.prototype,"searchQueryParams",void 0);d([f.property()],b.prototype,"searchTemplate",void 0);d([f.property()],b.prototype,"suggestionTemplate",void 0);d([f.property()],b.prototype,"suggestQueryParams",
void 0);return b=e=d([f.subclass("esri.widgets.Search.LayerSearchSource")],b)}(f.declared(h))})},"esri/widgets/Search/SearchSource":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Identifiable ../../core/JSONSupport ../../core/accessorSupport/decorators".split(" "),function(q,g,p,d,m,c,f){return function(c){function h(a){a=c.call(this,a)||this;a.autoNavigate=null;a.filter=null;a.getResults=null;a.getSuggestions=null;a.maxResults=
null;a.maxSuggestions=null;a.minSuggestCharacters=null;a.outFields=null;a.placeholder="";a.popupEnabled=null;a.popupTemplate=null;a.prefix="";a.resultGraphicEnabled=null;a.resultSymbol=null;a.searchExtent=null;a.suggestionsEnabled=null;a.suffix="";a.withinViewEnabled=!1;a.zoomScale=null;return a}p(h,c);d([f.property()],h.prototype,"autoNavigate",void 0);d([f.property()],h.prototype,"filter",void 0);d([f.property()],h.prototype,"getResults",void 0);d([f.property()],h.prototype,"getSuggestions",void 0);
d([f.property()],h.prototype,"maxResults",void 0);d([f.property()],h.prototype,"maxSuggestions",void 0);d([f.property()],h.prototype,"minSuggestCharacters",void 0);d([f.property()],h.prototype,"outFields",void 0);d([f.property()],h.prototype,"placeholder",void 0);d([f.property()],h.prototype,"popupEnabled",void 0);d([f.property()],h.prototype,"popupTemplate",void 0);d([f.property()],h.prototype,"prefix",void 0);d([f.property()],h.prototype,"resultGraphicEnabled",void 0);d([f.property()],h.prototype,
"resultSymbol",void 0);d([f.property()],h.prototype,"searchExtent",void 0);d([f.property()],h.prototype,"suggestionsEnabled",void 0);d([f.property()],h.prototype,"suffix",void 0);d([f.property()],h.prototype,"withinViewEnabled",void 0);d([f.property()],h.prototype,"zoomScale",void 0);return h=d([f.subclass("esri.widgets.Search.SearchSource")],h)}(f.declared(m.IdentifiableMixin(c.JSONSupport)))})},"esri/widgets/Search/support/layerSearchUtils":function(){define("require exports dojo/date/locale ../../../intl ../../../core/Error ../../../core/lang ../../../core/Logger ../../../core/promiseUtils ../../../core/unitUtils ./geometryUtils".split(" "),
function(q,g,p,d,m,c,f,h,n,a){function b(a,b){var e=a.filter,k=a.searchExtent;b=b&&b.extent;a=a.withinViewEnabled&&b?b:void 0;return e&&e.geometry||k||a}function e(a){return a?a.load().then(h.resolve).catch(h.reject):h.resolve()}function l(a){return a&&!!a.get("capabilities.query.supportsPagination")}function k(a){var b="";a&&(a=a.fields)&&a.some(function(a){return"string"===a.type?(b=a.name,!0):!1});return b}function r(a,b){return a&&b?b.every(function(b){return!!a.getField(b)}):!1}function C(a){for(var b=
0;b<a.length;b++)if(255<a.charCodeAt(b))return!0;return!1}function y(a,b,e){var k=null;(a=a.codedValues)&&a.some(function(a){var l=a.name,l=e?l:l.toLowerCase();return(e?b:b.toLowerCase())===l?(k=a.code.toString(),!0):!1});return k}function t(a,b){return(b=b&&b.where)?"("+a+") AND ("+b+")":a}function x(a,b,e,k,l){var c=b.definitionExpression,f="";if(a){var h=D.test(b.url)&&C(a)?"N":"";e&&e.forEach(function(e){var c=b.getField(e);e=((e="function"===typeof b.getFieldDomain&&b.getFieldDomain(e))&&"coded-value"===
e.type?y(e,a,l):null)||a||null;if(null!==e){var d=c.type,c=c.name;"string"===d||"date"===d||"global-id"===d?l?c=t(c+" \x3d "+h+"'"+e+"'",k):(e=e.toUpperCase(),c=t("UPPER("+c+") LIKE "+h+"'%"+e+"%'",k)):"oid"===d||"small-integer"===d||"integer"===d||"single"===d||"double"===d?(e=Number(e),c=isNaN(e)?null:t(c+" \x3d "+e,k)):c=t(c+" \x3d "+e,k);c&&(f+=f?" OR ("+c+")":"("+c+")")}})}return c?"("+c+") AND ("+f+")":f}function z(a,b){var e=null;(a=a.codedValues)&&a.length&&a.some(function(a){return a.code===
b?(e=a.name,!0):!1});return e}function u(a,b,e){var k=a.layer,l=a.attributes,c="function"===typeof k.getFieldDomain&&k.getFieldDomain(e);return b?d.substitute(b,l):e&&a.hasOwnProperty("attributes")&&l.hasOwnProperty(e)?(a=l[e],e=k.getField(e),c&&"coded-value"===c.type?z(c,a):e&&"date"===e.type?p.format(new Date(a)):"number"===typeof a?a.toString():"string"!==typeof a?"":a.trim()):""}function v(a,b,e,k){return a.features.map(function(a){var l=a.attributes[a.layer.objectIdField];return{text:u(a,b.suggestionTemplate,
k),key:l,sourceIndex:e}})}function w(b,e,k,l,f,h,d){return b.features.map(function(b){var r=b.clone(),t=b.layer,t=(t=t&&t.objectIdField)&&b.attributes[t];b=u(b,k.searchTemplate,f);var n=a.createExtentFromGeometry(r.geometry,e,h);return{extent:d?a.scaleExtent(c.clone(n),e,d):n,feature:r,key:t,name:b,sourceIndex:l}})}Object.defineProperty(g,"__esModule",{value:!0});var D=/https?:\/\/services.*\.arcgis\.com/i,B=/(?:\{([^}]+)\})/g,A=f.getLogger("esri.widgets.Search.support.layerSearchUtils");g.getResults=
function(a,c){var f=a.exactMatch,h=void 0===f?!1:f,d=a.location,t=a.maxResults,y=a.spatialReference,C=a.source,g=a.sourceIndex,v=a.suggestResult,z=a.view,u=C.layer,D=C.filter,p=C.zoomScale,B=z&&z.scale,q=b(C,z),J=c&&c.signal;return e(u).then(function(){var a=u.popupTemplate;return a?a.getRequiredFields(u.fields):null}).then(function(a){var b=u.objectIdField,e=u.returnZ,c=C.displayField||C.layer.displayField||k(C.layer);if(!u.getField(c))throw A.error("invalid-field: displayField is invalid."),new m("getResults():invalid-field",
"displayField is invalid.");a=a&&a.length?a:[c];var f=(a=C.outFields||a)&&-1!==a.indexOf("*");-1!==a.indexOf(b)||f||a.push(b);if(!f&&!r(u,a))throw A.error("invalid-field: outField is invalid."),new m("getResults():invalid-field","outField is invalid.");var b=u.createQuery(),f=C.orderByFields,W=C.searchQueryParams;W&&b.set(W);f&&(b.orderByFields=f);y&&(b.outSpatialReference=y,f=1/n.getMetersPerUnitForSR(y))&&(b.maxAllowableOffset=f);f=!!u.get("capabilities.data.supportsZ");b.returnZ=f&&!1!==e;b.returnGeometry=
!0;a&&(b.outFields=a);if(d)b.geometry=d;else if(v.key)b.objectIds=[parseInt(v.key,10)];else{e=C.searchFields||[c];if(!r(u,e))throw A.error("invalid-field: search field is invalid."),new m("getResults():invalid-field","search field is invalid.");l(u)&&(b.num=t);q&&(b.geometry=q);if(!v.text.trim())return[];a=C.prefix;f=C.suffix;a=(""+(void 0===a?"":a)+v.text+(void 0===f?"":f)).replace(/\'/g,"''");e=x(a,u,e,D,h);if(!e)return[];b.where=e}return u.queryFeatures(b,{signal:J}).then(function(a){return w(a,
z,C,g,c,B,p)})})};g.getSuggestions=function(a,c){var f=a.source,h=a.spatialReference,d=a.suggestTerm,t=a.maxSuggestions,n=a.sourceIndex,y=f.layer,C=f.filter,g=c&&c.signal,z=b(f,a.view);return e(y).then(function(){if(!l(y))return[];var a=f.displayField||f.layer.displayField||k(f.layer),b=f.searchFields||[a],e=[];f.suggestionTemplate?f.suggestionTemplate.replace(B,function(a,b){e.push(b);return a}):e.push(a);var c=e&&-1!==e.indexOf("*");-1!==e.indexOf(y.objectIdField)||c||e.push(y.objectIdField);var u=
!!y.getField(a),c=c||r(y,e),w=r(y,b);if(!u)throw A.error("invalid-field: displayField is invalid."),new m("getSuggestions():invalid-field","displayField is invalid.");if(!c)throw A.error("invalid-field: outField is invalid."),new m("getSuggestions():invalid-field","outField is invalid.");if(!w)throw A.error("invalid-field: search field is invalid."),new m("getSuggestions():invalid-field","search field is invalid.");u=y.createQuery();c=f.orderByFields;(w=f.suggestQueryParams)&&u.set(w);c&&(u.orderByFields=
c);u.outSpatialReference=h;u.returnGeometry=!1;u.num=t;u.outFields=e;z&&(u.geometry=z);if(!d.trim())return[];c=f.prefix;w=f.suffix;c=(""+(void 0===c?"":c)+d+(void 0===w?"":w)).replace(/\'/g,"''");b=x(c,y,b,C,!1);if(!b)return[];u.where=b;return y.queryFeatures(u,{signal:g}).then(function(b){return v(b,f,n,a)})})}})},"dojo/date/locale":function(){define("../_base/lang ../_base/array ../date ../cldr/supplemental ../i18n ../regexp ../string ../i18n!../cldr/nls/gregorian module".split(" "),function(q,
g,p,d,m,c,f,h,n){function a(a,b,e,k){return k.replace(/([a-z])\1*/ig,function(c){var h,r,t=c.charAt(0);c=c.length;var n=["abbr","wide","narrow"];switch(t){case "G":h=b[4>c?"eraAbbr":"eraNames"][0>a.getFullYear()?0:1];break;case "y":h=a.getFullYear();switch(c){case 1:break;case 2:if(!e.fullYear){h=String(h);h=h.substr(h.length-2);break}default:r=!0}break;case "Q":case "q":h=Math.ceil((a.getMonth()+1)/3);r=!0;break;case "M":case "L":h=a.getMonth();3>c?(h+=1,r=!0):(t=["months","L"==t?"standAlone":"format",
n[c-3]].join("-"),h=b[t][h]);break;case "w":h=l._getWeekOfYear(a,0);r=!0;break;case "d":h=a.getDate();r=!0;break;case "D":h=l._getDayOfYear(a);r=!0;break;case "e":case "c":if(h=a.getDay(),2>c){h=(h-d.getFirstDayOfWeek(e.locale)+8)%7;break}case "E":h=a.getDay();3>c?(h+=1,r=!0):(t=["days","c"==t?"standAlone":"format",n[c-3]].join("-"),h=b[t][h]);break;case "a":t=12>a.getHours()?"am":"pm";h=e[t]||b["dayPeriods-format-wide-"+t];break;case "h":case "H":case "K":case "k":r=a.getHours();switch(t){case "h":h=
r%12||12;break;case "H":h=r;break;case "K":h=r%12;break;case "k":h=r||24}r=!0;break;case "m":h=a.getMinutes();r=!0;break;case "s":h=a.getSeconds();r=!0;break;case "S":h=Math.round(a.getMilliseconds()*Math.pow(10,c-3));r=!0;break;case "v":case "z":if(h=l._getZone(a,!0,e))break;c=4;case "Z":t=l._getZone(a,!1,e);t=[0>=t?"+":"-",f.pad(Math.floor(Math.abs(t)/60),2),f.pad(Math.abs(t)%60,2)];4==c&&(t.splice(0,0,"GMT"),t.splice(3,0,":"));h=t.join("");break;default:throw Error("dojo.date.locale.format: invalid pattern char: "+
k);}r&&(h=f.pad(h,c));return h})}function b(a,b,e,k){var c=function(a){return a};b=b||c;e=e||c;k=k||c;var l=a.match(/(''|[^'])+/g),f="'"==a.charAt(0);g.forEach(l,function(a,k){a?(l[k]=(f?e:b)(a.replace(/''/g,"'")),f=!f):l[k]=""});return k(l.join(""))}function e(a,b,e,l){l=c.escapeString(l);e.strict||(l=l.replace(" a"," ?a"));return l.replace(/([a-z])\1*/ig,function(c){var l;l=c.charAt(0);var f=c.length,h="",d="";e.strict?(1<f&&(h="0{"+(f-1)+"}"),2<f&&(d="0{"+(f-2)+"}")):(h="0?",d="0{0,2}");switch(l){case "y":l=
"\\d{2,4}";break;case "M":case "L":2<f?(l=b["months-"+("L"==l?"standAlone":"format")+"-"+k[f-3]].slice(0).join("|"),e.strict||(l=l.replace(/\./g,""),l="(?:"+l+")\\.?")):l="1[0-2]|"+h+"[1-9]";break;case "D":l="[12][0-9][0-9]|3[0-5][0-9]|36[0-6]|"+h+"[1-9][0-9]|"+d+"[1-9]";break;case "d":l="3[01]|[12]\\d|"+h+"[1-9]";break;case "w":l="[1-4][0-9]|5[0-3]|"+h+"[1-9]";break;case "E":case "e":case "c":l=".+?";break;case "h":l="1[0-2]|"+h+"[1-9]";break;case "k":l="1[01]|"+h+"\\d";break;case "H":l="1\\d|2[0-3]|"+
h+"\\d";break;case "K":l="1\\d|2[0-4]|"+h+"[1-9]";break;case "m":case "s":l="[0-5]\\d";break;case "S":l="\\d{"+f+"}";break;case "a":f=e.am||b["dayPeriods-format-wide-am"];h=e.pm||b["dayPeriods-format-wide-pm"];l=f+"|"+h;e.strict||(f!=f.toLowerCase()&&(l+="|"+f.toLowerCase()),h!=h.toLowerCase()&&(l+="|"+h.toLowerCase()),-1!=l.indexOf(".")&&(l+="|"+l.replace(/\./g,"")));l=l.replace(/\./g,"\\.");break;default:l=".*"}a&&a.push(c);return"("+l+")"}).replace(/[\xa0 ]/g,"[\\s\\xa0]")}var l={};q.setObject(n.id.replace(/\//g,
"."),l);l._getZone=function(a,b,e){return b?p.getTimezoneName(a):a.getTimezoneOffset()};l.format=function(e,k){k=k||{};var c=m.normalizeLocale(k.locale),f=k.formatLength||"short",c=l._getGregorianBundle(c),h=[];e=q.hitch(this,a,e,c,k);if("year"==k.selector)return b(c["dateFormatItem-yyyy"]||"yyyy",e);var d;"date"!=k.selector&&(d=k.timePattern||c["timeFormat-"+f])&&h.push(b(d,e));"time"!=k.selector&&(d=k.datePattern||c["dateFormat-"+f])&&h.push(b(d,e));return 1==h.length?h[0]:c["dateTimeFormat-"+f].replace(/\'/g,
"").replace(/\{(\d+)\}/g,function(a,b){return h[b]})};l.regexp=function(a){return l._parseInfo(a).regexp};l._parseInfo=function(a){a=a||{};var k=m.normalizeLocale(a.locale),k=l._getGregorianBundle(k),c=a.formatLength||"short",f=a.datePattern||k["dateFormat-"+c],h=a.timePattern||k["timeFormat-"+c],c="date"==a.selector?f:"time"==a.selector?h:k["dateTimeFormat-"+c].replace(/\{(\d+)\}/g,function(a,b){return[h,f][b]}),d=[];return{regexp:b(c,q.hitch(this,e,d,k,a)),tokens:d,bundle:k}};l.parse=function(a,
b){var e=/[\u200E\u200F\u202A\u202E]/g,k=l._parseInfo(b),c=k.tokens,f=k.bundle;a=(new RegExp("^"+k.regexp.replace(e,"")+"$",k.strict?"":"i")).exec(a&&a.replace(e,""));if(!a)return null;var h=["abbr","wide","narrow"],d=[1970,0,1,0,0,0,0],r="";a=g.every(a,function(a,e){if(!e)return!0;var k=c[e-1];e=k.length;k=k.charAt(0);switch(k){case "y":if(2!=e&&b.strict)d[0]=a;else if(100>a)a=Number(a),k=""+(new Date).getFullYear(),e=100*k.substring(0,2),k=Math.min(Number(k.substring(2,4))+20,99),d[0]=a<k?e+a:e-
100+a;else{if(b.strict)return!1;d[0]=a}break;case "M":case "L":if(2<e){if(e=f["months-"+("L"==k?"standAlone":"format")+"-"+h[e-3]].concat(),b.strict||(a=a.replace(".","").toLowerCase(),e=g.map(e,function(a){return a.replace(".","").toLowerCase()})),a=g.indexOf(e,a),-1==a)return!1}else a--;d[1]=a;break;case "E":case "e":case "c":e=f["days-"+("c"==k?"standAlone":"format")+"-"+h[e-3]].concat();b.strict||(a=a.toLowerCase(),e=g.map(e,function(a){return a.toLowerCase()}));a=g.indexOf(e,a);if(-1==a)return!1;
break;case "D":d[1]=0;case "d":d[2]=a;break;case "a":e=b.am||f["dayPeriods-format-wide-am"];k=b.pm||f["dayPeriods-format-wide-pm"];if(!b.strict){var l=/\./g;a=a.replace(l,"").toLowerCase();e=e.replace(l,"").toLowerCase();k=k.replace(l,"").toLowerCase()}if(b.strict&&a!=e&&a!=k)return!1;r=a==k?"p":a==e?"a":"";break;case "K":24==a&&(a=0);case "h":case "H":case "k":if(23<a)return!1;d[3]=a;break;case "m":d[4]=a;break;case "s":d[5]=a;break;case "S":d[6]=a}return!0});e=+d[3];"p"===r&&12>e?d[3]=e+12:"a"===
r&&12==e&&(d[3]=0);e=new Date(d[0],d[1],d[2],d[3],d[4],d[5],d[6]);b.strict&&e.setFullYear(d[0]);var t=c.join(""),k=-1!=t.indexOf("d"),t=-1!=t.indexOf("M");if(!a||t&&e.getMonth()>d[1]||k&&e.getDate()>d[2])return null;if(t&&e.getMonth()<d[1]||k&&e.getDate()<d[2])e=p.add(e,"hour",1);return e};var k=["abbr","wide","narrow"],r=[],C={};l.addCustomFormats=function(a,b){r.push({pkg:a,name:b});C={}};l._getGregorianBundle=function(a){if(C[a])return C[a];var b={};g.forEach(r,function(e){e=m.getLocalization(e.pkg,
e.name,a);b=q.mixin(b,e)},this);return C[a]=b};l.addCustomFormats(n.id.replace(/\/date\/locale$/,".cldr"),"gregorian");l.getNames=function(a,b,e,k){var c;k=l._getGregorianBundle(k);a=[a,e,b];"standAlone"==e&&(e=a.join("-"),c=k[e],1==c[0]&&(c=void 0));a[1]="format";return(c||k[a.join("-")]).concat()};l.isWeekend=function(a,b){b=d.getWeekend(b);a=(a||new Date).getDay();b.end<b.start&&(b.end+=7,a<b.start&&(a+=7));return a>=b.start&&a<=b.end};l._getDayOfYear=function(a){return p.difference(new Date(a.getFullYear(),
0,1,a.getHours()),a)+1};l._getWeekOfYear=function(a,b){1==arguments.length&&(b=0);var e=(new Date(a.getFullYear(),0,1)).getDay(),k=(e-b+7)%7,k=Math.floor((l._getDayOfYear(a)+k-1)/7);e==b&&k++;return k};return l})},"dojo/date":function(){define(["./has","./_base/lang"],function(q,g){var p={getDaysInMonth:function(d){var m=d.getMonth();return 1==m&&p.isLeapYear(d)?29:[31,28,31,30,31,30,31,31,30,31,30,31][m]},isLeapYear:function(d){d=d.getFullYear();return!(d%400)||!(d%4)&&!!(d%100)},getTimezoneName:function(d){var m=
d.toString(),c="",f=m.indexOf("(");if(-1<f)c=m.substring(++f,m.indexOf(")"));else if(f=/([A-Z\/]+) \d{4}$/,m=m.match(f))c=m[1];else if(m=d.toLocaleString(),f=/ ([A-Z\/]+)$/,m=m.match(f))c=m[1];return"AM"==c||"PM"==c?"":c},compare:function(d,m,c){d=new Date(+d);m=new Date(+(m||new Date));"date"==c?(d.setHours(0,0,0,0),m.setHours(0,0,0,0)):"time"==c&&(d.setFullYear(0,0,0),m.setFullYear(0,0,0));return d>m?1:d<m?-1:0},add:function(d,m,c){var f=new Date(+d),h=!1,n="Date";switch(m){case "day":break;case "weekday":var a;
(m=c%5)?a=parseInt(c/5):(m=0<c?5:-5,a=0<c?(c-5)/5:(c+5)/5);var b=d.getDay(),e=0;6==b&&0<c?e=1:0==b&&0>c&&(e=-1);b+=m;if(0==b||6==b)e=0<c?2:-2;c=7*a+m+e;break;case "year":n="FullYear";h=!0;break;case "week":c*=7;break;case "quarter":c*=3;case "month":h=!0;n="Month";break;default:n="UTC"+m.charAt(0).toUpperCase()+m.substring(1)+"s"}if(n)f["set"+n](f["get"+n]()+c);h&&f.getDate()<d.getDate()&&f.setDate(0);return f},difference:function(d,m,c){m=m||new Date;c=c||"day";var f=m.getFullYear()-d.getFullYear(),
h=1;switch(c){case "quarter":d=d.getMonth();m=m.getMonth();h=Math.floor(m/3)+1+4*f-(Math.floor(d/3)+1);break;case "weekday":f=Math.round(p.difference(d,m,"day"));c=parseInt(p.difference(d,m,"week"));if(0==f%7)f=5*c;else{var h=0,n=d.getDay(),a=m.getDay();c=parseInt(f/7);m=f%7;d=new Date(d);d.setDate(d.getDate()+7*c);d=d.getDay();if(0<f)switch(!0){case 6==n:h=-1;break;case 0==n:h=0;break;case 6==a:h=-1;break;case 0==a:h=-2;break;case 5<d+m:h=-2}else if(0>f)switch(!0){case 6==n:h=0;break;case 0==n:h=
1;break;case 6==a:h=2;break;case 0==a:h=1;break;case 0>d+m:h=2}f=f+h-2*c}h=f;break;case "year":h=f;break;case "month":h=m.getMonth()-d.getMonth()+12*f;break;case "week":h=parseInt(p.difference(d,m,"day")/7);break;case "day":h/=24;case "hour":h/=60;case "minute":h/=60;case "second":h/=1E3;case "millisecond":h*=m.getTime()-d.getTime()}return Math.round(h)}};g.mixin(g.getObject("dojo.date",!0),p);return p})},"dojo/cldr/supplemental":function(){define(["../_base/lang","../i18n"],function(q,g){var p={};
q.setObject("dojo.cldr.supplemental",p);p.getFirstDayOfWeek=function(d){d={bd:5,mv:5,ae:6,af:6,bh:6,dj:6,dz:6,eg:6,iq:6,ir:6,jo:6,kw:6,ly:6,ma:6,om:6,qa:6,sa:6,sd:6,sy:6,ye:6,ag:0,ar:0,as:0,au:0,br:0,bs:0,bt:0,bw:0,by:0,bz:0,ca:0,cn:0,co:0,dm:0,"do":0,et:0,gt:0,gu:0,hk:0,hn:0,id:0,ie:0,il:0,"in":0,jm:0,jp:0,ke:0,kh:0,kr:0,la:0,mh:0,mm:0,mo:0,mt:0,mx:0,mz:0,ni:0,np:0,nz:0,pa:0,pe:0,ph:0,pk:0,pr:0,py:0,sg:0,sv:0,th:0,tn:0,tt:0,tw:0,um:0,us:0,ve:0,vi:0,ws:0,za:0,zw:0}[p._region(d)];return void 0===d?
1:d};p._region=function(d){d=g.normalizeLocale(d);d=d.split("-");var m=d[1];m?4==m.length&&(m=d[2]):m={aa:"et",ab:"ge",af:"za",ak:"gh",am:"et",ar:"eg",as:"in",av:"ru",ay:"bo",az:"az",ba:"ru",be:"by",bg:"bg",bi:"vu",bm:"ml",bn:"bd",bo:"cn",br:"fr",bs:"ba",ca:"es",ce:"ru",ch:"gu",co:"fr",cr:"ca",cs:"cz",cv:"ru",cy:"gb",da:"dk",de:"de",dv:"mv",dz:"bt",ee:"gh",el:"gr",en:"us",es:"es",et:"ee",eu:"es",fa:"ir",ff:"sn",fi:"fi",fj:"fj",fo:"fo",fr:"fr",fy:"nl",ga:"ie",gd:"gb",gl:"es",gn:"py",gu:"in",gv:"gb",
ha:"ng",he:"il",hi:"in",ho:"pg",hr:"hr",ht:"ht",hu:"hu",hy:"am",ia:"fr",id:"id",ig:"ng",ii:"cn",ik:"us","in":"id",is:"is",it:"it",iu:"ca",iw:"il",ja:"jp",ji:"ua",jv:"id",jw:"id",ka:"ge",kg:"cd",ki:"ke",kj:"na",kk:"kz",kl:"gl",km:"kh",kn:"in",ko:"kr",ks:"in",ku:"tr",kv:"ru",kw:"gb",ky:"kg",la:"va",lb:"lu",lg:"ug",li:"nl",ln:"cd",lo:"la",lt:"lt",lu:"cd",lv:"lv",mg:"mg",mh:"mh",mi:"nz",mk:"mk",ml:"in",mn:"mn",mo:"ro",mr:"in",ms:"my",mt:"mt",my:"mm",na:"nr",nb:"no",nd:"zw",ne:"np",ng:"na",nl:"nl",nn:"no",
no:"no",nr:"za",nv:"us",ny:"mw",oc:"fr",om:"et",or:"in",os:"ge",pa:"in",pl:"pl",ps:"af",pt:"br",qu:"pe",rm:"ch",rn:"bi",ro:"ro",ru:"ru",rw:"rw",sa:"in",sd:"in",se:"no",sg:"cf",si:"lk",sk:"sk",sl:"si",sm:"ws",sn:"zw",so:"so",sq:"al",sr:"rs",ss:"za",st:"za",su:"id",sv:"se",sw:"tz",ta:"in",te:"in",tg:"tj",th:"th",ti:"et",tk:"tm",tl:"ph",tn:"za",to:"to",tr:"tr",ts:"za",tt:"ru",ty:"pf",ug:"cn",uk:"ua",ur:"pk",uz:"uz",ve:"za",vi:"vn",wa:"be",wo:"sn",xh:"za",yi:"il",yo:"ng",za:"cn",zh:"cn",zu:"za",ace:"id",
ady:"ru",agq:"cm",alt:"ru",amo:"ng",asa:"tz",ast:"es",awa:"in",bal:"pk",ban:"id",bas:"cm",bax:"cm",bbc:"id",bem:"zm",bez:"tz",bfq:"in",bft:"pk",bfy:"in",bhb:"in",bho:"in",bik:"ph",bin:"ng",bjj:"in",bku:"ph",bqv:"ci",bra:"in",brx:"in",bss:"cm",btv:"pk",bua:"ru",buc:"yt",bug:"id",bya:"id",byn:"er",cch:"ng",ccp:"in",ceb:"ph",cgg:"ug",chk:"fm",chm:"ru",chp:"ca",chr:"us",cja:"kh",cjm:"vn",ckb:"iq",crk:"ca",csb:"pl",dar:"ru",dav:"ke",den:"ca",dgr:"ca",dje:"ne",doi:"in",dsb:"de",dua:"cm",dyo:"sn",dyu:"bf",
ebu:"ke",efi:"ng",ewo:"cm",fan:"gq",fil:"ph",fon:"bj",fur:"it",gaa:"gh",gag:"md",gbm:"in",gcr:"gf",gez:"et",gil:"ki",gon:"in",gor:"id",grt:"in",gsw:"ch",guz:"ke",gwi:"ca",haw:"us",hil:"ph",hne:"in",hnn:"ph",hoc:"in",hoj:"in",ibb:"ng",ilo:"ph",inh:"ru",jgo:"cm",jmc:"tz",kaa:"uz",kab:"dz",kaj:"ng",kam:"ke",kbd:"ru",kcg:"ng",kde:"tz",kdt:"th",kea:"cv",ken:"cm",kfo:"ci",kfr:"in",kha:"in",khb:"cn",khq:"ml",kht:"in",kkj:"cm",kln:"ke",kmb:"ao",koi:"ru",kok:"in",kos:"fm",kpe:"lr",krc:"ru",kri:"sl",krl:"ru",
kru:"in",ksb:"tz",ksf:"cm",ksh:"de",kum:"ru",lag:"tz",lah:"pk",lbe:"ru",lcp:"cn",lep:"in",lez:"ru",lif:"np",lis:"cn",lki:"ir",lmn:"in",lol:"cd",lua:"cd",luo:"ke",luy:"ke",lwl:"th",mad:"id",mag:"in",mai:"in",mak:"id",man:"gn",mas:"ke",mdf:"ru",mdh:"ph",mdr:"id",men:"sl",mer:"ke",mfe:"mu",mgh:"mz",mgo:"cm",min:"id",mni:"in",mnk:"gm",mnw:"mm",mos:"bf",mua:"cm",mwr:"in",myv:"ru",nap:"it",naq:"na",nds:"de","new":"np",niu:"nu",nmg:"cm",nnh:"cm",nod:"th",nso:"za",nus:"sd",nym:"tz",nyn:"ug",pag:"ph",pam:"ph",
pap:"bq",pau:"pw",pon:"fm",prd:"ir",raj:"in",rcf:"re",rej:"id",rjs:"np",rkt:"in",rof:"tz",rwk:"tz",saf:"gh",sah:"ru",saq:"ke",sas:"id",sat:"in",saz:"in",sbp:"tz",scn:"it",sco:"gb",sdh:"ir",seh:"mz",ses:"ml",shi:"ma",shn:"mm",sid:"et",sma:"se",smj:"se",smn:"fi",sms:"fi",snk:"ml",srn:"sr",srr:"sn",ssy:"er",suk:"tz",sus:"gn",swb:"yt",swc:"cd",syl:"bd",syr:"sy",tbw:"ph",tcy:"in",tdd:"cn",tem:"sl",teo:"ug",tet:"tl",tig:"er",tiv:"ng",tkl:"tk",tmh:"ne",tpi:"pg",trv:"tw",tsg:"ph",tts:"th",tum:"mw",tvl:"tv",
twq:"ne",tyv:"ru",tzm:"ma",udm:"ru",uli:"fm",umb:"ao",unr:"in",unx:"in",vai:"lr",vun:"tz",wae:"ch",wal:"et",war:"ph",xog:"ug",xsr:"np",yao:"mz",yap:"fm",yav:"cm",zza:"tr"}[d[0]];return m};p.getWeekend=function(d){var m=p._region(d);d={"in":0,af:4,dz:4,ir:4,om:4,sa:4,ye:4,ae:5,bh:5,eg:5,il:5,iq:5,jo:5,kw:5,ly:5,ma:5,qa:5,sd:5,sy:5,tn:5}[m];m={af:5,dz:5,ir:5,om:5,sa:5,ye:5,ae:6,bh:5,eg:6,il:6,iq:6,jo:6,kw:6,ly:6,ma:6,qa:6,sd:6,sy:6,tn:6}[m];void 0===d&&(d=6);void 0===m&&(m=0);return{start:d,end:m}};
return p})},"dojo/regexp":function(){define(["./_base/kernel","./_base/lang"],function(q,g){var p={};g.setObject("dojo.regexp",p);p.escapeString=function(d,m){return d.replace(/([\.$?*|{}\(\)\[\]\\\/\+\-^])/g,function(c){return m&&-1!=m.indexOf(c)?c:"\\"+c})};p.buildGroupRE=function(d,m,c){if(!(d instanceof Array))return m(d);for(var f=[],h=0;h<d.length;h++)f.push(m(d[h]));return p.group(f.join("|"),c)};p.group=function(d,m){return"("+(m?"?:":"")+d+")"};return p})},"dojo/string":function(){define(["./_base/kernel",
"./_base/lang"],function(q,g){var p=/[&<>'"\/]/g,d={"\x26":"\x26amp;","\x3c":"\x26lt;","\x3e":"\x26gt;",'"':"\x26quot;","'":"\x26#x27;","/":"\x26#x2F;"},m={};g.setObject("dojo.string",m);m.escape=function(c){return c?c.replace(p,function(c){return d[c]}):""};m.rep=function(c,f){if(0>=f||!c)return"";for(var h=[];;){f&1&&h.push(c);if(!(f>>=1))break;c+=c}return h.join("")};m.pad=function(c,f,h,d){h||(h="0");c=String(c);f=m.rep(h,Math.ceil((f-c.length)/h.length));return d?c+f:f+c};m.substitute=function(c,
f,h,d){d=d||q.global;h=h?g.hitch(d,h):function(a){return a};return c.replace(/\$\{([^\s\:\}]*)(?:\:([^\s\:\}]+))?\}/g,function(a,b,e){if(""==b)return"$";a=g.getObject(b,!1,f);e&&(a=g.getObject(e,!1,d).call(d,a,b));e=h(a,b);if("undefined"===typeof e)throw Error('string.substitute could not find key "'+b+'" in template');return e.toString()})};m.trim=String.prototype.trim?g.trim:function(c){c=c.replace(/^\s+/,"");for(var f=c.length-1;0<=f;f--)if(/\S/.test(c.charAt(f))){c=c.substring(0,f+1);break}return c};
return m})},"esri/widgets/Search/support/geometryUtils":function(){define("require exports ../../../geometry ../../../core/Error ../../../core/Logger ../../../core/maybe ../../../core/promiseUtils ../../../geometry/support/scaleUtils ../../../views/MapView".split(" "),function(q,g,p,d,m,c,f,h,n){function a(a,b,k){var e=a.hasZ?a.z:void 0;return b&&b.map?(k?h.getExtentForScale(b,k):b.extent).clone().centerAt(a).set({zmax:e,zmin:e}):new p.Extent({xmin:a.x-.25,ymin:a.y-.25,xmax:a.x+.25,ymax:a.y+.25,spatialReference:a.spatialReference,
zmin:e,zmax:e})}Object.defineProperty(g,"__esModule",{value:!0});var b=m.getLogger("esri.widgets.Search.support.geometryUtils");g.getPointWithElevation=function(a,c){return c?a?a.hasZ||c instanceof n?f.resolve(a):(c=c.get("map.ground"))&&c.layers.length?c.queryElevation(a).then(function(a){return a.geometry}):f.resolve(a):(b.error("missing-parameter: point is missing."),f.reject(new d("searchgeometryutils:missing-parameter","point is missing."))):(b.error("missing-parameter: view is missing."),f.reject(new d("searchgeometryutils:missing-parameter",
"view is missing.")))};g.getPointFromGeometry=function(a){return a instanceof p.Point?a:a instanceof p.Extent?a.center:a instanceof p.Polygon?a.centroid:a instanceof p.Multipoint?a.getPoint(0):a instanceof p.Polyline?a.getPoint(0,0):null};g.createExtentFromGeometry=function(b,l,k){if(c.isNone(b))return null;if(b instanceof p.Extent)return b;if(b instanceof p.Multipoint||b instanceof p.Polygon||b instanceof p.Polyline)return b.extent;if(b instanceof p.Point)return a(b,l,k)};g.scaleExtent=function(b,
l,k){return c.isNone(b)||c.isNone(l)?null:a(b.center,l,k)}})},"esri/geometry/support/scaleUtils":function(){define(["require","exports","../../core/unitUtils"],function(q,g,p){function d(d,c){c=p.getMetersPerUnitForSR(c);return d/(c*p.inchesPerMeter*96)}Object.defineProperty(g,"__esModule",{value:!0});g.getScale=function(d,c){c=c||d.extent;d=d.width;var f=p.getMetersPerUnitForSR(c&&c.spatialReference);return c&&d?c.width/d*f*p.inchesPerMeter*96:0};g.getResolutionForScale=d;g.getScaleForResolution=
function(d,c){c=p.getMetersPerUnitForSR(c);return d*c*p.inchesPerMeter*96};g.getExtentForScale=function(m,c){var f=m.extent;m=m.width;c=d(c,f.spatialReference);return f.clone().expand(c*m/f.width)}})},"esri/views/MapView":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/generatorHelper ../core/tsSupport/awaiterHelper ../core/Error ../core/has ../core/Logger ../core/promiseUtils ../core/screenUtils ../core/watchUtils ../core/workers ../core/accessorSupport/decorators ./BreakpointsOwner ./DOMContainer ./Magnifier ./MapViewBase ./2d/input/MapViewInputManager ./2d/support/HighlightOptions ./support/screenshotUtils ./support/WebGLRequirements ./ui/2d/DefaultUI2D @dojo/framework/shim/Promise".split(" "),
function(q,g,p,d,m,c,f,h,n,a,b,e,l,k,r,C,y,t,x,z,u,v,w){function D(){return c(this,void 0,void 0,function(){var a,b,e,k,c,l,f;return m(this,function(h){switch(h.label){case 0:return[4,Promise.all([new Promise(function(a,b){q(["./webgl"],a,b)}),new Promise(function(a,b){q(["./2d/mapViewDeps"],a,b)}),new Promise(function(a,b){q(["./2d/engine"],a,b)})])];case 1:return a=h.sent(),b=a[1],e=b.GraphicsView2D,k=b.LabelManager,c=b.MapViewNavigation,l=b.MagnifierView2D,f=a[2].Stage,E=e,G=k,F=c,H=l,J=f,[2]}})})}
function B(a){return!("layerViews"in a)&&null!=a.container}var A=n.getLogger("esri.views.MapView"),J,E,G,F,H;return function(c){function r(a){a=c.call(this,a)||this;a._magnifierView=null;a._stage=null;a._resolveWhenReady=[];a.graphicsView=null;a.highlightOptions=new z;a.magnifier=new y;a.inputManager=new x({view:a});a.mapViewNavigation=null;a.supersampleScreenhotsEnabled=!0;a.ui=new w;a.rendering=!1;l.initialize();return a}p(r,c);Object.defineProperty(r.prototype,"background",{get:function(){return this.get("map.initialViewProperties.background")||
null},enumerable:!0,configurable:!0});Object.defineProperty(r.prototype,"interacting",{get:function(){return this.mapViewNavigation&&this.mapViewNavigation.interacting||!1},enumerable:!0,configurable:!0});r.prototype.toMap=function(a){if(b.isSupportedScreenPointEvent(a)){var e=b.createScreenPointFromSupportedEvent(this,a);return this.inherited(arguments,[e])}return this.inherited(arguments)};r.prototype.hitTest=function(e){var k=b.isSupportedScreenPointEvent(e)?b.createScreenPointFromSupportedEvent(this,
e):e;if(!this.ready||isNaN(k.x)||isNaN(k.y))return a.resolve({screenPoint:k,results:[]});var c=this.toMap(k);e=[this.graphicsView];e.push.apply(e,this.allLayerViews.toArray().reverse());return a.all(e.map(function(a){return a&&a.hitTest?a.hitTest(k.x,k.y):null})).then(function(a){return{screenPoint:k,results:a.filter(function(a){return null!=a}).map(function(a){return{mapPoint:c,graphic:a}})}})};r.prototype.takeScreenshot=function(b){return this.ready?this._stage.takeScreenshot(u.toRenderSettings(b,
this),this.allLayerViews):a.reject("Map view cannot be used before it is ready")};r.prototype.on=function(a,b,e,k){var c=this.inputManager&&this.viewEvents.on(a,b,e,k);return c?c:this.inherited(arguments)};r.prototype.hasEventListener=function(a){return this.inherited(arguments)||this.viewEvents.hasHandler(a)};r.prototype.whenLayerView=function(a){return this.inherited(arguments)};r.prototype.graphicChanged=function(a){this.graphicsView&&this.graphicsView.graphicUpdateHandler(a)};r.prototype.whenReady=
function(){var b=this;return a.create(function(a){b.ready?a(b):b._resolveWhenReady.push(a)})};r.prototype.forceDOMReadyCycle=function(){this.forceReadyCycle()};r.prototype.validate=function(){var b=v.check({supportsMajorWebPerformanceCaveat:!0});h("safari")&&9>h("safari")&&(b=new f("mapview:browser-not-supported","This browser is not supported by MapView (Safari \x3c 9)",{type:"safari",requiredVersion:9,detectedVersion:h("safari")}));return b?(A.warn("#validate()",b.message),a.reject(b)):D()};r.prototype._startup=
function(){var a=this;this.timeline.begin("MapView Startup");this.inherited(arguments);this.graphics.owner=this;var b=new J(this.surface,{canvas:this.renderCanvas,supersampleScreenshots:this.supersampleScreenhotsEnabled,contextOptions:{deactivatedWebGLExtensions:this.deactivatedWebGLExtensions,debugWebGLExtensions:this.debugWebGLExtensions},renderingOptions:this.renderingOptions,timeline:this.timeline}),k=new E({view:this,graphics:this.graphics}),c=new F({view:this,animationManager:this.animationManager}),
l=new G({view:this});this._magnifierView=new H;this._magnifierView.magnifier=this.magnifier;this._stage=b;this.frameTask.graphicsView=k;this._set("graphicsView",k);this._set("mapViewNavigation",c);this._set("labelManager",l);this.handles.add([this.allLayerViews.on("change",function(){return a._updateStageChildren()}),b.on("post-render",function(){return a._set("rendering",a.allLayerViews.some(function(a){return!("layerViews"in a)&&!0===a.rendering}))}),b.on("webgl-error",function(b){return a.fatalError=
b.error}),e.init(this,"stationary",function(a){return b.stationary=a},!0),e.init(this,"state.viewpoint",function(){return b.state=a.state},!0),e.init(this,"background",function(a){return b.background=a},!0),e.init(this,"magnifier",function(b){return a._magnifierView.magnifier=b},!0),e.init(this,"renderingOptions",function(a){return b.renderingOptions=a},!0),e.init(this,"highlightOptions",function(){return b.highlightOptions=a.highlightOptions},!0)],"map-view");b.state=this.state;b.background=this.background;
this._updateStageChildren();k=this._resolveWhenReady;this._resolveWhenReady=[];k.forEach(function(b){return b(a)});this.timeline.end("MapView Startup")};r.prototype._teardown=function(){this.handles.remove("map-view");this.layerViewManager.clear();this.labelManager.destroy();this._magnifierView.destroy();this._stage.destroy();this.graphicsView.destroy();this.mapViewNavigation.destroy();this._stage=null;this._set("graphicsView",null);this._magnifierView=null;this._set("labelManager",null);this._set("mapViewNavigation",
null);this.graphics.owner=null;this.inherited(arguments)};r.prototype._updateStageChildren=function(){var a=this;this._stage.removeAllChildren();this.allLayerViews.filter(B).forEach(function(b,e){a._stage.addChildAt(b.container,e)});this._stage.addChild(this.graphicsView.container);this._stage.addChild(this._magnifierView)};d([k.property({readOnly:!0,dependsOn:["map.initialViewProperties?.background"]})],r.prototype,"background",null);d([k.property()],r.prototype,"graphicsView",void 0);d([k.property({type:z})],
r.prototype,"highlightOptions",void 0);d([k.property({type:y})],r.prototype,"magnifier",void 0);d([k.property({readOnly:!0})],r.prototype,"inputManager",void 0);d([k.property({readOnly:!0})],r.prototype,"mapViewNavigation",void 0);d([k.property({dependsOn:["mapViewNavigation.interacting"],type:Boolean})],r.prototype,"interacting",null);d([k.property({type:Boolean,constructOnly:!0})],r.prototype,"supersampleScreenhotsEnabled",void 0);d([k.property({type:w})],r.prototype,"ui",void 0);d([k.property({readOnly:!0})],
r.prototype,"rendering",void 0);d([k.property({constructOnly:!0})],r.prototype,"renderCanvas",void 0);d([k.property({constructOnly:!0})],r.prototype,"deactivatedWebGLExtensions",void 0);d([k.property({constructOnly:!0})],r.prototype,"debugWebGLExtensions",void 0);return r=d([k.subclass("esri.views.MapView")],r)}(k.declared(r.BreakpointsOwner(C.DOMContainer(t))))})},"esri/views/BreakpointsOwner":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/assignHelper ../core/ArrayPool ../core/Handles ../core/watchUtils ../core/accessorSupport/decorators".split(" "),
function(q,g,p,d,m,c,f,h,n){function a(a,e){return e?b[a].valueToClassName[e].split(" "):[]}Object.defineProperty(g,"__esModule",{value:!0});var b={widthBreakpoint:{getValue:function(a){var b=a.viewSize[0];a=a.breakpoints;var e=this.values;return b<=a.xsmall?e.xsmall:b<=a.small?e.small:b<=a.medium?e.medium:b<=a.large?e.large:e.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-width-xsmall esri-view-width-less-than-small esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",
small:"esri-view-width-small esri-view-width-greater-than-xsmall esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",medium:"esri-view-width-medium esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-less-than-large esri-view-width-less-than-xlarge",large:"esri-view-width-large esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-less-than-xlarge",
xlarge:"esri-view-width-xlarge esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-greater-than-large"}},heightBreakpoint:{getValue:function(a){var b=a.viewSize[1];a=a.breakpoints;var e=this.values;return b<=a.xsmall?e.xsmall:b<=a.small?e.small:b<=a.medium?e.medium:b<=a.large?e.large:e.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-height-xsmall esri-view-height-less-than-small esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",
small:"esri-view-height-small esri-view-height-greater-than-xsmall esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",medium:"esri-view-height-medium esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-less-than-large esri-view-height-less-than-xlarge",large:"esri-view-height-large esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-less-than-xlarge",
xlarge:"esri-view-height-xlarge esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-greater-than-large"}},orientation:{getValue:function(a){a=a.viewSize;var b=this.values;return a[1]>=a[0]?b.portrait:b.landscape},values:{portrait:"portrait",landscape:"landscape"},valueToClassName:{portrait:"esri-view-orientation-portrait",landscape:"esri-view-orientation-landscape"}}},e={xsmall:544,small:768,medium:992,large:1200};g.BreakpointsOwner=
function(l){return function(k){function l(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];a=k.apply(this,a)||this;a._breakpointsHandles=new f;a.orientation=null;a.widthBreakpoint=null;a.heightBreakpoint=null;a.breakpoints=e;return a}p(l,k);l.prototype.initialize=function(){this._breakpointsHandles.add(h.init(this,["breakpoints","size"],this._updateClassNames))};l.prototype.destroy=function(){this.destroyed||(this._removeActiveClassNames(),this._breakpointsHandles.destroy(),this._breakpointsHandles=
null)};Object.defineProperty(l.prototype,"breakpoints",{set:function(a){var b=this._get("breakpoints");if(a!==b){b=(b=a)&&b.xsmall<b.small&&b.small<b.medium&&b.medium<b.large;if(!b){var k=JSON.stringify(e,null,2);console.warn("provided breakpoints are not valid, using defaults:"+k)}a=b?a:e;this._set("breakpoints",m({},a))}},enumerable:!0,configurable:!0});l.prototype._updateClassNames=function(){if(this.container){var e=c.acquire(),k=c.acquire(),l=!1,f;for(f in b){var h=this[f],d=b[f].getValue({viewSize:this.size,
breakpoints:this.breakpoints});h!==d&&(l=!0,this[f]=d,a(f,h).forEach(function(a){return k.push(a)}),a(f,d).forEach(function(a){return e.push(a)}))}l&&(this._applyClassNameChanges(e,k),c.release(e),c.release(k))}};l.prototype._applyClassNameChanges=function(a,b){var e=this.container;e&&(b.forEach(function(a){return e.classList.remove(a)}),a.forEach(function(a){return e.classList.add(a)}))};l.prototype._removeActiveClassNames=function(){var e=this.container;if(e)for(var k in b)a(k,this[k]).forEach(function(a){return e.classList.remove(a)})};
d([n.property()],l.prototype,"breakpoints",null);d([n.property()],l.prototype,"orientation",void 0);d([n.property()],l.prototype,"widthBreakpoint",void 0);d([n.property()],l.prototype,"heightBreakpoint",void 0);return l=d([n.subclass("esri.views.BreakpointsOwner")],l)}(n.declared(l))}})},"esri/views/Magnifier":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/Accessor ../core/accessorSupport/decorators".split(" "),function(q,g,p,d,m,
c){return function(f){function h(c){c=f.call(this,c)||this;c.factor=1.5;c.offsetX=0;c.offsetY=0;c.position=null;c.visible=!1;return c}p(h,f);Object.defineProperty(h.prototype,"version",{get:function(){return(this._get("version")||0)+1},enumerable:!0,configurable:!0});d([c.property({type:Number})],h.prototype,"factor",void 0);d([c.property({type:Number})],h.prototype,"offsetX",void 0);d([c.property({type:Number})],h.prototype,"offsetY",void 0);d([c.property()],h.prototype,"position",void 0);d([c.property({readOnly:!0,
dependsOn:["factor","offsetX","offsetY","position","visible"]})],h.prototype,"version",null);d([c.property({type:Boolean})],h.prototype,"visible",void 0);return h=d([c.subclass("esri.views.Magnifier")],h)}(c.declared(m))})},"esri/views/MapViewBase":function(){define("require exports ../core/tsSupport/assignHelper ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../geometry ../Viewpoint ../core/Error ../core/Logger ../core/now ../core/promiseUtils ../core/screenUtils ../core/watchUtils ../core/accessorSupport/decorators ../geometry/support/webMercatorUtils ../layers/support/TileInfo ./PopupView ./View ./ViewAnimation ./2d/AnimationManager ./2d/FrameTask ./2d/layerViewModuleImportUtils ./2d/MapViewConstraints ./2d/PaddedViewState ./2d/tiling ./2d/viewpointUtils ./2d/support/Timeline".split(" "),
function(q,g,p,d,m,c,f,h,n,a,b,e,l,k,r,C,y,t,x,z,u,v,w,D,B,A,J){var E=n.getLogger("esri.views.MapView");return function(t){function n(b){var e=t.call(this,b)||this;e._stationaryTimer=null;e.frameTask=new u.default(e);e.featuresTilingScheme=null;e.fullOpacity=1;e.interacting=!1;e.initialExtent=null;e.labelManager=null;e.renderingOptions={samplingMode:"dynamic",edgeLabelsVisible:!0,labelsAnimationTime:125,labelCollisionsEnabled:!0};e.resizeAlign="center";e.timeline=new J.Timeline;e.type="2d";e.constraints=
new w;e.padding={top:0,right:0,bottom:0,left:0};var k=e.handles,c=function(){return e.notifyChange("updating")};k.add([e.watch("viewpoint",function(){e._lastStationaryEventTimestamp=a();e._flipStationary(160)},!0),e.on("resize",function(a){return e._resizeHandler(a)}),e.watch("animationManager.animation",function(a){e.animation=a}),e.allLayerViews.on("change",function(){c();k.remove("map-view-base-layerViewsUpdating");k.add(e.allLayerViews.map(function(a){return a.watch("updating",c)}),"map-view-base-layerViewsUpdating")})],
"map-view-base");return e}d(n,t);n.prototype.destroy=function(){this.destroyed||(this._set("preconditionsReady",!1),this._gotoTask=this.frameTask=null)};Object.defineProperty(n.prototype,"animation",{set:function(a){var b=this,e=this._get("animation");a!==e&&(e&&e.stop(),!a||a.isFulfilled()?this._set("animation",null):(this._set("animation",a),this.frameTask.animationInProgress=!0,e=function(){a===b._get("animation")&&(b._set("animation",null),b.frameTask.requestFrame());b.frameTask.animationInProgress=
!1},a.when(e,e)))},enumerable:!0,configurable:!0});Object.defineProperty(n.prototype,"center",{get:function(){if(!this.ready)return this._get("center");var a=this.content.center;return new c.Point({x:a[0],y:a[1],spatialReference:this.content.spatialReference})},set:function(a){if(null!=a)if(this._normalizeInput(a))if(this.ready){var b=this.viewpoint;A.centerAt(b,b,a);this.viewpoint=b}else this._set("center",a),this.notifyChange("initialExtentRequired");else E.error("#center","incompatible spatialReference "+
JSON.stringify(a.spatialReference)+" with view's spatialReference "+JSON.stringify(this.spatialReference))},enumerable:!0,configurable:!0});Object.defineProperty(n.prototype,"constraints",{set:function(a){var b=this,e=this._get("constraints");e&&(this.handles.remove("map-view-base-constraints"),e.destroy());this._set("constraints",a);a&&(a.view=this,this.ready&&(this.state.viewpoint=a.fit(this.content.viewpoint)),this.handles.add(a.on("update",function(){b.ready&&b.state&&(b.state.viewpoint=a.fit(b.content.viewpoint))}),
"map-view-base-constraints"))},enumerable:!0,configurable:!0});Object.defineProperty(n.prototype,"extent",{get:function(){return this.ready?this.content.extent.clone():this._get("extent")},set:function(a){if(null!=a){var b=this._normalizeInput(a);b?b.width&&b.height?this.ready?(a=this.viewpoint,A.setExtent(a,a,b,this.size,{constraints:this.constraints}),this.viewpoint=a):(this._set("extent",b),this._set("center",null),this._set("viewpoint",null),this._set("scale",0),this._set("zoom",-1),this.notifyChange("initialExtentRequired")):
E.error("#extent","invalid extent size"):E.error("#center","incompatible spatialReference "+JSON.stringify(a.spatialReference)+" with view's spatialReference "+JSON.stringify(this.spatialReference))}},enumerable:!0,configurable:!0});Object.defineProperty(n.prototype,"initialExtentRequired",{get:function(){var a=this.extent,b=this.center,e=this.scale,k=this.viewpoint,c=this.zoom;return this.get("map.initialViewProperties.viewpoint")||a||b&&(0!==e||-1!==c)||k?!1:!0},enumerable:!0,configurable:!0});
Object.defineProperty(n.prototype,"padding",{get:function(){return this.ready?this.state.padding:this._get("padding")},set:function(a){this.ready?(this.state.padding=a,this._set("padding",this.state.padding)):this._set("padding",a)},enumerable:!0,configurable:!0});Object.defineProperty(n.prototype,"resolution",{get:function(){return this.state?this.state.resolution:0},enumerable:!0,configurable:!0});Object.defineProperty(n.prototype,"rotation",{get:function(){return this.ready?this.content.rotation:
this._get("rotation")},set:function(a){if(!isNaN(a))if(this.ready){var b=this.viewpoint;A.rotateTo(b,b,a);this.viewpoint=b}else this._set("rotation",a)},enumerable:!0,configurable:!0});Object.defineProperty(n.prototype,"scale",{get:function(){return this.ready?this.content.scale:this._get("scale")},set:function(a){if(a&&!isNaN(a))if(this.ready){var b=this.viewpoint;A.scaleTo(b,b,a);this.viewpoint=b}else{this._set("scale",a);this._set("zoom",-1);if(a=this._get("extent"))this._set("extent",null),this._set("center",
a.center);this.notifyChange("initialExtentRequired")}},enumerable:!0,configurable:!0});Object.defineProperty(n.prototype,"stationary",{get:function(){return!this.animation&&!this.interacting&&!this._get("resizing")&&!this._stationaryTimer},enumerable:!0,configurable:!0});Object.defineProperty(n.prototype,"updating",{get:function(){return!this.destroyed&&(!0===this.get("layerViewManager.updating")||!0===this.get("labelManager.updating")||!0===this.get("graphicsView.updating")||this.allLayerViews.some(function(a){return!a.destroyed&&
!("layerViews"in a)&&a.attached&&!0===a.updating}))},enumerable:!0,configurable:!0});Object.defineProperty(n.prototype,"viewpoint",{get:function(){if(!this.ready)return this._get("viewpoint");var a=this.content;return a&&a.viewpoint.clone()},set:function(a){if(null!=a){var b=this._normalizeInput(a);b?this.ready?(a=new f({targetGeometry:new c.Point,scale:0,rotation:0}),A.copy(a,b),this.constraints.constrain(a,this.content.viewpoint),this.state.viewpoint=a,this.frameTask.requestFrame(),this._set("viewpoint",
a)):(this._set("viewpoint",b),this._set("extent",null),this._set("center",null),this._set("zoom",-1),this._set("scale",0),this.notifyChange("initialExtentRequired")):!a.scale||isNaN(a.scale)?E.error("#viewpoint","invalid scale value of "+a.scale):a.targetGeometry?E.error("#viewpoint","incompatible spatialReference "+JSON.stringify(a.targetGeometry.spatialReference)+" with view's spatialReference "+JSON.stringify(this.spatialReference)):E.error("#viewpoint","geometry not defined")}},enumerable:!0,
configurable:!0});Object.defineProperty(n.prototype,"zoom",{get:function(){return this.ready?this.constraints.scaleToZoom(this.scale):this._get("zoom")},set:function(a){if(null!=a){if(!this.ready){this.notifyChange("initialExtentRequired");this._set("zoom",a);this._set("scale",0);var b=this._get("extent");b&&(this._set("extent",null),this._set("center",b.center))}this.constraints.effectiveLODs&&(b=this.viewpoint,A.scaleTo(b,b,this.constraints.zoomToScale(a)),this.viewpoint=b,this._set("zoom",this.constraints.scaleToZoom(this.scale)))}},
enumerable:!0,configurable:!0});n.prototype.goTo=function(a,b){var e=this;if(a)return l.whenTrueOnce(this,"ready",b&&b.signal).then(function(){e.animation&&(e.animation=null);var k=p({animate:!0},b),c=A.createAsync(a,e);e._gotoTask={};return k.animate?e._gotoAnimated(c,k):e._gotoImmediate(c,k)});E.error("#goTo()","target cannot be null or undefined")};n.prototype.hitTest=function(a){return b.reject("Should be implemented by subclasses")};n.prototype.popupHitTest=function(a){var b=this;return this.hitTest(a).then(function(e){return p({},
e,{mapPoint:b.toMap(a)})})};n.prototype.toMap=function(a){if(!this.ready)return null;a=this.state.toMap([0,0],[a.x,a.y]);return new c.Point({x:a[0],y:a[1],spatialReference:this.spatialReference})};n.prototype.isTileInfoRequired=function(){return!0};n.prototype.toScreen=function(a){if(!this.ready)return null;a=this._normalizeInput(a);a=[a.x,a.y];a=this.state.toScreen(a,a);return e.createScreenPoint(a[0],a[1])};n.prototype.pixelSizeAt=function(a,b){if(!this.ready)return NaN;a&&null!=a.x&&(b=a.y,a=a.x);
return this.content.pixelSizeAt([a,b])};n.prototype.requestLayerViewUpdate=function(a){this.ready&&this.frameTask.requestLayerViewUpdate(a)};n.prototype.requestUpdate=function(a){this.ready&&this.frameTask.requestUpdate(a)};n.prototype.getDefaultSpatialReference=function(){return this.get("map.initialViewProperties.spatialReference")||this.get("defaultsFromMap.spatialReference")||null};n.prototype.isSpatialReferenceSupported=function(a,b){return b||this._get("ready")?!0:null!==this._getDefaultViewpoint()};
n.prototype.importLayerView=function(a){return v.layerView2DImporter.importLayerView(a)};n.prototype.hasLayerViewModule=function(a){return v.layerView2DImporter.hasLayerViewModule(a)};n.prototype._createOrReplaceAnimation=function(a){if(!this.animation||this.animation.done)this.animation=new x;this.animation.update(a);return this.animation};n.prototype._cancellableGoTo=function(a,e,k){var c=this,l=k.then(function(){a===c._gotoTask&&(c.animation=null)}).catch(function(b){a===c._gotoTask&&(c.animation=
null,e.done||(e.stop(),c.frameTask.animationInProgress=!1));throw b;}),f=b.create(function(a){return a(l)},function(){a!==c._gotoTask||e.done||(e.stop(),c.frameTask.animationInProgress=!1)});e.when().catch(function(){a===c._gotoTask&&f.cancel&&f.cancel()});return f};n.prototype._gotoImmediate=function(a,e){var k=this,c=this._gotoTask,l=this._createOrReplaceAnimation(a);a=a.then(function(a){b.throwIfAborted(e);if(c!==k._gotoTask)throw new h("view:goto-interrupted","Goto was interrupted");k.viewpoint=
l.target=a;l.finish()});return this._cancellableGoTo(c,l,a)};n.prototype._gotoAnimated=function(a,b){var e=this,k=this._gotoTask,c=this._createOrReplaceAnimation(a);a=a.then(function(a){if(k!==e._gotoTask)throw new h("view:goto-interrupted","Goto was interrupted");c.update(a);e.animationManager.animate(c,e.viewpoint,b);return c.when().then(function(){},function(){})});return this._cancellableGoTo(k,c,a)};n.prototype._resizeHandler=function(a){var b=this.state;if(b){var e=this.content.viewpoint,k=
this.content.size.concat();b.size=[a.width,a.height];A.resize(e,e,k,this.content.size,this.resizeAlign);e=this.constraints.constrain(e,null);this.state.viewpoint=e}};n.prototype._startup=function(){var a=this._getDefaultViewpoint();this.constraints.view=this;this.constraints.fit(a);this._set("animationManager",new z({view:this}));this._set("state",new D({padding:this._get("padding"),size:this.size,viewpoint:a}));this._set("content",this.state.content);this._set("featuresTilingScheme",new B.TileInfoView(C.create({spatialReference:this.spatialReference,
size:512})));this._set("ready",!0);this.frameTask&&this.frameTask.start()};n.prototype._teardown=function(){this.frameTask&&this.frameTask.stop();this._set("ready",!1);this._stationaryTimer&&(clearTimeout(this._stationaryTimer),this._stationaryTimer=null,this.notifyChange("stationary"));var a=this._get("content"),b=a.center,e=a.spatialReference,b=new c.Point({x:b[0],y:b[1],spatialReference:e});this._set("viewpoint",null);this._set("extent",null);this._set("center",b);this._set("zoom",-1);this._set("rotation",
a.rotation);this._set("scale",a.scale);this._set("spatialReference",e);this.constraints.view=null;this.animationManager.destroy();this._set("animationManager",null);this._set("state",null);this._set("content",null);this.animation=null};n.prototype._flipStationary=function(b){var e=this;return null!==this._stationaryTimer?this._stationaryTimer:this._stationaryTimer=setTimeout(function(){e._stationaryTimer=null;var b=a()-e._lastStationaryEventTimestamp;160>b?e._stationaryTimer=e._flipStationary(b):
e.notifyChange("stationary")},b)};n.prototype._normalizeInput=function(a,b){void 0===b&&(b=this.spatialReference);var e=a&&a.targetGeometry||a;return b?e?b.equals(e.spatialReference)?a:r.canProject(e,b)?a&&"esri.Viewpoint"===a.declaredClass?(a.targetGeometry=r.project(e,b),a):r.project(e,b):null:null:a};n.prototype._getDefaultViewpoint=function(){var a=this.constraints,b=this._get("zoom"),e=this._get("scale"),k=this._normalizeInput(this._get("center")),c=this._normalizeInput(this._get("extent")),
l=this._get("rotation"),h=this._normalizeInput(this._get("viewpoint"));a.effectiveLODs?-1!==b&&(e=a.zoomToScale(b)):b=-1;var d=null,r=null,b=0,a=h&&h.rotation,n=h&&h.targetGeometry;n&&("extent"===n.type?d=n:"point"===n.type&&(r=n,b=h.scale));h=this._normalizeInput(this.get("map.initialViewProperties.viewpoint.targetGeometry.extent"));n=this._normalizeInput(this.initialExtent);c=c||d||h||n;k=k||r||c&&c.center;e=e||b||c&&A.extentToScale(c,this.size);return k&&e?new f({targetGeometry:k,scale:e,rotation:l||
a||0}):null};m([k.property()],n.prototype,"animation",null);m([k.property({readOnly:!0})],n.prototype,"animationManager",void 0);m([k.property({value:null,type:c.Point,dependsOn:["content.viewpoint","ready"]})],n.prototype,"center",null);m([k.property({type:w})],n.prototype,"constraints",null);m([k.property({readOnly:!0})],n.prototype,"content",void 0);m([k.property({value:null,type:c.Extent,dependsOn:["content.viewpoint","ready"]})],n.prototype,"extent",null);m([k.property({readOnly:!0})],n.prototype,
"featuresTilingScheme",void 0);m([k.property()],n.prototype,"fullOpacity",void 0);m([k.property({readOnly:!0})],n.prototype,"interacting",void 0);m([k.property({type:c.Extent})],n.prototype,"initialExtent",void 0);m([k.property({dependsOn:["map.initialViewProperties?.viewpoint"]})],n.prototype,"initialExtentRequired",null);m([k.property()],n.prototype,"labelManager",void 0);m([k.property({value:{top:0,right:0,bottom:0,left:0},cast:function(a){return p({top:0,right:0,bottom:0,left:0},a)}})],n.prototype,
"padding",null);m([k.property({type:Object})],n.prototype,"renderingOptions",void 0);m([k.property()],n.prototype,"resizeAlign",void 0);m([k.property({readOnly:!0,dependsOn:["content.viewpoint"]})],n.prototype,"resolution",null);m([k.property({value:0,type:Number,dependsOn:["content.viewpoint","ready"]})],n.prototype,"rotation",null);m([k.property({value:0,type:Number,dependsOn:["content.viewpoint","ready"]})],n.prototype,"scale",null);m([k.property({type:c.SpatialReference,dependsOn:["map.initialViewProperties?.spatialReference",
"defaultsFromMap.isSpatialReferenceDone"]})],n.prototype,"spatialReference",void 0);m([k.property({readOnly:!0})],n.prototype,"state",void 0);m([k.property()],n.prototype,"stationary",null);m([k.property({type:J.Timeline,readOnly:!0})],n.prototype,"timeline",void 0);m([k.property({readOnly:!0})],n.prototype,"type",void 0);m([k.property({readOnly:!0,dependsOn:["layerViewManager.updating","labelManager.updating","graphicsView?.updating"]})],n.prototype,"updating",null);m([k.property({value:null,type:f,
dependsOn:["content.viewpoint","ready"]})],n.prototype,"viewpoint",null);m([k.property({value:-1,dependsOn:["scale"]})],n.prototype,"zoom",null);return n=m([k.subclass("esri.views.MapViewBase")],n)}(k.declared(y.PopupView(t)))})},"esri/layers/support/TileInfo":function(){define("require exports ../../core/tsSupport/assignHelper ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../geometry ../../core/jsonMap ../../core/JSONSupport ../../core/unitUtils ../../core/accessorSupport/decorators ../../core/accessorSupport/ensureType ../../geometry/support/aaBoundingRect ../../geometry/support/spatialReferenceUtils ../../geometry/support/webMercatorUtils ./LOD".split(" "),
function(q,g,p,d,m,c,f,h,n,a,b,e,l,k,r){var C=new f.default({PNG:"png",PNG8:"png8",PNG24:"png24",PNG32:"png32",JPEG:"jpg",JPG:"jpg",DIB:"dib",TIFF:"tiff",EMF:"emf",PS:"ps",PDF:"pdf",GIF:"gif",SVG:"svg",SVGZ:"svgz",Mixed:"mixed",MIXED:"mixed",LERC:"lerc",pbf:"pbf"});return function(f){function h(a){a=f.call(this,a)||this;a.dpi=96;a.format=null;a.origin=null;a.minScale=0;a.maxScale=0;a.size=null;a.spatialReference=null;return a}d(h,f);g=h;h.create=function(a){void 0===a&&(a={size:256,spatialReference:c.SpatialReference.WebMercator});
var b=a.resolutionFactor||1,e=a.scales,k=a.size||256;a=a.spatialReference||c.SpatialReference.WebMercator;if(!l.isValid(a)){b=[];if(e)for(var f=0;f<e.length;f++){var h=e[f];b.push({level:f,scale:h,resolution:h})}else for(var d=5E-4,f=23;0<=f;f--)b.unshift({level:f,scale:d,resolution:d}),d*=2;return new g({dpi:96,lods:b,origin:new c.Point(0,0,a),size:[k,k],spatialReference:a})}var r=(f=l.getInfo(a))?new c.Point(f.origin[0],f.origin[1],a):new c.Point(0,0,a),t=1/(39.37*n.getMetersPerUnitForSR(a)*96),
m=[];if(e)for(f=0;f<e.length;f++)h=e[f],d=h*t,m.push({level:f,scale:h,resolution:d});else for(h=l.isGeographic(a)?512/k*5.916575275917094E8:256/k*5.91657527591555E8,e=Math.ceil(24/b),m.push({level:0,scale:h,resolution:h*t}),f=1;f<e;f++)h/=Math.pow(2,b),d=h*t,m.push({level:f,scale:h,resolution:d});return new g({dpi:96,lods:m,origin:r,size:[k,k],spatialReference:a})};Object.defineProperty(h.prototype,"isWrappable",{get:function(){var a=this.spatialReference,b=this.origin;if(a&&b){var e=l.getInfo(a);
return a.isWrappable&&Math.abs(e.origin[0]-b.x)<=e.dx}return!1},enumerable:!0,configurable:!0});h.prototype.readOrigin=function(a,b){return c.Point.fromJSON(p({spatialReference:b.spatialReference},a))};Object.defineProperty(h.prototype,"lods",{set:function(a){var b=this,e=0,k=0,c=[];this._levelToLOD={};a&&(e=-Infinity,k=Infinity,a.forEach(function(a){c.push(a.scale);e=a.scale>e?a.scale:e;k=a.scale<k?a.scale:k;b._levelToLOD[a.level]=a}));this._set("scales",c);this._set("minScale",e);this._set("maxScale",
k);this._set("lods",a);this._initializeUpsampleLevels()},enumerable:!0,configurable:!0});h.prototype.readSize=function(a,b){return[b.cols,b.rows]};h.prototype.writeSize=function(a,b){b.cols=a[0];b.rows=a[0]};h.prototype.zoomToScale=function(a){var b=this.scales;if(0>=a)return b[0];if(a>=b.length)return b[b.length-1];var e=Math.round(a);return b[e]+(e-a)*(b[Math.round(a-.5)]-b[e])};h.prototype.scaleToZoom=function(a){for(var b=this.scales,e=b.length-1,k=0;k<e;k++){var c=b[k],l=b[k+1];if(c<=a)break;
if(l===a)return k+1;if(c>a&&l<a)return k+1-(a-l)/(c-l)}return k};h.prototype.snapScale=function(a,b){void 0===b&&(b=.95);a=this.scaleToZoom(a);return a%Math.floor(a)>=b?this.zoomToScale(Math.ceil(a)):this.zoomToScale(Math.floor(a))};h.prototype.tileAt=function(a,b,c,f){var h=this.lodAt(a);if(!h)return null;var d;if("number"===typeof b)d=b,b=c;else{if(l.equals(b.spatialReference,this.spatialReference))d=b.x,b=b.y;else{f=k.project(b,this.spatialReference);if(!f)return null;d=f.x;b=f.y}f=c}c=h.resolution*
this.size[0];h=h.resolution*this.size[1];f||(f={id:null,level:0,row:0,col:0,extent:e.create()});f.level=a;f.row=Math.floor((this.origin.y-b)/h+.001);f.col=Math.floor((d-this.origin.x)/c+.001);this.updateTileInfo(f);return f};h.prototype.updateTileInfo=function(a){var b=this.lodAt(a.level);if(b){var k=b.resolution*this.size[0],b=b.resolution*this.size[1];a.id=a.level+"/"+a.row+"/"+a.col;a.extent||(a.extent=e.create());a.extent[0]=this.origin.x+a.col*k;a.extent[1]=this.origin.y-(a.row+1)*b;a.extent[2]=
a.extent[0]+k;a.extent[3]=a.extent[1]+b}};h.prototype.upsampleTile=function(a){var b=this._upsampleLevels[a.level];if(!b||-1===b.parentLevel)return!1;a.level=b.parentLevel;a.row=Math.floor(a.row/b.factor+.001);a.col=Math.floor(a.col/b.factor+.001);this.updateTileInfo(a);return!0};h.prototype.getTileBounds=function(a,b){var e=this.lodAt(b.level).resolution,k=e*this.size[0],e=e*this.size[1];a[0]=this.origin.x+b.col*k;a[1]=this.origin.y-(b.row+1)*e;a[2]=a[0]+k;a[3]=a[1]+e;return a};h.prototype.lodAt=
function(a){return this._levelToLOD&&this._levelToLOD[a]||null};h.prototype.clone=function(){return g.fromJSON(this.write({}))};h.prototype._initializeUpsampleLevels=function(){var a=this.lods;this._upsampleLevels=[];for(var b=null,e=0;e<a.length;e++){var k=a[e];this._upsampleLevels[k.level]={parentLevel:b?b.level:-1,factor:b?b.resolution/k.resolution:0};b=k}};var g;m([a.property({type:Number,json:{write:!0}})],h.prototype,"compressionQuality",void 0);m([a.property({type:Number,json:{write:!0}})],
h.prototype,"dpi",void 0);m([a.property({type:String,json:{read:C.read,write:C.write,origins:{"web-scene":{read:!1,write:!1}}}})],h.prototype,"format",void 0);m([a.property({readOnly:!0,dependsOn:["spatialReference","origin"]})],h.prototype,"isWrappable",null);m([a.property({type:c.Point,json:{write:!0}})],h.prototype,"origin",void 0);m([a.reader("origin")],h.prototype,"readOrigin",null);m([a.property({type:[r],value:null,json:{write:!0}})],h.prototype,"lods",null);m([a.property({readOnly:!0})],h.prototype,
"minScale",void 0);m([a.property({readOnly:!0})],h.prototype,"maxScale",void 0);m([a.property({readOnly:!0})],h.prototype,"scales",void 0);m([a.property({cast:function(a){return Array.isArray(a)?a:"number"===typeof a?[a,a]:[256,256]}})],h.prototype,"size",void 0);m([a.reader("size",["rows","cols"])],h.prototype,"readSize",null);m([a.writer("size",{cols:{type:b.Integer},rows:{type:b.Integer}})],h.prototype,"writeSize",null);m([a.property({type:c.SpatialReference,json:{write:!0}})],h.prototype,"spatialReference",
void 0);return h=g=m([a.subclass("esri.layers.support.TileInfo")],h)}(a.declared(h.JSONSupport))})},"esri/layers/support/LOD":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/accessorSupport/decorators ../../core/accessorSupport/ensureType".split(" "),function(q,g,p,d,m,c,f){return function(h){function n(a){a=h.call(this,a)||this;a.level=0;a.levelValue=null;a.resolution=0;a.scale=0;return a}p(n,h);a=
n;n.prototype.clone=function(){return new a({level:this.level,levelValue:this.levelValue,resolution:this.resolution,scale:this.scale})};var a;d([c.property({type:f.Integer,json:{write:!0}})],n.prototype,"level",void 0);d([c.property({type:String,json:{write:!0}})],n.prototype,"levelValue",void 0);d([c.property({type:Number,json:{write:!0}})],n.prototype,"resolution",void 0);d([c.property({type:Number,json:{write:!0}})],n.prototype,"scale",void 0);return n=a=d([c.subclass("esri.layers.support.LOD")],
n)}(c.declared(m.JSONSupport))})},"esri/views/PopupView":function(){define("require exports ../core/tsSupport/assignHelper ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/awaiterHelper ../core/tsSupport/generatorHelper ../core/arrayUtils ../core/maybe ../core/promiseUtils ../core/accessorSupport/decorators".split(" "),function(q,g,p,d,m,c,f,h,n,a,b){Object.defineProperty(g,"__esModule",{value:!0});g.PopupView=function(e){return function(e){function k(){return null!==
e&&e.apply(this,arguments)||this}d(k,e);k.prototype.fetchPopupFeatures=function(a,b){return this._fetchPopupFeaturesAsync(a,b)};k.prototype._fetchPopupFeaturesAsync=function(b,e){return c(this,void 0,void 0,function(){var k,c,l,d,r,n;return f(this,function(f){switch(f.label){case 0:return[4,this.when()];case 1:return f.sent(),[4,this._prepareFetchPopupFeatures(b,e)];case 2:return k=f.sent(),c=k.location,l=this._queryLayerPopupFeatures(k,e),d=a.resolve(k.clientOnlyGraphics),r=[d].concat(l),n=a.eachAlwaysValues(r).then(h.flatten),
[2,{promise:n,location:c,promises:r}]}})})};k.prototype._queryLayerPopupFeatures=function(a,b){var e=a.queryArea;return a.layerViewsAndGraphics.map(function(a){var k=a.layerView;a={clientGraphics:a.graphics,signal:n.isSome(b)?b.signal:null,defaultPopupTemplateEnabled:n.isSome(b)?!!b.defaultPopupTemplateEnabled:!1};return k.fetchPopupFeatures(e,a)})};k.prototype._isValidPopupGraphic=function(a,b){return a&&!!a.getEffectivePopupTemplate(n.isSome(b)&&b.defaultPopupTemplateEnabled)};k.prototype._prepareFetchPopupFeatures=
function(a,b){return c(this,void 0,void 0,function(){var e,k,c,l,h,d,r,n;return f(this,function(f){switch(f.label){case 0:return[4,this._popupHitTestGraphics(a,b)];case 1:return e=f.sent(),k=e.clientGraphics,c=e.queryArea,l=e.location,h=this._getFetchPopupLayerViews(),d=this._graphicsPerFetchPopupLayerView(k,h),r=d.layerViewsAndGraphics,n=d.clientOnlyGraphics,[2,{clientOnlyGraphics:n,layerViewsAndGraphics:r,queryArea:c,location:l}]}})})};k.prototype._popupHitTestGraphics=function(a,b){return c(this,
void 0,void 0,function(){var e,k,c,l,h,d,r=this;return f(this,function(f){switch(f.label){case 0:return[4,this.popupHitTest(a)];case 1:return e=f.sent(),k=e.results,c=e.mapPoint,l=k.filter(function(a){return r._isValidPopupGraphic(a.graphic,b)}),h=l.length?l[0].mapPoint:null,d=l.map(function(a){return a.graphic}),[2,{clientGraphics:d,queryArea:c,location:c||h}]}})})};k.prototype._getFetchPopupLayerViews=function(){var a=this,b=[];this.allLayerViews.forEach(function(e){a._isValidPopupLayerView(e)&&
b.push(e)});n.isSome(this.graphicsView)&&this._isValidPopupLayerView(this.graphicsView)&&b.push(this.graphicsView);return b.reverse()};k.prototype._isValidPopupLayerView=function(a){return n.isSome(a)&&(!("layer"in a)||!a.suspended)&&"fetchPopupFeatures"in a};k.prototype._graphicsPerFetchPopupLayerView=function(a,b){var e=[],k=new Map;b=b.map(function(a){var b=[];"layer"in a?k.set(a.layer,b):k.set(a.graphics,b);return{layerView:a,graphics:b}});for(var c=0;c<a.length;c++){var l=a[c],f=k.get(l.layer)||
null;f?f.push(l):e.push(l)}return{layerViewsAndGraphics:b,clientOnlyGraphics:e}};return k=m([b.subclass("esri.views.PopupView")],k)}(b.declared(e))}})},"esri/views/2d/AnimationManager":function(){define("../../Viewpoint ../../core/Accessor ../../core/scheduling ../../core/now ../../geometry/Point ../ViewAnimation ./unitBezier ./viewpointUtils".split(" "),function(q,g,p,d,m,c,f,h){var n=function(a,b,e,c){var k=a.targetGeometry,l=b.targetGeometry;c?"string"===typeof c&&(c=f.parse(c)||f.ease):c=f.ease;
this.easing=c;this.duration=e;this.sCenterX=k.x;this.sCenterY=k.y;this.sScale=a.scale;this.sRotation=a.rotation;this.tCenterX=l.x;this.tCenterY=l.y;this.tScale=b.scale;this.tRotation=b.rotation;this.dCenterX=this.tCenterX-this.sCenterX;this.dCenterY=this.tCenterY-this.sCenterY;this.dScale=this.tScale-this.sScale;this.dRotation=this.tRotation-this.sRotation;180<this.dRotation?this.dRotation-=360:-180>this.dRotation&&(this.dRotation+=360)};n.prototype.applyRatio=function(a,b){var e=this.easing(b),c,
k;1<=b?(b=this.tCenterX,c=this.tCenterY,k=this.tRotation,e=this.tScale):(b=this.sCenterX+e*this.dCenterX,c=this.sCenterY+e*this.dCenterY,k=this.sRotation+e*this.dRotation,e=this.sScale+e*this.dScale);a.targetGeometry.x=b;a.targetGeometry.y=c;a.scale=e;a.rotation=k};return g.createSubclass({constructor:function(){this.viewpoint=new q({targetGeometry:new m,scale:0,rotation:0});this._updateTask=p.addFrameTask({postRender:this._postRender.bind(this)});this._updateTask.pause()},properties:{animation:null,
duration:{value:200},transition:{value:null},easing:{value:f.ease},view:null,viewpoint:null},animate:function(a,b,e){this.stop();h.copy(this.viewpoint,b);this.transition=new n(this.viewpoint,a.target,e&&e.duration||this.duration,e&&e.easing||this.easing);b=function(){this.animation===a&&this._updateTask&&("finished"===a.state&&(this.transition.applyRatio(this.viewpoint,1),this.view.state&&(this.view.state.viewpoint=this.viewpoint.clone())),this.updateFunction=this.animation=null)}.bind(this);a.when(b,
b);this._startTime=d();this._updateTask.resume();return this.animation=a},animateContinous:function(a,b){this.stop();this.updateFunction=b;this.viewpoint=a;var e=new c({target:a.clone()});a=function(){this.animation===e&&this._updateTask&&(this.updateFunction=this.animation=null)}.bind(this);e.when(a,a);this._startTime=d();this._updateTask.resume();return this.animation=e},stop:function(){this.animation&&(this.animation.stop(),this.updateFunction=this.animation=null)},_postRender:function(a){var b=
this.animation;b&&b.state!==c.STOPPED?(this.updateFunction?this.updateFunction(this.viewpoint,a.deltaTime):(a=(d()-this._startTime)/this.transition.duration,b=1<=a,this.transition.applyRatio(this.viewpoint,a),b&&this.animation.finish()),this.view.state&&(this.view.state.viewpoint=this.viewpoint.clone())):this._updateTask.pause()}})})},"esri/views/2d/unitBezier":function(){define([],function(){var q=function(g,d,m,c){function f(b,e){var k,c,l,f;e=null==e?1E-6:e;l=b;for(c=0;8>c;c++){f=((a*l+n)*l+h)*
l-b;if(Math.abs(f)<e)return l;k=(3*a*l+2*n)*l+h;if(1E-6>Math.abs(k))break;l-=f/k}k=0;c=1;l=b;if(l<k)return k;if(l>c)return c;for(;k<c;){f=((a*l+n)*l+h)*l;if(Math.abs(f-b)<e)break;b>f?k=l:c=l;l=.5*(c-k)+k}return l}var h=3*g,n=3*(m-g)-h,a=1-h-n,b=3*d,e=3*(c-d)-b,l=1-b-e;return function(a,c){a=f(a,c);return((l*a+e)*a+b)*a}},g=/^cubic-bezier\((.*)\)/;q.parse=function(p){var d=q[p]||null;!d&&(p=g.exec(p))&&(p=p[1].split(",").map(function(d){return parseFloat(d.trim())}),4!==p.length||p.some(function(d){return isNaN(d)})||
(d=q.apply(q,p)));return d};q.ease=q(.25,.1,.25,1);q.linear=q(0,0,1,1);q.easeIn=q["ease-in"]=q(.42,0,1,1);q.easeOut=q["ease-out"]=q(0,0,.58,1);q.easeInOut=q["ease-in-out"]=q(.42,0,.58,1);return q})},"esri/views/2d/viewpointUtils":function(){define("require exports ../../core/tsSupport/generatorHelper ../../core/tsSupport/awaiterHelper ../../Viewpoint ../../core/Collection ../../core/maybe ../../core/promiseUtils ../../core/unitUtils ../../core/wgs84Constants ../../core/libs/gl-matrix-2/common ../../core/libs/gl-matrix-2/mat2d ../../core/libs/gl-matrix-2/mat2df64 ../../core/libs/gl-matrix-2/vec2 ../../core/libs/gl-matrix-2/vec2f64 ../../geometry/Extent ../../geometry/Geometry ../../geometry/Point ../../geometry/SpatialReference ../../geometry/support/spatialReferenceUtils ../../geometry/support/webMercatorUtils ../../geometry/support/webMercatorUtils".split(" "),
function(q,g,p,d,m,c,f,h,n,a,b,e,l,k,r,C,y,t,x,z,u,v){function w(a,e,c,l){return l&&c&&!l.equals(c)&&u.canProject(l,c)&&l.isWebMercator?(l.isWebMercator?(c=e[1],89.99999<c?c=89.99999:-89.99999>c&&(c=-89.99999),c=Math.sin(b.common.toRadian(c)),a=k.vec2.set(a,b.common.toRadian(e[0])*I,.5*I*Math.log((1+c)/(1-c)))):(c=b.common.toDegree(e[0]/I),a=k.vec2.set(a,c-360*Math.floor((c+180)/360),b.common.toDegree(.5*Math.PI-2*Math.atan(Math.exp(-1*e[1]/I))))),a):k.vec2.copy(a,e)}function D(a){return a.wkid?a:
a.spatialReference||x.WGS84}function B(a,b){return b.type?k.vec2.set(a,b.x,b.y):k.vec2.copy(a,b)}function A(a,b){return Math.max(a.width/b[0],a.height/b[1])*L(a.spatialReference)}function J(a,b,e,k){return d(this,void 0,void 0,function(){var l,d,r,n,g,m,x,v,w,z,D,B,q,S,A,T,V,E,U,F,G,H,I,O,N,K,L,Q;return p(this,function(M){switch(M.label){case 0:if(!a||Array.isArray(a)&&!a.length)return[2,null];c.isCollection(a)&&(a=a.toArray());if(!Array.isArray(a)||!a.length||"object"!==typeof a[0])return[3,7];d=
a.every(function(a){return"attributes"in a});r=a.some(function(a){return!a.geometry});n=a;if(!(d&&r&&b&&b.allLayerViews))return[3,2];g=new Map;m=0;for(x=a;m<x.length;m++)v=x[m],w=v.layer,z=g.get(w)||[],D=v.attributes[w.objectIdField],null!=D&&z.push(D),g.set(w,z);B=[];g.forEach(function(a,e){var c=b.allLayerViews.find(function(a){return a.layer.id===e.id});if("queryFeatures"in c){var k=e.createQuery();k.objectIds=a;k.returnGeometry=!0;B.push(c.queryFeatures(k))}});return[4,h.all(B)];case 1:q=M.sent();
S=[];A=0;for(T=q;A<T.length;A++)if((V=T[A])&&V.features&&V.features.length)for(E=0,U=V.features;E<U.length;E++)v=U[E],f.isSome(v.geometry)&&S.push(v.geometry);n=S;M.label=2;case 2:F=0,G=n,M.label=3;case 3:if(!(F<G.length))return[3,6];H=G[F];return[4,J(H,b,e,k)];case 4:k=M.sent(),M.label=5;case 5:return F++,[3,3];case 6:return[2,k];case 7:if(!Array.isArray(a)||2!==a.length||"number"!==typeof a[0]||"number"!==typeof a[1])return[3,8];l=new t(a);return[3,12];case 8:if(!(a instanceof y))return[3,9];l=
a;return[3,12];case 9:if(!("geometry"in a))return[3,12];if(!a.geometry)return[3,10];l=a.geometry;return[3,12];case 10:if(!a.layer)return[3,12];I=a.layer;O=b.allLayerViews.find(function(a){return a.layer.id===I.id});if(!("queryFeatures"in O))return[3,12];N=I.createQuery();N.objectIds=[a.attributes[I.objectIdField]];N.returnGeometry=!0;return[4,O.queryFeatures(N)];case 11:K=M.sent(),l=f.get(K,"features",0,"geometry"),M.label=12;case 12:if(f.isNone(l))return[2,null];L="point"===l.type?new C({xmin:l.x,
ymin:l.y,xmax:l.x,ymax:l.y,spatialReference:l.spatialReference}):l.extent;if(!L)return[2,null];Q=u.canProject(L,e);if(!L.spatialReference.equals(e)&&Q)L=u.project(L,e);else if(!Q)return[2,null];k=k?k.union(L):L.clone();return[2,k]}})})}function E(a){if(a&&(!Array.isArray(a)||"number"!==typeof a[0])&&("object"===typeof a||Array.isArray(a)&&"object"===typeof a[0])){if("layer"in a&&a.layer&&a.layer.minScale&&a.layer.maxScale){var b=a.layer;return{min:b.minScale,max:b.maxScale}}if(Array.isArray(a)&&a.length&&
a.every(function(a){return"layer"in a})){for(var e=0,c=0,k=0;k<a.length;k++)(b=a[k].layer)&&b.minScale&&b.maxScale&&(e=b.minScale<e?b.minScale:e,c=b.maxScale>c?b.maxScale:c);return e&&c?{min:e,max:c}:null}}}function G(a,b){return d(this,void 0,void 0,function(){var e,c,k,l,f,h,d,n,g,x,y,z,q,S,T,F;return p(this,function(M){switch(M.label){case 0:if(!a||!b)return[2,new m({targetGeometry:new t,scale:0,rotation:0})];e=b.spatialReference;c=b.size;k=b.viewpoint;l=b.constraints;f=null;a instanceof m?f=a:
a.viewpoint?f=a.viewpoint:a.target&&"esri.Viewpoint"===a.target.declaredClass&&(f=a.target);h=null;if(!f||!f.targetGeometry)return[3,1];h=f.targetGeometry;return[3,10];case 1:if(!(a instanceof C))return[3,2];h=a;return[3,10];case 2:return a||a&&("center"in a||"extent"in a||"target"in a)?[4,J(a.center,b,e)]:[3,10];case 3:return(g=M.sent())?[3,5]:[4,J(a.extent,b,e)];case 4:g=M.sent(),M.label=5;case 5:return(n=g)?[3,7]:[4,J(a.target,b,e)];case 6:n=M.sent(),M.label=7;case 7:return(d=n)?[3,9]:[4,J(a,b,
e)];case 8:d=M.sent(),M.label=9;case 9:h=d,M.label=10;case 10:!h&&k&&k.targetGeometry?h=k.targetGeometry:!h&&b.extent&&(h=b.extent);x=D(h);e||(e=D(b.spatialReference||b.extent||h));if(!v.canProject(h,e)&&x&&!x.equals(e))return[2,null];y=B(r.vec2f64.create(),h.center?h.center:h);z=new t(w(y,y,x,e),e);q=null;q=f&&f.targetGeometry&&"point"===f.targetGeometry.type?f.scale:a.hasOwnProperty("scale")&&a.scale?a.scale:a.hasOwnProperty("zoom")&&-1!==a.zoom&&l&&l.effectiveLODs?l.zoomToScale(a.zoom):Array.isArray(h)||
"point"===h.type||"extent"===h.type&&0===h.width&&0===h.height?b.extent&&u.canProject(b.extent,e)?A(u.project(b.extent,e),c):b.extent?A(b.extent,c):k.scale:u.canProject(h.extent,e)?A(u.project(h.extent,e),c):A(h.extent,c);if(S=E(a))S.min&&S.min>q?q=S.min:S.max&&S.max<q&&(q=S.max);T=0;f?T=f.rotation:a.hasOwnProperty("rotation")?T=a.rotation:k&&(T=k.rotation);F=new m({targetGeometry:z,scale:q,rotation:T});l&&(F=l.fit(F),l.rotationEnabled||(F.rotation=T));return[2,F]}})})}function F(a,b){var e=a.targetGeometry,
c=b.targetGeometry;e.x=c.x;e.y=c.y;e.spatialReference=c.spatialReference;a.scale=b.scale;a.rotation=b.rotation;return a}function H(a,b,e){return e?k.vec2.set(a,.5*(b[0]-e.right+e.left),.5*(b[1]-e.bottom+e.top)):k.vec2.scale(a,b,.5)}function O(a,b,c,k){g.getTransform(a,b,c,k);return e.mat2d.invert(a,a)}function Q(a,b,e){var c=P(b);b=Math.abs(Math.cos(c));c=Math.abs(Math.sin(c));return k.vec2.set(a,Math.round(e[1]*c+e[0]*b),Math.round(e[1]*b+e[0]*c))}function N(a){var b=a.scale;a=a.targetGeometry.spatialReference;
a=z.isValid(a)?1/(39.37*n.getMetersPerUnitForSR(a)*96):1;return b*a}function P(a){return b.common.toRadian(a.rotation)||0}function L(a){return z.isValid(a)?39.37*n.getMetersPerUnitForSR(a)*96:1}function R(a){return a.isWrappable?(a=z.getInfo(a),a.valid[1]-a.valid[0]):0}Object.defineProperty(g,"__esModule",{value:!0});var I=a.wgs84Radius,K=180/Math.PI;g.extentToScale=A;g.create=G;g.copy=F;g.getAnchor=H;g.getExtent=function(){var a=r.vec2f64.create();return function(b,e,c){var k=e.targetGeometry;B(a,
k);e=.5*N(e);b.xmin=a[0]-e*c[0];b.ymin=a[1]-e*c[1];b.xmax=a[0]+e*c[0];b.ymax=a[1]+e*c[1];b.spatialReference=k.spatialReference;return b}}();g.setExtent=function(a,b,e,c,k){g.centerAt(a,b,e.center);a.scale=A(e,c);k&&k.constraints&&k.constraints.constrain(a);return a};g.getOuterExtent=function(){var a=r.vec2f64.create(),b=r.vec2f64.create();return function(e,c,k){B(a,c.targetGeometry);Q(b,c,k);k=.5*N(c);e.set({xmin:a[0]-k*b[0],ymin:a[1]-k*b[1],xmax:a[0]+k*b[0],ymax:a[1]+k*b[1],spatialReference:c.targetGeometry.spatialReference});
return e}}();g.getOuterSize=Q;g.getPaddingScreenTranslation=function(){var a=r.vec2f64.create();return function(b,e,c){return k.vec2.sub(b,k.vec2.scale(b,e,.5),H(a,e,c))}}();g.getPaddingMapTranslation=function(){var a=l.mat2df64.create(),b=r.vec2f64.create();return function(c,l,f,h){var d=N(l);l=P(l);k.vec2.set(b,d,d);e.mat2d.fromScaling(a,b);e.mat2d.rotate(a,a,l);e.mat2d.translate(a,a,g.getPaddingScreenTranslation(b,f,h));e.mat2d.translate(a,a,[0,h.top-h.bottom]);return k.vec2.set(c,a[4],a[5])}}();
g.getResolution=N;g.getResolutionToScaleFactor=L;g.getMatrix=function(){var a=r.vec2f64.create(),b=r.vec2f64.create(),c=r.vec2f64.create();return function(l,f,h,d,r,n){k.vec2.negate(a,f);k.vec2.scale(b,h,.5*n);k.vec2.set(c,1/d*n,-1/d*n);e.mat2d.identity(l);e.mat2d.translate(l,l,b);r&&e.mat2d.rotate(l,l,r);e.mat2d.scale(l,l,c);e.mat2d.translate(l,l,a);return l}}();g.getTransform=function(){var a=r.vec2f64.create();return function(b,e,c,k){var l=N(e),f=P(e);B(a,e.targetGeometry);return g.getMatrix(b,
a,c,l,f,k)}}();g.getTransformNoRotation=function(){var a=r.vec2f64.create();return function(b,e,c,k){var l=N(e);B(a,e.targetGeometry);return g.getMatrix(b,a,c,l,0,k)}}();g.getWorldWidth=R;g.getWorldScreenWidth=function(a,b){return Math.round(R(a)/b)};g.createAsync=function(a,b){return G(a,b)};g.angleBetween=function(){var a=r.vec2f64.create(),b=r.vec2f64.create(),e=[0,0,0];return function(c,l,f){k.vec2.subtract(a,c,l);k.vec2.normalize(a,a);k.vec2.subtract(b,c,f);k.vec2.normalize(b,b);k.vec2.cross(e,
a,b);c=Math.acos(k.vec2.dot(a,b)/(k.vec2.length(a)*k.vec2.length(b)))*K;0>e[2]&&(c=-c);isNaN(c)&&(c=0);return c}}();g.addPadding=function(){var a=r.vec2f64.create();return function(b,e,c,k){var l=b.targetGeometry;F(b,e);g.getPaddingMapTranslation(a,e,c,k);l.x+=a[0];l.y+=a[1];return b}}();g.removePadding=function(){var a=r.vec2f64.create();return function(b,e,c,k){var l=b.targetGeometry;F(b,e);g.getPaddingMapTranslation(a,e,c,k);l.x-=a[0];l.y-=a[1];return b}}();g.centerAt=function(){var a=r.vec2f64.create();
return function(b,e,c){F(b,e);e=b.targetGeometry;var k=D(c),l=D(e);B(a,c);w(a,a,k,l);e.x=a[0];e.y=a[1];return b}}();g.pixelSizeAt=function(a,b){return N(b)};g.resize=function(){var a=r.vec2f64.create();return function(b,e,c,l,f){f||(f="center");k.vec2.sub(a,c,l);k.vec2.scale(a,a,.5);c=a[0];l=a[1];switch(f){case "center":k.vec2.set(a,0,0);break;case "left":k.vec2.set(a,-c,0);break;case "top":k.vec2.set(a,0,l);break;case "right":k.vec2.set(a,c,0);break;case "bottom":k.vec2.set(a,0,-l);break;case "top-left":k.vec2.set(a,
-c,l);break;case "bottom-left":k.vec2.set(a,-c,-l);break;case "top-right":k.vec2.set(a,c,l);break;case "bottom-right":k.vec2.set(a,c,-l)}g.translateBy(b,e,a);return b}}();g.rotateBy=function(a,b,e){F(a,b);a.rotation+=e;return a};g.rotateTo=function(a,b,e){F(a,b);a.rotation=e;return a};g.scaleBy=function(){var a=r.vec2f64.create();return function(b,e,c,l,f){F(b,e);isNaN(c)||0===c||(g.toMap(a,l,e,f),b.scale=e.scale*c,g.toScreen(a,a,b,f),g.translateBy(b,b,k.vec2.set(a,a[0]-l[0],l[1]-a[1])));return b}}();
g.scaleTo=function(a,b,e){F(a,b);a.scale=e;return a};g.scaleAndRotateBy=function(){var a=r.vec2f64.create();return function(b,e,c,l,f,h){F(b,e);isNaN(c)||0===c||(g.toMap(a,f,e,h),b.scale=e.scale*c,b.rotation+=l,g.toScreen(a,a,b,h),g.translateBy(b,b,k.vec2.set(a,a[0]-f[0],f[1]-a[1])));return b}}();g.padAndScaleAndRotateBy=function(){var a=r.vec2f64.create(),b=r.vec2f64.create();return function(e,c,l,f,h,d,r){g.getPaddingScreenTranslation(b,d,r);k.vec2.add(a,h,b);return f?g.scaleAndRotateBy(e,c,l,f,
a,d):g.scaleBy(e,c,l,a,d)}}();g.toMap=function(){var a=l.mat2df64.create();return function(b,e,c,l){return k.vec2.transformMat2d(b,e,O(a,c,l,1))}}();g.toScreen=function(){var a=l.mat2df64.create();return function(b,e,c,l){return k.vec2.transformMat2d(b,e,g.getTransform(a,c,l,1))}}();g.translateBy=function(){var a=r.vec2f64.create(),b=l.mat2df64.create();return function(c,l,f){F(c,l);var h=N(l),d=c.targetGeometry;e.mat2d.fromRotation(b,P(l));e.mat2d.scale(b,b,r.vec2f64.fromValues(h,h));k.vec2.transformMat2d(a,
f,b);d.x+=a[0];d.y+=a[1];return c}}()})},"esri/core/libs/gl-matrix-2/common":function(){define(["require","exports","./math/common"],function(q,g,p){Object.defineProperty(g,"__esModule",{value:!0});g.common=p})},"esri/core/libs/gl-matrix-2/mat2d":function(){define(["require","exports","./math/mat2d"],function(q,g,p){Object.defineProperty(g,"__esModule",{value:!0});g.mat2d=p})},"esri/core/libs/gl-matrix-2/math/mat2d":function(){define(["require","exports","./common"],function(q,g,p){function d(c,f,
h){var d=f[0],a=f[1],b=f[2],e=f[3],l=f[4];f=f[5];var k=h[0],r=h[1],g=h[2],m=h[3],t=h[4];h=h[5];c[0]=d*k+b*r;c[1]=a*k+e*r;c[2]=d*g+b*m;c[3]=a*g+e*m;c[4]=d*t+b*h+l;c[5]=a*t+e*h+f;return c}function m(c,f,h){c[0]=f[0]-h[0];c[1]=f[1]-h[1];c[2]=f[2]-h[2];c[3]=f[3]-h[3];c[4]=f[4]-h[4];c[5]=f[5]-h[5];return c}Object.defineProperty(g,"__esModule",{value:!0});g.copy=function(c,f){c[0]=f[0];c[1]=f[1];c[2]=f[2];c[3]=f[3];c[4]=f[4];c[5]=f[5];return c};g.identity=function(c){c[0]=1;c[1]=0;c[2]=0;c[3]=1;c[4]=0;
c[5]=0;return c};g.set=function(c,f,h,d,a,b,e){c[0]=f;c[1]=h;c[2]=d;c[3]=a;c[4]=b;c[5]=e;return c};g.invert=function(c,f){var h=f[0],d=f[1],a=f[2],b=f[3],e=f[4];f=f[5];var l=h*b-d*a;if(!l)return null;l=1/l;c[0]=b*l;c[1]=-d*l;c[2]=-a*l;c[3]=h*l;c[4]=(a*f-b*e)*l;c[5]=(d*e-h*f)*l;return c};g.determinant=function(c){return c[0]*c[3]-c[1]*c[2]};g.multiply=d;g.rotate=function(c,f,h){var d=f[0],a=f[1],b=f[2],e=f[3],l=f[4];f=f[5];var k=Math.sin(h);h=Math.cos(h);c[0]=d*h+b*k;c[1]=a*h+e*k;c[2]=d*-k+b*h;c[3]=
a*-k+e*h;c[4]=l;c[5]=f;return c};g.scale=function(c,f,h){var d=f[1],a=f[2],b=f[3],e=f[4],l=f[5],k=h[0];h=h[1];c[0]=f[0]*k;c[1]=d*k;c[2]=a*h;c[3]=b*h;c[4]=e;c[5]=l;return c};g.translate=function(c,f,h){var d=f[0],a=f[1],b=f[2],e=f[3],l=f[4];f=f[5];var k=h[0];h=h[1];c[0]=d;c[1]=a;c[2]=b;c[3]=e;c[4]=d*k+b*h+l;c[5]=a*k+e*h+f;return c};g.fromRotation=function(c,f){var h=Math.sin(f);f=Math.cos(f);c[0]=f;c[1]=h;c[2]=-h;c[3]=f;c[4]=0;c[5]=0;return c};g.fromScaling=function(c,f){c[0]=f[0];c[1]=0;c[2]=0;c[3]=
f[1];c[4]=0;c[5]=0;return c};g.fromTranslation=function(c,f){c[0]=1;c[1]=0;c[2]=0;c[3]=1;c[4]=f[0];c[5]=f[1];return c};g.str=function(c){return"mat2d("+c[0]+", "+c[1]+", "+c[2]+", "+c[3]+", "+c[4]+", "+c[5]+")"};g.frob=function(c){return Math.sqrt(Math.pow(c[0],2)+Math.pow(c[1],2)+Math.pow(c[2],2)+Math.pow(c[3],2)+Math.pow(c[4],2)+Math.pow(c[5],2)+1)};g.add=function(c,f,h){c[0]=f[0]+h[0];c[1]=f[1]+h[1];c[2]=f[2]+h[2];c[3]=f[3]+h[3];c[4]=f[4]+h[4];c[5]=f[5]+h[5];return c};g.subtract=m;g.multiplyScalar=
function(c,f,h){c[0]=f[0]*h;c[1]=f[1]*h;c[2]=f[2]*h;c[3]=f[3]*h;c[4]=f[4]*h;c[5]=f[5]*h;return c};g.multiplyScalarAndAdd=function(c,f,h,d){c[0]=f[0]+h[0]*d;c[1]=f[1]+h[1]*d;c[2]=f[2]+h[2]*d;c[3]=f[3]+h[3]*d;c[4]=f[4]+h[4]*d;c[5]=f[5]+h[5]*d;return c};g.exactEquals=function(c,f){return c[0]===f[0]&&c[1]===f[1]&&c[2]===f[2]&&c[3]===f[3]&&c[4]===f[4]&&c[5]===f[5]};g.equals=function(c,f){var h=c[0],d=c[1],a=c[2],b=c[3],e=c[4];c=c[5];var l=f[0],k=f[1],r=f[2],g=f[3],m=f[4];f=f[5];return Math.abs(h-l)<=
p.EPSILON*Math.max(1,Math.abs(h),Math.abs(l))&&Math.abs(d-k)<=p.EPSILON*Math.max(1,Math.abs(d),Math.abs(k))&&Math.abs(a-r)<=p.EPSILON*Math.max(1,Math.abs(a),Math.abs(r))&&Math.abs(b-g)<=p.EPSILON*Math.max(1,Math.abs(b),Math.abs(g))&&Math.abs(e-m)<=p.EPSILON*Math.max(1,Math.abs(e),Math.abs(m))&&Math.abs(c-f)<=p.EPSILON*Math.max(1,Math.abs(c),Math.abs(f))};g.mul=d;g.sub=m})},"esri/core/libs/gl-matrix-2/mat2df64":function(){define(["require","exports","./factories/mat2df64"],function(q,g,p){Object.defineProperty(g,
"__esModule",{value:!0});g.mat2df64=p})},"esri/core/libs/gl-matrix-2/factories/mat2df64":function(){define(["require","exports"],function(q,g){Object.defineProperty(g,"__esModule",{value:!0});g.create=function(){return[1,0,0,1,0,0]};g.clone=function(g){return[g[0],g[1],g[2],g[3],g[4],g[5]]};g.fromValues=function(g,d,m,c,f,h){return[g,d,m,c,f,h]};g.createView=function(g,d){return new Float64Array(g,d,6)}})},"esri/core/libs/gl-matrix-2/vec2":function(){define(["require","exports","./math/vec2"],function(q,
g,p){Object.defineProperty(g,"__esModule",{value:!0});g.vec2=p})},"esri/core/libs/gl-matrix-2/math/vec2":function(){define(["require","exports","./common"],function(q,g,p){function d(a,e,c){a[0]=e[0]-c[0];a[1]=e[1]-c[1];return a}function m(a,e,c){a[0]=e[0]*c[0];a[1]=e[1]*c[1];return a}function c(a,e,c){a[0]=e[0]/c[0];a[1]=e[1]/c[1];return a}function f(a,e){var b=e[0]-a[0];a=e[1]-a[1];return Math.sqrt(b*b+a*a)}function h(a,e){var b=e[0]-a[0];a=e[1]-a[1];return b*b+a*a}function n(a){var b=a[0];a=a[1];
return Math.sqrt(b*b+a*a)}function a(a){var b=a[0];a=a[1];return b*b+a*a}Object.defineProperty(g,"__esModule",{value:!0});g.copy=function(a,e){a[0]=e[0];a[1]=e[1];return a};g.set=function(a,e,c){a[0]=e;a[1]=c;return a};g.add=function(a,e,c){a[0]=e[0]+c[0];a[1]=e[1]+c[1];return a};g.subtract=d;g.multiply=m;g.divide=c;g.ceil=function(a,e){a[0]=Math.ceil(e[0]);a[1]=Math.ceil(e[1]);return a};g.floor=function(a,e){a[0]=Math.floor(e[0]);a[1]=Math.floor(e[1]);return a};g.min=function(a,e,c){a[0]=Math.min(e[0],
c[0]);a[1]=Math.min(e[1],c[1]);return a};g.max=function(a,e,c){a[0]=Math.max(e[0],c[0]);a[1]=Math.max(e[1],c[1]);return a};g.round=function(a,e){a[0]=Math.round(e[0]);a[1]=Math.round(e[1]);return a};g.scale=function(a,e,c){a[0]=e[0]*c;a[1]=e[1]*c;return a};g.scaleAndAdd=function(a,e,c,k){a[0]=e[0]+c[0]*k;a[1]=e[1]+c[1]*k;return a};g.distance=f;g.squaredDistance=h;g.length=n;g.squaredLength=a;g.negate=function(a,e){a[0]=-e[0];a[1]=-e[1];return a};g.inverse=function(a,e){a[0]=1/e[0];a[1]=1/e[1];return a};
g.normalize=function(a,e){var b=e[0],c=e[1],b=b*b+c*c;0<b&&(b=1/Math.sqrt(b),a[0]=e[0]*b,a[1]=e[1]*b);return a};g.dot=function(a,e){return a[0]*e[0]+a[1]*e[1]};g.cross=function(a,e,c){e=e[0]*c[1]-e[1]*c[0];a[0]=a[1]=0;a[2]=e;return a};g.lerp=function(a,e,c,k){var b=e[0];e=e[1];a[0]=b+k*(c[0]-b);a[1]=e+k*(c[1]-e);return a};g.random=function(a,e){e=e||1;var b=2*p.RANDOM()*Math.PI;a[0]=Math.cos(b)*e;a[1]=Math.sin(b)*e;return a};g.transformMat2=function(a,e,c){var b=e[0];e=e[1];a[0]=c[0]*b+c[2]*e;a[1]=
c[1]*b+c[3]*e;return a};g.transformMat2d=function(a,e,c){var b=e[0];e=e[1];a[0]=c[0]*b+c[2]*e+c[4];a[1]=c[1]*b+c[3]*e+c[5];return a};g.transformMat3=function(a,e,c){var b=e[0];e=e[1];a[0]=c[0]*b+c[3]*e+c[6];a[1]=c[1]*b+c[4]*e+c[7];return a};g.transformMat4=function(a,e,c){var b=e[0];e=e[1];a[0]=c[0]*b+c[4]*e+c[12];a[1]=c[1]*b+c[5]*e+c[13];return a};g.rotate=function(a,e,c,k){var b=e[0]-c[0];e=e[1]-c[1];var l=Math.sin(k);k=Math.cos(k);a[0]=b*k-e*l+c[0];a[1]=b*l+e*k+c[1];return a};g.angle=function(a,
e){var b=a[0];a=a[1];var c=e[0];e=e[1];var f=b*b+a*a;0<f&&(f=1/Math.sqrt(f));var h=c*c+e*e;0<h&&(h=1/Math.sqrt(h));b=(b*c+a*e)*f*h;return 1<b?0:-1>b?Math.PI:Math.acos(b)};g.str=function(a){return"vec2("+a[0]+", "+a[1]+")"};g.exactEquals=function(a,e){return a[0]===e[0]&&a[1]===e[1]};g.equals=function(a,e){var b=a[0];a=a[1];var c=e[0];e=e[1];return Math.abs(b-c)<=p.EPSILON*Math.max(1,Math.abs(b),Math.abs(c))&&Math.abs(a-e)<=p.EPSILON*Math.max(1,Math.abs(a),Math.abs(e))};g.len=n;g.sub=d;g.mul=m;g.div=
c;g.dist=f;g.sqrDist=h;g.sqrLen=a})},"esri/core/libs/gl-matrix-2/vec2f64":function(){define(["require","exports","./factories/vec2f64"],function(q,g,p){Object.defineProperty(g,"__esModule",{value:!0});g.vec2f64=p})},"esri/core/libs/gl-matrix-2/factories/vec2f64":function(){define(["require","exports"],function(q,g){Object.defineProperty(g,"__esModule",{value:!0});g.create=function(){return[0,0]};g.clone=function(g){return[g[0],g[1]]};g.fromValues=function(g,d){return[g,d]};g.fromArray=function(g){for(var d=
[0,0],m=Math.min(2,g.length),c=0;c<m;++c)d[c]=g[c];return d};g.createView=function(g,d){return new Float64Array(g,d,2)};g.zeros=function(){return[0,0]};g.ones=function(){return[1,1]};g.unitX=function(){return[1,0]};g.unitY=function(){return[0,1]};g.ZEROS=[0,0];g.ONES=[1,1];g.UNIT_X=[1,0];g.UNIT_Y=[0,1]})},"esri/views/2d/FrameTask":function(){define(["require","exports","../../core/scheduling"],function(q,g,p){Object.defineProperty(g,"__esModule",{value:!0});q=function(){function d(d){var c=this;this.view=
d;this._frameTaskHandle=null;this.updateEnabled=this.stationary=!0;this.animationInProgress=!1;this.prepare=function(){c._updateParameters.state=c.view.state;c._updateParameters.stationary=c.view.stationary;c._updateParameters.pixelRatio=window.devicePixelRatio;c._updateParameters.renderingOptions=c.view.renderingOptions};this.update=function(){if(c.updateEnabled){var f=c.view,h=f.labelManager,d=c.graphicsView,a=f.allLayerViews.toArray().filter(function(a){return!("layerViews"in a)&&a.isFulfilled()}),
b=a.length,e=f.state,l=0;for(;l<a.length;l++)if(f=a[l],f.attached){var k=f.lastUpdateId;if(null==k||!c.stationary&&!f.moving)f.moving=!0,f.moveStart();k!==e.id&&f.viewChange();c.stationary&&f.moving&&(f.moving=!1,f.moveEnd());f.lastUpdateId=e.id}h&&h.lastUpdateId!==e.id&&(h.viewChange(),h.lastUpdateId=e.id);d&&d.lastUpdateId!==e.id&&(d.viewChange(),d.lastUpdateId=e.id);h=c._layerViewsTrash;for(d=0;d<h.length;d++)f=h[d],c._detachLayerView(f);for(d=h.length=0;d<b;d++)f=a[d],f.isFulfilled()&&!f.attached&&
c._attachLayerView(f);a=c._updateParameters;b=c._layerViewsToUpdate;f=b.slice();d=b.length=0;for(e=f;d<e.length;d++)f=e[d],"layerViews"in f?b.push(f):f.processUpdate(a);b=c._updatablesToUpdate;f=b.slice();for(b=b.length=0;b<f.length;b++)f[b].processUpdate(a);c.animationInProgress||0!==c._layerViewsToUpdate.length||0!==c._updatablesToUpdate.length||0!==h.length||c._frameTaskHandle.pause()}}}d.prototype.destroy=function(){this.stop()};d.prototype.start=function(){var d=this;this.stationary=this.view.stationary;
this._updateParameters={state:this.view.state,pixelRatio:window.devicePixelRatio,stationary:this.stationary,renderingOptions:this.view.renderingOptions};this._layerViewsTrash=[];this._layerViewsToUpdate=[];this._updatablesToUpdate=[];this._allLayerViewsChangeHandle=this.view.allLayerViews.on("change",function(c){Array.prototype.push.apply(d._layerViewsTrash,c.removed);d.requestFrame()});this._stationaryHandle=this.view.watch("stationary",function(c){d.stationary=c;d.requestFrame()});this._frameTaskHandle=
p.addFrameTask(this)};d.prototype.stop=function(){var d=this;this._frameTaskHandle&&(this.view.allLayerViews.forEach(function(c){"layerViews"in c||d._detachLayerView(c)}),this._stationaryHandle.remove(),this._allLayerViewsChangeHandle.remove(),this._frameTaskHandle.remove(),this._updateParameters=this._stationaryHandle=this._allLayerViewsChangeHandle=this._frameTaskHandle=this._layerViewsTrash=this._layerViewsToUpdate=null,this.stationary=!0,this.animationInProgress=!1)};d.prototype.requestLayerViewUpdate=
function(d){this._layerViewsToUpdate.push(d);this.requestFrame()};d.prototype.requestUpdate=function(d){this._updatablesToUpdate.push(d);this.requestFrame()};d.prototype.requestFrame=function(){this._frameTaskHandle&&this._frameTaskHandle.resume()};d.prototype._attachLayerView=function(d){d.attached||(d.attached=!0,d.attach(),this._updateParameters.stationary?d.moving=!1:(d.moving=!0,d.moveStart()))};d.prototype._detachLayerView=function(d){d.attached&&(d.detach(),d.attached=!1,d.moving=!1)};return d}();
g.default=q})},"esri/views/2d/layerViewModuleImportUtils":function(){define(["require","exports","../../core/Error","../../core/maybe","@dojo/framework/shim/Promise"],function(q,g,p,d){function m(){return Promise.all([new Promise(function(c,a){q(["../webgl"],c,a)}),new Promise(function(c,a){q(["./engine"],c,a)})])}Object.defineProperty(g,"__esModule",{value:!0});var c=function(){return m().then(function(){return new Promise(function(c,a){q(["./layers/TileLayerView2D"],c,a)})})},f=function(){return m().then(function(){return new Promise(function(c,
a){q(["./layers/FeatureLayerView2D"],c,a)})})},h={"base-dynamic":function(){return m().then(function(){return new Promise(function(c,a){q(["./layers/BaseDynamicLayerView2D"],c,a)})})},"base-tile":c,"bing-maps":c,csv:f,"geo-rss":function(){return m().then(function(){return new Promise(function(c,a){q(["./layers/GeoRSSLayerView2D"],c,a)})})},feature:f,geojson:f,graphics:function(){return m().then(function(){return new Promise(function(c,a){q(["./layers/GraphicsLayerView2D"],c,a)})})},group:function(){return m().then(function(){return new Promise(function(c,
a){q(["../layers/GroupLayerView"],c,a)})})},imagery:function(){return m().then(function(){return new Promise(function(c,a){q(["./layers/ImageryLayerView2D"],c,a)})})},kml:function(){return m().then(function(){return new Promise(function(c,a){q(["./layers/KMLLayerView2D"],c,a)})})},"map-image":function(){return m().then(function(){return new Promise(function(c,a){q(["./layers/MapImageLayerView2D"],c,a)})})},"map-notes":function(){return m().then(function(){return new Promise(function(c,a){q(["./layers/MapNotesLayerView2D"],
c,a)})})},"open-street-map":c,stream:function(){return m().then(function(){return new Promise(function(c,a){q(["./layers/StreamLayerView2D"],c,a)})})},tile:c,"vector-tile":function(){return m().then(function(){return new Promise(function(c,a){q(["./layers/VectorTileLayerView2D"],c,a)})})},"web-tile":c,wms:function(){return m().then(function(){return new Promise(function(c,a){q(["./layers/WMSLayerView2D"],c,a)})})},wmts:function(){return m().then(function(){return new Promise(function(c,a){q(["./layers/WMTSLayerView2D"],
c,a)})})},"base-elevation":null,"building-scene":null,elevation:null,"integrated-mesh":null,"point-cloud":null,scene:null,unknown:null,unsupported:null};g.layerView2DImporter={hasLayerViewModule:function(c){return d.isSome(h[c.type])},importLayerView:function(c){var a=h[c.type];if(!d.isSome(a))throw c=c.declaredClass?c.declaredClass.slice(c.declaredClass.lastIndexOf(".")+1):"Unknown",a=c.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),new p(a+":view-not-supported",c+" is not supported in 2D");return a(c)}}})},
"esri/views/2d/MapViewConstraints":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Evented ../../core/accessorSupport/decorators ../../layers/support/LOD ./constraints/RotationConstraint ./constraints/ZoomConstraint".split(" "),function(q,g,p,d,m,c,f,h,n){return function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;b.lods=null;b.minScale=0;b.maxScale=0;b.minZoom=-1;b.maxZoom=-1;b.rotationEnabled=!0;b.snapToZoom=
!0;return b}p(b,a);b.prototype.initialize=function(){this.watch("_zoom, _rotation",this.emit.bind(this,"update"),!0)};b.prototype.destroy=function(){this.view=null;this._set("_zoom",null);this._set("_rotation",null)};Object.defineProperty(b.prototype,"_rotation",{get:function(){return new h({rotationEnabled:this.rotationEnabled})},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"_defaultLODs",{get:function(){var a=this.get("view.defaultsFromMap.tileInfo"),b=this.get("view.spatialReference");
return a&&b&&a.spatialReference.equals(b)?a.lods:null},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"_zoom",{get:function(){return new n({lods:this.lods||this._defaultLODs,minZoom:this.minZoom,maxZoom:this.maxZoom,minScale:this.minScale,maxScale:this.maxScale,snapToZoom:this.snapToZoom})},enumerable:!0,configurable:!0});b.prototype.canZoomInTo=function(a){var b=this.effectiveMaxScale;return 0===b||a>=b};b.prototype.canZoomOutTo=function(a){var b=this.effectiveMinScale;return 0===
b||a<=b};b.prototype.constrain=function(a,b){this._zoom.constrain(a,b);this._rotation.constrain(a,b);return a};b.prototype.fit=function(a){return this._zoom.fit(a)};b.prototype.zoomToScale=function(a){return this._zoom.zoomToScale(a)};b.prototype.scaleToZoom=function(a){return this._zoom.scaleToZoom(a)};b.prototype.snapScale=function(a){return this._zoom.snapToClosestScale(a)};b.prototype.snapToNextScale=function(a){return this._zoom.snapToNextScale(a)};b.prototype.snapToPreviousScale=function(a){return this._zoom.snapToPreviousScale(a)};
d([c.property({readOnly:!0,aliasOf:"_zoom.effectiveLODs"})],b.prototype,"effectiveLODs",void 0);d([c.property({readOnly:!0,aliasOf:"_zoom.effectiveMinScale"})],b.prototype,"effectiveMinScale",void 0);d([c.property({readOnly:!0,aliasOf:"_zoom.effectiveMaxScale"})],b.prototype,"effectiveMaxScale",void 0);d([c.property({readOnly:!0,aliasOf:"_zoom.effectiveMinZoom"})],b.prototype,"effectiveMinZoom",void 0);d([c.property({readOnly:!0,aliasOf:"_zoom.effectiveMaxZoom"})],b.prototype,"effectiveMaxZoom",void 0);
d([c.property({type:[f]})],b.prototype,"lods",void 0);d([c.property()],b.prototype,"minScale",void 0);d([c.property()],b.prototype,"maxScale",void 0);d([c.property()],b.prototype,"minZoom",void 0);d([c.property()],b.prototype,"maxZoom",void 0);d([c.property()],b.prototype,"rotationEnabled",void 0);d([c.property()],b.prototype,"snapToZoom",void 0);d([c.property()],b.prototype,"view",void 0);d([c.property({type:h,dependsOn:["rotationEnabled"]})],b.prototype,"_rotation",null);d([c.property({dependsOn:["view.spatialReference",
"view.defaultsFromMap.tileInfo"]})],b.prototype,"_defaultLODs",null);d([c.property({readOnly:!0,type:n,dependsOn:"lods minZoom maxZoom minScale maxScale snapToZoom _defaultLODs".split(" ")})],b.prototype,"_zoom",null);return b=d([c.subclass("esri.views.2d.MapViewConstraints")],b)}(c.declared(m.EventedAccessor))})},"esri/views/2d/constraints/RotationConstraint":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/Accessor ../../../core/accessorSupport/decorators".split(" "),
function(q,g,p,d,m,c){return function(f){function h(){var a=null!==f&&f.apply(this,arguments)||this;a.enabled=!0;a.rotationEnabled=!0;return a}p(h,f);n=h;h.prototype.constrain=function(a,b){if(!this.enabled||!b)return a;this.rotationEnabled||(a.rotation=b.rotation);return a};h.prototype.clone=function(){return new n({enabled:this.enabled,rotationEnabled:this.rotationEnabled})};var n;d([c.property()],h.prototype,"enabled",void 0);d([c.property()],h.prototype,"rotationEnabled",void 0);return h=n=d([c.subclass("esri.views.2d.constraints.RotationConstraint")],
h)}(c.declared(m))})},"esri/views/2d/constraints/ZoomConstraint":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/Accessor ../../../core/accessorSupport/decorators ../../../layers/support/LOD".split(" "),function(q,g,p,d,m,c,f){return function(h){function n(a){a=h.call(this,a)||this;a._lodByScale={};a._scales=[];a.effectiveLODs=null;a.effectiveMinZoom=-1;a.effectiveMaxZoom=-1;a.effectiveMinScale=0;a.effectiveMaxScale=
0;a.lods=null;a.minZoom=-1;a.maxZoom=-1;a.minScale=0;a.maxScale=0;a.snapToZoom=!0;return a}p(n,h);a=n;n.prototype.initialize=function(){var a=this,e,c,k=this.lods;c=this.minScale;e=this.maxScale;var f=this.minZoom,h=this.maxZoom,d=-1,n=-1,g=!1,m=!1;0!==c&&0!==e&&c<e&&(e=[e,c],c=e[0],e=e[1]);if(k&&k.length){k=k.map(function(a){return a.clone()});k.sort(function(a,b){return b.scale-a.scale});k.forEach(function(a,b){return a.level=b});for(var u,v=0,w=k;v<w.length;v++){var p=w[v];!g&&0<c&&c>=p.scale&&
(d=p.level,g=!0);!m&&0<e&&e>=p.scale&&(n=u?u.level:-1,m=!0);u=p}-1===f&&(f=0===c?0:d);-1===h&&(h=0===e?k.length-1:n);f=Math.max(f,0);f=Math.min(f,k.length-1);h=Math.max(h,0);h=Math.min(h,k.length-1);f>h&&(c=[h,f],f=c[0],h=c[1]);c=k[f].scale;e=k[h].scale;k.splice(0,f);k.splice(h-f+1,k.length);k.forEach(function(b,e){a._lodByScale[b.scale]=b;a._scales[e]=b.scale});this._set("effectiveLODs",k);this._set("effectiveMinZoom",f);this._set("effectiveMaxZoom",h)}this._set("effectiveMinScale",c);this._set("effectiveMaxScale",
e)};n.prototype.constrain=function(a,e){if(e&&a.scale===e.scale)return a;var b=this.effectiveMinScale,c=this.effectiveMaxScale,f=a.targetGeometry,h=e&&e.targetGeometry,d=0!==b&&a.scale>b;if(0!==c&&a.scale<c||d)b=d?b:c,h&&(e=(b-e.scale)/(a.scale-e.scale),f.x=h.x+(f.x-h.x)*e,f.y=h.y+(f.y-h.y)*e),a.scale=b;this.snapToZoom&&this.effectiveLODs&&(a.scale=this._getClosestScale(a.scale));return a};n.prototype.fit=function(a){if(!this.effectiveLODs||!this.snapToZoom)return this.constrain(a,null);var b=this.scaleToZoom(a.scale);
a.scale=this.zoomToScale(.99<Math.abs(b-Math.floor(b))?Math.round(b):Math.floor(b));return a};n.prototype.zoomToScale=function(a){if(!this.effectiveLODs)return 0;a-=this.effectiveMinZoom;a=Math.max(0,a);var b=this._scales;if(0>=a)return b[0];if(a>=b.length)return b[b.length-1];var c=Math.round(a);return b[c]+(c-a)*(b[Math.round(a-.5)]-b[c])};n.prototype.scaleToZoom=function(a){if(!this.effectiveLODs)return-1;var b=this._scales,c,k;if(a>=b[0])return this.effectiveMinZoom;if(a<=b[b.length-1])return this.effectiveMaxZoom;
for(var f=0;f<b.length-1;f++){c=b[f];k=b[f+1];if(k===a)return b=f+this.effectiveMinZoom,b+1;if(c>a&&k<a)return b=f+this.effectiveMinZoom,b+1-(a-k)/(c-k)}};n.prototype.snapToClosestScale=function(a){if(!this.effectiveLODs)return a;a=this.scaleToZoom(a);return this.zoomToScale(Math.round(a))};n.prototype.snapToNextScale=function(a,e){void 0===e&&(e=.5);if(!this.effectiveLODs)return a*e;a=Math.round(this.scaleToZoom(a));return this.zoomToScale(a+1)};n.prototype.snapToPreviousScale=function(a,e){void 0===
e&&(e=2);if(!this.effectiveLODs)return a*e;a=Math.round(this.scaleToZoom(a));return this.zoomToScale(a-1)};n.prototype.clone=function(){return new a({lods:this.lods,minZoom:this.minZoom,maxZoom:this.maxZoom,minScale:this.minScale,maxScale:this.maxScale})};n.prototype._getClosestScale=function(a){if(this._lodByScale[a])return this._lodByScale[a].scale;a=this._scales.reduce(function(b,c){return Math.abs(c-a)<=Math.abs(b-a)?c:b},this._scales[0]);return this._lodByScale[a].scale};var a;d([c.property({readOnly:!0})],
n.prototype,"effectiveLODs",void 0);d([c.property({readOnly:!0})],n.prototype,"effectiveMinZoom",void 0);d([c.property({readOnly:!0})],n.prototype,"effectiveMaxZoom",void 0);d([c.property({readOnly:!0})],n.prototype,"effectiveMinScale",void 0);d([c.property({readOnly:!0})],n.prototype,"effectiveMaxScale",void 0);d([c.property({type:[f]})],n.prototype,"lods",void 0);d([c.property()],n.prototype,"minZoom",void 0);d([c.property()],n.prototype,"maxZoom",void 0);d([c.property()],n.prototype,"minScale",
void 0);d([c.property()],n.prototype,"maxScale",void 0);d([c.property()],n.prototype,"snapToZoom",void 0);return n=a=d([c.subclass("esri.views.2d.constraints.ZoomConstraint")],n)}(c.declared(m))})},"esri/views/2d/PaddedViewState":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/accessorSupport/decorators ../../core/libs/gl-matrix-2/vec2 ../../core/libs/gl-matrix-2/vec2f64 ./viewpointUtils ./ViewState".split(" "),
function(q,g,p,d,m,c,f,h,n,a){var b=function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;b.left=0;b.top=0;b.right=0;b.bottom=0;return b}p(b,a);d([c.property()],b.prototype,"left",void 0);d([c.property()],b.prototype,"top",void 0);d([c.property()],b.prototype,"right",void 0);d([c.property()],b.prototype,"bottom",void 0);return b=d([c.subclass("esri.views.2d.PaddedViewState.Padding")],b)}(c.declared(m));return function(e){function l(){for(var c=[],l=0;l<arguments.length;l++)c[l]=arguments[l];
var d=e.apply(this,c)||this;d.content=new a;d._updateContent=function(){var a=h.vec2f64.create();return function(){var b=d._get("size"),e=d._get("padding");if(b&&e){var c=d.content;f.vec2.set(a,e.left+e.right,e.top+e.bottom);f.vec2.subtract(a,b,a);f.vec2.copy(c.size,a);if(b=c.viewpoint)d.viewpoint=b}}}();d.watch(["size","padding"],d._updateContent,!0);d.padding=new b;d.size=[0,0];return d}p(l,e);Object.defineProperty(l.prototype,"padding",{set:function(a){this._set("padding",a||new b)},enumerable:!0,
configurable:!0});Object.defineProperty(l.prototype,"viewpoint",{set:function(a){if(a){var b=a.clone();this.content.viewpoint=a;n.addPadding(b,a,this._get("size"),this._get("padding"));a=this._viewpoint2D;var e=b.targetGeometry;a.center[0]=e.x;a.center[1]=e.y;a.rotation=b.rotation;a.scale=b.scale;a.spatialReference=e.spatialReference;this._update()}},enumerable:!0,configurable:!0});d([c.property()],l.prototype,"content",void 0);d([c.property({type:b})],l.prototype,"padding",null);d([c.property()],
l.prototype,"viewpoint",null);return l=d([c.subclass("esri.views.2d.PaddedViewState")],l)}(c.declared(a))})},"esri/views/2d/ViewState":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../geometry ../../Viewpoint ../../core/JSONSupport ../../core/accessorSupport/decorators ../../core/libs/gl-matrix-2/common ../../core/libs/gl-matrix-2/mat2d ../../core/libs/gl-matrix-2/mat2df32 ../../core/libs/gl-matrix-2/mat2df64 ../../core/libs/gl-matrix-2/mat3 ../../core/libs/gl-matrix-2/mat3f32 ../../core/libs/gl-matrix-2/vec2 ../../core/libs/gl-matrix-2/vec2f32 ../../core/libs/gl-matrix-2/vec2f64 ../../core/libs/gl-matrix-2/types/vec2 ./viewpointUtils".split(" "),
function(q,g,p,d,m,c,f,h,n,a,b,e,l,k,r,C,y,t,x){var z=[0,0];return function(f){function g(){for(var a=[],c=0;c<arguments.length;c++)a[c]=arguments[c];a=f.apply(this,a)||this;a._viewpoint2D={center:y.vec2f64.create(),rotation:0,scale:0,spatialReference:null};a.center=[0,0];a.extent=new m.Extent;a.id=0;a.inverseTransform=e.mat2df64.create();a.resolution=0;a.rotation=0;a.scale=0;a.transform=e.mat2df64.create();a.transformNoRotation=e.mat2df64.create();a.displayMat3=k.mat3f32.create();a.displayViewMat3=
k.mat3f32.create();a.viewMat3=k.mat3f32.create();a.viewMat2d=b.mat2df32.create();a.worldScreenWidth=0;a.size=[0,0];return a}p(g,f);u=g;Object.defineProperty(g.prototype,"pixelRatio",{set:function(a){this._set("pixelRatio",a);this._update()},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"size",{set:function(a){this._set("size",a);this._update()},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"viewpoint",{set:function(a){if(a){var b=this._viewpoint2D,e=a.targetGeometry;
b.center[0]=e.x;b.center[1]=e.y;b.rotation=a.rotation;b.scale=a.scale;b.spatialReference=e.spatialReference}this._update()},enumerable:!0,configurable:!0});g.prototype.copy=function(a){var b=this.size,e=this.viewpoint;e&&b?(this.viewpoint=x.copy(e,a.viewpoint),this._set("size",r.vec2.copy(b,a.size))):(this.viewpoint=a.viewpoint.clone(),this._set("size",[a.size[0],a.size[1]]));this._set("pixelRatio",a.pixelRatio);return this};g.prototype.clone=function(){return new u({size:this.size,viewpoint:this.viewpoint.clone(),
pixelRatio:this.pixelRatio})};g.prototype.toMap=function(a,b,e){if(t.isVec2(b))return r.vec2.transformMat2d(a,b,this.inverseTransform);z[0]=b;z[1]=e;return r.vec2.transformMat2d(a,z,this.inverseTransform)};g.prototype.toScreen=function(a,b,e){if(t.isVec2(b))return r.vec2.transformMat2d(a,b,this.transform);z[0]=b;z[1]=e;return r.vec2.transformMat2d(a,z,this.transform)};g.prototype.toScreenNoRotation=function(a,b,e){if(t.isVec2(b))return r.vec2.transformMat2d(a,b,this.transformNoRotation);z[0]=b;z[1]=
e;return r.vec2.transformMat2d(a,z,this.transformNoRotation)};g.prototype.pixelSizeAt=function(a){return x.pixelSizeAt(a,this.viewpoint)};g.prototype.getScreenTransform=function(a,b){var e=this._viewpoint2D.center,c=this._get("pixelRatio")||1,k=this._get("size");x.getMatrix(a,e,k,b,0,c);return a};g.prototype._update=function(){var b=this._viewpoint2D,e=b.center,k=b.spatialReference,f=b.scale,h=b.rotation,b=this._get("pixelRatio")||1,d=this._get("size");this._set("id",this.id+1);var g=new c({targetGeometry:new m.Point(e[0],
e[1],k),scale:f,rotation:h});this._set("viewpoint",g);if(d&&k&&f)return this.resolution=x.getResolution(g),this.rotation=h,this.scale=f,this.spatialReference=k,r.vec2.copy(this.center,e),l.mat3.set(this.displayMat3,0!==d[0]?2/d[0]:0,0,0,0,0!==d[1]?-2/d[1]:0,0,-1,1,1),f=l.mat3.identity(this.viewMat3),e=C.vec2f32.fromValues(d[0]/2,d[1]/2),k=C.vec2f32.fromValues(-d[0]/2,-d[1]/2),h=n.common.toRadian(h),l.mat3.translate(f,f,e),l.mat3.rotate(f,f,h),l.mat3.translate(f,f,k),l.mat3.multiply(this.displayViewMat3,
this.displayMat3,f),f=a.mat2d.identity(this.viewMat2d),a.mat2d.translate(f,f,e),a.mat2d.rotate(f,f,h),a.mat2d.translate(f,f,k),x.getExtent(this.extent,g,d),x.getTransform(this.transform,g,d,b),a.mat2d.invert(this.inverseTransform,this.transform),x.getTransformNoRotation(this.transformNoRotation,g,d,b),this.worldScreenWidth=x.getWorldScreenWidth(this.spatialReference,this.resolution),this};var u;d([h.property({readOnly:!0})],g.prototype,"id",void 0);d([h.property({value:1,json:{write:!0}})],g.prototype,
"pixelRatio",null);d([h.property({json:{write:!0}})],g.prototype,"size",null);d([h.property({type:c,json:{write:!0}})],g.prototype,"viewpoint",null);return g=u=d([h.subclass("esri.views.2d.ViewState")],g)}(h.declared(f.JSONSupport))})},"esri/core/libs/gl-matrix-2/mat2df32":function(){define(["require","exports","./factories/mat2df32"],function(q,g,p){Object.defineProperty(g,"__esModule",{value:!0});g.mat2df32=p})},"esri/core/libs/gl-matrix-2/factories/mat2df32":function(){define(["require","exports"],
function(q,g){Object.defineProperty(g,"__esModule",{value:!0});g.create=function(){var g=new Float32Array(6);g[0]=1;g[3]=1;return g};g.clone=function(g){var d=new Float32Array(6);d[0]=g[0];d[1]=g[1];d[2]=g[2];d[3]=g[3];d[4]=g[4];d[5]=g[5];return d};g.fromValues=function(g,d,m,c,f,h){var n=new Float32Array(6);n[0]=g;n[1]=d;n[2]=m;n[3]=c;n[4]=f;n[5]=h;return n};g.createView=function(g,d){return new Float32Array(g,d,6)}})},"esri/core/libs/gl-matrix-2/mat3":function(){define(["require","exports","./math/mat3"],
function(q,g,p){Object.defineProperty(g,"__esModule",{value:!0});g.mat3=p})},"esri/core/libs/gl-matrix-2/math/mat3":function(){define(["require","exports","./common"],function(q,g,p){function d(c,f,h){var d=f[0],a=f[1],b=f[2],e=f[3],l=f[4],k=f[5],r=f[6],g=f[7];f=f[8];var m=h[0],t=h[1],x=h[2],z=h[3],u=h[4],v=h[5],w=h[6],p=h[7];h=h[8];c[0]=m*d+t*e+x*r;c[1]=m*a+t*l+x*g;c[2]=m*b+t*k+x*f;c[3]=z*d+u*e+v*r;c[4]=z*a+u*l+v*g;c[5]=z*b+u*k+v*f;c[6]=w*d+p*e+h*r;c[7]=w*a+p*l+h*g;c[8]=w*b+p*k+h*f;return c}function m(c,
f,h){c[0]=f[0]-h[0];c[1]=f[1]-h[1];c[2]=f[2]-h[2];c[3]=f[3]-h[3];c[4]=f[4]-h[4];c[5]=f[5]-h[5];c[6]=f[6]-h[6];c[7]=f[7]-h[7];c[8]=f[8]-h[8];return c}Object.defineProperty(g,"__esModule",{value:!0});g.fromMat4=function(c,f){c[0]=f[0];c[1]=f[1];c[2]=f[2];c[3]=f[4];c[4]=f[5];c[5]=f[6];c[6]=f[8];c[7]=f[9];c[8]=f[10];return c};g.copy=function(c,f){c[0]=f[0];c[1]=f[1];c[2]=f[2];c[3]=f[3];c[4]=f[4];c[5]=f[5];c[6]=f[6];c[7]=f[7];c[8]=f[8];return c};g.set=function(c,f,h,d,a,b,e,l,k,r){c[0]=f;c[1]=h;c[2]=d;
c[3]=a;c[4]=b;c[5]=e;c[6]=l;c[7]=k;c[8]=r;return c};g.identity=function(c){c[0]=1;c[1]=0;c[2]=0;c[3]=0;c[4]=1;c[5]=0;c[6]=0;c[7]=0;c[8]=1;return c};g.transpose=function(c,f){if(c===f){var h=f[1],d=f[2],a=f[5];c[1]=f[3];c[2]=f[6];c[3]=h;c[5]=f[7];c[6]=d;c[7]=a}else c[0]=f[0],c[1]=f[3],c[2]=f[6],c[3]=f[1],c[4]=f[4],c[5]=f[7],c[6]=f[2],c[7]=f[5],c[8]=f[8];return c};g.invert=function(c,f){var h=f[0],d=f[1],a=f[2],b=f[3],e=f[4],l=f[5],k=f[6],r=f[7];f=f[8];var g=f*e-l*r,m=-f*b+l*k,t=r*b-e*k,x=h*g+d*m+a*
t;if(!x)return null;x=1/x;c[0]=g*x;c[1]=(-f*d+a*r)*x;c[2]=(l*d-a*e)*x;c[3]=m*x;c[4]=(f*h-a*k)*x;c[5]=(-l*h+a*b)*x;c[6]=t*x;c[7]=(-r*h+d*k)*x;c[8]=(e*h-d*b)*x;return c};g.adjoint=function(c,f){var h=f[0],d=f[1],a=f[2],b=f[3],e=f[4],l=f[5],k=f[6],r=f[7];f=f[8];c[0]=e*f-l*r;c[1]=a*r-d*f;c[2]=d*l-a*e;c[3]=l*k-b*f;c[4]=h*f-a*k;c[5]=a*b-h*l;c[6]=b*r-e*k;c[7]=d*k-h*r;c[8]=h*e-d*b;return c};g.determinant=function(c){var f=c[3],h=c[4],d=c[5],a=c[6],b=c[7],e=c[8];return c[0]*(e*h-d*b)+c[1]*(-e*f+d*a)+c[2]*
(b*f-h*a)};g.multiply=d;g.translate=function(c,f,d){var h=f[0],a=f[1],b=f[2],e=f[3],l=f[4],k=f[5],r=f[6],g=f[7];f=f[8];var m=d[0];d=d[1];c[0]=h;c[1]=a;c[2]=b;c[3]=e;c[4]=l;c[5]=k;c[6]=m*h+d*e+r;c[7]=m*a+d*l+g;c[8]=m*b+d*k+f;return c};g.rotate=function(c,f,d){var h=f[0],a=f[1],b=f[2],e=f[3],l=f[4],k=f[5],r=f[6],g=f[7];f=f[8];var m=Math.sin(d);d=Math.cos(d);c[0]=d*h+m*e;c[1]=d*a+m*l;c[2]=d*b+m*k;c[3]=d*e-m*h;c[4]=d*l-m*a;c[5]=d*k-m*b;c[6]=r;c[7]=g;c[8]=f;return c};g.scale=function(c,f,d){var h=d[0],
a=d[1];d=d[2];c[0]=h*f[0];c[1]=h*f[1];c[2]=h*f[2];c[3]=a*f[3];c[4]=a*f[4];c[5]=a*f[5];c[6]=d*f[6];c[7]=d*f[7];c[8]=d*f[8];return c};g.scaleByVec2=function(c,f,d){var h=d[0];d=d[1];c[0]=h*f[0];c[1]=h*f[1];c[2]=h*f[2];c[3]=d*f[3];c[4]=d*f[4];c[5]=d*f[5];return c};g.fromTranslation=function(c,f){c[0]=1;c[1]=0;c[2]=0;c[3]=0;c[4]=1;c[5]=0;c[6]=f[0];c[7]=f[1];c[8]=1;return c};g.fromRotation=function(c,f){var d=Math.sin(f);f=Math.cos(f);c[0]=f;c[1]=d;c[2]=0;c[3]=-d;c[4]=f;c[5]=0;c[6]=0;c[7]=0;c[8]=1;return c};
g.fromScaling=function(c,f){c[0]=f[0];c[1]=0;c[2]=0;c[3]=0;c[4]=f[1];c[5]=0;c[6]=0;c[7]=0;c[8]=1;return c};g.fromMat2d=function(c,f){c[0]=f[0];c[1]=f[1];c[2]=0;c[3]=f[2];c[4]=f[3];c[5]=0;c[6]=f[4];c[7]=f[5];c[8]=1;return c};g.fromQuat=function(c,f){var d=f[0],g=f[1],a=f[2];f=f[3];var b=d+d,e=g+g,l=a+a,d=d*b,k=g*b,g=g*e,r=a*b,m=a*e,a=a*l,b=f*b,e=f*e;f*=l;c[0]=1-g-a;c[3]=k-f;c[6]=r+e;c[1]=k+f;c[4]=1-d-a;c[7]=m-b;c[2]=r-e;c[5]=m+b;c[8]=1-d-g;return c};g.normalFromMat4Legacy=function(c,f){var d=f[0],
g=f[1],a=f[2],b=f[4],e=f[5],l=f[6],k=f[8],r=f[9];f=f[10];var m=f*e-l*r,y=-f*b+l*k,t=r*b-e*k,x=d*m+g*y+a*t;if(!x)return null;x=1/x;c[0]=m*x;c[1]=(-f*g+a*r)*x;c[2]=(l*g-a*e)*x;c[3]=y*x;c[4]=(f*d-a*k)*x;c[5]=(-l*d+a*b)*x;c[6]=t*x;c[7]=(-r*d+g*k)*x;c[8]=(e*d-g*b)*x;return c};g.normalFromMat4=function(c,f){var d=f[0],g=f[1],a=f[2],b=f[3],e=f[4],l=f[5],k=f[6],r=f[7],m=f[8],y=f[9],t=f[10],x=f[11],z=f[12],u=f[13],v=f[14];f=f[15];var w=d*l-g*e,p=d*k-a*e,q=d*r-b*e,A=g*k-a*l,J=g*r-b*l,E=a*r-b*k,G=m*u-y*z,F=
m*v-t*z,m=m*f-x*z,H=y*v-t*u,y=y*f-x*u,t=t*f-x*v,x=w*t-p*y+q*H+A*m-J*F+E*G;if(!x)return null;x=1/x;c[0]=(l*t-k*y+r*H)*x;c[1]=(k*m-e*t-r*F)*x;c[2]=(e*y-l*m+r*G)*x;c[3]=(a*y-g*t-b*H)*x;c[4]=(d*t-a*m+b*F)*x;c[5]=(g*m-d*y-b*G)*x;c[6]=(u*E-v*J+f*A)*x;c[7]=(v*q-z*E-f*p)*x;c[8]=(z*J-u*q+f*w)*x;return c};g.projection=function(c,f,d){c[0]=2/f;c[1]=0;c[2]=0;c[3]=0;c[4]=-2/d;c[5]=0;c[6]=-1;c[7]=1;c[8]=1;return c};g.str=function(c){return"mat3("+c[0]+", "+c[1]+", "+c[2]+", "+c[3]+", "+c[4]+", "+c[5]+", "+c[6]+
", "+c[7]+", "+c[8]+")"};g.frob=function(c){return Math.sqrt(Math.pow(c[0],2)+Math.pow(c[1],2)+Math.pow(c[2],2)+Math.pow(c[3],2)+Math.pow(c[4],2)+Math.pow(c[5],2)+Math.pow(c[6],2)+Math.pow(c[7],2)+Math.pow(c[8],2))};g.add=function(c,f,d){c[0]=f[0]+d[0];c[1]=f[1]+d[1];c[2]=f[2]+d[2];c[3]=f[3]+d[3];c[4]=f[4]+d[4];c[5]=f[5]+d[5];c[6]=f[6]+d[6];c[7]=f[7]+d[7];c[8]=f[8]+d[8];return c};g.subtract=m;g.multiplyScalar=function(c,f,d){c[0]=f[0]*d;c[1]=f[1]*d;c[2]=f[2]*d;c[3]=f[3]*d;c[4]=f[4]*d;c[5]=f[5]*d;
c[6]=f[6]*d;c[7]=f[7]*d;c[8]=f[8]*d;return c};g.multiplyScalarAndAdd=function(c,f,d,g){c[0]=f[0]+d[0]*g;c[1]=f[1]+d[1]*g;c[2]=f[2]+d[2]*g;c[3]=f[3]+d[3]*g;c[4]=f[4]+d[4]*g;c[5]=f[5]+d[5]*g;c[6]=f[6]+d[6]*g;c[7]=f[7]+d[7]*g;c[8]=f[8]+d[8]*g;return c};g.exactEquals=function(c,f){return c[0]===f[0]&&c[1]===f[1]&&c[2]===f[2]&&c[3]===f[3]&&c[4]===f[4]&&c[5]===f[5]&&c[6]===f[6]&&c[7]===f[7]&&c[8]===f[8]};g.equals=function(c,f){var d=c[0],g=c[1],a=c[2],b=c[3],e=c[4],l=c[5],k=c[6],r=c[7];c=c[8];var m=f[0],
y=f[1],t=f[2],x=f[3],z=f[4],u=f[5],v=f[6],w=f[7];f=f[8];return Math.abs(d-m)<=p.EPSILON*Math.max(1,Math.abs(d),Math.abs(m))&&Math.abs(g-y)<=p.EPSILON*Math.max(1,Math.abs(g),Math.abs(y))&&Math.abs(a-t)<=p.EPSILON*Math.max(1,Math.abs(a),Math.abs(t))&&Math.abs(b-x)<=p.EPSILON*Math.max(1,Math.abs(b),Math.abs(x))&&Math.abs(e-z)<=p.EPSILON*Math.max(1,Math.abs(e),Math.abs(z))&&Math.abs(l-u)<=p.EPSILON*Math.max(1,Math.abs(l),Math.abs(u))&&Math.abs(k-v)<=p.EPSILON*Math.max(1,Math.abs(k),Math.abs(v))&&Math.abs(r-
w)<=p.EPSILON*Math.max(1,Math.abs(r),Math.abs(w))&&Math.abs(c-f)<=p.EPSILON*Math.max(1,Math.abs(c),Math.abs(f))};g.mul=d;g.sub=m})},"esri/core/libs/gl-matrix-2/mat3f32":function(){define(["require","exports","./factories/mat3f32"],function(q,g,p){Object.defineProperty(g,"__esModule",{value:!0});g.mat3f32=p})},"esri/core/libs/gl-matrix-2/factories/mat3f32":function(){define(["require","exports"],function(q,g){Object.defineProperty(g,"__esModule",{value:!0});g.create=function(){var g=new Float32Array(9);
g[0]=1;g[4]=1;g[8]=1;return g};g.clone=function(g){var d=new Float32Array(9);d[0]=g[0];d[1]=g[1];d[2]=g[2];d[3]=g[3];d[4]=g[4];d[5]=g[5];d[6]=g[6];d[7]=g[7];d[8]=g[8];return d};g.fromValues=function(g,d,m,c,f,h,n,a,b){var e=new Float32Array(9);e[0]=g;e[1]=d;e[2]=m;e[3]=c;e[4]=f;e[5]=h;e[6]=n;e[7]=a;e[8]=b;return e};g.createView=function(g,d){return new Float32Array(g,d,9)}})},"esri/core/libs/gl-matrix-2/vec2f32":function(){define(["require","exports","./factories/vec2f32"],function(q,g,p){Object.defineProperty(g,
"__esModule",{value:!0});g.vec2f32=p})},"esri/core/libs/gl-matrix-2/factories/vec2f32":function(){define(["require","exports"],function(q,g){function p(){return new Float32Array(2)}function d(c,f){var a=new Float32Array(2);a[0]=c;a[1]=f;return a}function m(){return d(1,1)}function c(){return d(1,0)}function f(){return d(0,1)}Object.defineProperty(g,"__esModule",{value:!0});g.create=p;g.clone=function(c){var f=new Float32Array(2);f[0]=c[0];f[1]=c[1];return f};g.fromValues=d;g.createView=function(c,
f){return new Float32Array(c,f,2)};g.zeros=function(){return p()};g.ones=m;g.unitX=c;g.unitY=f;g.ZEROS=p();g.ONES=m();g.UNIT_X=c();g.UNIT_Y=f()})},"esri/core/libs/gl-matrix-2/types/vec2":function(){define(["require","exports"],function(q,g){function p(d){return d instanceof Float32Array&&2<=d.length}function d(d){return Array.isArray(d)&&2<=d.length}Object.defineProperty(g,"__esModule",{value:!0});g.isVec2f32=p;g.isVec2f64=d;g.isVec2=function(g){return p(g)||d(g)}})},"esri/views/2d/tiling":function(){define("require exports ./tiling/TileInfoView ./tiling/TileKey ./tiling/TileQueue ./tiling/TileStrategy".split(" "),
function(q,g,p,d,m,c){Object.defineProperty(g,"__esModule",{value:!0});g.TileInfoView=p;g.TileKey=d;g.TileQueue=m;g.TileStrategy=c})},"esri/views/2d/tiling/TileInfoView":function(){define("require exports ../../../geometry/support/spatialReferenceUtils ./LODInfo ./TileCoverage ./TileKey ./TileSpan".split(" "),function(q,g,p,d,m,c,f){var h=new c("0/0/0/0"),n=function(){function a(a,b,c,f,d,h,g,m){this.x=a;this.ymin=b;this.ymax=c;this.invM=f;this.leftAdjust=d;this.rightAdjust=h;this.leftBound=g;this.rightBound=
m}a.create=function(b,c){var e;b[1]>c[1]&&(e=[c,b],b=e[0],c=e[1]);e=b[0];b=b[1];var f=c[0];c=c[1];var l=f-e,d=c-b,d=0!==d?l/d:0,h=(Math.ceil(b)-b)*d,g=(Math.floor(b)-b)*d;return new a(e,Math.floor(b),Math.ceil(c),d,0>l?h:g,0>l?g:h,0>l?f:e,0>l?e:f)};a.prototype.incrRow=function(){this.x+=this.invM};a.prototype.getLeftCol=function(){return Math.max(this.x+this.leftAdjust,this.leftBound)};a.prototype.getRightCol=function(){return Math.min(this.x+this.rightAdjust,this.rightBound)};return a}(),a=[[0,0],
[0,0],[0,0],[0,0]];return function(){function b(a,b){var e=this;this.tileInfo=a;this.fullExtent=b;this.scales=[];this._lodInfos=null;this._infoByScale={};this._infoByLevel={};var c=a.lods.slice();c.sort(function(a,b){return b.scale-a.scale});var f=this._lodInfos=c.map(function(e){return d.create(a,e,b)});c.forEach(function(a,b){e._infoByLevel[a.level]=f[b];e._infoByScale[a.scale]=f[b];e.scales[b]=a.scale},this);this._wrap=a.isWrappable}Object.defineProperty(b.prototype,"spatialReference",{get:function(){return this.tileInfo.spatialReference},
enumerable:!0,configurable:!0});b.prototype.getLODInfoAt=function(a){return this._infoByLevel["number"===typeof a?a:a.level]};b.prototype.getTileBounds=function(a,b,c){void 0===c&&(c=!1);h.set(b);return(b=this._infoByLevel[h.level])?b.getTileBounds(a,h,c):a};b.prototype.getTileCoords=function(a,b,c){void 0===c&&(c=!1);h.set(b);return(b=this._infoByLevel[h.level])?b.getTileCoords(a,h,c):a};b.prototype.getTileCoverage=function(b,c,k){void 0===c&&(c=192);void 0===k&&(k="closest");k="closest"===k?this.getClosestInfoForScale(b.scale):
this.getSmallestInfoForScale(b.scale);var e=m.pool.acquire(k),l=this._wrap,d;d=Infinity;var h=-Infinity,g,z,u=e.spans;a[0][0]=a[0][1]=a[1][1]=a[3][0]=-c;a[1][0]=a[2][0]=b.size[0]+c;a[2][1]=a[3][1]=b.size[1]+c;for(c=0;c<a.length;c++){var v=a[c];b.toMap(v,v);v[0]=k.getColumnForX(v[0]);v[1]=k.getRowForY(v[1])}b=[];v=3;for(c=0;4>c;c++){if(a[c][1]!==a[v][1]){var w=n.create(a[c],a[v]);d=Math.min(w.ymin,d);h=Math.max(w.ymax,h);void 0===b[w.ymin]&&(b[w.ymin]=[]);b[w.ymin].push(w)}v=c}if(null==d||null==h||
100<h-d)return null;for(v=[];d<h;){null!=b[d]&&(v=v.concat(b[d]));g=Infinity;z=-Infinity;for(c=v.length-1;0<=c;c--)w=v[c],g=Math.min(g,w.getLeftCol()),z=Math.max(z,w.getRightCol());g=Math.floor(g);z=Math.floor(z);if(d>=k.first[1]&&d<=k.last[1])if(l)if(k.size[0]<k.worldSize[0])for(w=Math.floor(z/k.worldSize[0]),c=Math.floor(g/k.worldSize[0]);c<=w;c++)u.push(new f(d,Math.max(k.getFirstColumnForWorld(c),g),Math.min(k.getLastColumnForWorld(c),z)));else u.push(new f(d,g,z));else g>k.last[0]||z<k.first[0]||
(g=Math.max(g,k.first[0]),z=Math.min(z,k.last[0]),u.push(new f(d,g,z)));d+=1;for(c=v.length-1;0<=c;c--)w=v[c],w.ymax>=d?w.incrRow():v.splice(c,1)}return e};b.prototype.getTileParentId=function(a){h.set(a);a=this._lodInfos.indexOf(this._infoByLevel[h.level])-1;if(0>a)return null;this._getTileIdAtLOD(h,this._lodInfos[a],h);return h.id};b.prototype.getTileResolution=function(a){return(a=this._infoByLevel["object"===typeof a?a.level:a])?a.resolution:-1};b.prototype.getTileScale=function(a){return(a=this._infoByLevel[a.level])?
a.scale:-1};b.prototype.intersects=function(a,b){h.set(b);b=this._infoByLevel[h.level];var e=a.lodInfo;if(e.resolution>b.resolution){this._getTileIdAtLOD(h,e,h);for(var c=e.denormalizeCol(h.col,h.world),f=0,d=a.spans;f<d.length;f++){var l=d[f];if(l.row===h.row&&l.colFrom<=c&&l.colTo>=c)return!0}}if(e.resolution<b.resolution){d=a.spans.reduce(function(a,b){a[0]=Math.min(a[0],b.row);a[1]=Math.max(a[1],b.row);a[2]=Math.min(a[2],b.colFrom);a[3]=Math.max(a[3],b.colTo);return a},[Infinity,-Infinity,Infinity,
-Infinity]);a=d[0];var c=d[1],f=d[2],d=d[3],g=b.denormalizeCol(h.col,h.world),l=e.getColumnForX(b.getXForColumn(g)),m=e.getRowForY(b.getYForRow(h.row)),g=e.getColumnForX(b.getXForColumn(g+1))-1;b=e.getRowForY(b.getYForRow(h.row+1))-1;return!(l>d||g<f||m>c||b<a)}var n=e.denormalizeCol(h.col,h.world);return a.spans.some(function(a){return a.row===h.row&&a.colFrom<=n&&a.colTo>=n})};b.prototype.normalizeBounds=function(a,b,c){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];this._wrap&&(b=p.getInfo(this.tileInfo.spatialReference),
c=-c*(b.valid[1]-b.valid[0]),a[0]+=c,a[2]+=c);return a};b.prototype.getSmallestInfoForScale=function(a){var b=this.scales;if(this._infoByScale[a])return this._infoByScale[a];if(a>b[0])return this._infoByScale[b[0]];for(var e=1;e<b.length-1;e++)if(a>b[e]+1E-6)return this._infoByScale[b[e-1]];return this._infoByScale[b[b.length-1]]};b.prototype.getClosestInfoForScale=function(a){var b=this.scales;if(this._infoByScale[a])return this._infoByScale[a];a=b.reduce(function(b,e){return Math.abs(e-a)<Math.abs(b-
a)?e:b},b[0]);return this._infoByScale[a]};b.prototype.scaleToLevel=function(a){var b=this.scales;if(this._infoByScale[a])return this._infoByScale[a].level;for(var e=b.length-1;0<=e;e--)if(a<b[e])return e===b.length-1?this._infoByScale[b[b.length-1]].level:this._infoByScale[b[e]].level+(b[e]-a)/(b[e]-b[e+1]);return this._infoByScale[b[0]].level};b.prototype.scaleToZoom=function(a){return this.tileInfo.scaleToZoom(a)};b.prototype._getTileIdAtLOD=function(a,b,c){var e=this._infoByLevel[c.level];a.set(c);
if(b.resolution<e.resolution)return null;if(b.resolution===e.resolution)return a;a.level=b.level;a.col=Math.floor(c.col*e.resolution/b.resolution+.01);a.row=Math.floor(c.row*e.resolution/b.resolution+.01);return a};return b}()})},"esri/views/2d/tiling/LODInfo":function(){define(["require","exports","../../../geometry/support/spatialReferenceUtils","./TileKey"],function(q,g,p,d){function m(c,d,g){c[0]=d;c[1]=g;return c}var c=new d("0/0/0/0");return function(){function f(c,f,a,b,e,d,k,g,m,y,t,x){this.level=
c;this.resolution=f;this.scale=a;this.origin=b;this.first=e;this.last=d;this.size=k;this.norm=g;this.worldStart=m;this.worldEnd=y;this.worldSize=t;this.wrap=x}f.create=function(c,d,a){var b=p.getInfo(c.spatialReference),e=[c.origin.x,c.origin.y],l=[c.size[0]*d.resolution,c.size[1]*d.resolution],k=[-Infinity,-Infinity],h=[Infinity,Infinity],g=[Infinity,Infinity];a&&(m(k,Math.max(0,Math.floor((a.xmin-e[0])/l[0])),Math.max(0,Math.floor((e[1]-a.ymax)/l[1]))),m(h,Math.max(0,Math.floor((a.xmax-e[0])/l[0])),
Math.max(0,Math.floor((e[1]-a.ymin)/l[1]))),m(g,h[0]-k[0]+1,h[1]-k[1]+1));var n;c.isWrappable?(c=[Math.ceil(Math.round(2*b.origin[1]/d.resolution)/c.size[0]),g[1]],b=[Math.floor((b.origin[0]-e[0])/l[0]),k[1]],a=[c[0]+b[0]-1,h[1]],n=!0):(b=k,a=h,c=g,n=!1);return new f(d.level,d.resolution,d.scale,e,k,h,g,l,b,a,c,n)};f.prototype.normalizeCol=function(c){if(!this.wrap)return c;var f=this.worldSize[0];return 0>c?f-1-Math.abs((c+1)%f):c%f};f.prototype.denormalizeCol=function(c,f){return this.wrap?this.worldSize[0]*
f+c:c};f.prototype.getWorldForColumn=function(c){return this.wrap?Math.floor(c/this.worldSize[0]):0};f.prototype.getFirstColumnForWorld=function(c){return c*this.worldSize[0]+this.first[0]};f.prototype.getLastColumnForWorld=function(c){return c*this.worldSize[0]+this.first[0]+this.size[0]-1};f.prototype.getColumnForX=function(c){return(c-this.origin[0])/this.norm[0]};f.prototype.getXForColumn=function(c){return this.origin[0]+c*this.norm[0]};f.prototype.getRowForY=function(c){return(this.origin[1]-
c)/this.norm[1]};f.prototype.getYForRow=function(c){return this.origin[1]-c*this.norm[1]};f.prototype.getTileBounds=function(f,d,a){void 0===a&&(a=!1);c.set(d);var b=a?c.col:this.denormalizeCol(c.col,c.world),e=c.row;d=this.getXForColumn(b);a=this.getYForRow(e+1);b=this.getXForColumn(b+1);e=this.getYForRow(e);f[0]=d;f[1]=a;f[2]=b;f[3]=e;return f};f.prototype.getTileCoords=function(f,d,a){void 0===a&&(a=!1);c.set(d);d=a?c.col:this.denormalizeCol(c.col,c.world);Array.isArray(f)?m(f,this.getXForColumn(d),
this.getYForRow(c.row)):(f.x=this.getXForColumn(d),f.y=this.getYForRow(c.row));return f};return f}()})},"esri/views/2d/tiling/TileKey":function(){define(["require","exports","../../../core/ObjectPool"],function(q,g,p){return function(){function d(d,c,f,h){this.set(d,c,f,h)}d.getId=function(d,c,f,h){return"object"===typeof d?d.level+"/"+d.row+"/"+d.col+"/"+d.world:d+"/"+c+"/"+f+"/"+h};Object.defineProperty(d.prototype,"key",{get:function(){return this},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,
"id",{get:function(){return this.toString()},enumerable:!0,configurable:!0});d.prototype.equals=function(d){return this.level===d.level&&this.row===d.row&&this.col===d.col&&this.world===d.world};d.prototype.release=function(){this.world=this.col=this.row=this.level=0};d.prototype.set=function(d,c,f,h){null==d?this.world=this.col=this.row=this.level=0:"object"===typeof d?(this.level=d.level||0,this.row=d.row||0,this.col=d.col||0,this.world=d.world||0):"string"===typeof d?(d=d.split("/"),c=d[1],f=d[2],
h=d[3],this.level=parseFloat(d[0]),this.row=parseFloat(c),this.col=parseFloat(f),this.world=parseFloat(h)):(this.level=+d,this.row=+c,this.col=+f,this.world=+h||0);return this};d.prototype.toString=function(){return this.level+"/"+this.row+"/"+this.col+"/"+this.world};d.prototype.getChildKeys=function(){var g=this.level+1,c=this.row<<1,f=this.col<<1,h=this.world;return[new d(g,c,f,h),new d(g,c,f+1,h),new d(g,c+1,f,h),new d(g,c+1,f+1,h)]};d.prototype.compareRowMajor=function(d){return this.row<d.row?
-1:this.row>d.row?1:this.col<d.col?-1:this.col>d.col?1:0};d.pool=new p(d,!0,null,25,50);return d}()})},"esri/views/2d/tiling/TileCoverage":function(){define(["require","exports","../../../core/ObjectPool"],function(q,g,p){return function(){function d(d){this.lodInfo=d;this.spans=[]}d.prototype.release=function(){};d.prototype.forEach=function(d,c){var f=this.spans,h=this.lodInfo,g=h.level;if(0!==f.length)for(var a=0;a<f.length;a++)for(var b=f[a],e=b.row,l=b.colTo,b=b.colFrom;b<=l;b++)d.call(c,g,e,
h.normalizeCol(b),h.getWorldForColumn(b))};d.pool=new p(d,!0);return d}()})},"esri/views/2d/tiling/TileSpan":function(){define(["require","exports","../../../core/ObjectPool"],function(q,g,p){return function(){function d(d,c,f){this.row=d;this.colFrom=c;this.colTo=f}d.pool=new p(d,!0);return d}()})},"esri/views/2d/tiling/TileQueue":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/tsSupport/generatorHelper ../../../core/tsSupport/awaiterHelper ../../../core/Accessor ../../../core/accessorSupport/decorators ../../../core/libs/gl-matrix-2/vec2 ../../support/QueueProcessor".split(" "),
function(q,g,p,d,m,c,f,h,n,a){function b(a,b){a.length=0;b.forEach(function(b){return a.push(b)});return a}var e=new Set,l=[],k=new Map,r=[0,0];return function(f){function g(a){a=f.call(this,a)||this;a._keyToItem=new Map;a.concurrency=6;a.strategy="scale-first";a.tileInfoView=null;return a}p(g,f);g.prototype.initialize=function(){var b=this,e=this.concurrency,c=this.process,k="scale-first"===this.strategy?this._peekByScaleFirst.bind(this):this._peekByCenterFirst.bind(this);this._queue=new a.QueueProcessor({concurrency:e,
process:function(a,e){a=b._keyToItem.get(a);return c(a,{signal:e})},peeker:k})};g.prototype.destroy=function(){this.clear();this._queue.destroy();this._queue=null};Object.defineProperty(g.prototype,"length",{get:function(){return this._queue?this._queue.length:0},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"onGoingCount",{get:function(){return this._keyToItem.size},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"updating",{get:function(){return 0<this.length||
0<this.onGoingCount},enumerable:!0,configurable:!0});g.prototype.abort=function(a){this._queue.abort("string"===typeof a?a:a.id)};g.prototype.clear=function(){this._queue.clear();this._keyToItem.clear();this.notifyChange("updating")};g.prototype.get=function(a){return this._queue.get("string"===typeof a?a:a.id)};g.prototype.has=function(a){return"string"===typeof a?this._keyToItem.has(a):this._keyToItem.has(a.id)};g.prototype.isOngoing=function(a){a="string"===typeof a?a:a.id;return this.has(a)&&
this._queue.isOngoing(a)};g.prototype.pause=function(){this._queue.pause()};g.prototype.push=function(a){return c(this,void 0,void 0,function(){var b,e,c,k=this;return m(this,function(f){b=a.key.id;if(this.has(b))return[2,this.get(b)];e=this._queue.push(b);c=function(){k._keyToItem.delete(b);k.notifyChange("updating")};this._keyToItem.set(b,a);e.then(c,c);this.notifyChange("updating");return[2,e]})})};g.prototype.reset=function(){this._queue.reset();this.notifyChange("updating")};g.prototype.resume=
function(){this._queue.resume()};g.prototype._peekByScaleFirst=function(a){if(!this.state)return a[0];for(var c=this.tileInfoView,f=Number.NEGATIVE_INFINITY,d=Number.POSITIVE_INFINITY,h=0;h<a.length;h++){var g=this._keyToItem.get(a[h]),r=this.tileInfoView.getTileScale(g.key);k.has(r)||(k.set(r,[]),f=Math.max(r,f),d=Math.min(r,d));k.get(r).push(g.key);e.add(r)}var m=this.state.scale;k.has(m)||(b(l,e),l.sort(),m=l.reduce(function(a,b){return Math.abs(b-m)<Math.abs(a-m)?b:a},l[0]));m=Math.min(m,f);m=
Math.max(m,d);a=k.get(m);var n=c.getClosestInfoForScale(m),t=n.getColumnForX(this.state.center[0]),C=n.getRowForY(this.state.center[1]);a.sort(function(a,b){var e=n.denormalizeCol(a.col,a.world),c=n.denormalizeCol(b.col,b.world);return Math.sqrt((t-e)*(t-e)+(C-a.row)*(C-a.row))-Math.sqrt((t-c)*(t-c)+(C-b.row)*(C-b.row))});e.clear();k.clear();return a[0].id};g.prototype._peekByCenterFirst=function(a){if(!this.state)return a[0];for(var b=this.tileInfoView,e=this.state.center,c=Number.POSITIVE_INFINITY,
k=null,f=0;f<a.length;f++){var d=this._keyToItem.get(a[f]);b.getTileCoords(r,d.key);var l=n.vec2.distance(r,e);l<c&&(c=l,k=d.key)}return k.id};d([h.property({constructOnly:!0})],g.prototype,"concurrency",void 0);d([h.property({constructOnly:!0})],g.prototype,"process",void 0);d([h.property()],g.prototype,"state",void 0);d([h.property({constructOnly:!0})],g.prototype,"strategy",void 0);d([h.property({constructOnly:!0})],g.prototype,"tileInfoView",void 0);d([h.property({readOnly:!0})],g.prototype,"updating",
null);return g=d([h.subclass("esri.views.2d.tiling.TileQueue")],g)}(h.declared(f))})},"esri/views/support/QueueProcessor":function(){define("require exports ../../core/tsSupport/generatorHelper ../../core/tsSupport/awaiterHelper ../../core/maybe ../../core/promiseUtils ../../core/Queue ../../core/scheduling".split(" "),function(q,g,p,d,m,c,f,h){Object.defineProperty(g,"__esModule",{value:!0});var n=function(){return function(a,b){this.item=a;this.controller=b;this.promise=null}}();q=function(){function a(a){var b=
this;this._deferreds=new Map;this._controllers=new Map;this._processingItems=new Map;this._isPaused=!1;this._task=this._schedule=null;this.concurrency=1;a.concurrency&&(this.concurrency=a.concurrency);this._queue=new f({peeker:a.peeker});this.process=a.process;var c=a.scheduler;a.task&&m.isSome(c)&&(this._task=c.registerTask(a.task,function(a){return b.update(a)},function(){return b.needsUpdate()}))}a.prototype.destroy=function(){this.clear();this._schedule&&(this._schedule.remove(),this._schedule=
null);this._task&&(this._task.remove(),this._task=null)};Object.defineProperty(a.prototype,"length",{get:function(){return this._processingItems.size+this._queue.length},enumerable:!0,configurable:!0});a.prototype.abort=function(a){(a=this._controllers.get(a))&&a.abort()};a.prototype.clear=function(){this._queue.clear();var a=[];this._controllers.forEach(function(b){return a.push(b)});this._controllers.clear();a.forEach(function(a){return a.abort()});this._processingItems.clear();this._cancelNext()};
a.prototype.get=function(a){return(a=this._deferreds.get(a))?a.promise:void 0};a.prototype.isOngoing=function(a){return this._processingItems.has(a)};a.prototype.has=function(a){return this._deferreds.has(a)};a.prototype.pause=function(){this._isPaused||(this._isPaused=!0,this._cancelNext())};a.prototype.push=function(a){return d(this,void 0,void 0,function(){var b,f,k,d,h,g,m=this;return p(this,function(e){if(b=this.get(a))return[2,b];k=c.createAbortController();d=function(){var b=m._processingItems.get(a);
b&&b.controller.abort();h();f.reject(c.createAbortError())};h=function(){g.remove();m._deferreds.delete(a);m._controllers.delete(a);m._queue.remove(a);m._processingItems.delete(a);m._scheduleNext()};g=c.onAbortOrThrow(k.signal,d);f=c.createDeferred();this._deferreds.set(a,f);this._controllers.set(a,k);f.promise.then(h,h);this._queue.push(a);this._scheduleNext();return[2,f.promise]})})};a.prototype.reset=function(){var a=[];this._processingItems.forEach(function(b){return a.push(b)});this._processingItems.clear();
for(var e=0;e<a.length;e++){var c=a[e];this._queue.push(c.item);c.controller.abort()}this._scheduleNext()};a.prototype.resume=function(){this._isPaused&&(this._isPaused=!1,this._scheduleNext())};a.prototype.needsUpdate=function(){return!this._isPaused&&0<this._queue.length&&this._processingItems.size<this.concurrency};a.prototype.update=function(a){for(;!a.done&&0<this._queue.length&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop()),a.madeProgress()};a.prototype._scheduleNext=
function(){var a=this;this._task||this._isPaused||this._schedule||(this._schedule=h.schedule(function(){a._schedule=null;a._next()}))};a.prototype._next=function(){for(;0<this._queue.length&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop())};a.prototype._cancelNext=function(){this._schedule&&(this._schedule.remove(),this._schedule=null)};a.prototype._processResult=function(a,e){this._canProcessFulfillment(a)&&(this._scheduleNext(),this._deferreds.get(a.item).resolve(e))};
a.prototype._processError=function(a,e){this._canProcessFulfillment(a)&&(this._scheduleNext(),this._deferreds.get(a.item).reject(e))};a.prototype._canProcessFulfillment=function(a){return this._deferreds.get(a.item)&&this._processingItems.get(a.item)===a?!0:!1};a.prototype._process=function(a){var b=this;if(!m.isNone(a)){var f,k=c.createAbortController(),d=new n(a,k);this._processingItems.set(a,d);try{f=this.process(a,k.signal)}catch(C){this._processError(d,C)}f&&"function"===typeof f.then?(d.promise=
f,f.then(function(a){return b._processResult(d,a)},function(a){return b._processError(d,a)})):this._processResult(d,f)}};Object.defineProperty(a.prototype,"test",{get:function(){var a=this;return{update:function(b){return a.update(b)}}},enumerable:!0,configurable:!0});return a}();g.QueueProcessor=q})},"esri/core/Queue":function(){define(["require","exports"],function(q,g){return function(){function g(d){this._items=[];this._itemSet=new Set;this._peeker=function(d){return d[0]};this._length=0;d&&d.peeker&&
(this._peeker=d.peeker)}Object.defineProperty(g.prototype,"length",{get:function(){return this._length},enumerable:!0,configurable:!0});g.prototype.clear=function(){this._itemSet.clear();this._length=this._items.length=0};g.prototype.peek=function(){if(0!==this._length)return this._peeker(this._items)};g.prototype.push=function(d){this.contains(d)||this._add(d)};g.prototype.contains=function(d){return 0<this._length&&this._itemSet.has(d)};g.prototype.pop=function(){if(0!==this._length){var d=this.peek();
this._remove(d);return d}};g.prototype.remove=function(d){this.contains(d)&&this._remove(d)};g.prototype._add=function(d){this._items.push(d);this._itemSet.add(d);this._length++};g.prototype._remove=function(d){this._itemSet.delete(d);this._items.splice(this._items.indexOf(d),1);this._length--};return g}()})},"esri/views/2d/tiling/TileStrategy":function(){define("require exports ../../../core/tsSupport/extendsHelper ./TileCache ./TileCoverage ./TileKey".split(" "),function(q,g,p,d,m,c){var f=new c(0,
0,0,0),h=new Map,n=[],a=[];return function(){function b(a){var b=this;this._previousScale=Number.POSITIVE_INFINITY;this.cachePolicy="keep";this.coveragePolicy="closest";this.resampling=!0;this.tileIndex=new Map;this.tiles=[];this.buffer=192;this.acquireTile=a.acquireTile;this.releaseTile=a.releaseTile;this.tileInfoView=a.tileInfoView;this.resampling=null==a.resampling||!!a.resampling;a.cachePolicy&&(this.cachePolicy=a.cachePolicy);a.coveragePolicy&&(this.coveragePolicy=a.coveragePolicy);null!=a.buffer&&
(this.buffer=a.buffer);a.cacheSize&&(this._tileCache=new d.default(a.cacheSize,this.tileInfoView,function(a){b.releaseTile(a)}))}b.prototype.destroy=function(){this.tileIndex.clear()};b.prototype.update=function(b){var e=this,c=this.resampling,d=this.tileIndex,g=this.tileInfoView.getTileCoverage(b.state,this.buffer,this.coveragePolicy);a.length=0;n.length=0;h.clear();if(g){var y=this.tileInfoView.tileInfo,t=y.minScale,x=y.maxScale,z=g.spans,u=g.lodInfo,v=u.level,w=b.state,p=w.scale,y=w.center,w=w.resolution,
q=!b.stationary&&p>this._previousScale;this._previousScale=p;this.tiles.length=0;if(!c&&(p>t||p<x))return this.tiles.length=0,h.clear(),d.forEach(function(a){e.releaseTile(a)}),d.clear(),a.length=0,n.length=0,h.clear(),m.pool.release(g),!0;d.forEach(function(a){return a.visible=!0});x=t=0;if(0<z.length)for(p=0;p<z.length;p++){b=z[p];for(var A=b.row,J=b.colTo,E=b.colFrom;E<=J;E++)if(t++,b=f.set(v,A,u.normalizeCol(E),u.getWorldForColumn(E)).id,d.has(b))c=d.get(b),c.isReady?(h.set(b,c),x++):q||this._addParentTile(b,
h);else{c=void 0;if(this._tileCache&&this._tileCache.has(b)){if(c=this._tileCache.pop(b),this.tileIndex.set(b,c),c.isReady){h.set(b,c);x++;continue}}else c=this.acquireTile(f),this.tileIndex.set(b,c);q||this._addParentTile(b,h)}}var G=x===t;d.forEach(function(b,c){f.set(c);if(!h.has(c)){var k=e.tileInfoView.intersects(g,f);!k||!q&&G?"purge"===e.cachePolicy?f.level===v&&k||n.push(c):(f.level>v||!k)&&n.push(c):b.isReady?a.push(c):f.level>v&&n.push(c)}});for(z=0;z<a.length;z++)b=a[z],(c=d.get(b))&&c.isReady&&
h.set(b,c);for(z=0;z<n.length;z++)b=n[z],c=d.get(b),this._tileCache?this._tileCache.add(c):this.releaseTile(c),d["delete"](b);h.forEach(function(a){return e.tiles.push(a)});d.forEach(function(a){h.has(a.key.id)||(a.visible=!1)});this._tileCache&&this._tileCache.prune(v,y,w);m.pool.release(g);return G}};b.prototype.clear=function(a){var b=this;void 0===a&&(a=!0);var c=this.tileIndex;a&&c.forEach(function(a){b.releaseTile(a)});c.clear()};b.prototype._addParentTile=function(a,b){for(var c=null;;){a=
this.tileInfoView.getTileParentId(a);if(!a)break;if(this.tileIndex.has(a)){if((c=this.tileIndex.get(a))&&c.isReady){b.has(c.key.id)||b.set(c.key.id,c);break}}else if(this._tileCache&&this._tileCache.has(a)&&(c=this._tileCache.pop(a),this.tileIndex.set(a,c),c&&c.isReady)){b.has(c.key.id)||b.set(c.key.id,c);break}}};return b}()})},"esri/views/2d/tiling/TileCache":function(){define(["require","exports","../../../core/libs/gl-matrix-2/vec2"],function(q,g,p){Object.defineProperty(g,"__esModule",{value:!0});
q=function(){function d(d,c,f){this.maxSize=d;this.tileInfoView=c;this.removedFunc=f;this._tilePerId=new Map;this._tileKeysPerLevel=[]}d.prototype.has=function(d){return this._tilePerId.has(d)};d.prototype.get=function(d){return this._tilePerId.get(d)};d.prototype.pop=function(d){var c=this._tilePerId.get(d);if(!c)return null;var f=this._tileKeysPerLevel[c.key.level];this._tilePerId["delete"](d);for(var h=0;h<f.length;h++)if(f[h].id===d){f.splice(h,1);break}c.visible=!0;return c};d.prototype.add=
function(d){d.visible=!1;var c=d.key,f=c.id;this._tilePerId.has(f)||(this._tilePerId.set(f,d),d=c.level,this._tileKeysPerLevel[d]||(this._tileKeysPerLevel[d]=[]),this._tileKeysPerLevel[d].push(c))};d.prototype.prune=function(d,c,f){var h=this._tilePerId.size;if(!(h<=this.maxSize)){for(var g=this._tileKeysPerLevel.length-1;h>this.maxSize&&0<=g;)g!==d&&(h=this._pruneAroundCenterTile(h,c,f,g)),g--;h>this.maxSize&&(h=this._pruneAroundCenterTile(h,c,f,d))}};d.prototype._pruneAroundCenterTile=function(d,
c,f,h){h=this._tileKeysPerLevel[h];if(!h||0===h.length)return d;var g=this.tileInfoView.tileInfo,a=g.size,b=g.origin,e=f*a[0],l=f*a[1],k=[0,0],r=[0,0];for(h.sort(function(a,d){k[0]=b.x+e*(a.col+.5);k[1]=b.y-l*(a.row+.5);r[0]=b.x+e*(d.col+.5);r[1]=b.y-l*(d.row+.5);return p.vec2.squaredDistance(k,c)-p.vec2.squaredDistance(r,c)});0<h.length&&(f=h.pop(),this._removeTile(f.id),d--,d!==this.maxSize););return d};d.prototype._removeTile=function(d){var c=this._tilePerId.get(d);this.removedFunc&&this.removedFunc(c);
this._tilePerId["delete"](d)};return d}();g.default=q})},"esri/views/2d/support/Timeline":function(){define(["require","exports","../../../core/tsSupport/decorateHelper","../../../core/tsSupport/declareExtendsHelper","../../../core/accessorSupport/decorators"],function(q,g,p,d,m){Object.defineProperty(g,"__esModule",{value:!0});q=function(){function c(){this._names=new Map}c.prototype.begin=function(c){this._names.has(c)||(this._names.set(c,!1),-1!==c.indexOf("Brush")&&this.record("Esri.FirstDraw"),
performance.mark("Esri."+c+".Start"))};c.prototype.end=function(c){this._names.has(c)&&!this._names.get(c)&&(this._names.set(c,!0),performance.mark("Esri."+c+".End"))};c.prototype.record=function(c){this._names.has(c)||(this._names.set(c,!0),performance.mark("Esri."+c))};return c=p([m.subclass("esri.views.2d.support.Timeline")],c)}();g.Timeline=q})},"esri/views/2d/input/MapViewInputManager":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/Accessor ../../../core/Handles ../../../core/watchUtils ../../../core/accessorSupport/decorators ./handlers/DoubleClickZoom ./handlers/DoubleTapDragZoom ./handlers/DragPan ./handlers/DragRotate ./handlers/GamepadNavigation ./handlers/KeyPan ./handlers/KeyRotate ./handlers/KeyZoom ./handlers/MouseWheelZoom ./handlers/PinchAction ../../input/BrowserEventSource ../../input/InputManager ../../input/handlers/PreventContextMenu ../../input/recognizers/DoubleTapDrag ../../input/recognizers/Drag ../../input/recognizers/PointerClickHoldAndDrag ../../input/recognizers/SingleAndDoubleClick".split(" "),
function(q,g,p,d,m,c,f,h,n,a,b,e,l,k,r,C,y,t,x,z,u,v,w,D,B){var A={left:"ArrowLeft",right:"ArrowRight",up:"ArrowUp",down:"ArrowDown"},J={zoomIn:["\x3d","+"],zoomOut:["-","_"]},E={clockwiseOption1:"a",clockwiseOption2:"A",counterClockwiseOption1:"d",counterClockwiseOption2:"D",resetOption1:"n",resetOption2:"N"};return function(g){function m(){var a=null!==g&&g.apply(this,arguments)||this;a._handles=new c;return a}p(m,g);m.prototype.initialize=function(){var a=this;this._handles.add([f.whenNot(this.view,
"ready",function(){return a._disconnect()}),f.when(this.view,"ready",function(){return a._connect()})])};m.prototype.destroy=function(){this._handles&&(this._handles.removeAll(),this._handles=null);this._disconnect()};m.prototype._disconnect=function(){this._inputManager&&(this.view.viewEvents.disconnect(),this._inputManager.destroy(),this._inputManager=null,this._source.destroy(),this._source=null)};m.prototype._connect=function(){var c=this,d=new x.BrowserEventSource(this.view.surface,this.view.input),
h=[new D.PointerClickHoldAndDrag,new B.SingleAndDoubleClick,new w.Drag(this.view.navigation),new v.DoubleTapDrag],h=new z.InputManager({eventSource:d,recognizers:h});h.installHandlers("prevent-context-menu",[new u.PreventContextMenu],z.ViewEventPriorities.INTERNAL);h.installHandlers("navigation",[new t.PinchRotateAndZoom(this.view),new l.GamepadNavigation(this.view),new y.MouseWheelZoom(this.view),new n.DoubleClickZoom(this.view),new n.DoubleClickZoom(this.view,["Ctrl"]),new b.DragPan(this.view,"primary"),
new k.KeyPan(this.view,A),new C.KeyZoom(this.view,J),new r.KeyRotate(this.view,E),new e.DragRotate(this.view,"secondary"),new a.DoubleTapDragZoom(this.view,"touch")],z.ViewEventPriorities.INTERNAL);this.view.viewEvents.connect(h);this._source=d;this._inputManager=h;f.init(this.view.navigation,"browserTouchPanEnabled",function(a){c._source.browserTouchPanningEnabled=!a})};Object.defineProperty(m.prototype,"test",{get:function(){return{inputManager:this._inputManager}},enumerable:!0,configurable:!0});
d([h.property()],m.prototype,"view",void 0);return m=d([h.subclass("esri.views.2d.input.MapViewInputManager")],m)}(h.declared(m))})},"esri/views/2d/input/handlers/DoubleClickZoom":function(){define(["require","exports","../../../../core/tsSupport/extendsHelper","../../../input/InputHandler","../../../input/handlers/support"],function(q,g,p,d,m){Object.defineProperty(g,"__esModule",{value:!0});q=function(c){function d(d,f){var a=c.call(this,!0)||this;a.view=d;a.registerIncoming("double-click",f,function(b){return a._handleDoubleClick(b,
f)});return a}p(d,c);d.prototype._handleDoubleClick=function(c,d){m.eventMatchesPointerAction(c.data,"primary")&&(c.stopPropagation(),d?this.view.mapViewNavigation.zoomOut([c.data.x,c.data.y]):this.view.mapViewNavigation.zoomIn([c.data.x,c.data.y]))};return d}(d.InputHandler);g.DoubleClickZoom=q})},"esri/views/input/handlers/support":function(){define(["require","exports"],function(q,g){Object.defineProperty(g,"__esModule",{value:!0});g.eventMatchesPointerAction=function(g,d){switch(d){case "primary":return"touch"===
g.pointerType||0===g.button;case "secondary":return"touch"!==g.pointerType&&2===g.button;case "tertiary":return"touch"!==g.pointerType&&1===g.button}};g.eventMatchesMousePointerAction=function(g,d){if("touch"===g.pointerType)return!1;switch(d){case "primary":return 0===g.button;case "secondary":return 2===g.button;case "tertiary":return 1===g.button}}})},"esri/views/2d/input/handlers/DoubleTapDragZoom":function(){define(["require","exports","../../../../core/tsSupport/extendsHelper","../../../../core/compilerUtils",
"../../../input/InputHandler"],function(q,g,p,d,m){Object.defineProperty(g,"__esModule",{value:!0});q=function(c){function f(d,f,a){var b=c.call(this,!0)||this;b.view=d;b.pointerType=f;b.registerIncoming("double-tap-drag",a,function(a){return b._handleDoubleTapDrag(a)});return b}p(f,c);f.prototype._handleDoubleTapDrag=function(c){var f=c.data;if(f.pointerType===this.pointerType){c.stopPropagation();var a=f.action;c=f.delta;var b=this.view,f=b.mapViewNavigation;switch(a){case "begin":this._currentScale=
this._startScale=a=b.scale;this._previousDelta=c;f.begin();break;case "update":if(this._previousDelta.y===c.y)break;this._previousDelta=c;c=this._startScale*Math.pow(1.015,c.y);f.setViewpointImmediate(c/this._currentScale);this._currentScale=c;break;case "end":a=b.constraints;b=a.effectiveLODs;if(!a.snapToZoom||!b){f.end();break}b=a.snapScale(this._currentScale);c=(0<c.y?Math.max(b,a.snapToPreviousScale(this._startScale)):Math.min(b,a.snapToNextScale(this._startScale)))/this._currentScale;f.zoom(c);
break;default:d.neverReached(a)}}};return f}(m.InputHandler);g.DoubleTapDragZoom=q})},"esri/views/2d/input/handlers/DragPan":function(){define("require exports ../../../../core/tsSupport/extendsHelper ../../../input/DragEventSeparator ../../../input/InputHandler ../../../input/handlers/support".split(" "),function(q,g,p,d,m,c){Object.defineProperty(g,"__esModule",{value:!0});q=function(f){function h(h,a,b){var e=f.call(this,!0)||this;e.view=h;e.pointerAction=a;e.registerIncoming("drag",b,function(a){return e._handleDrag(a)});
e.registerIncoming("pointer-down",function(){return e.stopMomentumNavigation()});var l=e.view.mapViewNavigation;e.dragEventSeparator=new d.DragEventSeparator({start:function(a,b){l.pan.begin(e.view,b.data);b.stopPropagation()},update:function(a,b){l.pan.update(e.view,b.data);b.stopPropagation()},end:function(a,b){l.pan.end(e.view,b.data);b.stopPropagation()},condition:function(a,b){return 1===a&&c.eventMatchesPointerAction(b.data,e.pointerAction)}});return e}p(h,f);h.prototype._handleDrag=function(c){var a=
this.view.mapViewNavigation;a.pinch.zoomMomentum||a.pinch.rotateMomentum?this.stopMomentumNavigation():this.dragEventSeparator.handle(c)};h.prototype.stopMomentumNavigation=function(){this.view.mapViewNavigation.pan.stopMomentumNavigation()};return h}(m.InputHandler);g.DragPan=q})},"esri/views/input/DragEventSeparator":function(){define(["require","exports"],function(q,g){Object.defineProperty(g,"__esModule",{value:!0});q=function(){function g(d){this.callbacks=d;this.currentCount=0;this.callbacks.condition||
(this.callbacks.condition=function(){return!0})}g.prototype.handle=function(d){var g=d.data,c=g.pointers.size;switch(g.action){case "start":this.currentCount=c;this.emitStart(d);break;case "added":this.emitEnd(this.previousEvent);this.currentCount=c;this.emitStart(d);break;case "update":this.emitUpdate(d);break;case "removed":this.startEvent&&this.emitEnd(this.previousEvent);this.currentCount=c;this.emitStart(d);break;case "end":this.emitEnd(d),this.currentCount=0}this.previousEvent=d};g.prototype.emitStart=
function(d){this.startEvent=d;this.callbacks.condition(this.currentCount,d)&&this.callbacks.start(this.currentCount,d,this.startEvent)};g.prototype.emitUpdate=function(d){this.callbacks.condition(this.currentCount,d)&&this.callbacks.update(this.currentCount,d,this.startEvent)};g.prototype.emitEnd=function(d){this.callbacks.condition(this.currentCount,d)&&this.callbacks.end(this.currentCount,d,this.startEvent);this.startEvent=null};return g}();g.DragEventSeparator=q})},"esri/views/2d/input/handlers/DragRotate":function(){define("require exports ../../../../core/tsSupport/extendsHelper ../../../input/DragEventSeparator ../../../input/InputHandler ../../../input/handlers/support".split(" "),
function(q,g,p,d,m,c){Object.defineProperty(g,"__esModule",{value:!0});q=function(f){function h(h,a,b){var e=f.call(this,!0)||this;e.view=h;e.pointerAction=a;var l=e.view.mapViewNavigation;e.dragEventSeparator=new d.DragEventSeparator({start:function(a,b){l.rotate.begin(e.view,b.data);b.stopPropagation()},update:function(a,b){l.rotate.update(e.view,b.data);b.stopPropagation()},end:function(a,b){l.rotate.end();b.stopPropagation()},condition:function(a,b){return 1===a&&c.eventMatchesPointerAction(b.data,
e.pointerAction)}});e.registerIncoming("drag",b,function(a){return e.dragEventSeparator.handle(a)});return e}p(h,f);return h}(m.InputHandler);g.DragRotate=q})},"esri/views/2d/input/handlers/GamepadNavigation":function(){define("require exports ../../../../core/tsSupport/extendsHelper ../../../../core/Handles ../../../../core/scheduling ../../../../core/watchUtils ../../viewpointUtils ../../../input/InputHandler ../../../navigation/gamepadAndKeyboardUtils".split(" "),function(q,g,p,d,m,c,f,h,n){Object.defineProperty(g,
"__esModule",{value:!0});q=function(l){function k(a){var b=l.call(this,!0)||this;b.view=a;b.frameTask=null;b.watchHandles=new d;b.currentDevice=null;b.transformation={translation:[0,0,0],heading:0,tilt:0};b.handle=b.registerIncoming("gamepad",function(a){return b.handleEvent(a)});b.handle.pause();return b}p(k,l);k.prototype.onInstall=function(a){var b=this;l.prototype.onInstall.call(this,a);this.watchHandles.add([c.init(this.view.navigation.gamepad,"enabled",function(a){a?(b.handle.resume(),b.frameTask||
(b.frameTask=m.addFrameTask({update:function(a){return b.frameUpdate(a.deltaTime)}}))):(b.handle.pause(),b.frameTask&&(b.frameTask.remove(),b.frameTask=null))})])};k.prototype.onUninstall=function(){this.watchHandles.removeAll();this.frameTask&&(this.frameTask.remove(),this.frameTask=null);l.prototype.onUninstall.call(this)};k.prototype.handleEvent=function(a){var b=this.view.navigation.gamepad.device;b&&a.data.device!==b||this.currentDevice&&this.currentDevice!==a.data.device||("end"===a.data.action?
(this.currentDevice=null,n.resetTransformation(this.transformation)):(this.currentDevice=a.data.device,n.extractTransformation(a.data,this.view.navigation.gamepad,this.transformation)))};k.prototype.frameUpdate=function(c){var d=this.transformation;if(!n.isZeroTransformation(d)){var k=this.view.viewpoint.clone(),l=b*this.view.navigation.gamepad.velocityFactor*c;f.translateBy(k,k,[d.translation[0]*l,-d.translation[1]*l]);l=this.view.size;f.scaleAndRotateBy(k,k,1+d.translation[2]*e*c,this.view.constraints.rotationEnabled?
-d.heading*a*c:0,[l[0]/2,l[1]],l);c=this.view.constraints.constrain(k,this.view.viewpoint);this.view.viewpoint=c}};return k}(h.InputHandler);g.GamepadNavigation=q;var a=.06,b=.7,e=6E-4})},"esri/views/navigation/gamepadAndKeyboardUtils":function(){define(["require","exports","../../core/libs/gl-matrix-2/vec3"],function(q,g,p){function d(d){var c=d*d;0>d&&(c*=-1);return c}Object.defineProperty(g,"__esModule",{value:!0});g.quadraticAccentuation=d;g.resetTransformation=function(d){d.translation[0]=0;
d.translation[1]=0;d.translation[2]=0;d.heading=0;d.tilt=0;return d};g.extractTransformation=function(g,c,f){var h=g.state;g=g.device;c="forward-down"===c.tiltDirection?1:-1;"standard"===g.deviceType?(f.translation[0]=d(h.axes[0]),f.translation[1]=d(h.axes[1]),f.translation[2]=d(h.buttons[7])-d(h.buttons[6]),f.heading=d(h.axes[2]),f.tilt=d(h.axes[3])):"spacemouse"===g.deviceType&&(f.translation[0]=1.2*d(h.axes[0]),f.translation[1]=1.2*d(h.axes[1]),f.translation[2]=2*-d(h.axes[2]),f.heading=1.2*d(h.axes[5]),
f.tilt=1.2*d(h.axes[3]));f.tilt*=c;p.vec3.scale(f.translation,f.translation,1);return f};g.extractTransformationKeyboard=function(d,c){c.translation[0]=d[1]-d[0];c.translation[1]=d[3]-d[2];c.translation[2]=d[4]-d[5];c.heading=d[7]-d[6];c.tilt=d[8]-d[9];return c};g.isZeroTransformation=function(d){return 0===d.translation[0]&&0===d.translation[1]&&0===d.translation[2]&&0===d.heading&&0===d.tilt}})},"esri/views/2d/input/handlers/KeyPan":function(){define(["require","exports","../../../../core/tsSupport/extendsHelper",
"../../../input/InputHandler"],function(q,g,p,d){Object.defineProperty(g,"__esModule",{value:!0});q=function(d){function c(c,h,g){var a,b=d.call(this,!0)||this;b.view=c;b.keys=h;b._pressed=!1;b._keyMap=(a={},a[h.left]="left",a[h.right]="right",a[h.up]="up",a[h.down]="down",a);b.registerIncoming("key-down",g,function(a){return b._handleKeyDown(a)});b.registerIncoming("key-up",g,function(a){return b._handleKeyUp(a)});b.registerIncoming("blur",g,function(){return b._handleBlur()});return b}p(c,d);c.prototype._handleKeyDown=
function(c){c.data.repeat||this._handleKey(c,!0)};c.prototype._handleKeyUp=function(c){this._handleKey(c,!1)};c.prototype._handleBlur=function(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop())};c.prototype._handleKey=function(c,d){var f=this._keyMap[c.data.key];if(this._pressed=null!=f){if(d)switch(this.view.mapViewNavigation.begin(),f){case "left":this.view.mapViewNavigation.continousPanLeft();break;case "right":this.view.mapViewNavigation.continousPanRight();break;case "up":this.view.mapViewNavigation.continousPanUp();
break;case "down":this.view.mapViewNavigation.continousPanDown()}else this._pressed=!1,this.view.mapViewNavigation.stop();c.stopPropagation()}};return c}(d.InputHandler);g.KeyPan=q})},"esri/views/2d/input/handlers/KeyRotate":function(){define(["require","exports","../../../../core/tsSupport/extendsHelper","../../../input/InputHandler"],function(q,g,p,d){Object.defineProperty(g,"__esModule",{value:!0});q=function(d){function c(c,h,g){var a,b=d.call(this,!0)||this;b.view=c;b.keys=h;b._pressed=!1;b._keyToDirection=
(a={},a[h.clockwiseOption1]="clockwise",a[h.clockwiseOption2]="clockwise",a[h.counterClockwiseOption1]="counterClockwise",a[h.counterClockwiseOption2]="counterClockwise",a[h.resetOption1]="reset",a[h.resetOption2]="reset",a);b.registerIncoming("key-down",g,function(a){return b._handleKeyDown(a)});b.registerIncoming("key-up",g,function(a){return b._handleKeyUp(a)});b.registerIncoming("blur",g,function(){return b._handleBlur()});return b}p(c,d);c.prototype._handleKeyDown=function(c){c.data.repeat||
this._handleKey(c,!0)};c.prototype._handleKeyUp=function(c){this._handleKey(c,!1)};c.prototype._handleBlur=function(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop())};c.prototype._handleKey=function(c,d){var f=c.modifiers;if(!(0<f.size&&!f.has("Shift")||!this.view.constraints.rotationEnabled)&&(f=this._keyToDirection[c.data.key],this._pressed=null!=f)){if(d)switch(this.view.mapViewNavigation.begin(),f){case "clockwise":this.view.mapViewNavigation.continousRotateClockwise();break;
case "counterClockwise":this.view.mapViewNavigation.continousRotateCounterclockwise();break;case "reset":this.view.mapViewNavigation.resetRotation()}else this._pressed=!1,this.view.mapViewNavigation.stop();c.stopPropagation()}};return c}(d.InputHandler);g.KeyRotate=q})},"esri/views/2d/input/handlers/KeyZoom":function(){define(["require","exports","../../../../core/tsSupport/extendsHelper","../../../../core/compilerUtils","../../../input/InputHandler"],function(q,g,p,d,m){Object.defineProperty(g,"__esModule",
{value:!0});q=function(c){function f(d,f,a){var b=c.call(this,!0)||this;b.view=d;b.keys=f;b._keysToZoomAction={};b.registerIncoming("key-down",a,function(a){return b._handleKeyDown(a)});f.zoomIn.forEach(function(a){return b._keysToZoomAction[a]=0});f.zoomOut.forEach(function(a){return b._keysToZoomAction[a]=1});return b}p(f,c);f.prototype._handleKeyDown=function(c){this._handleKey(c)};f.prototype._handleKey=function(c){var f=c.modifiers;if(!(0<f.size)||f.has("Shift"))if(f=c.data.key,f in this._keysToZoomAction){var f=
this._keysToZoomAction[f],a=this.view.mapViewNavigation,b=null;switch(f){case 0:b=a.zoomIn();break;case 1:b=a.zoomOut();break;default:d.neverReached(f);return}a.begin();b.then(function(){return a.end()});c.stopPropagation()}};return f}(m.InputHandler);g.KeyZoom=q})},"esri/views/2d/input/handlers/MouseWheelZoom":function(){define(["require","exports","../../../../core/tsSupport/extendsHelper","../../../input/InputHandler"],function(q,g,p,d){Object.defineProperty(g,"__esModule",{value:!0});q=function(d){function c(c,
h){var f=d.call(this,!0)||this;f.view=c;f._canZoom=!0;f.registerIncoming("mouse-wheel",h,function(a){return f._handleMouseWheel(a)});return f}p(c,d);c.prototype._handleMouseWheel=function(c){var d=this;if(this.view.navigation.mouseWheelZoomEnabled&&(c.preventDefault(),c.stopPropagation(),this._canZoom)){var f=this.view.mapViewNavigation;c=c.data;if(c=f.zoom(1/Math.pow(.6,1/60*c.deltaY),[c.x,c.y]))this._canZoom=!1,c.catch(function(){}).then(function(){d._canZoom=!0;f.end()})}};return c}(d.InputHandler);
g.MouseWheelZoom=q})},"esri/views/2d/input/handlers/PinchAction":function(){define(["require","exports","../../../../core/tsSupport/extendsHelper","../../../input/DragEventSeparator","../../../input/InputHandler"],function(q,g,p,d,m){Object.defineProperty(g,"__esModule",{value:!0});q=function(c){function f(f){var h=c.call(this,!0)||this;h.view=f;h.registerIncoming("drag",function(a){return h._handleDrag(a)});h.registerIncoming("pointer-down",function(){return h.stopMomentumNavigation()});var a=h.view.mapViewNavigation;
h.dragEventSeparator=new d.DragEventSeparator({start:function(b,c){a.pinch.begin(h.view,c.data);c.stopPropagation()},update:function(b,c){a.pinch.update(h.view,c.data);c.stopPropagation()},end:function(b,c){a.pinch.end(h.view);c.stopPropagation()},condition:function(a){return 2<=a}});return h}p(f,c);f.prototype._handleDrag=function(c){this.dragEventSeparator.handle(c)};f.prototype.stopMomentumNavigation=function(){this.view.mapViewNavigation.pinch.stopMomentumNavigation()};return f}(m.InputHandler);
g.PinchRotateAndZoom=q})},"esri/views/input/BrowserEventSource":function(){define("require exports ../../core/has ../../core/screenUtils ../../core/libs/pep/pep ./keys ./gamepad/GamepadSource".split(" "),function(q,g,p,d,m,c,f){Object.defineProperty(g,"__esModule",{value:!0});var h=p("trident"),n=p("edge"),a=p("chrome"),b=p("ff"),e=p("safari");q=function(){function k(a,b){var c=this;this.input=b;this._active={};this._activePointerCaptures=new Set;this._keyDownState=new Set;this._eventId=1;this._browserTouchPanningEnabled=
!1;this._element=a;m.applyLocal(a);a.getAttribute("tabindex")||a.setAttribute("tabindex","0");this._eventHandlers={"key-down":this._handleKey,"key-up":this._handleKey,"pointer-down":this._handlePointer,"pointer-move":this._handlePointerPreventDefault,"pointer-up":this._handlePointerPreventDefault,"pointer-enter":this._handlePointer,"pointer-leave":this._handlePointer,"pointer-cancel":this._handlePointer,"mouse-wheel":this._handleMouseWheel,"pointer-capture-lost":this._handlePointerCaptureLost};this._updateTouchAction();
this._element.addEventListener("keydown",this._preventAltKeyDefault);this._gamepadSource=new f.GamepadSource(a,this.input);this._gamepadSource.onEvent=function(a){return c._callback("gamepad",a)}}k.prototype.destroy=function(){var a=this;this.activeEvents=this._callback=null;this._activePointerCaptures.forEach(function(b){a._releasePointerCaptureSafe(b)});this._gamepadSource&&(this._gamepadSource.destroy(),this._gamepadSource=null);this._activePointerCaptures=null;this._removeTouchAction();this._element.removeEventListener("keydown",
this._preventAltKeyDefault)};Object.defineProperty(k.prototype,"browserTouchPanningEnabled",{get:function(){return this._browserTouchPanningEnabled},set:function(a){this._browserTouchPanningEnabled=a;this._updateTouchAction();this._updateTouchEventHandling()},enumerable:!0,configurable:!0});Object.defineProperty(k.prototype,"onEventReceived",{set:function(a){this._callback=a},enumerable:!0,configurable:!0});Object.defineProperty(k.prototype,"activeEvents",{set:function(a){var b=this,c;for(c in this._active)a&&
a.has(c)||(this._element.removeEventListener(l[c],this._active[c]),delete this._active[c]);a&&a.forEach(function(a){if(!b._active[a]&&l[a]){var c=(b._eventHandlers[a]||b._handleDefault).bind(b,a);b._element.addEventListener(l[a],c);b._active[a]=c}});this._gamepadSource.pollingEnabled=a&&a.has("gamepad")},enumerable:!0,configurable:!0});k.prototype.setPointerCapture=function(a,b){b?(this._element.setPointerCapture(a.pointerId),this._activePointerCaptures.add(a.pointerId)):(this._releasePointerCaptureSafe(a.pointerId),
this._activePointerCaptures.delete(a.pointerId))};k.prototype._updateTouchAction=function(){this._element.classList.remove(this._browserTouchPanningEnabled?"esri-view-surface--touch-none":"esri-view-surface--touch-pan");this._element.classList.add(this._browserTouchPanningEnabled?"esri-view-surface--touch-pan":"esri-view-surface--touch-none")};k.prototype._updateTouchEventHandling=function(){this._browserTouchPanningEnabled?this._element.addEventListener("touchmove",this._preventMultiTouchPanning):
this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)};k.prototype._removeTouchAction=function(){this._element.classList.remove("esri-view-surface--touch-none");this._element.classList.remove("esri-view-surface--touch-pan");this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)};k.prototype._releasePointerCaptureSafe=function(a){try{this._element.hasPointerCapture&&!this._element.hasPointerCapture(a)||this._element.releasePointerCapture(a)}catch(C){}};
k.prototype._updateNormalizedPointerLikeEvent=function(a,b){a=d.createScreenPointFromNativeEvent(this._element,a);k.test.disableSubpixelCoordinates&&(a.x=Math.round(a.x),a.y=Math.round(a.y));b.x=a.x;b.y=a.y;return b};k.prototype._handleKey=function(a,b){var e=c.eventKey(b);e&&"key-up"===a&&this._keyDownState.delete(e);b={native:b,key:e,repeat:e&&this._keyDownState.has(e)};e&&"key-down"===a&&this._keyDownState.add(b.key);this._callback(a,b)};k.prototype._handlePointer=function(a,b){b=this._updateNormalizedPointerLikeEvent(b,
{native:b,x:0,y:0,pointerType:b.pointerType,button:b.button,buttons:b.buttons,eventId:this._eventId++});this._callback(a,b)};k.prototype._handlePointerPreventDefault=function(a,b){var c=this._updateNormalizedPointerLikeEvent(b,{native:b,x:0,y:0,pointerType:b.pointerType,button:b.button,buttons:b.buttons,eventId:this._eventId++});b.preventDefault();this._callback(a,c)};k.prototype._handleMouseWheel=function(c,d){var f=d.deltaY;switch(d.deltaMode){case 0:if(h||n)f=f/document.documentElement.clientHeight*
600;break;case 1:f*=30;break;case 2:f*=900}h||n?f*=.7:a||e?f*=.6:b&&(f*=1.375);var k=Math.abs(f);100<k&&(f=f/k*200/(1+Math.exp(-.02*(k-100))));d=this._updateNormalizedPointerLikeEvent(d,{native:d,x:0,y:0,deltaY:f});this._callback(c,d)};k.prototype._handlePointerCaptureLost=function(a,b){this._activePointerCaptures.delete(b.pointerId);this._handleDefault(a,b)};k.prototype._handleDefault=function(a,b){var c={native:b};b.preventDefault();this._callback(a,c)};k.prototype._preventAltKeyDefault=function(a){"Alt"===
a.key&&a.preventDefault()};k.prototype._preventMultiTouchPanning=function(a){1<a.touches.length&&a.preventDefault()};k.test={disableSubpixelCoordinates:!1};return k}();g.BrowserEventSource=q;var l={"key-down":"keydown","key-up":"keyup","pointer-down":"pointerdown","pointer-up":"pointerup","pointer-move":"pointermove","mouse-wheel":"wheel","pointer-capture-got":"gotpointercapture","pointer-capture-lost":"lostpointercapture","context-menu":"contextmenu","pointer-enter":"pointerenter","pointer-leave":"pointerleave",
"pointer-cancel":"pointercancel",focus:"focus",blur:"blur"}})},"esri/core/libs/pep/pep":function(){define(function(){function q(c,e){e=e||Object.create(null);var d=document.createEvent("Event");d.initEvent(c,e.bubbles||!1,e.cancelable||!1);c=2;for(var f;c<a.length;c++)f=a[c],d[f]=e[f]||b[c];d.buttons=e.buttons||0;c=0;c=e.pressure&&d.buttons?e.pressure:d.buttons?.5:0;d.x=d.clientX;d.y=d.clientY;d.pointerId=e.pointerId||0;d.width=e.width||0;d.height=e.height||0;d.pressure=c;d.tiltX=e.tiltX||0;d.tiltY=
e.tiltY||0;d.twist=e.twist||0;d.tangentialPressure=e.tangentialPressure||0;d.pointerType=e.pointerType||"";d.hwTimestamp=e.hwTimestamp||0;d.isPrimary=e.isPrimary||!1;return d}function g(){this.array=[];this.size=0}function p(a,b,c,e){this.addCallback=a.bind(e);this.removeCallback=b.bind(e);this.changedCallback=c.bind(e);w&&(this.observer=new w(this.mutationWatcher.bind(this)))}function d(a){return"body /shadow-deep/ "+m(a)}function m(a){return'[touch-action\x3d"'+a+'"]'}function c(a){return"{ -ms-touch-action: "+
a+"; touch-action: "+a+"; }"}function f(){if(J){B.forEach(function(a){String(a)===a?(A+=m(a)+c(a)+"\n",E&&(A+=d(a)+c(a)+"\n")):(A+=a.selectors.map(m)+c(a.rule)+"\n",E&&(A+=a.selectors.map(d)+c(a.rule)+"\n"))});var a=document.createElement("style");a.textContent=A;document.head.appendChild(a)}}function h(a){if(!y.pointermap.has(a))throw a=Error("NotFoundError"),a.name="NotFoundError",a;}function n(a){for(var b=a.parentNode;b&&b!==a.ownerDocument;)b=b.parentNode;if(!b)throw a=Error("InvalidStateError"),
a.name="InvalidStateError",a;}var a="bubbles cancelable view detail screenX screenY clientX clientY ctrlKey altKey shiftKey metaKey button relatedTarget pageX pageY".split(" "),b=[!1,!1,null,null,0,0,0,0,!1,!1,!1,!1,0,null,0,0],e=window.Map&&window.Map.prototype.forEach?Map:g;g.prototype={set:function(a,b){if(void 0===b)return this.delete(a);this.has(a)||this.size++;this.array[a]=b},has:function(a){return void 0!==this.array[a]},delete:function(a){this.has(a)&&(delete this.array[a],this.size--)},
get:function(a){return this.array[a]},clear:function(){this.size=this.array.length=0},forEach:function(a,b){return this.array.forEach(function(c,e){a.call(b,c,e,this)},this)}};var l="bubbles cancelable view detail screenX screenY clientX clientY ctrlKey altKey shiftKey metaKey button relatedTarget buttons pointerId width height pressure tiltX tiltY pointerType hwTimestamp isPrimary type target currentTarget which pageX pageY timeStamp".split(" "),k=[!1,!1,null,null,0,0,0,0,!1,!1,!1,!1,0,null,0,0,
0,0,0,0,0,"",0,!1,"",null,null,0,0,0,0],r={pointerover:1,pointerout:1,pointerenter:1,pointerleave:1},C="undefined"!==typeof SVGElementInstance,y={pointermap:new e,eventMap:Object.create(null),captureInfo:Object.create(null),eventSources:Object.create(null),eventSourceList:[],registerSource:function(a,b){var c=b.events;c&&(c.forEach(function(a){b[a]&&(this.eventMap[a]=b[a].bind(b))},this),this.eventSources[a]=b,this.eventSourceList.push(b))},register:function(a){for(var b=this.eventSourceList.length,
c=0,e;c<b&&(e=this.eventSourceList[c]);c++)e.register.call(e,a)},unregister:function(a){for(var b=this.eventSourceList.length,c=0,e;c<b&&(e=this.eventSourceList[c]);c++)e.unregister.call(e,a)},contains:function(a,b){try{return a.contains(b)}catch(Z){return!1}},down:function(a){a.bubbles=!0;this.fireEvent("pointerdown",a)},move:function(a){a.bubbles=!0;this.fireEvent("pointermove",a)},up:function(a){a.bubbles=!0;this.fireEvent("pointerup",a)},enter:function(a){a.bubbles=!1;this.fireEvent("pointerenter",
a)},leave:function(a){a.bubbles=!1;this.fireEvent("pointerleave",a)},over:function(a){a.bubbles=!0;this.fireEvent("pointerover",a)},out:function(a){a.bubbles=!0;this.fireEvent("pointerout",a)},cancel:function(a){a.bubbles=!0;this.fireEvent("pointercancel",a)},leaveOut:function(a){this.out(a);this.propagate(a,this.leave,!1)},enterOver:function(a){this.over(a);this.propagate(a,this.enter,!0)},eventHandler:function(a){if(!a._handledByPE){var b=a.type;(b=this.eventMap&&this.eventMap[b])&&b(a);a._handledByPE=
!0}},listen:function(a,b){b.forEach(function(b){this.addEvent(a,b)},this)},unlisten:function(a,b){b.forEach(function(b){this.removeEvent(a,b)},this)},addEvent:function(a,b){a.addEventListener(b,this.boundHandler)},removeEvent:function(a,b){a.removeEventListener(b,this.boundHandler)},makeEvent:function(a,b){this.captureInfo[b.pointerId]&&(b.relatedTarget=null);a=new q(a,b);b.preventDefault&&(a.preventDefault=b.preventDefault);a._target=a._target||b.target;return a},fireEvent:function(a,b){a=this.makeEvent(a,
b);return this.dispatchEvent(a)},cloneEvent:function(a){for(var b=Object.create(null),c,e=0;e<l.length;e++)c=l[e],b[c]=a[c]||k[e],C&&("target"===c||"relatedTarget"===c)&&b[c]instanceof SVGElementInstance&&(b[c]=b[c].correspondingUseElement);a.preventDefault&&(b.preventDefault=function(){a.preventDefault()});return b},getTarget:function(a){var b=this.captureInfo[a.pointerId];if(!b)return a._target;if(a._target===b||!(a.type in r))return b},propagate:function(a,b,c){for(var e=a.target,d=[];null!=e&&
e!==document&&!e.contains(a.relatedTarget);)if(d.push(e),e=e.parentNode,!e)return;c&&d.reverse();d.forEach(function(c){a.target=c;b.call(this,a)},this)},setCapture:function(a,b,c){this.captureInfo[a]&&this.releaseCapture(a,c);this.captureInfo[a]=b;this.implicitRelease=this.releaseCapture.bind(this,a,c);document.addEventListener("pointerup",this.implicitRelease);document.addEventListener("pointercancel",this.implicitRelease);var e=new q("gotpointercapture");e.pointerId=a;e._target=b;c||this.asyncDispatchEvent(e)},
releaseCapture:function(a,b){var c=this.captureInfo[a];if(c){this.captureInfo[a]=void 0;document.removeEventListener("pointerup",this.implicitRelease);document.removeEventListener("pointercancel",this.implicitRelease);var e=new q("lostpointercapture");e.pointerId=a;e._target=c;b||this.asyncDispatchEvent(e)}},dispatchEvent:function(a){var b=this.getTarget(a);if(b)return b.dispatchEvent(a)},asyncDispatchEvent:function(a){requestAnimationFrame(this.dispatchEvent.bind(this,a))}};y.boundHandler=y.eventHandler.bind(y);
var t={shadow:function(a){if(a)return a.shadowRoot||a.webkitShadowRoot},canTarget:function(a){return a&&!!a.elementFromPoint},targetingShadow:function(a){a=this.shadow(a);if(this.canTarget(a))return a},olderShadow:function(a){var b=a.olderShadowRoot;!b&&(a=a.querySelector("shadow"))&&(b=a.olderShadowRoot);return b},allShadows:function(a){var b=[];for(a=this.shadow(a);a;)b.push(a),a=this.olderShadow(a);return b},searchRoot:function(a,b,c){if(a){var e=a.elementFromPoint(b,c),d;for(d=this.targetingShadow(e);d;){if(a=
d.elementFromPoint(b,c))return e=this.targetingShadow(a),this.searchRoot(e,b,c)||a;d=this.olderShadow(d)}return e}},owner:function(a){for(;a.parentNode;)a=a.parentNode;a.nodeType!==Node.DOCUMENT_NODE&&a.nodeType!==Node.DOCUMENT_FRAGMENT_NODE&&(a=document);return a},findTarget:function(a){var b=a.clientX,c=a.clientY;a=this.owner(a.target);a.elementFromPoint(b,c)||(a=document);return this.searchRoot(a,b,c)}},x=Array.prototype.forEach.call.bind(Array.prototype.forEach),z=Array.prototype.map.call.bind(Array.prototype.map),
u=Array.prototype.slice.call.bind(Array.prototype.slice),v=Array.prototype.filter.call.bind(Array.prototype.filter),w=window.MutationObserver||window.WebKitMutationObserver,D={subtree:!0,childList:!0,attributes:!0,attributeOldValue:!0,attributeFilter:["touch-action"]};p.prototype={watchSubtree:function(a){this.observer&&t.canTarget(a)&&this.observer.observe(a,D)},enableOnSubtree:function(a){this.watchSubtree(a);a===document&&"complete"!==document.readyState?this.installOnLoad():this.installNewSubtree(a)},
installNewSubtree:function(a){x(this.findElements(a),this.addElement,this)},findElements:function(a){return a.querySelectorAll?a.querySelectorAll("[touch-action]"):[]},removeElement:function(a){this.removeCallback(a)},addElement:function(a){this.addCallback(a)},elementChanged:function(a,b){this.changedCallback(a,b)},concatLists:function(a,b){return a.concat(u(b))},installOnLoad:function(){document.addEventListener("readystatechange",function(){"complete"===document.readyState&&this.installNewSubtree(document)}.bind(this))},
isElement:function(a){return a.nodeType===Node.ELEMENT_NODE},flattenMutationTree:function(a){var b=z(a,this.findElements,this);b.push(v(a,this.isElement));return b.reduce(this.concatLists,[])},mutationWatcher:function(a){a.forEach(this.mutationHandler,this)},mutationHandler:function(a){"childList"===a.type?(this.flattenMutationTree(a.addedNodes).forEach(this.addElement,this),this.flattenMutationTree(a.removedNodes).forEach(this.removeElement,this)):"attributes"===a.type&&this.elementChanged(a.target,
a.oldValue)}};var B=["none","auto","pan-x","pan-y",{rule:"pan-x pan-y",selectors:["pan-x pan-y","pan-y pan-x"]}],A="",J=window.PointerEvent||window.MSPointerEvent,E=!window.ShadowDOMPolyfill&&document.head.createShadowRoot,G=y.pointermap,F=[1,4,2,8,16],H=!1;try{H=1===(new MouseEvent("test",{buttons:1})).buttons}catch(M){}var O={POINTER_ID:1,POINTER_TYPE:"mouse",events:["mousedown","mousemove","mouseup","mouseover","mouseout"],register:function(a){y.listen(a,this.events)},unregister:function(a){y.unlisten(a,
this.events)},lastTouches:[],isEventSimulatedFromTouch:function(a){var b=this.lastTouches,c=a.clientX;a=a.clientY;for(var e=0,d=b.length,f;e<d&&(f=b[e]);e++){var k=Math.abs(a-f.y);if(25>=Math.abs(c-f.x)&&25>=k)return!0}},prepareEvent:function(a){var b=y.cloneEvent(a),c=b.preventDefault;b.preventDefault=function(){a.preventDefault();c()};b.pointerId=this.POINTER_ID;b.isPrimary=!0;b.pointerType=this.POINTER_TYPE;return b},prepareButtonsForMove:function(a,b){var c=G.get(this.POINTER_ID);a.buttons=0!==
b.which&&c?c.buttons:0;b.buttons=a.buttons},mousedown:function(a){if(!this.isEventSimulatedFromTouch(a)){var b=G.get(this.POINTER_ID),c=this.prepareEvent(a);H||(c.buttons=F[c.button],b&&(c.buttons|=b.buttons),a.buttons=c.buttons);G.set(this.POINTER_ID,a);b&&0!==b.buttons?y.move(c):y.down(c)}},mousemove:function(a){if(!this.isEventSimulatedFromTouch(a)){var b=this.prepareEvent(a);H||this.prepareButtonsForMove(b,a);b.button=-1;G.set(this.POINTER_ID,a);y.move(b)}},mouseup:function(a){if(!this.isEventSimulatedFromTouch(a)){var b=
G.get(this.POINTER_ID),c=this.prepareEvent(a);if(!H){var e=F[c.button];c.buttons=b?b.buttons&~e:0;a.buttons=c.buttons}G.set(this.POINTER_ID,a);c.buttons&=~F[c.button];0===c.buttons?y.up(c):y.move(c)}},mouseover:function(a){if(!this.isEventSimulatedFromTouch(a)){var b=this.prepareEvent(a);H||this.prepareButtonsForMove(b,a);b.button=-1;G.set(this.POINTER_ID,a);y.enterOver(b)}},mouseout:function(a){if(!this.isEventSimulatedFromTouch(a)){var b=this.prepareEvent(a);H||this.prepareButtonsForMove(b,a);b.button=
-1;y.leaveOut(b)}},cancel:function(a){a=this.prepareEvent(a);y.cancel(a);this.deactivateMouse()},deactivateMouse:function(){G.delete(this.POINTER_ID)}},Q=y.captureInfo,N=t.findTarget.bind(t),P=t.allShadows.bind(t),L=y.pointermap,R,I={events:["touchstart","touchmove","touchend","touchcancel"],register:function(a){R.enableOnSubtree(a)},unregister:function(){},elementAdded:function(a){var b=a.getAttribute("touch-action"),c=this.touchActionToScrollType(b);c&&(a._scrollType=c,y.listen(a,this.events),P(a).forEach(function(a){a._scrollType=
c;y.listen(a,this.events)},this))},elementRemoved:function(a){a._scrollType=void 0;y.unlisten(a,this.events);P(a).forEach(function(a){a._scrollType=void 0;y.unlisten(a,this.events)},this)},elementChanged:function(a,b){var c=a.getAttribute("touch-action"),e=this.touchActionToScrollType(c);b=this.touchActionToScrollType(b);e&&b?(a._scrollType=e,P(a).forEach(function(a){a._scrollType=e},this)):b?this.elementRemoved(a):e&&this.elementAdded(a)},scrollTypes:{EMITTER:"none",XSCROLLER:"pan-x",YSCROLLER:"pan-y",
SCROLLER:/^(?:pan-x pan-y)|(?:pan-y pan-x)|auto$/},touchActionToScrollType:function(a){var b=this.scrollTypes;if("none"===a)return"none";if(a===b.XSCROLLER)return"X";if(a===b.YSCROLLER)return"Y";if(b.SCROLLER.exec(a))return"XY"},POINTER_TYPE:"touch",firstTouch:null,isPrimaryTouch:function(a){return this.firstTouch===a.identifier},setPrimaryTouch:function(a){if(0===L.size||1===L.size&&L.has(1))this.firstTouch=a.identifier,this.firstXY={X:a.clientX,Y:a.clientY},this.scrolling=!1,this.cancelResetClickCount()},
removePrimaryPointer:function(a){a.isPrimary&&(this.firstXY=this.firstTouch=null,this.resetClickCount())},clickCount:0,resetId:null,resetClickCount:function(){var a=function(){this.clickCount=0;this.resetId=null}.bind(this);this.resetId=setTimeout(a,200)},cancelResetClickCount:function(){this.resetId&&clearTimeout(this.resetId)},typeToButtons:function(a){var b=0;if("touchstart"===a||"touchmove"===a)b=1;return b},touchToPointer:function(a){var b=this.currentTouchEvent,c=y.cloneEvent(a),e=c.pointerId=
a.identifier+2;c.target=Q[e]||N(c);c.bubbles=!0;c.cancelable=!0;c.detail=this.clickCount;c.button=0;c.buttons=this.typeToButtons(b.type);c.width=2*(a.radiusX||a.webkitRadiusX||0);c.height=2*(a.radiusY||a.webkitRadiusY||0);c.pressure=a.force||a.webkitForce||.5;c.isPrimary=this.isPrimaryTouch(a);c.pointerType=this.POINTER_TYPE;c.altKey=b.altKey;c.ctrlKey=b.ctrlKey;c.metaKey=b.metaKey;c.shiftKey=b.shiftKey;var d=this;c.preventDefault=function(){d.scrolling=!1;d.firstXY=null;b.preventDefault()};return c},
processTouches:function(a,b){var c=a.changedTouches;this.currentTouchEvent=a;a=0;for(var e;a<c.length;a++)e=c[a],b.call(this,this.touchToPointer(e))},shouldScroll:function(a){if(this.firstXY){var b;b=a.currentTarget._scrollType;if("none"===b)b=!1;else if("XY"===b)b=!0;else{a=a.changedTouches[0];var c="Y"===b?"X":"Y";b=Math.abs(a["client"+b]-this.firstXY[b])>=Math.abs(a["client"+c]-this.firstXY[c])}this.firstXY=null;return b}},findTouch:function(a,b){for(var c=0,e=a.length,d;c<e&&(d=a[c]);c++)if(d.identifier===
b)return!0},vacuumTouches:function(a){var b=a.touches;if(L.size>=b.length){var c=[];L.forEach(function(a,e){1===e||this.findTouch(b,e-2)||c.push(a.out)},this);c.forEach(this.cancelOut,this)}},touchstart:function(a){this.vacuumTouches(a);this.setPrimaryTouch(a.changedTouches[0]);this.dedupSynthMouse(a);this.scrolling||(this.clickCount++,this.processTouches(a,this.overDown))},overDown:function(a){L.set(a.pointerId,{target:a.target,out:a,outTarget:a.target});y.enterOver(a);y.down(a)},touchmove:function(a){this.scrolling||
(this.shouldScroll(a)?(this.scrolling=!0,this.touchcancel(a)):(a.preventDefault(),this.processTouches(a,this.moveOverOut)))},moveOverOut:function(a){var b=L.get(a.pointerId);if(b){var c=b.out,e=b.outTarget;y.move(a);c&&e!==a.target&&(c.relatedTarget=a.target,a.relatedTarget=e,c.target=e,a.target?(y.leaveOut(c),y.enterOver(a)):(a.target=e,a.relatedTarget=null,this.cancelOut(a)));b.out=a;b.outTarget=a.target}},touchend:function(a){this.dedupSynthMouse(a);this.processTouches(a,this.upOut)},upOut:function(a){this.scrolling||
(y.up(a),y.leaveOut(a));this.cleanUpPointer(a)},touchcancel:function(a){this.processTouches(a,this.cancelOut)},cancelOut:function(a){y.cancel(a);y.leaveOut(a);this.cleanUpPointer(a)},cleanUpPointer:function(a){L.delete(a.pointerId);this.removePrimaryPointer(a)},dedupSynthMouse:function(a){var b=O.lastTouches;a=a.changedTouches[0];this.isPrimaryTouch(a)&&(a={x:a.clientX,y:a.clientY},b.push(a),b=function(a,b){b=a.indexOf(b);-1<b&&a.splice(b,1)}.bind(null,b,a),setTimeout(b,2500))}};R=new p(I.elementAdded,
I.elementRemoved,I.elementChanged,I);var K=y.pointermap,S=window.MSPointerEvent&&"number"===typeof window.MSPointerEvent.MSPOINTER_TYPE_MOUSE,T={events:"MSPointerDown MSPointerMove MSPointerUp MSPointerOut MSPointerOver MSPointerCancel MSGotPointerCapture MSLostPointerCapture".split(" "),register:function(a){y.listen(a,this.events)},unregister:function(a){y.unlisten(a,this.events)},POINTER_TYPES:["","unavailable","touch","pen","mouse"],prepareEvent:function(a){var b=a;S&&(b=y.cloneEvent(a),b.pointerType=
this.POINTER_TYPES[a.pointerType]);return b},cleanup:function(a){K.delete(a)},MSPointerDown:function(a){K.set(a.pointerId,a);a=this.prepareEvent(a);y.down(a)},MSPointerMove:function(a){a=this.prepareEvent(a);y.move(a)},MSPointerUp:function(a){var b=this.prepareEvent(a);y.up(b);this.cleanup(a.pointerId)},MSPointerOut:function(a){a=this.prepareEvent(a);y.leaveOut(a)},MSPointerOver:function(a){a=this.prepareEvent(a);y.enterOver(a)},MSPointerCancel:function(a){var b=this.prepareEvent(a);y.cancel(b);this.cleanup(a.pointerId)},
MSLostPointerCapture:function(a){a=y.makeEvent("lostpointercapture",a);y.dispatchEvent(a)},MSGotPointerCapture:function(a){a=y.makeEvent("gotpointercapture",a);y.dispatchEvent(a)}},V,U,W;window.navigator.msPointerEnabled?(V=function(a){h(a);n(this);0!==y.pointermap.get(a).buttons&&(y.setCapture(a,this,!0),this.msSetPointerCapture(a))},U=function(a){h(a);y.releaseCapture(a,!0);this.msReleasePointerCapture(a)}):(V=function(a){h(a);n(this);0!==y.pointermap.get(a).buttons&&y.setCapture(a,this)},U=function(a){h(a);
y.releaseCapture(a)});W=function(a){return!!y.captureInfo[a]};var X=window.PointerEvent||window.MSPointerEvent;return{dispatcher:y,Installer:p,PointerEvent:q,PointerMap:e,targetFinding:t,applyGlobal:function(){f();window.PointerEvent||(window.PointerEvent=q,window.navigator.msPointerEnabled?(Object.defineProperty(window.navigator,"maxTouchPoints",{value:window.navigator.msMaxTouchPoints,enumerable:!0}),y.registerSource("ms",T)):(Object.defineProperty(window.navigator,"maxTouchPoints",{value:0,enumerable:!0}),
y.registerSource("mouse",O),void 0!==window.ontouchstart&&y.registerSource("touch",I)),y.register(document));window.Element&&!Element.prototype.setPointerCapture&&Object.defineProperties(Element.prototype,{setPointerCapture:{value:V},releasePointerCapture:{value:U},hasPointerCapture:{value:W}})},applyLocal:function(a){X||(window.PointerEvent||(window.navigator.msPointerEnabled?y.registerSource("ms",T):(y.registerSource("mouse",O),void 0!==window.ontouchstart&&y.registerSource("touch",I)),y.register(document)),
window.Element&&!Element.prototype.setPointerCapture&&(a.setPointerCapture=V.bind(a),a.releasePointerCapture=U.bind(a),a.hasPointerCapture=W.bind(a)),a.getAttribute("touch-action")||a.setAttribute("touch-action","none"))}}})},"esri/views/input/gamepad/GamepadSource":function(){define("require exports ../../../core/tsSupport/assignHelper ../../../core/scheduling ./GamepadInputDevice ./GamepadState".split(" "),function(q,g,p,d,m,c){Object.defineProperty(g,"__esModule",{value:!0});q=function(){function f(d,
f){var a=this;this.element=d;this.input=f;this.handleGamepadConnectedEvent=function(b){a.handleGamepadConnected(b.gamepad)};this.handleGamepadDisconnectedEvent=function(b){b=b.gamepad;var e=a.inputDevices[b.index];e&&(a.emitGamepadEvent(b,c.extractState(e),!1),a.inputDevices[b.index]=void 0,a.latestUpdate[b.index]=void 0,a.input.gamepad.devices.remove(e))};this.frameTask=null;this.latestUpdate=[];this.inputDevices=[];this.callback=null;if(this.supported="getGamepads"in window.navigator)this.forEachGamepad(function(b){return a.handleGamepadConnected(b)}),
window.addEventListener("gamepadconnected",this.handleGamepadConnectedEvent),window.addEventListener("gamepaddisconnected",this.handleGamepadDisconnectedEvent)}f.prototype.destroy=function(){this.pollingEnabled=!1;this.supported&&(window.removeEventListener("gamepadconnected",this.handleGamepadConnectedEvent),window.removeEventListener("gamepaddisconnected",this.handleGamepadDisconnectedEvent))};Object.defineProperty(f.prototype,"onEvent",{set:function(c){this.callback=c},enumerable:!0,configurable:!0});
Object.defineProperty(f.prototype,"pollingEnabled",{set:function(c){this.supported&&(c?this.startPolling():this.stopPolling())},enumerable:!0,configurable:!0});f.prototype.handleGamepadConnected=function(c){var d=new m(c);"unknown"!==d.deviceType&&(this.inputDevices[c.index]=d,this.input.gamepad.devices.add(d))};f.prototype.startPolling=function(){var c=this;null==this.frameTask&&(this.frameTask=d.addFrameTask({update:function(){return c.readGamepadState()}}))};f.prototype.stopPolling=function(){null!=
this.frameTask&&(this.frameTask.remove(),this.frameTask=null,this.latestUpdate=[])};f.prototype.readGamepadState=function(){var d=this,f=document.hasFocus(),a=this.element.contains(document.activeElement),b="document"===this.input.gamepad.enabledFocusMode&&!f||"view"===this.input.gamepad.enabledFocusMode&&!a;this.forEachGamepad(function(a){var e=d.inputDevices[a.index];if(e){var f=d.latestUpdate[a.index],e=c.extractState(e),h=b||c.stateIdle(e);f&&(f.timestamp===a.timestamp||!f.active&&h||c.stateEqual(f.state,
e))||d.emitGamepadEvent(a,e,!h)}})};f.prototype.forEachGamepad=function(c){for(var d=window.navigator.getGamepads(),a=0;a<d.length;a++){var b=d[a];this.validate(b)&&c(b)}};f.prototype.emitGamepadEvent=function(c,d,a){var b=this.latestUpdate[c.index];if((b=b&&b.active)||a)this.latestUpdate[c.index]={timestamp:c.timestamp,state:d,active:a},this.callback&&this.callback({device:this.inputDevices[c.index],state:d,action:!b&&a?"start":b&&a?"update":"end"})};f.prototype.validate=function(c){if(!c||!c.connected)return!1;
for(var d=0;d<c.axes.length;d++)if(isNaN(c.axes[d]))return!1;return!0};return f}();g.GamepadSource=q})},"esri/views/input/gamepad/GamepadState":function(){define(["require","exports","../../../core/mathUtils"],function(q,g,p){Object.defineProperty(g,"__esModule",{value:!0});g.extractState=function(d){var g=d.native;return{buttons:g.buttons.map(function(c){return c.pressed?c.value?c.value:1:0}),axes:g.axes.map(function(c){var f=d.axisThreshold,g=Math.abs(c);c=g<f?0:p.sign(c)*(g-f)/(1-f);return c})}};
g.stateEqual=function(d,g){if(d.axes.length!==g.axes.length||d.buttons.length!==g.buttons.length)return!1;for(var c=0;c<d.axes.length;c++)if(d.axes[c]!==g.axes[c])return!1;for(c=0;c<d.buttons.length;c++)if(d.buttons[c]!==g.buttons[c])return!1;return!0};g.stateIdle=function(d){for(var g=0;g<d.axes.length;g++)if(0!==d.axes[g])return!1;for(g=0;g<d.buttons.length;g++)if(0!==d.buttons[g])return!1;return!0}})},"esri/views/input/handlers/PreventContextMenu":function(){define(["require","exports","../../../core/tsSupport/extendsHelper",
"../InputHandler"],function(q,g,p,d){Object.defineProperty(g,"__esModule",{value:!0});q=function(d){function c(){var c=d.call(this,!0)||this;c.registerIncoming("context-menu",function(c){c.data.native.preventDefault()});return c}p(c,d);return c}(d.InputHandler);g.PreventContextMenu=q;g.default=q})},"esri/views/input/recognizers/DoubleTapDrag":function(){define("require exports ../../../core/tsSupport/extendsHelper ../../../core/clock ../../../core/iteratorUtils ../../../core/screenUtils ../DragEventSeparator ../InputHandler ./SingleAndDoubleClick ./support".split(" "),
function(q,g,p,d,m,c,f,h,n,a){Object.defineProperty(g,"__esModule",{value:!0});q=function(b){function e(a,e,g,h,m){void 0===a&&(a=n.DefaultParameters.maximumDoubleClickDelay);void 0===e&&(e=n.DefaultParameters.maximumDoubleClickDistance);void 0===g&&(g=n.DefaultParameters.maximumDoubleTouchDelay);void 0===h&&(h=n.DefaultParameters.maximumDoubleTouchDistance);void 0===m&&(m=d.default);var k=b.call(this,!1)||this;k.maximumDoubleClickDelay=a;k.maximumDoubleClickDistance=e;k.maximumDoubleTouchDelay=g;
k.maximumDoubleTouchDistance=h;k._clock=m;k._doubleTapDragReady=!1;k._doubleTapDragActive=!1;k._dragStartCenter=c.createScreenPoint(0,0);k._pointerState=new Map;k._doubleTapDrag=k.registerOutgoing("double-tap-drag");k._dragEventSeparator=new f.DragEventSeparator({start:function(a,b){return k._dragStart(a,b)},update:function(a,b){return k._dragUpdate(b)},end:function(a,b){return k._dragEnd(b)}});k.registerIncoming("drag",function(a){return k._dragEventSeparator.handle(a)});k.registerIncoming("pointer-down",
function(a){return k._handlePointerDown(a)});k.registerIncoming("pointer-up",function(){return k._handlePointerUp()});return k}p(e,b);e.prototype.onUninstall=function(){this._pointerState.forEach(function(a){null!=a.doubleTapTimeout&&(a.doubleTapTimeout.remove(),a.doubleTapTimeout=null)})};Object.defineProperty(e.prototype,"hasPendingInputs",{get:function(){return m.someMap(this._pointerState,function(a){return null!=a.doubleTapTimeout})},enumerable:!0,configurable:!0});e.prototype._clearPointerDown=
function(a){var b=this._pointerState.get(a);b&&(b.doubleTapTimeout.remove(),b.doubleTapTimeout=null,this._pointerState.delete(a),this.refreshHasPendingInputs())};e.prototype._createDoubleTapDragData=function(a,b,c){return{action:a,delta:b,button:c.button,buttons:c.buttons,pointer:c.pointer,pointers:c.pointers,pointerType:c.pointerType,timestamp:c.timestamp}};e.prototype._dragStart=function(a,b){if(this._doubleTapDragReady&&1===a){this._doubleTapDragReady=!1;this._doubleTapDragActive=!0;var e=b.data;
a=b.modifiers;this._dragStartCenter=e.center;e=this._createDoubleTapDragData("begin",c.createScreenPoint(0,0),e);this._doubleTapDrag.emit(e,void 0,a);b.stopPropagation()}};e.prototype._dragUpdate=function(a){if(this._doubleTapDragActive){var b=a.data,e=a.modifiers,d=b.center,d=c.createScreenPoint(d.x-this._dragStartCenter.x,d.y-this._dragStartCenter.y),b=this._createDoubleTapDragData("update",d,b);this._doubleTapDrag.emit(b,void 0,e);a.stopPropagation()}};e.prototype._dragEnd=function(a){if(this._doubleTapDragActive){var b=
a.data,e=a.modifiers,d=b.center,d=c.createScreenPoint(d.x-this._dragStartCenter.x,d.y-this._dragStartCenter.y),b=this._createDoubleTapDragData("end",d,b);this._doubleTapDrag.emit(b,void 0,e);this._doubleTapDragActive=!1;a.stopPropagation()}};e.prototype._handlePointerDown=function(b){var c=b.data,e=this._pointerId(c),d=this._pointerState.get(e),f=c.native.pointerType;d?(f="touch"===f?this.maximumDoubleTouchDistance:this.maximumDoubleClickDistance,this._clearPointerDown(e),a.manhattanDistance(d.event.data,
c)>f?this._storePointerDown(b):this._doubleTapDragReady=!0):this._storePointerDown(b)};e.prototype._handlePointerUp=function(){this._doubleTapDragReady=!1};e.prototype._pointerId=function(a){var b=a.native;a=b.pointerId;var c=b.button,b=b.pointerType;return"mouse"===b?a+":"+c:""+b};e.prototype._storePointerDown=function(a){var b=this,c=a.data,e=c.native.pointerType,d=this._pointerId(c),c=this._clock.setTimeout(function(){return b._clearPointerDown(d)},"touch"===e?this.maximumDoubleTouchDelay:this.maximumDoubleClickDelay);
this._pointerState.set(d,{event:a,doubleTapTimeout:c});this.refreshHasPendingInputs()};return e}(h.InputHandler);g.DoubleTapDrag=q})},"esri/views/input/recognizers/SingleAndDoubleClick":function(){define("require exports ../../../core/tsSupport/extendsHelper ../../../core/clock ../../../core/iteratorUtils ../InputHandler ./support".split(" "),function(q,g,p,d,m,c,f){Object.defineProperty(g,"__esModule",{value:!0});g.DefaultParameters={maximumDoubleClickDelay:250,maximumDoubleClickDistance:10,maximumDoubleTouchDelay:350,
maximumDoubleTouchDistance:35};q=function(c){function h(a,b,e,f,k){void 0===a&&(a=g.DefaultParameters.maximumDoubleClickDelay);void 0===b&&(b=g.DefaultParameters.maximumDoubleClickDistance);void 0===e&&(e=g.DefaultParameters.maximumDoubleTouchDelay);void 0===f&&(f=g.DefaultParameters.maximumDoubleTouchDistance);void 0===k&&(k=d.default);var l=c.call(this,!1)||this;l.maximumDoubleClickDelay=a;l.maximumDoubleClickDistance=b;l.maximumDoubleTouchDelay=e;l.maximumDoubleTouchDistance=f;l._clock=k;l._pointerState=
new Map;l._click=l.registerOutgoing("click");l._doubleClick=l.registerOutgoing("double-click");l.registerIncoming("immediate-click",l._handleImmediateClick.bind(l));l.registerIncoming("pointer-drag",l._handlePointerDrag.bind(l));l.registerIncoming("drag",l._handleDrag.bind(l));return l}p(h,c);h.prototype.onUninstall=function(){this._pointerState.forEach(function(a){null!=a.doubleClickTimeout&&(a.doubleClickTimeout.remove(),a.doubleClickTimeout=null)})};Object.defineProperty(h.prototype,"hasPendingInputs",
{get:function(){return m.someMap(this._pointerState,function(a){return null!=a.doubleClickTimeout})},enumerable:!0,configurable:!0});h.prototype._pointerId=function(a){a=a.native;return"mouse"===a.pointerType?a.pointerId+":"+a.button:""+a.pointerType};h.prototype._handleImmediateClick=function(a){var b=a.data,c=this._pointerId(b),d=this._pointerState.get(c);if(d){var k="touch"===b.native.pointerType?this.maximumDoubleTouchDistance:this.maximumDoubleClickDistance;f.manhattanDistance(d.event.data,b)>
k?(this._clearDoubleClickTimeout(c,!0),this._startClick(a)):(this._clearDoubleClickTimeout(c,!1),this._doubleClick.emit(d.event.data,void 0,d.event.modifiers))}else this._startClick(a)};h.prototype._startClick=function(a){var b=this,c=this._pointerId(a.data);this._pointerState.set(c,{event:a,doubleClickTimeout:this._clock.setTimeout(function(){return b._doubleClickTimeoutExceeded(c)},"touch"===a.data.native.pointerType?this.maximumDoubleTouchDelay:this.maximumDoubleClickDelay)});this.refreshHasPendingInputs()};
h.prototype._handlePointerDrag=function(a){a=this._pointerId(a.data.currentEvent);this._clearDoubleClickTimeout(a,!0)};h.prototype._handleDrag=function(a){a=this._pointerId(a.data.pointer);this._clearDoubleClickTimeout(a,!0)};h.prototype._clearDoubleClickTimeout=function(a,b){var c=this._pointerState.get(a);c&&(c.doubleClickTimeout.remove(),c.doubleClickTimeout=null,b&&this._doubleClickTimeoutExceeded(a),this._pointerState.delete(a),this.refreshHasPendingInputs())};h.prototype._doubleClickTimeoutExceeded=
function(a){var b=this._pointerState.get(a);this._click.emit(b.event.data,void 0,b.event.modifiers);b.doubleClickTimeout=null;this._pointerState.delete(a);this.refreshHasPendingInputs()};return h}(c.InputHandler);g.SingleAndDoubleClick=q})},"esri/views/input/recognizers/support":function(){define(["require","exports","../../../core/screenUtils"],function(q,g,p){Object.defineProperty(g,"__esModule",{value:!0});g.manhattanDistance=function(d,g){return Math.abs(g.x-d.x)+Math.abs(g.y-d.y)};g.euclideanDistance=
function(d,g){var c=g.x-d.x;d=g.y-d.y;return Math.sqrt(c*c+d*d)};g.fitCircleLSQ=function(d,g){g?(g.radius=0,g.center.x=0,g.center.y=0):g={radius:0,center:p.createScreenPoint()};if(0===d.length)return g;if(1===d.length)return g.center.x=d[0].x,g.center.y=d[0].y,g;if(2===d.length){var c=d[0];d=d[1];var f=[d.x-c.x,d.y-c.y],h=f[0],f=f[1];g.radius=Math.sqrt(h*h+f*f)/2;g.center.x=(c.x+d.x)/2;g.center.y=(c.y+d.y)/2;return g}for(var m=0,a=0,b=0;b<d.length;b++)m+=d[b].x,a+=d[b].y;for(var m=m/d.length,a=a/
d.length,e=d.map(function(a){return a.x-m}),l=d.map(function(b){return b.y-a}),k=c=g=0,r=0,C=h=0,b=f=0;b<e.length;b++){var y=e[b],t=l[b],x=y*y,z=t*t;g+=x;c+=z;k+=y*t;r+=x*y;h+=z*t;C+=y*z;f+=t*x}b=g;e=k;l=c;r=.5*(r+C);h=.5*(h+f);f=b*l-k*e;C=(r*l-h*e)/f;h=(b*h-k*r)/f;f=p.createScreenPoint(C+m,h+a);return{radius:Math.sqrt(C*C+h*h+(g+c)/d.length),center:f}}})},"esri/views/input/recognizers/Drag":function(){define("require exports ../../../core/tsSupport/extendsHelper ../../../core/screenUtils ../../../layers/support/timeUtils ../InputHandler ./support".split(" "),
function(q,g,p,d,m,c,f){function h(a){var b=[];a.forEach(function(a){b.push(d.createScreenPoint(a.event.x,a.event.y))});return f.fitCircleLSQ(b)}function n(a){var c=h(a),e=0;a.forEach(function(a){for(var d=b(a,c),d=d-a.lastAngle;d>Math.PI;)d-=2*Math.PI;for(;d<-Math.PI;)d+=2*Math.PI;d=a.lastAngle+d;a.lastAngle=d;e+=d-a.initialAngle});e/=a.size||1;return{angle:e,radius:c.radius,center:c.center}}function a(a){var b=new Map;a.forEach(function(a,c){return b.set(c,a.event)});return b}function b(a,b){a=
a.event;return Math.atan2(a.y-b.center.y,a.x-b.center.x)}Object.defineProperty(g,"__esModule",{value:!0});q=function(c){function e(a){var b=c.call(this,!1)||this;b.navigationTouch=a;b.startStateModifiers=new Set;b.activePointerMap=new Map;b.isDragging=!1;b.isCurrentDragSuppressed=!1;b.drag=b.registerOutgoing("drag");b.registerIncoming("pointer-drag",b.handlePointerDrag.bind(b));b.registerIncoming("pointer-up",b.handlePointerUpAndPointerLost.bind(b));b.registerIncoming("pointer-capture-lost",b.handlePointerUpAndPointerLost.bind(b));
b.registerIncoming("pointer-cancel",b.handlePointerUpAndPointerLost.bind(b));return b}p(e,c);e.prototype.createPayload=function(b,c,e,d){return{action:b,pointerType:this.pointerType,button:this.mouseButton,buttons:c.buttons,timestamp:d,pointers:a(this.activePointerMap),pointer:c,angle:e.angle,radius:e.radius,center:e.center}};e.prototype.addPointer=function(a){var c=a.native.pointerId,e=n(this.activePointerMap).angle;a={event:a,initialAngle:0,lastAngle:0};this.activePointerMap.set(c,a);c=b(a,h(this.activePointerMap));
a.initialAngle=c;a.lastAngle=c;this.updatePointerAngles(e)};e.prototype.updatePointer=function(a){if(!a||null!=a.x||null!=a.y){var b=this.activePointerMap.get(a.native.pointerId);b?b.event=a:this.addPointer(a)}};e.prototype.removePointer=function(a){var b=n(this.activePointerMap).angle;this.activePointerMap.delete(a);this.updatePointerAngles(b)};e.prototype.updatePointerAngles=function(a){var c=n(this.activePointerMap);this.activePointerMap.forEach(function(e){e.initialAngle=b(e,c)-a;e.lastAngle=
b(e,c)-a})};e.prototype.emitEvent=function(a,b,c){var e=n(this.activePointerMap);this.drag.emit(this.createPayload(a,b,e,c),void 0,this.startStateModifiers)};e.prototype.handlePointerUpAndPointerLost=function(a){var b=a.data.native.pointerId,c=m.Milliseconds(a.timestamp);this.activePointerMap.get(b)&&(1===this.activePointerMap.size?(this.updatePointer(a.data),!this.isCurrentDragSuppressed&&this.emitEvent("end",a.data,c),this.isCurrentDragSuppressed=this.isDragging=!1,this.removePointer(b)):(this.removePointer(b),
this.emitEvent("removed",a.data,m.Milliseconds(a.timestamp))))};e.prototype.handlePointerDrag=function(a){var b=a.data,c=b.currentEvent,e=m.Milliseconds(a.timestamp);switch(b.action){case "start":case "update":this.isDragging?this.activePointerMap.has(c.native.pointerId)?(this.updatePointer(c),!this.isCurrentDragSuppressed&&this.emitEvent("update",c,e)):(this.addPointer(c),this.emitEvent("added",c,e),this.isCurrentDragSuppressed=this.isSuppressed):(this.updatePointer(c),this.pointerType=a.data.startEvent.pointerType,
this.mouseButton=a.data.startEvent.button,this.startStateModifiers=a.modifiers,this.isDragging=!0,this.isCurrentDragSuppressed=this.isSuppressed,!this.isCurrentDragSuppressed&&this.emitEvent("start",c,e))}};Object.defineProperty(e.prototype,"isSuppressed",{get:function(){return this.navigationTouch&&!this.navigationTouch.browserTouchPanEnabled&&"touch"===this.pointerType&&1===this.activePointerMap.size},enumerable:!0,configurable:!0});return e}(c.InputHandler);g.Drag=q;(function(a){a[a.Left=0]="Left";
a[a.Middle=1]="Middle";a[a.Right=2]="Right";a[a.Back=3]="Back";a[a.Forward=4]="Forward";a[a.Undefined=-1]="Undefined"})(g.Button||(g.Button={}))})},"esri/views/input/recognizers/PointerClickHoldAndDrag":function(){define("require exports ../../../core/tsSupport/extendsHelper ../../../core/clock ../InputHandler ./support".split(" "),function(q,g,p,d,m,c){Object.defineProperty(g,"__esModule",{value:!0});g.DefaultParameters={maximumClickDelay:300,movementUntilMouseDrag:1.5,movementUntilTouchDrag:6,holdDelay:500};
q=function(f){function h(c,a,b,e,l){void 0===c&&(c=g.DefaultParameters.maximumClickDelay);void 0===a&&(a=g.DefaultParameters.movementUntilMouseDrag);void 0===b&&(b=g.DefaultParameters.movementUntilTouchDrag);void 0===e&&(e=g.DefaultParameters.holdDelay);void 0===l&&(l=d.default);var k=f.call(this,!1)||this;k.maximumClickDelay=c;k.movementUntilMouseDrag=a;k.movementUntilTouchDrag=b;k.holdDelay=e;k._clock=l;k._pointerState=new Map;k._pointerDrag=k.registerOutgoing("pointer-drag");k._immediateClick=
k.registerOutgoing("immediate-click");k._pointerHold=k.registerOutgoing("hold");k.registerIncoming("pointer-down",k._handlePointerDown.bind(k));k.registerIncoming("pointer-up",function(a){k._handlePointerLoss(a,"pointer-up")});k.registerIncoming("pointer-capture-lost",function(a){k._handlePointerLoss(a,"pointer-capture-lost")});k.registerIncoming("pointer-cancel",function(a){k._handlePointerLoss(a,"pointer-cancel")});k._moveHandle=k.registerIncoming("pointer-move",k._handlePointerMove.bind(k));k._moveHandle.pause();
return k}p(h,f);h.prototype.onUninstall=function(){this._pointerState.forEach(function(c){null!=c.holdTimeout&&(c.holdTimeout.remove(),c.holdTimeout=null)});f.prototype.onUninstall.call(this)};h.prototype._handlePointerDown=function(c){var a=this,b=c.data,e=b.native.pointerId,d=null;0===this._pointerState.size&&(d=this._clock.setTimeout(function(){var b=a._pointerState.get(e);b&&(b.isDragging||(a._pointerHold.emit(b.previousEvent,void 0,c.modifiers),b.holdEmitted=!0),b.holdTimeout=null)},this.holdDelay));
d={startEvent:b,previousEvent:b,startTimestamp:c.timestamp,isDragging:!1,downButton:b.native.button,holdTimeout:d,modifiers:new Set};this._pointerState.set(e,d);this.startCapturingPointer(b.native);this._moveHandle.resume();1<this._pointerState.size&&this.startDragging(c)};h.prototype._createPointerDragData=function(c,a,b){return{action:c,startEvent:a.startEvent,previousEvent:a.previousEvent,currentEvent:b}};h.prototype._handlePointerMove=function(d){var a=d.data,b=this._pointerState.get(a.native.pointerId);
b&&(b.isDragging?this._pointerDrag.emit(this._createPointerDragData("update",b,a),void 0,b.modifiers):c.euclideanDistance(a,b.startEvent)>("touch"===a.native.pointerType?this.movementUntilTouchDrag:this.movementUntilMouseDrag)&&this.startDragging(d),b.previousEvent=a)};h.prototype.startDragging=function(c){var a=this,b=c.data,e=b.native.pointerId;this._pointerState.forEach(function(d){null!=d.holdTimeout&&(d.holdTimeout.remove(),d.holdTimeout=null);d.isDragging||(d.modifiers=c.modifiers,d.isDragging=
!0,e===d.startEvent.native.pointerId?a._pointerDrag.emit(a._createPointerDragData("start",d,b)):a._pointerDrag.emit(a._createPointerDragData("start",d,d.previousEvent),c.timestamp))})};h.prototype._handlePointerLoss=function(c,a){var b=c.data,e=b.native.pointerId,d=this._pointerState.get(e);d&&(null!=d.holdTimeout&&(d.holdTimeout.remove(),d.holdTimeout=null),d.isDragging?this._pointerDrag.emit(this._createPointerDragData("end",d,"pointer-up"===a?b:d.previousEvent),void 0,d.modifiers):"pointer-up"===
a&&d.downButton===b.native.button&&c.timestamp-d.startTimestamp<=this.maximumClickDelay&&!d.holdEmitted&&this._immediateClick.emit(b),this._pointerState.delete(e),this.stopCapturingPointer(b.native),0===this._pointerState.size&&this._moveHandle.pause())};return h}(m.InputHandler);g.PointerClickHoldAndDrag=q})},"esri/views/2d/support/HighlightOptions":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../Color ../../../core/Accessor ../../../core/accessorSupport/decorators".split(" "),
function(q,g,p,d,m,c,f){var h=0;return function(c){function a(){var a=null!==c&&c.apply(this,arguments)||this;a.color=new m([0,255,255]);a.haloOpacity=1;a.fillOpacity=.25;return a}p(a,c);Object.defineProperty(a.prototype,"version",{get:function(){return h++},enumerable:!0,configurable:!0});d([f.property({readOnly:!0,dependsOn:["color","haloColor","haloOpacity","fillOpacity"]})],a.prototype,"version",null);d([f.property({type:m})],a.prototype,"color",void 0);d([f.property({type:m})],a.prototype,"haloColor",
void 0);d([f.property()],a.prototype,"haloOpacity",void 0);d([f.property()],a.prototype,"fillOpacity",void 0);return a=d([f.subclass("esri.views.2d.support.HighlightOptions")],a)}(f.declared(c))})},"esri/views/support/screenshotUtils":function(){define(["require","exports","../../core/tsSupport/assignHelper","../../core/compilerUtils","../../core/mathUtils"],function(q,g,p,d,m){function c(c,e){var f=c||{},k=f.format,l=f.quality,g=f.rotation,f=f.disableSlice,h=b(c,e.padding),t;t=e.width-h.left-h.right;
e=e.height-h.top-h.bottom;h={x:0,y:0,width:t,height:e};if(c&&c.area){null!=c.area.x&&(h.x=Math.floor(c.area.x));null!=c.area.y&&(h.y=Math.floor(c.area.y));var x=null!=c.area.width?Math.floor(c.area.width):null,y=null!=c.area.height?Math.floor(c.area.height):null;h.width=t-h.x;h.height=e-h.y;null!=x&&null!=y?(h.width=Math.min(h.width,x),h.height=Math.min(h.height,y)):null==x&&null!=y?(x=Math.min(h.width,x),h.height*=x/h.width,h.width=x):null!=x&&null==y&&(x=Math.min(h.height,y),h.width*=x/h.height,
h.height=x)}h=a(h,c);x=Math.floor(Math.max(h.x,0));y=Math.floor(Math.max(h.y,0));t={x:x,y:y,width:Math.floor(Math.min(h.width,t-x)),height:Math.floor(Math.min(h.height,e-y))};e=t.width/t.height;h=h.width/h.height;h!==e&&(h>e?(e=Math.floor(t.width/h),t={x:t.x,y:Math.floor(t.y+(t.height-e)/2),width:t.width,height:e}):(e=Math.floor(t.height*h),t={x:Math.floor(t.x+(t.width-e)/2),y:t.y,width:e,height:t.height}));h=n(c,t);e=h.width;h=h.height;a:switch(k){case "png":case "jpg":case "jpeg":break a;case null:case void 0:k=
r;break a;default:d.neverReached(k),k=r}x=C[k];l=m.clamp(null!=l?l:x,0,100);return{format:k,quality:l,area:t,width:e,height:h,rotation:g,disableSlice:!!f,ignoreBackground:!(!c||!c.ignoreBackground),ignorePadding:!(!c||!c.ignorePadding)}}function f(a,b){return a.toDataURL(k[b.format],b.quality/100)}function h(a,b,c){c||(e||(e=document.createElement("canvas"),e.width=1,e.height=1),c=e);return c.getContext("2d").createImageData(a,b)}function n(a,b){if(!a)return b;var c=a.width;a=a.height;if(null!=c&&
null!=a)return{width:Math.floor(c),height:Math.floor(a)};if(null==c&&null==a)return b;b=b.width/b.height;return null==a?{width:Math.floor(c),height:Math.floor(c/b)}:{width:Math.floor(a*b),height:Math.floor(a)}}function a(a,b){if(!b||null==b.width||null==b.height)return a;b=b.width/b.height;var c=a.width/a.height;if(c===b)return a;if(c<b)return b=Math.floor(a.height*b),a.x-=(b-a.width)/2,a.width=b,a;b=Math.floor(a.width/b);a.y-=(b-a.height)/2;a.height=b;return a}function b(a,b){return!b||a&&a.ignorePadding?
y:b}Object.defineProperty(g,"__esModule",{value:!0});g.completeUserSettings=c;g.toRenderSettings=function(a,e){var d=c(a,e),f=d.area,k=d.width/f.width,l=b(d,e.padding),g=l.left+l.right,h=l.top+l.bottom;return{framebufferWidth:Math.floor((e.width-g)*k+g),framebufferHeight:Math.floor((e.height-h)*k+h),region:{x:Math.floor(f.x*k)+l.left,y:Math.floor(f.y*k)+l.top,width:d.width,height:d.height},format:d.format,quality:d.quality,rotation:d.rotation,pixelRatio:k,layers:a&&a.layers?a.layers:[],disableSlice:d.disableSlice,
ignoreBackground:d.ignoreBackground,ignorePadding:d.ignorePadding}};g.encodeResult=function(a,b,c,e){if(e.premultipliedAlpha)for(var d=a.data,k=d.length,l=0;l<k;l+=4){var g=d[l+3];0<g&&(g/=255,d[l+0]/=g,d[l+1]/=g,d[l+2]/=g)}c.width=a.width;c.height=a.height;d=c.getContext("2d");d.putImageData(a,0,0);e.flipY&&(d.save(),d.globalCompositeOperation="copy",d.scale(1,-1),d.translate(0,-d.canvas.height),d.drawImage(d.canvas,0,0),d.restore());a=d.getImageData(0,0,a.width,a.height);b=f(c,b);c.width=0;c.height=
0;return{dataUrl:b,data:a}};g.toDataUrl=f;g.createEmptyImageData=function(a,b,c){if(!a||!b)throw Error("Cannot construct image data without dimensions");if(l)try{return new ImageData(a,b)}catch(u){l=!1}return h(a,b,c)};g.wrapImageData=function(a,b,c,e){if(!b||!c)throw Error("Cannot construct image data without dimensions");if(l)try{return new ImageData(a,b,c)}catch(v){l=!1}b=h(b,c,e);b.data.set(a,0);return b};g.resampleHermite=function(a,b,c,e,d,f,k,l){void 0===e&&(e=0);void 0===d&&(d=0);void 0===
f&&(f=a.width-e);void 0===k&&(k=a.height-d);void 0===l&&(l=!1);var g=a.data,h=b.width,m=b.height,r=b.data;f/=h;k/=m;var t=Math.ceil(f/2),n=Math.ceil(k/2);a=a.width;for(var x=0;x<m;x++)for(var y=0;y<h;y++){for(var u=4*(y+(l?m-x-1:x)*h),v=0,w=0,p=0,z=0,C=0,q=0,D=(x+.5)*k,B=Math.floor(x*k);B<(x+1)*k;B++)for(var U=Math.abs(D-(B+.5))/n,W=(y+.5)*f,U=U*U,X=Math.floor(y*f);X<(y+1)*f;X++){var M=Math.abs(W-(X+.5))/t,M=Math.sqrt(U+M*M);if(!(1<=M)){var M=2*M*M*M-3*M*M+1,Y=4*(e+X+(d+B)*a),q=q+M*g[Y+3],w=w+M;!c&&
255>g[Y+3]&&(M=M*g[Y+3]/255);p+=M*g[Y];z+=M*g[Y+1];C+=M*g[Y+2];v+=M}}r[u]=p/v;r[u+1]=z/v;r[u+2]=C/v;r[u+3]=q/w}return b};g.screenshotSuperSampleSettings=function(a,c,e){if(!c)return a;c=a.framebufferWidth;var d=a.framebufferHeight,f=a.pixelRatio,k=a.region;e=b(a,e);var l=e.left+e.right,g=e.top+e.bottom,h=c-l,m=d-g,r=Math.min(8,Math.min((2048-l)/h,(2048-g)/m));return 1.5>r?a:p({},a,{framebufferWidth:Math.round(h*r)+l,framebufferHeight:Math.round(m*r)+g,pixelRatio:f*r,resample:{region:{x:Math.round((k.x-
e.left)*r)+e.left,y:Math.round((k.y-e.top)*r)+e.top,width:Math.round(k.width*r),height:Math.round(k.height*r)},width:c,height:d}})};var e=null,l=!0,k={png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg"},r="jpg",C={png:100,jpg:98,jpeg:98},y={top:0,right:0,bottom:0,left:0}})},"esri/views/support/WebGLRequirements":function(){define(["require","exports","../../core/tsSupport/assignHelper","../../core/Error","../../core/has"],function(q,g,p,d,m){Object.defineProperty(g,"__esModule",{value:!0});var c=
{supportsMajorWebPerformanceCaveat:!1};g.check=function(f){f=p({},c,f);return m("esri-webgl")?!f.supportsMajorWebPerformanceCaveat&&m("esri-webgl-major-performance-caveat")?new d("webgl:major-performance-caveat-detected","Your WebGL implementation doesn't seem to support hardware accelerated rendering. Check your browser settings or if your GPU is blacklisted."):m("esri-webgl-high-precision-fragment")?m("esri-webgl-vertex-shader-samplers")?m("esri-webgl-element-index-uint")?m("esri-webgl-standard-derivatives")?
m("esri-webgl-instanced-arrays")?null:new d("webgl:instanced-arrays-required","WebGL support for instanced rendering is required but not supported."):new d("webgl:standard-derivatives-required","WebGL support for standard derivatives is required but not supported."):new d("webgl:element-index-uint-required","WebGL support for uint vertex indices is required but not supported."):new d("webgl:vertex-shader-samplers-required","WebGL support for vertex shader samplers is required but not supported."):
new d("webgl:high-precision-fragment-required","WebGL support for high precision fragment shaders is required but not supported."):new d("webgl:required","WebGL is required but not supported.")}})},"esri/views/ui/2d/DefaultUI2D":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/accessorSupport/decorators ../DefaultUI".split(" "),function(q,g,p,d,m,c){return function(c){function f(d){d=c.call(this,d)||this;d.components=
["attribution","zoom"];return d}p(f,c);d([m.property()],f.prototype,"components",void 0);return f=d([m.subclass("esri.views.ui.2d.DefaultUI2D")],f)}(m.declared(c))})},"esri/views/ui/DefaultUI":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/watchUtils ../../core/accessorSupport/decorators ./Component ./UI ../../widgets/Attribution ../../widgets/Compass ../../widgets/NavigationToggle ../../widgets/Zoom".split(" "),function(q,
g,p,d,m,c,f,h,n,a,b,e){return function(l){function k(a){a=l.call(this,a)||this;a._defaultPositionLookup={attribution:"manual",compass:"top-leading","navigation-toggle":"top-leading",zoom:"top-leading"};a.components=[];return a}p(k,l);k.prototype.initialize=function(){this._handles.add([m.init(this,"components",this._componentsWatcher.bind(this)),m.init(this,"view",this._updateViewAwareWidgets.bind(this))])};k.prototype._removeComponents=function(a){var b=this;a.forEach(function(a){if(a=b._find(a))b.remove(a),
a.destroy()})};k.prototype._updateViewAwareWidgets=function(a){var b=this;this.components.forEach(function(c){(c=(c=b._find(c))&&c.widget)&&void 0!==c.view&&(c.view=a)})};k.prototype._componentsWatcher=function(a,b){this._removeComponents(b);this._addComponents(a);this._adjustPadding(a)};k.prototype._adjustPadding=function(a){-1!==a.indexOf("attribution")||this._isOverridden("padding")||(this.padding=this.padding.top)};k.prototype._addComponents=function(a){var b=this;this.initialized&&a.forEach(function(a){return b.add(b._createComponent(a),
b._defaultPositionLookup[a])})};k.prototype._createComponent=function(a){var b=this._createWidget(a);if(b)return new f({id:a,node:b})};k.prototype._createWidget=function(a){if("attribution"===a)return this._createAttribution();if("compass"===a)return this._createCompass();if("navigation-toggle"===a)return this._createNavigationToggle();if("zoom"===a)return this._createZoom()};k.prototype._createAttribution=function(){return new n({view:this.view})};k.prototype._createCompass=function(){return new a({view:this.view})};
k.prototype._createNavigationToggle=function(){return new b({view:this.view})};k.prototype._createZoom=function(){return new e({view:this.view})};d([c.property()],k.prototype,"components",void 0);return k=d([c.subclass("esri.views.ui.DefaultUI")],k)}(c.declared(h))})},"esri/views/ui/Component":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/domUtils ../../core/accessorSupport/decorators".split(" "),function(q,
g,p,d,m,c,f){return function(g){function h(){var a=null!==g&&g.apply(this,arguments)||this;a.widget=null;return a}p(h,g);h.prototype.destroy=function(){this.widget&&this.widget.destroy();this.node=null};Object.defineProperty(h.prototype,"id",{get:function(){return this.get("widget.id")||this.get("node.id")},enumerable:!0,configurable:!0});Object.defineProperty(h.prototype,"node",{set:function(a){var b=this._get("node");a!==b&&(a&&a.classList.add("esri-component"),b&&b.classList.remove("esri-component"),
this._set("node",a))},enumerable:!0,configurable:!0});h.prototype.castNode=function(a){if(!a)return this._set("widget",null),null;if("string"===typeof a||a&&"nodeType"in a)return this._set("widget",null),c.byId(a);a&&"function"===typeof a.render&&!a.domNode&&(a.domNode=document.createElement("div"));this._set("widget",a);return a.domNode};d([f.property()],h.prototype,"id",null);d([f.property()],h.prototype,"node",null);d([f.cast("node")],h.prototype,"castNode",null);d([f.property({readOnly:!0})],
h.prototype,"widget",void 0);return h=d([f.subclass("esri.views.ui.Component")],h)}(f.declared(m))})},"esri/views/ui/UI":function(){define("require exports ../../core/tsSupport/assignHelper ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/domUtils ../../core/Evented ../../core/Handles ../../core/watchUtils ../../core/accessorSupport/decorators ./Component ../../widgets/support/widgetUtils".split(" "),function(q,g,p,d,m,c,f,h,n,a,b,e){function l(a){return"object"!==
typeof a||a instanceof b||"declaredClass"in a||!("component"in a||"index"in a||"position"in a)?null:a}function k(a,b){var c=b.bottom,e=b.left,d=b.right;a.style.top=b.top;a.style.bottom=c;a.style.left=e;a.style.right=d}var r={left:0,top:0,bottom:0,right:0},C={bottom:30,top:15,right:15,left:15};return function(f){function g(a){a=f.call(this,a)||this;a._cornerNameToContainerLookup={};a._positionNameToContainerLookup={};a._components=[];a._componentToKey=new Map;a._handles=new h;a.view=null;a._initContainers();
return a}d(g,f);g.prototype.initialize=function(){this._handles.add([n.init(this,"view.padding, container",this._applyViewPadding.bind(this)),n.init(this,"padding",this._applyUIPadding.bind(this))])};g.prototype.destroy=function(){this.container=null;for(var a=0,b=this._components;a<b.length;a++)b[a].destroy();this._components.length=0;this._handles.destroy();this._componentToKey.clear()};Object.defineProperty(g.prototype,"container",{set:function(a){var b=this._get("container");a!==b&&(a&&(a.classList.add("esri-ui"),
this._attachContainers(a)),b&&(b.classList.remove("esri-ui"),k(b,{top:"",bottom:"",left:"",right:""}),c.empty(b)),this._set("container",a))},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"height",{get:function(){var a=this.get("view.height")||0;if(0===a)return a;var b=this._getViewPadding();return Math.max(a-(b.top+b.bottom),0)},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"padding",{get:function(){return this._get("padding")},set:function(a){a?this._override("padding",
a):this._clearOverride("padding")},enumerable:!0,configurable:!0});g.prototype.castPadding=function(a){return"number"===typeof a?{bottom:a,top:a,right:a,left:a}:p({},C,a)};Object.defineProperty(g.prototype,"width",{get:function(){var a=this.get("view.width")||0;if(0===a)return a;var b=this._getViewPadding();return Math.max(a-(b.left+b.right),0)},enumerable:!0,configurable:!0});g.prototype.add=function(a,c){var e=this,d,f;if(Array.isArray(a))a.forEach(function(a){return e.add(a,c)});else{var k=l(a);
k&&(d=k.index,c=k.position,a=k.component,f=k.key);c&&"object"===typeof c&&(d=c.index,f=c.key,c=c.position);!a||c&&!this._isValidPosition(c)||(a instanceof b||(a=new b({node:a})),this._place({component:a,position:c,index:d}),this._components.push(a),f&&this._componentToKey.set(a,f))}};g.prototype.remove=function(a,b){var c=this;if(a){if(Array.isArray(a))return a.map(function(a){return c.remove(a,b)});var e=this._find(a);if(e){var d=this._componentToKey;if(!d.has(a)||d.get(a)===b)return d=this._components.indexOf(e),
e.node.parentNode&&e.node.parentNode.removeChild(e.node),this._componentToKey.delete(a),this._components.splice(d,1)[0]}}};g.prototype.empty=function(a){var b=this;if(Array.isArray(a))return a.map(function(a){return b.empty(a)}).reduce(function(a,b){return a.concat(b)});a=a||"manual";return"manual"===a?Array.prototype.slice.call(this._manualContainer.children).filter(function(a){return!a.classList.contains("esri-ui-corner")}).map(function(a){return b.remove(a)}):this._isValidPosition(a)?Array.prototype.slice.call(this._cornerNameToContainerLookup[a].children).map(this.remove,
this):null};g.prototype.move=function(a,b){var c=this;Array.isArray(a)&&a.forEach(function(a){return c.move(a,b)});if(a){var e,d=l(a)||l(b);d&&(e=d.index,b=d.position,a=d.component||a);(!b||this._isValidPosition(b))&&(a=this.remove(a))&&this.add(a,{position:b,index:e})}};g.prototype.find=function(a){return a?(a=this._findById(a))&&(a.widget||a.node):null};g.prototype._find=function(a){return a?a instanceof b?this._findByComponent(a):"string"===typeof a?this._findById(a):this._findByNode(a.domNode||
a):null};g.prototype._getViewPadding=function(){return this.get("view.padding")||r};g.prototype._attachContainers=function(a){a.appendChild(this._innerContainer);a.appendChild(this._manualContainer)};g.prototype._initContainers=function(){var a=document.createElement("div");a.classList.add("esri-ui-inner-container");a.classList.add("esri-ui-corner-container");var b=document.createElement("div");b.classList.add("esri-ui-inner-container");b.classList.add("esri-ui-manual-container");var c=document.createElement("div");
c.classList.add("esri-ui-top-left");c.classList.add("esri-ui-corner");a.appendChild(c);var d=document.createElement("div");d.classList.add("esri-ui-top-right");d.classList.add("esri-ui-corner");a.appendChild(d);var f=document.createElement("div");f.classList.add("esri-ui-bottom-left");f.classList.add("esri-ui-corner");a.appendChild(f);var k=document.createElement("div");k.classList.add("esri-ui-bottom-right");k.classList.add("esri-ui-corner");a.appendChild(k);this._innerContainer=a;this._manualContainer=
b;a=e.isRTL();this._cornerNameToContainerLookup={"top-left":c,"top-right":d,"bottom-left":f,"bottom-right":k,"top-leading":a?d:c,"top-trailing":a?c:d,"bottom-leading":a?k:f,"bottom-trailing":a?f:k};this._positionNameToContainerLookup=p({manual:b},this._cornerNameToContainerLookup)};g.prototype._isValidPosition=function(a){return!!this._positionNameToContainerLookup[a]};g.prototype._place=function(a){var b=a.component,e=a.index;a=this._positionNameToContainerLookup[a.position||"manual"];var d=-1<e,
f=b.widget;f&&!f._started&&"function"===typeof f.postMixInProperties&&"function"===typeof f.buildRendering&&"function"===typeof f.postCreate&&"function"===typeof f.startup&&b.widget.startup();d?(d=Array.prototype.slice.call(a.children),0===e?a.firstChild?c.insertBefore(b.node,a.firstChild):a.appendChild(b.node):e>=d.length?a.appendChild(b.node):c.insertBefore(b.node,d[e])):a.appendChild(b.node)};g.prototype._applyViewPadding=function(){var a=this.container;a&&k(a,this._toPxPosition(this._getViewPadding()))};
g.prototype._applyUIPadding=function(){var a=this._innerContainer;a&&k(a,this._toPxPosition(this.padding))};g.prototype._toPxPosition=function(a){return{top:this._toPxUnit(a.top),left:this._toPxUnit(a.left),right:this._toPxUnit(a.right),bottom:this._toPxUnit(a.bottom)}};g.prototype._toPxUnit=function(a){return 0===a?"0":a+"px"};g.prototype._findByComponent=function(a){var b=null,c;this._components.some(function(e){(c=e===a)&&(b=e);return c});return b};g.prototype._findById=function(a){var b=null,
c;this._components.some(function(e){(c=e.id===a)&&(b=e);return c});return b};g.prototype._findByNode=function(a){var b=null,c;this._components.some(function(e){(c=e.node===a)&&(b=e);return c});return b};m([a.property()],g.prototype,"container",null);m([a.property({dependsOn:["view.height"]})],g.prototype,"height",null);m([a.property({value:C})],g.prototype,"padding",null);m([a.cast("padding")],g.prototype,"castPadding",null);m([a.property()],g.prototype,"view",void 0);m([a.property({dependsOn:["view.width"]})],
g.prototype,"width",null);return g=m([a.subclass("esri.views.ui.UI")],g)}(a.declared(f.EventedAccessor))})},"esri/widgets/Attribution":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper dojo/i18n!./Attribution/nls/Attribution ../core/watchUtils ../core/accessorSupport/decorators ./Widget ./Attribution/AttributionViewModel ./support/widget".split(" "),function(q,g,p,d,m,c,f,h,n,a){return function(b){function e(a){a=b.call(this,a)||this;a._isOpen=
!1;a._attributionTextOverflowed=!1;a._prevSourceNodeHeight=0;a.iconClass="esri-icon-description";a.itemDelimiter=" | ";a.label=m.widgetLabel;a.view=null;a.viewModel=new n;return a}p(e,b);e.prototype.postInitialize=function(){var a=this;this.own(c.on(this,"viewModel.items","change",function(){return a.scheduleRender()}))};Object.defineProperty(e.prototype,"attributionText",{get:function(){return this.viewModel.items.reduce(function(a,b){-1===a.indexOf(b.text)&&a.push(b.text);return a},[]).join(this.itemDelimiter)},
enumerable:!0,configurable:!0});e.prototype.render=function(){var b,c=(b={},b["esri-attribution--open"]=this._isOpen,b);return a.tsx("div",{bind:this,class:this.classes("esri-attribution esri-widget",c),onclick:this._toggleState,onkeydown:this._toggleState},this._renderSourcesNode(),a.tsx("div",{class:"esri-attribution__powered-by"},"Powered by"," ",a.tsx("a",{class:this.classes("esri-attribution__link","esri-widget__anchor"),href:"http://www.esri.com/",target:"_blank",rel:"noreferrer"},"Esri")))};
e.prototype._renderSourcesNode=function(){var b,c=this._isOpen,e=this._isInteractive(),d=e?0:-1,f=this.attributionText,g=e?"button":void 0,c=(b={},b["esri-attribution__sources--open"]=c,b["esri-interactive"]=e,b);return a.tsx("div",{afterCreate:this._afterSourcesNodeCreate,afterUpdate:this._afterSourcesNodeUpdate,bind:this,class:this.classes("esri-attribution__sources",c),innerHTML:f,role:g,tabIndex:d})};e.prototype._afterSourcesNodeCreate=function(a){this._prevSourceNodeHeight=a.clientWidth};e.prototype._afterSourcesNodeUpdate=
function(a){var b=!1,c=a.clientHeight;a=a.scrollWidth>=a.clientWidth;var e=this._attributionTextOverflowed!==a;this._attributionTextOverflowed=a;e&&(b=!0);this._isOpen&&(a=c<this._prevSourceNodeHeight,this._prevSourceNodeHeight=c,a&&(this._isOpen=!1,b=!0));b&&this.scheduleRender()};e.prototype._toggleState=function(){this._isInteractive()&&(this._isOpen=!this._isOpen)};e.prototype._isInteractive=function(){return this._isOpen||this._attributionTextOverflowed};d([f.property({dependsOn:["viewModel.items.length",
"itemDelimiter"],readOnly:!0}),a.renderable()],e.prototype,"attributionText",null);d([f.property()],e.prototype,"iconClass",void 0);d([f.property(),a.renderable()],e.prototype,"itemDelimiter",void 0);d([f.property()],e.prototype,"label",void 0);d([f.aliasOf("viewModel.view")],e.prototype,"view",void 0);d([f.property({type:n}),a.renderable(["state","view.size"])],e.prototype,"viewModel",void 0);d([a.accessibleHandler()],e.prototype,"_toggleState",null);return e=d([f.subclass("esri.widgets.Attribution")],
e)}(f.declared(h))})},"esri/widgets/Attribution/AttributionViewModel":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/tsSupport/awaiterHelper ../../core/tsSupport/generatorHelper ../../geometry ../../core/arrayUtils ../../core/asyncUtils ../../core/Collection ../../core/HandleOwner ../../core/watchUtils ../../core/accessorSupport/decorators ../../geometry/support/contains ../../geometry/support/webMercatorUtils".split(" "),
function(q,g,p,d,m,c,f,h,n,a,b,e,l,k,r){function C(a,b){return a.length!==b.length||a.some(function(a,c){return a.text!==b[c].text})}function y(a,b,c){c&&b&&(h.find(a,function(a){return a.layerView===b&&a.text===c})||a.push({text:c,layerView:b}))}var t=[];return function(b){function g(c){var d=b.call(this,c)||this;d.clear=function(){d._fetchedAttributionData.clear();d._pendingAttributions.clear();d.handles.remove("suspension");d.notifyChange("state")};d._pendingAttributions=new Set;d._fetchedAttributionData=
new Map;d.items=new a;d.view=null;d._allLayerViewsChange=function(a){d.handles.remove("suspension");var b=d.get("view.allLayerViews");b&&d.handles.add(b.map(function(a){return a.watch(["suspended","attributionVisible"],d._updateAttributionItems)}),"suspension");a&&a.removed&&a.removed.forEach(function(a){d._pendingAttributions.delete(a);d._fetchedAttributionData.delete(a)});d._updateAttributionItems()};d._updateAttributionItems=function(){var a=d.get("view.allLayerViews");t.length=0;a?(a.forEach(function(a){if(!a.suspended&&
a.get("layer.attributionVisible")){var b=a.layer;if(b&&"function"===typeof b.originOf&&"user"===b.originOf("copyright"))y(t,a,b.copyright);else if(b.hasAttributionData)if(d._fetchedAttributionData.has(a)){var c=d._fetchedAttributionData.get(a);c&&y(t,a,d._getDynamicAttribution(c,d.view,b))}else d._fetchAttributionData(a);else(c=b.get("portalItem.accessInformation"))?y(t,a,c):y(t,a,b.copyright)}}),C(d.items,t)&&(d.items.removeAll(),d.items.addMany(t)),d.notifyChange("state")):d.clear()};d.handles.add([e.on(d,
"view.allLayerViews","change",d._allLayerViewsChange,d._allLayerViewsChange,d.clear),e.whenTrue(d,"view.stationary",function(){return d._updateAttributionItems()})]);return d}p(g,b);g.prototype.destroy=function(){this.view=null;this._fetchedAttributionData.clear();this._pendingAttributions.clear()};Object.defineProperty(g.prototype,"state",{get:function(){return this.get("view.ready")?0<this._pendingAttributions.size?"loading":"ready":"disabled"},enumerable:!0,configurable:!0});g.prototype._fetchAttributionData=
function(a){return m(this,void 0,void 0,function(){var b,e;return c(this,function(c){switch(c.label){case 0:if(this._pendingAttributions.has(a))return[2];this._pendingAttributions.add(a);return[4,n.result(a.layer.fetchAttributionData())];case 1:return b=c.sent(),this._pendingAttributions.has(a)&&(e=b.ok?this._createContributionIndex(b.value,"bing-maps"===a.layer.type):null,this._pendingAttributions.delete(a),this._fetchedAttributionData.set(a,e)),this._updateAttributionItems(),[2]}})})};g.prototype._createContributionIndex=
function(a,b){a=a.contributors;var c={};if(!a)return c;for(var e=0;e<a.length;e++){var d=a[e],k=d.coverageAreas;if(!k)return;for(var g=0;g<k.length;g++)for(var l=k[g],h=l.bbox,m=l.zoomMin-(b&&l.zoomMin?1:0),n=l.zoomMax-(b&&l.zoomMax?1:0),l={extent:r.geographicToWebMercator({xmin:h[1],ymin:h[0],xmax:h[3],ymax:h[2],spatialReference:f.SpatialReference.WGS84}),attribution:d.attribution||"",score:null!=l.score?l.score:100,id:e};m<=n;m++)c[m]=c[m]||[],c[m].push(l)}c.maxKey=Math.max.apply(null,Object.keys(c));
return c};g.prototype._getDynamicAttribution=function(a,b,c){var e=b.extent;c=c.tileInfo.scaleToZoom(b.scale);c=Math.min(a.maxKey,Math.round(c));if(!e||null==c||-1>=c)return"";a=a[c];var d=r.project(e.center.clone().normalize(),b.spatialReference),f={};return a?a.filter(function(a){var b=!f[a.id]&&d&&k.extentContainsPoint(a.extent,d);b&&(f[a.id]=!0);return b}).sort(function(a,b){return b.score-a.score||a.objectId-b.objectId}).map(function(a){return a.attribution}).join(", "):""};d([l.property({readOnly:!0,
type:a})],g.prototype,"items",void 0);d([l.property({dependsOn:["view.ready"],readOnly:!0})],g.prototype,"state",null);d([l.property()],g.prototype,"view",void 0);return g=d([l.subclass("esri.widgets.Attribution.AttributionViewModel")],g)}(l.declared(b.HandleOwner))})},"esri/widgets/Compass":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper dojo/i18n!./Compass/nls/Compass ../core/accessorSupport/decorators ./Widget ./Compass/CompassViewModel ./support/widget".split(" "),
function(q,g,p,d,m,c,f,h,n){return function(a){function b(b){b=a.call(this,b)||this;b.goToOverride=null;b.iconClass="esri-icon-locate-circled";b.label=m.widgetLabel;b.view=null;b.viewModel=new h;return b}p(b,a);b.prototype.reset=function(){};b.prototype.render=function(){var a,b,c=this.viewModel,d=c.orientation,c=c.state,f="disabled"===c,g="compass"===("rotation"===c?"rotation":"compass"),c=f?-1:0,f=(a={},a["esri-disabled"]=f,a["esri-interactive"]=!f,a);a=(b={},b["esri-icon-compass"]=g,b["esri-icon-dial"]=
!g,b);return n.tsx("div",{bind:this,class:this.classes("esri-compass esri-widget--button esri-widget",f),onclick:this._reset,onkeydown:this._reset,role:"button",tabIndex:c,"aria-label":m.reset,title:m.reset},n.tsx("span",{"aria-hidden":"true",class:this.classes("esri-compass__icon",a),styles:this._toRotationTransform(d)}),n.tsx("span",{class:"esri-icon-font-fallback-text"},m.reset))};b.prototype._reset=function(){this.viewModel.reset()};b.prototype._toRotationTransform=function(a){return{transform:"rotateZ("+
a.z+"deg)"}};d([c.aliasOf("viewModel.goToOverride")],b.prototype,"goToOverride",void 0);d([c.property()],b.prototype,"iconClass",void 0);d([c.property()],b.prototype,"label",void 0);d([c.aliasOf("viewModel.view")],b.prototype,"view",void 0);d([c.property({type:h}),n.renderable(["viewModel.orientation","viewModel.state"])],b.prototype,"viewModel",void 0);d([c.aliasOf("viewModel.reset")],b.prototype,"reset",null);d([n.accessibleHandler()],b.prototype,"_reset",null);return b=d([c.subclass("esri.widgets.Compass")],
b)}(c.declared(f))})},"esri/widgets/Compass/CompassViewModel":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/Handles ../../core/watchUtils ../../core/accessorSupport/decorators ../support/GoTo".split(" "),function(q,g,p,d,m,c,f,h,n){return function(a){function b(b){b=a.call(this,b)||this;b._handles=new c;b.orientation={x:0,y:0,z:0};b.view=null;b._updateForCamera=b._updateForCamera.bind(b);b._updateForRotation=
b._updateForRotation.bind(b);b._updateRotationWatcher=b._updateRotationWatcher.bind(b);b.view;return b}p(b,a);b.prototype.initialize=function(){this._handles.add(f.init(this,"view",this._updateRotationWatcher))};b.prototype.destroy=function(){this._handles.destroy();this.view=this._handles=null};Object.defineProperty(b.prototype,"canShowNorth",{get:function(){var a=this.get("view.spatialReference");return!(!a||!a.isWebMercator&&!a.isGeographic)},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,
"state",{get:function(){return this.get("view.ready")?this.canShowNorth?"compass":"rotation":"disabled"},enumerable:!0,configurable:!0});b.prototype.reset=function(){if(this.get("view.ready")){var a={};"2d"===this.view.type?a.rotation=0:a.heading=0;this.callGoTo({target:a})}};b.prototype._updateForRotation=function(a){void 0!==a&&null!==a&&(this.orientation={z:a})};b.prototype._updateForCamera=function(a){a&&(this.orientation={x:0,y:0,z:-a.heading})};b.prototype._updateRotationWatcher=function(a){this._handles.removeAll();
a&&("2d"===a.type?this._handles.add(f.init(this,"view.rotation",this._updateForRotation)):this._handles.add(f.init(this,"view.camera",this._updateForCamera)))};d([h.property({dependsOn:["view.spatialReference.isWebMercator","view.spatialReference.wkid"],readOnly:!0})],b.prototype,"canShowNorth",null);d([h.property()],b.prototype,"orientation",void 0);d([h.property({dependsOn:["view.ready","canShowNorth"],readOnly:!0})],b.prototype,"state",null);d([h.property()],b.prototype,"view",void 0);d([h.property()],
b.prototype,"reset",null);return b=d([h.subclass("esri.widgets.CompassViewModel")],b)}(h.declared(n.GoToMixin(m)))})},"esri/widgets/NavigationToggle":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper dojo/i18n!./NavigationToggle/nls/NavigationToggle ../core/accessorSupport/decorators ./Widget ./NavigationToggle/NavigationToggleViewModel ./support/widget".split(" "),function(q,g,p,d,m,c,f,h,n){return function(a){function b(b){b=a.call(this,b)||
this;b.iconClass="esri-icon-pan2";b.label=m.widgetLabel;b.view=null;b.viewModel=new h;return b}p(b,a);Object.defineProperty(b.prototype,"layout",{set:function(a){"horizontal"!==a&&(a="vertical");this._set("layout",a)},enumerable:!0,configurable:!0});b.prototype.toggle=function(){};b.prototype.render=function(){var a,b,c,d="disabled"===this.get("viewModel.state"),f="pan"===this.get("viewModel.navigationMode"),g=(a={},a["esri-disabled"]=d,a["esri-navigation-toggle--horizontal"]="horizontal"===this.layout,
a);a=(b={},b["esri-navigation-toggle__button--active"]=f,b);b=(c={},c["esri-navigation-toggle__button--active"]=!f,c);c=d?-1:0;return n.tsx("div",{bind:this,class:this.classes("esri-navigation-toggle esri-widget",g),onclick:this._toggle,onkeydown:this._toggle,tabIndex:c,"aria-label":m.toggle,title:m.toggle},n.tsx("div",{class:this.classes("esri-navigation-toggle__button esri-widget--button","esri-navigation-toggle__button--pan",a)},n.tsx("span",{class:"esri-icon-pan"})),n.tsx("div",{class:this.classes("esri-navigation-toggle__button esri-widget--button",
"esri-navigation-toggle__button--rotate",b)},n.tsx("span",{class:"esri-icon-rotate"})))};b.prototype._toggle=function(){this.toggle()};d([c.property()],b.prototype,"iconClass",void 0);d([c.property()],b.prototype,"label",void 0);d([c.property({value:"vertical"}),n.renderable()],b.prototype,"layout",null);d([c.aliasOf("viewModel.view"),n.renderable()],b.prototype,"view",void 0);d([c.property({type:h}),n.renderable(["viewModel.state","viewModel.navigationMode"])],b.prototype,"viewModel",void 0);d([c.aliasOf("viewModel.toggle")],
b.prototype,"toggle",null);d([n.accessibleHandler()],b.prototype,"_toggle",null);return b=d([c.subclass("esri.widgets.NavigationToggle")],b)}(c.declared(f))})},"esri/widgets/NavigationToggle/NavigationToggleViewModel":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/Handles ../../core/watchUtils ../../core/accessorSupport/decorators".split(" "),function(q,g,p,d,m,c,f,h){return function(g){function a(a){a=
g.call(this,a)||this;a._handles=new c;a.navigationMode="pan";a.view=null;a.toggle=a.toggle.bind(a);return a}p(a,g);a.prototype.initialize=function(){this._handles.add(f.when(this,"view.inputManager",this._setNavigationMode.bind(this)))};a.prototype.destroy=function(){this._handles.destroy();this.view=this._handles=null};Object.defineProperty(a.prototype,"state",{get:function(){return this.get("view.ready")&&"3d"===this.view.type?"ready":"disabled"},enumerable:!0,configurable:!0});a.prototype.toggle=
function(){"disabled"!==this.state&&(this.navigationMode="pan"!==this.navigationMode?"pan":"rotate",this._setNavigationMode())};a.prototype._setNavigationMode=function(){this.get("view.inputManager").primaryDragAction="pan"===this.navigationMode?"pan":"rotate"};d([h.property({dependsOn:["view.ready"],readOnly:!0})],a.prototype,"state",null);d([h.property()],a.prototype,"navigationMode",void 0);d([h.property()],a.prototype,"view",void 0);d([h.property()],a.prototype,"toggle",null);return a=d([h.subclass("esri.widgets.NavigationToggleViewModel")],
a)}(h.declared(m))})},"esri/widgets/Zoom":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper dojo/i18n!./Zoom/nls/Zoom ../core/accessorSupport/decorators ./Widget ./Zoom/IconButton ./Zoom/ZoomViewModel ./support/widget".split(" "),function(q,g,p,d,m,c,f,h,n,a){return function(b){function e(a){a=b.call(this,a)||this;a.iconClass="esri-icon-zoom-in-magnifying-glass";a.label=m.widgetLabel;a.view=null;a.viewModel=new n;return a}p(e,b);e.prototype.postInitialize=
function(){this._zoomInButton=new h({action:this.zoomIn,iconClass:"esri-icon-plus",title:m.zoomIn});this._zoomOutButton=new h({action:this.zoomOut,iconClass:"esri-icon-minus",title:m.zoomOut})};Object.defineProperty(e.prototype,"layout",{set:function(a){"horizontal"!==a&&(a="vertical");this._set("layout",a)},enumerable:!0,configurable:!0});e.prototype.render=function(){var b,c=this.viewModel,e=(b={},b["esri-zoom--horizontal"]="horizontal"===this.layout,b);this._zoomInButton.enabled="ready"===c.state&&
c.canZoomIn;this._zoomOutButton.enabled="ready"===c.state&&c.canZoomOut;return a.tsx("div",{class:this.classes("esri-zoom esri-widget",e)},this._zoomInButton.render(),this._zoomOutButton.render())};e.prototype.zoomIn=function(){};e.prototype.zoomOut=function(){};d([c.property()],e.prototype,"iconClass",void 0);d([c.property()],e.prototype,"label",void 0);d([c.property({value:"vertical"}),a.renderable()],e.prototype,"layout",null);d([c.aliasOf("viewModel.view"),a.renderable()],e.prototype,"view",void 0);
d([c.property({type:n}),a.renderable(["viewModel.canZoomIn","viewModel.canZoomOut","viewModel.state"])],e.prototype,"viewModel",void 0);d([c.aliasOf("viewModel.zoomIn")],e.prototype,"zoomIn",null);d([c.aliasOf("viewModel.zoomOut")],e.prototype,"zoomOut",null);return e=d([c.subclass("esri.widgets.Zoom")],e)}(c.declared(f))})},"esri/widgets/Zoom/IconButton":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ../Widget ../support/widget".split(" "),
function(q,g,p,d,m,c,f){return function(c){function g(){var a=null!==c&&c.apply(this,arguments)||this;a.enabled=!0;a.iconClass="";a.title="";return a}p(g,c);g.prototype.render=function(){var a,b,c=this.enabled?0:-1,d=(a={},a["esri-disabled"]=!this.enabled,a["esri-interactive"]=this.enabled,a);a=(b={},b[this.iconClass]=!!this.iconClass,b);return f.tsx("div",{bind:this,class:this.classes("esri-widget--button esri-widget",d),onclick:this._triggerAction,onkeydown:this._triggerAction,role:"button",tabIndex:c,
title:this.title},f.tsx("span",{"aria-hidden":"true",role:"presentation",class:this.classes("esri-icon",a)}),f.tsx("span",{class:"esri-icon-font-fallback-text"},this.title))};g.prototype._triggerAction=function(){this.action.call(this)};d([m.property()],g.prototype,"action",void 0);d([m.property(),f.renderable()],g.prototype,"enabled",void 0);d([m.property(),f.renderable()],g.prototype,"iconClass",void 0);d([m.property(),f.renderable()],g.prototype,"title",void 0);d([f.accessibleHandler()],g.prototype,
"_triggerAction",null);return g=d([m.subclass("esri.widgets.IconButton")],g)}(m.declared(c))})},"esri/widgets/Zoom/ZoomViewModel":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/accessorSupport/decorators ./ZoomConditions2D ./ZoomConditions3D".split(" "),function(q,g,p,d,m,c,f,h){return function(g){function a(a){a=g.call(this,a)||this;a.canZoomIn=!1;a.canZoomOut=!1;a.zoomIn=a.zoomIn.bind(a);a.zoomOut=a.zoomOut.bind(a);
return a}p(a,g);a.prototype.destroy=function(){this.view=null};Object.defineProperty(a.prototype,"state",{get:function(){return this.get("view.ready")?"ready":"disabled"},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"view",{set:function(a){a?"2d"===a.type?this._zoomConditions=new f({view:a}):"3d"===a.type&&(this._zoomConditions=new h({view:a})):this._zoomConditions=null;this._set("view",a)},enumerable:!0,configurable:!0});a.prototype.zoomIn=function(){if(this.canZoomIn){var a=
this.view;"2d"===a.type?a.mapViewNavigation.zoomIn():a.goTo({zoomFactor:2})}};a.prototype.zoomOut=function(){if(this.canZoomOut){var a=this.view;"2d"===a.type?a.mapViewNavigation.zoomOut():a.goTo({zoomFactor:.5})}};d([c.property()],a.prototype,"_zoomConditions",void 0);d([c.property({aliasOf:"_zoomConditions.canZoomIn",readOnly:!0})],a.prototype,"canZoomIn",void 0);d([c.property({aliasOf:"_zoomConditions.canZoomOut",readOnly:!0})],a.prototype,"canZoomOut",void 0);d([c.property({dependsOn:["view.ready"],
readOnly:!0})],a.prototype,"state",null);d([c.property()],a.prototype,"view",null);d([c.property()],a.prototype,"zoomIn",null);d([c.property()],a.prototype,"zoomOut",null);return a=d([c.subclass("esri.widgets.Zoom.ZoomViewModel")],a)}(c.declared(m))})},"esri/widgets/Zoom/ZoomConditions2D":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/accessorSupport/decorators".split(" "),function(q,g,p,d,m,c){return function(f){function g(){return null!==
f&&f.apply(this,arguments)||this}p(g,f);Object.defineProperty(g.prototype,"canZoomIn",{get:function(){if(!this.get("view.ready"))return!1;var c=this.get("view.animation.target.scale")||this.get("view.scale"),a=this.get("view.constraints.effectiveMaxScale");return 0===a||c>a},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"canZoomOut",{get:function(){if(!this.get("view.ready"))return!1;var c=this.get("view.animation.target.scale")||this.get("view.scale"),a=this.get("view.constraints.effectiveMinScale");
return 0===a||c<a},enumerable:!0,configurable:!0});d([c.property({dependsOn:["view.ready","view.scale","view.animation.target.scale","view.constraints.effectiveMaxScale"],readOnly:!0})],g.prototype,"canZoomIn",null);d([c.property({dependsOn:["view.ready","view.scale","view.animation.target.scale","view.constraints.effectiveMinScale"],readOnly:!0})],g.prototype,"canZoomOut",null);d([c.property()],g.prototype,"view",void 0);return g=d([c.subclass("esri.widgets.Zoom.ZoomConditions2D")],g)}(c.declared(m))})},
"esri/widgets/Zoom/ZoomConditions3D":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/accessorSupport/decorators".split(" "),function(q,g,p,d,m,c){return function(f){function g(){return null!==f&&f.apply(this,arguments)||this}p(g,f);Object.defineProperty(g.prototype,"canZoomIn",{get:function(){return!!this.get("view.ready")},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"canZoomOut",
{get:function(){return!!this.get("view.ready")},enumerable:!0,configurable:!0});d([c.property({dependsOn:["view.ready"],readOnly:!0})],g.prototype,"canZoomIn",null);d([c.property({dependsOn:["view.ready"],readOnly:!0})],g.prototype,"canZoomOut",null);d([c.property()],g.prototype,"view",void 0);return g=d([c.subclass("esri.widgets.Zoom.ZoomConditions3D")],g)}(c.declared(m))})},"esri/core/libs/gl-matrix-2/mat4":function(){define(["require","exports","./math/mat4"],function(q,g,p){Object.defineProperty(g,
"__esModule",{value:!0});g.mat4=p})},"esri/core/libs/gl-matrix-2/math/mat4":function(){define(["require","exports","../factories/vec3f64","./common"],function(q,g,p,d){function m(a){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}function c(a,b,c){var e=b[0],d=b[1],f=b[2],g=b[3],h=b[4],m=b[5],n=b[6],p=b[7],u=b[8],v=b[9],w=b[10],q=b[11],B=b[12],A=b[13],J=b[14];b=b[15];var E=c[0],G=c[1],F=c[2],H=c[3];a[0]=E*e+G*h+F*u+H*B;
a[1]=E*d+G*m+F*v+H*A;a[2]=E*f+G*n+F*w+H*J;a[3]=E*g+G*p+F*q+H*b;E=c[4];G=c[5];F=c[6];H=c[7];a[4]=E*e+G*h+F*u+H*B;a[5]=E*d+G*m+F*v+H*A;a[6]=E*f+G*n+F*w+H*J;a[7]=E*g+G*p+F*q+H*b;E=c[8];G=c[9];F=c[10];H=c[11];a[8]=E*e+G*h+F*u+H*B;a[9]=E*d+G*m+F*v+H*A;a[10]=E*f+G*n+F*w+H*J;a[11]=E*g+G*p+F*q+H*b;E=c[12];G=c[13];F=c[14];H=c[15];a[12]=E*e+G*h+F*u+H*B;a[13]=E*d+G*m+F*v+H*A;a[14]=E*f+G*n+F*w+H*J;a[15]=E*g+G*p+F*q+H*b;return a}function f(a,b,c){var e=b[0],d=b[1],f=b[2],g=b[3],h=e+e,m=d+d,n=f+f;b=e*h;var p=e*
m,e=e*n,u=d*m,d=d*n,f=f*n,h=g*h,m=g*m,g=g*n;a[0]=1-(u+f);a[1]=p+g;a[2]=e-m;a[3]=0;a[4]=p-g;a[5]=1-(b+f);a[6]=d+h;a[7]=0;a[8]=e+m;a[9]=d-h;a[10]=1-(b+u);a[11]=0;a[12]=c[0];a[13]=c[1];a[14]=c[2];a[15]=1;return a}function h(a,b,c){a[0]=b[0]-c[0];a[1]=b[1]-c[1];a[2]=b[2]-c[2];a[3]=b[3]-c[3];a[4]=b[4]-c[4];a[5]=b[5]-c[5];a[6]=b[6]-c[6];a[7]=b[7]-c[7];a[8]=b[8]-c[8];a[9]=b[9]-c[9];a[10]=b[10]-c[10];a[11]=b[11]-c[11];a[12]=b[12]-c[12];a[13]=b[13]-c[13];a[14]=b[14]-c[14];a[15]=b[15]-c[15];return a}Object.defineProperty(g,
"__esModule",{value:!0});g.copy=function(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];a[4]=b[4];a[5]=b[5];a[6]=b[6];a[7]=b[7];a[8]=b[8];a[9]=b[9];a[10]=b[10];a[11]=b[11];a[12]=b[12];a[13]=b[13];a[14]=b[14];a[15]=b[15];return a};g.set=function(a,b,c,d,f,g,h,m,n,p,q,u,v,w,D,B,A){a[0]=b;a[1]=c;a[2]=d;a[3]=f;a[4]=g;a[5]=h;a[6]=m;a[7]=n;a[8]=p;a[9]=q;a[10]=u;a[11]=v;a[12]=w;a[13]=D;a[14]=B;a[15]=A;return a};g.identity=m;g.transpose=function(a,b){if(a===b){var c=b[1],d=b[2],f=b[3],g=b[6],h=b[7],m=b[11];
a[1]=b[4];a[2]=b[8];a[3]=b[12];a[4]=c;a[6]=b[9];a[7]=b[13];a[8]=d;a[9]=g;a[11]=b[14];a[12]=f;a[13]=h;a[14]=m}else a[0]=b[0],a[1]=b[4],a[2]=b[8],a[3]=b[12],a[4]=b[1],a[5]=b[5],a[6]=b[9],a[7]=b[13],a[8]=b[2],a[9]=b[6],a[10]=b[10],a[11]=b[14],a[12]=b[3],a[13]=b[7],a[14]=b[11],a[15]=b[15];return a};g.invert=function(a,b){var c=b[0],d=b[1],f=b[2],g=b[3],h=b[4],m=b[5],n=b[6],p=b[7],q=b[8],u=b[9],v=b[10],w=b[11],D=b[12],B=b[13],A=b[14];b=b[15];var J=c*m-d*h,E=c*n-f*h,G=c*p-g*h,F=d*n-f*m,H=d*p-g*m,O=f*p-
g*n,Q=q*B-u*D,N=q*A-v*D,P=q*b-w*D,L=u*A-v*B,R=u*b-w*B,I=v*b-w*A,K=J*I-E*R+G*L+F*P-H*N+O*Q;if(!K)return null;K=1/K;a[0]=(m*I-n*R+p*L)*K;a[1]=(f*R-d*I-g*L)*K;a[2]=(B*O-A*H+b*F)*K;a[3]=(v*H-u*O-w*F)*K;a[4]=(n*P-h*I-p*N)*K;a[5]=(c*I-f*P+g*N)*K;a[6]=(A*G-D*O-b*E)*K;a[7]=(q*O-v*G+w*E)*K;a[8]=(h*R-m*P+p*Q)*K;a[9]=(d*P-c*R-g*Q)*K;a[10]=(D*H-B*G+b*J)*K;a[11]=(u*G-q*H-w*J)*K;a[12]=(m*N-h*L-n*Q)*K;a[13]=(c*L-d*N+f*Q)*K;a[14]=(B*E-D*F-A*J)*K;a[15]=(q*F-u*E+v*J)*K;return a};g.adjoint=function(a,b){var c=b[0],
d=b[1],f=b[2],g=b[3],h=b[4],m=b[5],n=b[6],p=b[7],q=b[8],u=b[9],v=b[10],w=b[11],D=b[12],B=b[13],A=b[14];b=b[15];a[0]=m*(v*b-w*A)-u*(n*b-p*A)+B*(n*w-p*v);a[1]=-(d*(v*b-w*A)-u*(f*b-g*A)+B*(f*w-g*v));a[2]=d*(n*b-p*A)-m*(f*b-g*A)+B*(f*p-g*n);a[3]=-(d*(n*w-p*v)-m*(f*w-g*v)+u*(f*p-g*n));a[4]=-(h*(v*b-w*A)-q*(n*b-p*A)+D*(n*w-p*v));a[5]=c*(v*b-w*A)-q*(f*b-g*A)+D*(f*w-g*v);a[6]=-(c*(n*b-p*A)-h*(f*b-g*A)+D*(f*p-g*n));a[7]=c*(n*w-p*v)-h*(f*w-g*v)+q*(f*p-g*n);a[8]=h*(u*b-w*B)-q*(m*b-p*B)+D*(m*w-p*u);a[9]=-(c*
(u*b-w*B)-q*(d*b-g*B)+D*(d*w-g*u));a[10]=c*(m*b-p*B)-h*(d*b-g*B)+D*(d*p-g*m);a[11]=-(c*(m*w-p*u)-h*(d*w-g*u)+q*(d*p-g*m));a[12]=-(h*(u*A-v*B)-q*(m*A-n*B)+D*(m*v-n*u));a[13]=c*(u*A-v*B)-q*(d*A-f*B)+D*(d*v-f*u);a[14]=-(c*(m*A-n*B)-h*(d*A-f*B)+D*(d*n-f*m));a[15]=c*(m*v-n*u)-h*(d*v-f*u)+q*(d*n-f*m);return a};g.determinant=function(a){var b=a[0],c=a[1],d=a[2],f=a[3],g=a[4],h=a[5],m=a[6],n=a[7],p=a[8],q=a[9],u=a[10],v=a[11],w=a[12],D=a[13],B=a[14];a=a[15];return(b*h-c*g)*(u*a-v*B)-(b*m-d*g)*(q*a-v*D)+(b*
n-f*g)*(q*B-u*D)+(c*m-d*h)*(p*a-v*w)-(c*n-f*h)*(p*B-u*w)+(d*n-f*m)*(p*D-q*w)};g.multiply=c;g.translate=function(a,b,c){var e=c[0],d=c[1];c=c[2];var f=void 0,g=void 0,h=void 0,m=void 0,n=void 0,p=void 0,q=void 0,v=void 0,w=void 0,D=void 0,B=void 0,A=void 0;b===a?(a[12]=b[0]*e+b[4]*d+b[8]*c+b[12],a[13]=b[1]*e+b[5]*d+b[9]*c+b[13],a[14]=b[2]*e+b[6]*d+b[10]*c+b[14],a[15]=b[3]*e+b[7]*d+b[11]*c+b[15]):(f=b[0],g=b[1],h=b[2],m=b[3],n=b[4],p=b[5],q=b[6],v=b[7],w=b[8],D=b[9],B=b[10],A=b[11],a[0]=f,a[1]=g,a[2]=
h,a[3]=m,a[4]=n,a[5]=p,a[6]=q,a[7]=v,a[8]=w,a[9]=D,a[10]=B,a[11]=A,a[12]=f*e+n*d+w*c+b[12],a[13]=g*e+p*d+D*c+b[13],a[14]=h*e+q*d+B*c+b[14],a[15]=m*e+v*d+A*c+b[15]);return a};g.scale=function(a,b,c){var e=c[0],d=c[1];c=c[2];a[0]=b[0]*e;a[1]=b[1]*e;a[2]=b[2]*e;a[3]=b[3]*e;a[4]=b[4]*d;a[5]=b[5]*d;a[6]=b[6]*d;a[7]=b[7]*d;a[8]=b[8]*c;a[9]=b[9]*c;a[10]=b[10]*c;a[11]=b[11]*c;a[12]=b[12];a[13]=b[13];a[14]=b[14];a[15]=b[15];return a};g.rotate=function(a,b,c,f){var e=f[0],g=f[1];f=f[2];var h=Math.sqrt(e*e+
g*g+f*f),l=void 0,m=void 0,n=void 0,p=void 0,q=void 0,v=void 0,w=void 0,D=void 0,B=void 0,A=void 0,J=void 0,E=void 0,G=void 0,F=void 0,H=void 0,O=void 0,Q=void 0,N=void 0,P=void 0,L=void 0,R=void 0,I=void 0,m=l=void 0;if(h<d.EPSILON)return null;h=1/h;e*=h;g*=h;f*=h;l=Math.sin(c);m=Math.cos(c);n=1-m;p=b[0];q=b[1];v=b[2];w=b[3];D=b[4];B=b[5];A=b[6];J=b[7];E=b[8];G=b[9];F=b[10];H=b[11];O=e*e*n+m;Q=g*e*n+f*l;N=f*e*n-g*l;P=e*g*n-f*l;L=g*g*n+m;R=f*g*n+e*l;I=e*f*n+g*l;l=g*f*n-e*l;m=f*f*n+m;a[0]=p*O+D*Q+
E*N;a[1]=q*O+B*Q+G*N;a[2]=v*O+A*Q+F*N;a[3]=w*O+J*Q+H*N;a[4]=p*P+D*L+E*R;a[5]=q*P+B*L+G*R;a[6]=v*P+A*L+F*R;a[7]=w*P+J*L+H*R;a[8]=p*I+D*l+E*m;a[9]=q*I+B*l+G*m;a[10]=v*I+A*l+F*m;a[11]=w*I+J*l+H*m;b!==a&&(a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);return a};g.rotateX=function(a,b,c){var e=Math.sin(c);c=Math.cos(c);var d=b[4],f=b[5],g=b[6],h=b[7],m=b[8],n=b[9],p=b[10],q=b[11];b!==a&&(a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);a[4]=d*c+m*e;a[5]=f*c+n*
e;a[6]=g*c+p*e;a[7]=h*c+q*e;a[8]=m*c-d*e;a[9]=n*c-f*e;a[10]=p*c-g*e;a[11]=q*c-h*e;return a};g.rotateY=function(a,b,c){var e=Math.sin(c);c=Math.cos(c);var d=b[0],f=b[1],g=b[2],h=b[3],m=b[8],n=b[9],p=b[10],q=b[11];b!==a&&(a[4]=b[4],a[5]=b[5],a[6]=b[6],a[7]=b[7],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);a[0]=d*c-m*e;a[1]=f*c-n*e;a[2]=g*c-p*e;a[3]=h*c-q*e;a[8]=d*e+m*c;a[9]=f*e+n*c;a[10]=g*e+p*c;a[11]=h*e+q*c;return a};g.rotateZ=function(a,b,c){var e=Math.sin(c);c=Math.cos(c);var d=b[0],f=b[1],
g=b[2],h=b[3],m=b[4],n=b[5],p=b[6],q=b[7];b!==a&&(a[8]=b[8],a[9]=b[9],a[10]=b[10],a[11]=b[11],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);a[0]=d*c+m*e;a[1]=f*c+n*e;a[2]=g*c+p*e;a[3]=h*c+q*e;a[4]=m*c-d*e;a[5]=n*c-f*e;a[6]=p*c-g*e;a[7]=q*c-h*e;return a};g.fromTranslation=function(a,b){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=b[0];a[13]=b[1];a[14]=b[2];a[15]=1;return a};g.fromScaling=function(a,b){a[0]=b[0];a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=b[1];
a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=b[2];a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};g.fromRotation=function(a,b,c){var e=c[0],f=c[1];c=c[2];var g=Math.sqrt(e*e+f*f+c*c),h=void 0,m=void 0,n=void 0;if(g<d.EPSILON)return null;g=1/g;e*=g;f*=g;c*=g;h=Math.sin(b);m=Math.cos(b);n=1-m;a[0]=e*e*n+m;a[1]=f*e*n+c*h;a[2]=c*e*n-f*h;a[3]=0;a[4]=e*f*n-c*h;a[5]=f*f*n+m;a[6]=c*f*n+e*h;a[7]=0;a[8]=e*c*n+f*h;a[9]=f*c*n-e*h;a[10]=c*c*n+m;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};g.fromXRotation=function(a,
b){var c=Math.sin(b);b=Math.cos(b);a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=b;a[6]=c;a[7]=0;a[8]=0;a[9]=-c;a[10]=b;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};g.fromYRotation=function(a,b){var c=Math.sin(b);b=Math.cos(b);a[0]=b;a[1]=0;a[2]=-c;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=c;a[9]=0;a[10]=b;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};g.fromZRotation=function(a,b){var c=Math.sin(b);b=Math.cos(b);a[0]=b;a[1]=c;a[2]=0;a[3]=0;a[4]=-c;a[5]=b;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=
0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};g.fromRotationTranslation=f;g.fromQuat2=function(a,b){var c=n,d=-b[0],g=-b[1],h=-b[2],m=b[3],p=b[4],q=b[5],x=b[6],z=b[7],u=d*d+g*g+h*h+m*m;0<u?(c[0]=2*(p*m+z*d+q*h-x*g)/u,c[1]=2*(q*m+z*g+x*d-p*h)/u,c[2]=2*(x*m+z*h+p*g-q*d)/u):(c[0]=2*(p*m+z*d+q*h-x*g),c[1]=2*(q*m+z*g+x*d-p*h),c[2]=2*(x*m+z*h+p*g-q*d));f(a,b,c);return a};var n=p.create();g.getTranslation=function(a,b){a[0]=b[12];a[1]=b[13];a[2]=b[14];return a};g.getScaling=function(a,b){var c=b[0],d=b[1],
f=b[2],g=b[4],h=b[5],m=b[6],n=b[8],p=b[9];b=b[10];a[0]=Math.sqrt(c*c+d*d+f*f);a[1]=Math.sqrt(g*g+h*h+m*m);a[2]=Math.sqrt(n*n+p*p+b*b);return a};g.getRotation=function(a,b){var c=b[0]+b[5]+b[10],d=0;0<c?(d=2*Math.sqrt(c+1),a[3]=.25*d,a[0]=(b[6]-b[9])/d,a[1]=(b[8]-b[2])/d,a[2]=(b[1]-b[4])/d):b[0]>b[5]&&b[0]>b[10]?(d=2*Math.sqrt(1+b[0]-b[5]-b[10]),a[3]=(b[6]-b[9])/d,a[0]=.25*d,a[1]=(b[1]+b[4])/d,a[2]=(b[8]+b[2])/d):b[5]>b[10]?(d=2*Math.sqrt(1+b[5]-b[0]-b[10]),a[3]=(b[8]-b[2])/d,a[0]=(b[1]+b[4])/d,a[1]=
.25*d,a[2]=(b[6]+b[9])/d):(d=2*Math.sqrt(1+b[10]-b[0]-b[5]),a[3]=(b[1]-b[4])/d,a[0]=(b[8]+b[2])/d,a[1]=(b[6]+b[9])/d,a[2]=.25*d);return a};g.fromRotationTranslationScale=function(a,b,c,d){var e=b[0],f=b[1],g=b[2],h=b[3],l=e+e,m=f+f,n=g+g;b=e*l;var p=e*m,e=e*n,q=f*m,f=f*n,g=g*n,l=h*l,m=h*m,h=h*n,n=d[0],w=d[1];d=d[2];a[0]=(1-(q+g))*n;a[1]=(p+h)*n;a[2]=(e-m)*n;a[3]=0;a[4]=(p-h)*w;a[5]=(1-(b+g))*w;a[6]=(f+l)*w;a[7]=0;a[8]=(e+m)*d;a[9]=(f-l)*d;a[10]=(1-(b+q))*d;a[11]=0;a[12]=c[0];a[13]=c[1];a[14]=c[2];
a[15]=1;return a};g.fromRotationTranslationScaleOrigin=function(a,b,c,d,f){var e=b[0],g=b[1],k=b[2],h=b[3],l=e+e,m=g+g,n=k+k;b=e*l;var p=e*m,q=e*n,e=g*m,g=g*n,D=k*n,k=h*l,m=h*m,B=h*n,A=d[0],J=d[1],n=d[2];d=f[0];h=f[1];f=f[2];var l=(1-(e+D))*A,E=(p+B)*A,A=(q-m)*A,p=(p-B)*J,D=(1-(b+D))*J,J=(g+k)*J,q=(q+m)*n,g=(g-k)*n;b=(1-(b+e))*n;a[0]=l;a[1]=E;a[2]=A;a[3]=0;a[4]=p;a[5]=D;a[6]=J;a[7]=0;a[8]=q;a[9]=g;a[10]=b;a[11]=0;a[12]=c[0]+d-(l*d+p*h+q*f);a[13]=c[1]+h-(E*d+D*h+g*f);a[14]=c[2]+f-(A*d+J*h+b*f);a[15]=
1;return a};g.fromQuat=function(a,b){var c=b[0],d=b[1],f=b[2];b=b[3];var g=c+c,h=d+d,m=f+f,c=c*g,n=d*g,d=d*h,p=f*g,q=f*h,f=f*m,g=b*g,h=b*h;b*=m;a[0]=1-d-f;a[1]=n+b;a[2]=p-h;a[3]=0;a[4]=n-b;a[5]=1-c-f;a[6]=q+g;a[7]=0;a[8]=p+h;a[9]=q-g;a[10]=1-c-d;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};g.frustum=function(a,b,c,d,f,g,h){var e=1/(c-b),k=1/(f-d),l=1/(g-h);a[0]=2*g*e;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=2*g*k;a[6]=0;a[7]=0;a[8]=(c+b)*e;a[9]=(f+d)*k;a[10]=(h+g)*l;a[11]=-1;a[12]=0;a[13]=0;a[14]=h*
g*2*l;a[15]=0;return a};g.perspective=function(a,b,c,d,f){b=1/Math.tan(b/2);var e=void 0;a[0]=b/c;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=b;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[11]=-1;a[12]=0;a[13]=0;a[15]=0;null!=f&&Infinity!==f?(e=1/(d-f),a[10]=(f+d)*e,a[14]=2*f*d*e):(a[10]=-1,a[14]=-2*d);return a};g.perspectiveFromFieldOfView=function(a,b,c,d){var e=Math.tan(b.upDegrees*Math.PI/180),f=Math.tan(b.downDegrees*Math.PI/180),g=Math.tan(b.leftDegrees*Math.PI/180);b=Math.tan(b.rightDegrees*Math.PI/180);var h=2/(g+
b),l=2/(e+f);a[0]=h;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=l;a[6]=0;a[7]=0;a[8]=-((g-b)*h*.5);a[9]=(e-f)*l*.5;a[10]=d/(c-d);a[11]=-1;a[12]=0;a[13]=0;a[14]=d*c/(c-d);a[15]=0;return a};g.ortho=function(a,b,c,d,f,g,h){var e=1/(b-c),k=1/(d-f),l=1/(g-h);a[0]=-2*e;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=-2*k;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=2*l;a[11]=0;a[12]=(b+c)*e;a[13]=(f+d)*k;a[14]=(h+g)*l;a[15]=1;return a};g.lookAt=function(a,b,c,f){var e=void 0,g=void 0,h=void 0,l=void 0,n=void 0,p=void 0,q=void 0,u=void 0,v=
void 0,w=void 0,D=b[0],B=b[1];b=b[2];h=f[0];l=f[1];f=f[2];q=c[0];u=c[1];c=c[2];if(Math.abs(D-q)<d.EPSILON&&Math.abs(B-u)<d.EPSILON&&Math.abs(b-c)<d.EPSILON)return m(a);q=D-q;u=B-u;v=b-c;w=1/Math.sqrt(q*q+u*u+v*v);q*=w;u*=w;v*=w;e=l*v-f*u;g=f*q-h*v;h=h*u-l*q;(w=Math.sqrt(e*e+g*g+h*h))?(w=1/w,e*=w,g*=w,h*=w):h=g=e=0;l=u*h-v*g;n=v*e-q*h;p=q*g-u*e;(w=Math.sqrt(l*l+n*n+p*p))?(w=1/w,l*=w,n*=w,p*=w):p=n=l=0;a[0]=e;a[1]=l;a[2]=q;a[3]=0;a[4]=g;a[5]=n;a[6]=u;a[7]=0;a[8]=h;a[9]=p;a[10]=v;a[11]=0;a[12]=-(e*D+
g*B+h*b);a[13]=-(l*D+n*B+p*b);a[14]=-(q*D+u*B+v*b);a[15]=1;return a};g.targetTo=function(a,b,c,d){var e=b[0],f=b[1];b=b[2];var g=d[0],h=d[1],l=d[2];d=e-c[0];var m=f-c[1];c=b-c[2];var n=d*d+m*m+c*c;0<n&&(n=1/Math.sqrt(n),d*=n,m*=n,c*=n);var p=h*c-l*m,l=l*d-g*c,g=g*m-h*d,n=p*p+l*l+g*g;0<n&&(n=1/Math.sqrt(n),p*=n,l*=n,g*=n);a[0]=p;a[1]=l;a[2]=g;a[3]=0;a[4]=m*g-c*l;a[5]=c*p-d*g;a[6]=d*l-m*p;a[7]=0;a[8]=d;a[9]=m;a[10]=c;a[11]=0;a[12]=e;a[13]=f;a[14]=b;a[15]=1;return a};g.str=function(a){return"mat4("+
a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+", "+a[9]+", "+a[10]+", "+a[11]+", "+a[12]+", "+a[13]+", "+a[14]+", "+a[15]+")"};g.frob=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2)+Math.pow(a[4],2)+Math.pow(a[5],2)+Math.pow(a[6],2)+Math.pow(a[7],2)+Math.pow(a[8],2)+Math.pow(a[9],2)+Math.pow(a[10],2)+Math.pow(a[11],2)+Math.pow(a[12],2)+Math.pow(a[13],2)+Math.pow(a[14],2)+Math.pow(a[15],2))};g.add=function(a,b,
c){a[0]=b[0]+c[0];a[1]=b[1]+c[1];a[2]=b[2]+c[2];a[3]=b[3]+c[3];a[4]=b[4]+c[4];a[5]=b[5]+c[5];a[6]=b[6]+c[6];a[7]=b[7]+c[7];a[8]=b[8]+c[8];a[9]=b[9]+c[9];a[10]=b[10]+c[10];a[11]=b[11]+c[11];a[12]=b[12]+c[12];a[13]=b[13]+c[13];a[14]=b[14]+c[14];a[15]=b[15]+c[15];return a};g.subtract=h;g.multiplyScalar=function(a,b,c){a[0]=b[0]*c;a[1]=b[1]*c;a[2]=b[2]*c;a[3]=b[3]*c;a[4]=b[4]*c;a[5]=b[5]*c;a[6]=b[6]*c;a[7]=b[7]*c;a[8]=b[8]*c;a[9]=b[9]*c;a[10]=b[10]*c;a[11]=b[11]*c;a[12]=b[12]*c;a[13]=b[13]*c;a[14]=b[14]*
c;a[15]=b[15]*c;return a};g.multiplyScalarAndAdd=function(a,b,c,d){a[0]=b[0]+c[0]*d;a[1]=b[1]+c[1]*d;a[2]=b[2]+c[2]*d;a[3]=b[3]+c[3]*d;a[4]=b[4]+c[4]*d;a[5]=b[5]+c[5]*d;a[6]=b[6]+c[6]*d;a[7]=b[7]+c[7]*d;a[8]=b[8]+c[8]*d;a[9]=b[9]+c[9]*d;a[10]=b[10]+c[10]*d;a[11]=b[11]+c[11]*d;a[12]=b[12]+c[12]*d;a[13]=b[13]+c[13]*d;a[14]=b[14]+c[14]*d;a[15]=b[15]+c[15]*d;return a};g.exactEquals=function(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]&&a[3]===b[3]&&a[4]===b[4]&&a[5]===b[5]&&a[6]===b[6]&&a[7]===b[7]&&
a[8]===b[8]&&a[9]===b[9]&&a[10]===b[10]&&a[11]===b[11]&&a[12]===b[12]&&a[13]===b[13]&&a[14]===b[14]&&a[15]===b[15]};g.equals=function(a,b){var c=a[0],f=a[1],g=a[2],h=a[3],m=a[4],n=a[5],p=a[6],q=a[7],z=a[8],u=a[9],v=a[10],w=a[11],D=a[12],B=a[13],A=a[14];a=a[15];var J=b[0],E=b[1],G=b[2],F=b[3],H=b[4],O=b[5],Q=b[6],N=b[7],P=b[8],L=b[9],R=b[10],I=b[11],K=b[12],S=b[13],T=b[14];b=b[15];return Math.abs(c-J)<=d.EPSILON*Math.max(1,Math.abs(c),Math.abs(J))&&Math.abs(f-E)<=d.EPSILON*Math.max(1,Math.abs(f),Math.abs(E))&&
Math.abs(g-G)<=d.EPSILON*Math.max(1,Math.abs(g),Math.abs(G))&&Math.abs(h-F)<=d.EPSILON*Math.max(1,Math.abs(h),Math.abs(F))&&Math.abs(m-H)<=d.EPSILON*Math.max(1,Math.abs(m),Math.abs(H))&&Math.abs(n-O)<=d.EPSILON*Math.max(1,Math.abs(n),Math.abs(O))&&Math.abs(p-Q)<=d.EPSILON*Math.max(1,Math.abs(p),Math.abs(Q))&&Math.abs(q-N)<=d.EPSILON*Math.max(1,Math.abs(q),Math.abs(N))&&Math.abs(z-P)<=d.EPSILON*Math.max(1,Math.abs(z),Math.abs(P))&&Math.abs(u-L)<=d.EPSILON*Math.max(1,Math.abs(u),Math.abs(L))&&Math.abs(v-
R)<=d.EPSILON*Math.max(1,Math.abs(v),Math.abs(R))&&Math.abs(w-I)<=d.EPSILON*Math.max(1,Math.abs(w),Math.abs(I))&&Math.abs(D-K)<=d.EPSILON*Math.max(1,Math.abs(D),Math.abs(K))&&Math.abs(B-S)<=d.EPSILON*Math.max(1,Math.abs(B),Math.abs(S))&&Math.abs(A-T)<=d.EPSILON*Math.max(1,Math.abs(A),Math.abs(T))&&Math.abs(a-b)<=d.EPSILON*Math.max(1,Math.abs(a),Math.abs(b))};g.mul=c;g.sub=h})},"esri/core/libs/gl-matrix-2/mat4f32":function(){define(["require","exports","./factories/mat4f32"],function(q,g,p){Object.defineProperty(g,
"__esModule",{value:!0});g.mat4f32=p})},"esri/core/libs/gl-matrix-2/factories/mat4f32":function(){define(["require","exports"],function(q,g){function p(){var d=new Float32Array(16);d[0]=1;d[5]=1;d[10]=1;d[15]=1;return d}Object.defineProperty(g,"__esModule",{value:!0});g.create=p;g.clone=function(d){var g=new Float32Array(16);g[0]=d[0];g[1]=d[1];g[2]=d[2];g[3]=d[3];g[4]=d[4];g[5]=d[5];g[6]=d[6];g[7]=d[7];g[8]=d[8];g[9]=d[9];g[10]=d[10];g[11]=d[11];g[12]=d[12];g[13]=d[13];g[14]=d[14];g[15]=d[15];return g};
g.fromValues=function(d,g,c,f,h,n,a,b,e,l,k,p,q,y,t,x){var m=new Float32Array(16);m[0]=d;m[1]=g;m[2]=c;m[3]=f;m[4]=h;m[5]=n;m[6]=a;m[7]=b;m[8]=e;m[9]=l;m[10]=k;m[11]=p;m[12]=q;m[13]=y;m[14]=t;m[15]=x;return m};g.createView=function(d,g){return new Float32Array(d,g,16)};g.IDENTITY=p()})},"esri/core/libs/gl-matrix-2/vec3f32":function(){define(["require","exports","./factories/vec3f32"],function(q,g,p){Object.defineProperty(g,"__esModule",{value:!0});g.vec3f32=p})},"esri/core/libs/gl-matrix-2/factories/vec3f32":function(){define(["require",
"exports"],function(q,g){function p(){return new Float32Array(3)}function d(c,a,b){var d=new Float32Array(3);d[0]=c;d[1]=a;d[2]=b;return d}function m(){return d(1,1,1)}function c(){return d(1,0,0)}function f(){return d(0,1,0)}function h(){return d(0,0,1)}Object.defineProperty(g,"__esModule",{value:!0});g.create=p;g.clone=function(c){var a=new Float32Array(3);a[0]=c[0];a[1]=c[1];a[2]=c[2];return a};g.fromValues=d;g.createView=function(c,a){return new Float32Array(c,a,3)};g.zeros=function(){return p()};
g.ones=m;g.unitX=c;g.unitY=f;g.unitZ=h;g.ZEROS=p();g.ONES=m();g.UNIT_X=c();g.UNIT_Y=f();g.UNIT_Z=h()})},"esri/core/libs/gl-matrix-2/vec4f32":function(){define(["require","exports","./factories/vec4f32"],function(q,g,p){Object.defineProperty(g,"__esModule",{value:!0});g.vec4f32=p})},"esri/core/libs/gl-matrix-2/factories/vec4f32":function(){define(["require","exports"],function(q,g){function p(){return new Float32Array(4)}function d(a,b,c,d){var e=new Float32Array(4);e[0]=a;e[1]=b;e[2]=c;e[3]=d;return e}
function m(){return d(1,1,1,1)}function c(){return d(1,0,0,0)}function f(){return d(0,1,0,0)}function h(){return d(0,0,1,0)}function n(){return d(0,0,0,1)}Object.defineProperty(g,"__esModule",{value:!0});g.create=p;g.clone=function(a){var b=new Float32Array(4);b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];return b};g.fromValues=d;g.createView=function(a,b){return new Float32Array(a,b,4)};g.zeros=function(){return p()};g.ones=m;g.unitX=c;g.unitY=f;g.unitZ=h;g.unitW=n;g.ZEROS=p();g.ONES=m();g.UNIT_X=c();
g.UNIT_Y=f();g.UNIT_Z=h();g.UNIT_W=n()})},"esri/layers/graphics/featureConversionUtils":function(){define("require exports ../../core/Error ../../core/Logger ../../geometry/support/jsonUtils ./OptimizedFeature ./OptimizedFeatureSet ./OptimizedGeometry".split(" "),function(q,g,p,d,m,c,f,h){function n(a,b){return a?b?4:3:b?3:2}function a(a,b,c,d){if(a){if(c)return b&&d?T:K;if(b&&d)return S}else if(b&&d)return K;return I}function b(a,b){return Math.round((b-a.translate[0])/a.scale[0])}function e(a,b){return Math.round((a.translate[1]-
b)/a.scale[1])}function l(a,b){return b*a.scale[0]+a.translate[0]}function k(a,b){return a.translate[1]-b*a.scale[1]}function r(a){a=a.coords;return{x:a[0],y:a[1]}}function C(a,b){a.coords[0]=b.x;a.coords[1]=b.y;return a}function y(a){a=a.coords;return{x:a[0],y:a[1],z:a[2]}}function t(a,b){a.coords[0]=b.x;a.coords[1]=b.y;a.coords[2]=b.z;return a}function x(a){a=a.coords;return{x:a[0],y:a[1],m:a[2]}}function z(a,b){a.coords[0]=b.x;a.coords[1]=b.y;a.coords[2]=b.m;return a}function u(a){a=a.coords;return{x:a[0],
y:a[1],z:a[2],m:a[3]}}function v(a,b){a.coords[0]=b.x;a.coords[1]=b.y;a.coords[2]=b.z;a.coords[3]=b.m;return a}function w(a,b){return a&&b?v:a?t:b?z:C}function D(a,b,c){if(!a)return null;for(var d=n(b,c),e=[],f=0;f<a.coords.length;f+=d){for(var g=[],h=0;h<d;h++)g.push(a.coords[f+h]);e.push(g)}return b?c?{points:e,hasZ:b,hasM:c}:{points:e,hasZ:b}:c?{points:e,hasM:c}:{points:e}}function B(a,b,c){void 0===c&&(c=n(b.hasZ,b.hasM));a.lengths[0]=b.points.length;var d=a.coords,e=0,f=0;for(b=b.points;f<b.length;f++)for(var g=
b[f],h=0;h<c;h++)d[e++]=g[h];return a}function A(a,b,c){if(!a)return null;var d=n(b,c),e=a.coords,f=[],g=0,h=0;for(a=a.lengths;h<a.length;h++){for(var k=a[h],l=[],m=0;m<k;m++){for(var p=[],q=0;q<d;q++)p.push(e[g++]);l.push(p)}f.push(l)}return b?c?{paths:f,hasZ:b,hasM:c}:{paths:f,hasZ:b}:c?{paths:f,hasM:c}:{paths:f}}function J(a,b,c){void 0===c&&(c=n(b.hasZ,b.hasM));var d=a.lengths,e=a.coords,f=0,g=0;for(b=b.paths;g<b.length;g++){for(var h=b[g],k=0,l=h;k<l.length;k++)for(var m=l[k],p=0;p<c;p++)e[f++]=
m[p];d.push(h.length)}return a}function E(a,b,c){if(!a)return null;var d=n(b,c),e=a.coords,f=[],g=0,h=0;for(a=a.lengths;h<a.length;h++){for(var k=a[h],l=[],m=0;m<k;m++){for(var p=[],q=0;q<d;q++)p.push(e[g++]);l.push(p)}f.push(l)}return b?c?{rings:f,hasZ:b,hasM:c}:{rings:f,hasZ:b}:c?{rings:f,hasM:c}:{rings:f}}function G(a,b,c,d){void 0===c&&(c=b.hasZ);void 0===d&&(d=b.hasM);F(a,b.rings,c,d);return a}function F(a,b,c,d){c=n(c,d);d=a.lengths;for(var e=a.coords,f=0,g=d.length=e.length=0;g<b.length;g++){for(var h=
b[g],k=0,l=h;k<l.length;k++)for(var m=l[k],p=0;p<c;p++)e[f++]=m[p];d.push(h.length)}return a}function H(a,b,d,e,f,g){a.length=0;if(!d){for(e=0;e<b.length;e++)f=b[e],a.push(new c.default(null,f.attributes,null,f.attributes[g]));return a}switch(d){case "esriGeometryPoint":e=w(e,f);for(f=0;f<b.length;f++){var k=b[f];d=k.geometry;var k=k.attributes,l=void 0;d&&(l=e(new h.default,d));a.push(new c.default(l,k,null,k[g]))}break;case "esriGeometryMultipoint":e=n(e,f);for(f=0;f<b.length;f++)k=b[f],d=k.geometry,
k=k.attributes,l=void 0,d&&(l=B(new h.default,d,e)),a.push(new c.default(l,k,null,k[g]));break;case "esriGeometryPolyline":e=n(e,f);for(f=0;f<b.length;f++)k=b[f],d=k.geometry,k=k.attributes,l=void 0,d&&(l=J(new h.default,d,e)),a.push(new c.default(l,k,null,k[g]));break;case "esriGeometryPolygon":for(d=0;d<b.length;d++){var m=b[d],k=m.geometry,l=m.centroid,m=m.attributes,q=void 0;k&&(q=G(new h.default,k,e,f));l?a.push(new c.default(q,m,C(new h.default,l),m[g])):a.push(new c.default(q,m,null,m[g]))}break;
default:L.error("convertToFeatureSet:unknown-geometry",new p("Unable to parse unknown geometry type '"+d+"'")),a.length=0}return a}function O(a,b,c,d,e){a.length=0;switch(c){case "esriGeometryPoint":c=r;d&&e?c=u:d?c=y:e&&(c=x);for(d=0;d<b.length;d++){var f=b[d];e=f.geometry;f=f.attributes;e=e?c(e):null;a.push({attributes:f,geometry:e})}break;case "esriGeometryMultipoint":for(c=0;c<b.length;c++){var g=b[c],f=g.geometry,g=g.attributes,h=void 0;f&&(h=D(f,d,e));a.push({attributes:g,geometry:h})}break;
case "esriGeometryPolyline":for(c=0;c<b.length;c++)g=b[c],f=g.geometry,g=g.attributes,h=void 0,f&&(h=A(f,d,e)),a.push({attributes:g,geometry:h});break;case "esriGeometryPolygon":for(c=0;c<b.length;c++){var h=b[c],g=h.geometry,f=h.attributes,k=h.centroid,h=void 0;g&&(h=E(g,d,e));k?(g=r(k),a.push({attributes:f,centroid:g,geometry:h})):a.push({attributes:f,geometry:h})}break;default:L.error("convertToFeatureSet:unknown-geometry",new p("Unable to parse unknown geometry type '"+c+"'"))}return a}function Q(c,
d,f,g,h,k,l,m){void 0===l&&(l=f);void 0===m&&(m=g);c.lengths.length&&(c.lengths.length=0);c.coords.length&&(c.coords.length=0);if(!d||!d.coords.length)return null;h=R[h];var p=d.coords;d=d.lengths;var q=n(f,g),w=n(f&&l,g&&m);f=a(f,g,l,m);if(!d.length)return f(c.coords,p,0,0,b(k,p[0]),e(k,p[1])),c.lengths.length&&(c.lengths.length=0),c.coords.length=q,c;for(var r,v=0,u,t=0,y=0;y<d.length;y++){var W=d[y];if(!(W<h)){var x=0;u=t;m=g=b(k,p[v]);r=l=e(k,p[v+1]);f(c.coords,p,u,v,m,r);x++;v+=q;u+=w;for(var C=
1;C<W;C++,v+=q)if(m=b(k,p[v]),r=e(k,p[v+1]),m!==g||r!==l)f(c.coords,p,u,v,m-g,r-l),u+=w,x++,g=m,l=r;x>=h&&(c.lengths.push(x),t=u)}}c.coords.length=t;return c.coords.length?c:null}function N(a,b,c,d,e,f,g){for(var h=d,k=0,l,m=f+c;m<g;m+=c){l=b[m];var n=b[m+1],p=b[g],q=b[g+1],r=b[f],w=b[f+1],v=p-r,u=q-w;if(0!==v||0!==u){var t=((l-r)*v+(n-w)*u)/(v*v+u*u);1<t?(r=p,w=q):0<t&&(r+=v*t,w+=u*t)}v=l-r;u=n-w;l=v*v+u*u;l>h&&(k=m,h=l)}h>d&&(k-f>c&&N(a,b,c,d,e,f,k),e(a,b,a.length,k,b[k],b[k+1]),g-k>c&&N(a,b,c,
d,e,k,g))}function P(a,b,c,d,e){var f=b.coords,g=b.lengths,h=c?d?T:K:d?K:I;c=n(c,d);if(!f.length)return a!==b&&(a.lengths.length=0,a.coords.length=0),a;if(!g.length)return h(a.coords,f,0,0,l(e,f[0]),k(e,f[1])),a!==b&&(a.lengths.length=0,a.coords.length=c),a;var m=e.scale;d=m[0];for(var m=m[1],p=0,q=0;q<g.length;q++){var r=g[q];a.lengths[q]=r;var w=l(e,f[p]),v=k(e,f[p+1]);h(a.coords,f,p,p,w,v);for(var p=p+c,u=1;u<r;u++,p+=c)w+=f[p]*d,v-=f[p+1]*m,h(a.coords,f,p,p,w,v)}a!==b&&(a.lengths.length=g.length,
a.coords.length=f.length);return a}Object.defineProperty(g,"__esModule",{value:!0});var L=d.getLogger("esri.tasks.support.optimizedFeatureSet"),R={esriGeometryPoint:0,esriGeometryPolyline:2,esriGeometryPolygon:3,esriGeometryMultipoint:0},I=function(a,b,c,d,e,f){a[c]=e;a[c+1]=f},K=function(a,b,c,d,e,f){a[c]=e;a[c+1]=f;a[c+2]=b[d+2]},S=function(a,b,c,d,e,f){a[c]=e;a[c+1]=f;a[c+2]=b[d+3]},T=function(a,b,c,d,e,f){a[c]=e;a[c+1]=f;a[c+2]=b[d+2];a[c+3]=b[d+3]};g.quantizeX=b;g.quantizeY=e;g.hydrateX=l;g.hydrateY=
k;g.convertToPoint=function(a,b,c){return a?b?c?u(a):y(a):c?x(a):r(a):null};g.convertFromPoint=function(a,b,c){void 0===c&&(c=w(null!=b.z,null!=b.m));return c(a,b)};g.convertToMultipoint=D;g.convertFromMultipoint=B;g.convertToPolyline=A;g.convertFromPolyline=J;g.convertToPolygon=E;g.convertFromPolygon=G;g.convertFromNestedArray=F;var V=[],U=[];g.convertFromFeature=function(a,b,c,d,e){V[0]=a;a=H(U,V,b,c,d,e)[0];V.length=U.length=0;return a};g.convertFromFeatures=H;g.convertToFeature=function(a,b,c,
d){U[0]=a;O(V,U,b,c,d);a=V[0];V.length=U.length=0;return a};g.convertFromGeometry=function(a,b,c){if(!a)return null;var d=new h.default;"hasZ"in a&&null==b&&(b=a.hasZ);"hasM"in a&&null==c&&(c=a.hasM);if(m.isPoint(a))return w(null!=b?b:null!=a.z,null!=c?c:null!=a.m)(d,a);if(m.isPolygon(a))return G(d,a,b,c);if(m.isPolyline(a))return J(d,a,n(b,c));if(m.isMultipoint(a))return B(d,a,n(b,c));L.error("convertFromGeometry:unknown-geometry",new p("Unable to parse unknown geometry type '"+a+"'"))};g.convertToGeometry=
function(a,b,c,d){a=a&&("coords"in a?a:a.geometry);if(!a)return null;switch(b){case "esriGeometryPoint":return b=r,c&&d?b=u:c?b=y:d&&(b=x),b(a);case "esriGeometryMultipoint":return D(a,c,d);case "esriGeometryPolyline":return A(a,c,d);case "esriGeometryPolygon":return E(a,c,d);default:L.error("convertToGeometry:unknown-geometry",new p("Unable to parse unknown geometry type '"+b+"'"))}};g.convertToFeatures=O;g.convertToFeatureSet=function(a){var b=a.objectIdFieldName,c=a.spatialReference,d=a.transform,
e=a.fields,f=a.hasM,g=a.hasZ,h=a.geometryType,k=a.exceededTransferLimit;a={features:O([],a.features,h,g,f),fields:e,geometryType:h,objectIdFieldName:b,spatialReference:c};d&&(a.transform=d);k&&(a.exceededTransferLimit=k);f&&(a.hasM=f);g&&(a.hasZ=g);return a};g.convertFromFeatureSet=function(a,b){var c=new f.default,d=a.hasM,e=a.hasZ,g=a.features,h=a.objectIdFieldName,k=a.spatialReference,l=a.geometryType,m=a.exceededTransferLimit,n=a.transform;c.fields=a.fields;c.geometryType=l;c.objectIdFieldName=
h||b;c.spatialReference=k;if(!c.objectIdFieldName)return L.error(new p("optimized-features:invalid-objectIdFieldName","objectIdFieldName is missing")),c;g&&H(c.features,g,l,e,d,c.objectIdFieldName);m&&(c.exceededTransferLimit=m);d&&(c.hasM=d);e&&(c.hasZ=e);n&&(c.transform=n);return c};g.hydrateOptimizedFeatureSet=function(a){var b=a.transform,c=a.hasM,d=a.hasZ;if(!b)return a;for(var e=0,f=a.features;e<f.length;e++){var g=f[e];g.geometry&&P(g.geometry,g.geometry,c,d,b);g.centroid&&P(g.centroid,g.centroid,
c,d,b)}a.transform=null;return a};g.quantizeOptimizedFeatureSet=function(a,b){var d=b.geometryType,e=b.features,f=b.hasM,g=b.hasZ;if(!a)return b;for(var k=0;k<e.length;k++){var l=e[k],m=new c.default(new h.default,l.attributes);Q(m.geometry,l.geometry,f,g,d,a);l.centroid&&(m.centroid=new h.default,Q(m.centroid,l.centroid,f,g,"esriGeometryPoint",a));e[k]=m}b.transform=a;return b};g.quantizeOptimizedGeometry=Q;g.generalizeOptimizedGeometry=function(b,c,d,e,f,g,h,k){void 0===h&&(h=d);void 0===k&&(k=
e);b.lengths.length&&(b.lengths.length=0);b.coords.length&&(b.coords.length=0);if(!c||!c.coords.length)return null;f=R[f];var l=c.coords;c=c.lengths;var m=n(d,e),p=n(d&&h,e&&k);d=a(d,e,h,k);if(!c.length)return d(b.coords,l,0,0,l[0],l[1]),b.lengths.length&&(b.lengths.length=0),b.coords.length=m,b;e=0;g*=g;for(h=0;h<c.length;h++){k=c[h];if(!(k<f)){var q=b.coords.length/p,w=e,r=e+(k-1)*m;d(b.coords,l,b.coords.length,w,l[w],l[w+1]);N(b.coords,l,m,g,d,w,r);d(b.coords,l,b.coords.length,r,l[r],l[r+1]);w=
b.coords.length/p-q;w>=f?b.lengths.push(w):b.coords.length=q*p}e+=k*m}return b.coords.length?b:null};g.getBoundsOptimizedGeometry=function(a,b,c,d){c=n(c,d);var e=d=Number.POSITIVE_INFINITY,f=Number.NEGATIVE_INFINITY,g=Number.NEGATIVE_INFINITY;if(b&&b.coords){b=b.coords;for(var h=0;h<b.length;h+=c){var k=b[h],l=b[h+1];d=Math.min(d,k);f=Math.max(f,k);e=Math.min(e,l);g=Math.max(g,l)}}a[0]=d;a[1]=e;a[2]=f;a[3]=g;return a};g.getQuantizedBoundsOptimizedGeometry=function(a,b,c,d){c=n(c,d);d=b.coords;var e=
Number.POSITIVE_INFINITY,f=Number.POSITIVE_INFINITY,g=Number.NEGATIVE_INFINITY,h=Number.NEGATIVE_INFINITY,k=0,l=0;for(b=b.lengths;l<b.length;l++)for(var m=b[l],p=d[k],q=d[k+1],e=Math.min(p,e),f=Math.min(q,f),g=Math.max(p,g),h=Math.max(q,h),k=k+c,w=1;w<m;w++,k+=c){var r=d[k],v=d[k+1],p=p+r,q=q+v;0>r&&(e=Math.min(e,p));0<r&&(g=Math.max(g,p));0>v?f=Math.min(f,q):0<v&&(h=Math.max(h,q))}a[0]=e;a[1]=f;a[2]=g;a[3]=h;return a};g.hydrateOptimizedGeometry=P;g.removeZMValues=function(b,c,d,e,f,g){var h,k=n(d,
e);d=a(d,e,f,g);e=c.coords;b.coords.length=0;b.lengths.length=0;(h=b.lengths).push.apply(h,c.lengths);for(c=0;c<e.length;c+=k)d(b.coords,e,b.coords.length,c,e[c],e[c+1]);return b};g.removeCollinearVectices=function(b,c,d,e,f){if(!c||!c.coords||!c.coords.length)return null;d=R[d];var g=c.coords;c=c.lengths;var h=a(e,f,e,f);e=n(e,f);for(var k=f=0,l=0,m=0,p=0;p<c.length;p++){var q=c[p],k=m;h(b.coords,g,k,f,g[f],g[f+1]);f+=e;var w=g[f],r=g[f+1],v=w,u=r,t=r/w,k=k+e;h(b.coords,g,k,f,v,u);f+=e;for(var y=
2;y<q;y++){var w=g[f],r=g[f+1],x=r/w,C=t===x||!isFinite(t)&&!isFinite(x),t=C&&isFinite(x)?0<=t&&0<=x||0>=t&&0>=x:0<=u&&0<=r||0>=u&&0>=r;C&&t?(v+=w,u+=r):(v=w,u=r,k+=e);h(b.coords,g,k,f,v,u);f+=e;t=x}k+=e;q=(k-m)/e;q>=d&&(b.lengths[l]=q,m=k,l++)}b.coords.length>k&&(b.coords.length=k);b.lengths.length>l&&(b.lengths.length=l);return b.coords.length?b:null}})},"esri/views/2d/arcade/utils":function(){define("require exports ../../../core/tsSupport/assignHelper @dojo/framework/shim/WeakMap ../../../core/Error ../../../core/Logger ../../../geometry/support/quantizationUtils ../../../layers/graphics/featureConversionUtils".split(" "),
function(q,g,p,d,m,c,f,h){function n(b,c,d,f){var g=f.transform,h=f.hasZ;f=f.hasM;e.has(b)||e.set(b,a(d));b=e.get(b)(c.geometry,g,h,f);return p({},c,{geometry:b})}function a(a){var c={};switch(a){case "esriGeometryPoint":return function(a,b,d,e){return f.hydratePoint(b,c,a,d,e)};case "esriGeometryPolygon":return function(a,b,d,e){return f.hydratePolygon(b,c,a,d,e)};case "esriGeometryPolyline":return function(a,b,d,e){return f.hydratePolyline(b,c,a,d,e)};case "esriGeometryMultipoint":return function(a,
b,d,e){return f.hydrateMultipoint(b,c,a,d,e)};default:return b.error(new m("mapview-arcade","Unable to handle geometryType: "+a)),function(a){return a}}}Object.defineProperty(g,"__esModule",{value:!0});var b=c.getLogger("esri.views.2d.support.arcadeOnDemand");g.callWithOptimizedFeature=function(a,c,d,e,f){var g=e.geometryType,k=e.hasZ;e=e.hasM;c=a.referencesGeometry()?f?n(a,h.convertToFeature(c,g,k,e),g,f):h.convertToFeature(c,g,k,e):c;c=a.repurposeFeature(c);try{return a.evaluate(p({},d,{$feature:c}))}catch(z){return b.warn("Feature arcade evaluation failed:",
z),null}};g.callWithFeature=function(a,c,d,e,f){c=a.referencesGeometry()&&f?n(a,c,e,f):c;c=a.repurposeFeature(c);try{return a.evaluate(p({},d,{$feature:c}))}catch(t){return b.warn("Feature arcade evaluation failed:",t),null}};var e=new d.default;g.createHydrateFactory=a})},"esri/widgets/Search/LocatorSearchSource":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/tsSupport/assignHelper ../../core/lang ../../core/accessorSupport/decorators ../../tasks/Locator ./SearchSource ./support/locatorUtils".split(" "),
function(q,g,p,d,m,c,f,h,n,a){return function(b){function e(){var c=null!==b&&b.apply(this,arguments)||this;c.categories=null;c.countryCode=null;c.defaultZoomScale=null;c.locator=null;c.locationType=null;c.name="";c.placeholder="";c.searchTemplate="";c.singleLineFieldName=null;c.suggestionsEnabled=null;c.zoomScale=null;c.getResults=function(b,d){return a.getResults(m({source:c},b),d)};c.getSuggestions=function(b,d){return a.getSuggestions(m({source:c},b),d)};return c}p(e,b);g=e;e.prototype.readLocator=
function(a,b){return(a=b.url)?new h({url:a}):null};e.prototype.writeLocator=function(a,b){b.url=a?a.url:null};e.prototype.clone=function(){return new g({autoNavigate:this.autoNavigate,filter:this.filter,maxResults:this.maxResults,maxSuggestions:this.maxSuggestions,minSuggestCharacters:this.minSuggestCharacters,outFields:this.outFields?c.clone(this.outFields):null,placeholder:this.placeholder,popupEnabled:this.popupEnabled,prefix:this.prefix,resultGraphicEnabled:this.resultGraphicEnabled,resultSymbol:this.resultSymbol?
this.resultSymbol.clone():null,searchExtent:this.searchExtent?this.searchExtent.clone():null,suggestionsEnabled:this.suggestionsEnabled,suffix:this.suffix,withinViewEnabled:this.withinViewEnabled,categories:this.categories?c.clone(this.categories):null,countryCode:this.countryCode,locationType:this.locationType,locator:this.locator,searchTemplate:this.searchTemplate,singleLineFieldName:this.singleLineFieldName,zoomScale:this.zoomScale})};var g;d([f.property()],e.prototype,"categories",void 0);d([f.property()],
e.prototype,"countryCode",void 0);d([f.property({json:{write:!0}})],e.prototype,"defaultZoomScale",void 0);d([f.property({type:h})],e.prototype,"locator",void 0);d([f.reader("locator",["url"])],e.prototype,"readLocator",null);d([f.writer("locator")],e.prototype,"writeLocator",null);d([f.property()],e.prototype,"locationType",void 0);d([f.property({json:{write:!0}})],e.prototype,"name",void 0);d([f.property({json:{write:!0}})],e.prototype,"placeholder",void 0);d([f.property()],e.prototype,"searchTemplate",
void 0);d([f.property({json:{write:!0}})],e.prototype,"singleLineFieldName",void 0);d([f.property({json:{read:{source:"suggest"},write:{target:"suggest"}}})],e.prototype,"suggestionsEnabled",void 0);d([f.property({json:{write:!0}})],e.prototype,"zoomScale",void 0);return e=g=d([f.subclass("esri.widgets.Search.LocatorSearchSource")],e)}(f.declared(n))})},"esri/tasks/Locator":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/assignHelper ../request ../core/accessorSupport/decorators ../geometry/SpatialReference ./Task ./support/AddressCandidate".split(" "),
function(q,g,p,d,m,c,f,h,n,a){return function(b){function e(a){a=b.call(this,a)||this;a.outSpatialReference=null;a.url=null;return a}p(e,b);e.prototype.addressToLocations=function(a,b){var d=a.address,e=a.categories,f=a.countryCode,g=a.forStorage,h=a.location,k=a.locationType,l=a.magicKey,n=a.maxLocations,p=a.outFields;a=a.searchExtent;var q=h?h.clone().normalize():null,B=a?a.shiftCentralMeridian():null,A=this.outSpatialReference,h=this.parsedUrl;a=this.requestOptions;e={f:"json",outSR:A?JSON.stringify(A.toJSON()):
null,outFields:p?p.join(","):null,searchExtent:B?JSON.stringify(B.toJSON()):null,category:e?e.join(","):null,countryCode:f||null,magicKey:l||null,location:q,locationType:k||null,maxLocations:n||null,forStorage:g||null};d={query:this._encode(m({},h.query,d,e))};b=m({},a,b,d);return c(h.path+"/findAddressCandidates",b).then(this._handleAddressToLocationsResponse)};e.prototype.suggestLocations=function(a,b){var d=this.parsedUrl,e=this.requestOptions,f=a.location,g=a.searchExtent,f=f?f.clone().normalize():
null,g=g?g.shiftCentralMeridian():null;a={f:"json",text:a.text,maxSuggestions:a.maxSuggestions,searchExtent:g?JSON.stringify(g.toJSON()):null,category:a.categories?a.categories.join(","):null,countryCode:a.countryCode||null,location:f};a={query:this._encode(m({},d.query,a))};b=m({},e,b,a);return c(d.path+"/suggest",b).then(this._handleSuggestLocationsResponse)};e.prototype.addressesToLocations=function(a,b){var d=this.outSpatialReference,e=this.parsedUrl,f=this.requestOptions,g=a.addresses,h=a.categories,
k=a.locationType;a=a.countryCode;var l=[];Array.isArray(g)&&g.forEach(function(a){l.push({attributes:a})});d={category:h?h.join(","):null,sourceCountry:a||null,addresses:JSON.stringify({records:l}),locationType:k||null,f:"json",outSR:d?JSON.stringify(d):null};d={query:this._encode(m({},e.query,d))};b=m({},f,b,d);return c(e.path+"/geocodeAddresses",b).then(this._handleAddressesToLocationsResponse)};e.prototype.locationToAddress=function(a,b){var d=a.locationType,e=(a=a.location)?a.clone().normalize():
null,f="undefined"!==typeof e,g=this.outSpatialReference;a=this.parsedUrl;var h=this.requestOptions,d={outSR:g?JSON.stringify(g.toJSON()):null,location:f?JSON.stringify(e.toJSON()):null,locationType:d||null,f:"json"},d={query:this._encode(m({},a.query,d))};b=m({},h,b,d);return c(a.path+"/reverseGeocode",b).then(this._handleLocationToAddressResponse)};e.prototype._handleAddressToLocationsResponse=function(b){b=b.data;if(!b)return[];var c=b.candidates,d=b.spatialReference;return c?c.map(function(b){if(b){var c=
b.extent,e=b.location,f=c?c&&"number"===typeof c.xmin&&"number"===typeof c.ymin&&"number"===typeof c.xmax&&"number"===typeof c.ymax:!0;if(e&&"number"===typeof e.x&&"number"===typeof e.y&&f)return c&&(c.spatialReference=d),e.spatialReference=d,a.fromJSON(b)}}):[]};e.prototype._handleSuggestLocationsResponse=function(a){return(a=a.data)?a.suggestions||[]:[]};e.prototype._handleAddressesToLocationsResponse=function(b){b=b.data;if(!b)return[];var c=b.locations,d=b.spatialReference;return c?c.map(function(b){var c=
b.location;c&&(c.spatialReference=d);return a.fromJSON(b)}):[]};e.prototype._handleLocationToAddressResponse=function(b){if(b=b.data){var c=b.address;return a.fromJSON({address:c&&c.Match_addr||"",attributes:c||{},location:b.location,score:100})}};d([f.property({type:h})],e.prototype,"outSpatialReference",void 0);d([f.property()],e.prototype,"url",void 0);return e=d([f.subclass("esri.tasks.Locator")],e)}(f.declared(n))})},"esri/tasks/support/AddressCandidate":function(){define("require exports ../../core/tsSupport/decorateHelper ../../core/tsSupport/declareExtendsHelper ../../core/JSONSupport ../../core/accessorSupport/decorators ../../geometry/Extent ../../geometry/Point".split(" "),
function(q,g,p,d,m,c,f,h){return function(g){function a(a){a=g.call(this,a)||this;a.address=null;a.attributes=null;a.extent=null;a.location=null;a.score=null;return a}d(a,g);p([c.property({type:String,json:{write:!0}})],a.prototype,"address",void 0);p([c.property({type:Object,json:{write:!0}})],a.prototype,"attributes",void 0);p([c.property({type:f,json:{write:!0}})],a.prototype,"extent",void 0);p([c.property({type:h,json:{write:!0}})],a.prototype,"location",void 0);p([c.property({type:Number,json:{write:!0}})],
a.prototype,"score",void 0);return a=p([c.subclass("esri.tasks.support.AddressCandidate")],a)}(c.declared(m.JSONSupport))})},"esri/widgets/Search/support/locatorUtils":function(){define("require exports ../../../Graphic ../../../core/maybe ../../../core/promiseUtils ./geometryUtils".split(" "),function(q,g,p,d,m,c){function f(a,c){var d=a.source,e=a.spatialReference,f=a.location,g=a.sourceIndex,h=a.view;a=d.locator;var l=d.zoomScale,m=d.defaultZoomScale,n=h&&h.scale;c=c&&c.signal;e&&(a.outSpatialReference=
e);return a.locationToAddress({location:f},{signal:c}).then(function(a){return b([a],{sourceIndex:g,scale:n,view:h,zoomScale:l,defaultZoomScale:m})})}function h(a,b){var d=a.filter,e=a.searchExtent;a=a.withinViewEnabled;var f=b&&b.extent;return(b=c.createExtentFromGeometry(d&&d.geometry,b,b&&b.scale))||e||(a&&f?f:void 0)}function n(a,c){var e=a.source,f=a.suggestResult,g=a.spatialReference,l=a.view,n=a.maxResults,p=a.sourceIndex,q=e&&e.zoomScale,u=e&&e.defaultZoomScale;if(!f.text.trim())return m.resolve();
a=""+(!f.key&&e.prefix?e.prefix:"")+f.text+(!f.key&&e.suffix?e.suffix:"");var v={},w=e.locator,D=l&&l.scale,B=h(e,l);c=c&&c.signal;if(!w)return m.resolve();e.categories&&(v.categories=e.categories);e.locationType&&(v.locationType=e.locationType);g&&(w.outSpatialReference=g);if(g=l&&l.get("extent.center"))v.location=g;v.maxLocations=n;B&&(v.searchExtent=d.unwrap(B));e.countryCode&&(v.countryCode=e.countryCode);var A=f.key;A&&(v.magicKey=A);v.address={};v.address[e.singleLineFieldName||"Single Line Input"]=
a;e.outFields&&(v.outFields=e.outFields);return w.addressToLocations(v,{signal:c}).then(function(a){return b(a,{key:A,scale:D,sourceIndex:p,view:l,zoomScale:q,defaultZoomScale:u})})}function a(a,b){return a.map(function(a){return{text:a.text,key:a.magicKey,sourceIndex:b}})}function b(a,b){return a.map(function(a){var d=b.key,e=b.scale,f=b.sourceIndex,g=b.view,h=b.zoomScale,k=b.defaultZoomScale,l=a.extent,m=a.location,n=a.address;a=new p({geometry:m,attributes:a.attributes});l=l||m;e=c.createExtentFromGeometry(l,
g,e);g=h?c.scaleExtent(e,g,h):k&&"point"===l.type?c.scaleExtent(e,g,k):e;m=m?m.x+","+m.y:"";return{extent:g,feature:a,key:d,name:n||m,sourceIndex:f}})}Object.defineProperty(g,"__esModule",{value:!0});g.getResults=function(a,b){return a.location?f(a,b):n(a,b)};g.getSuggestions=function(b,c){var e=b.source,f=b.spatialReference,g=b.view,l=b.suggestTerm,n=b.maxSuggestions,p=b.sourceIndex;b={};var q=e.locator,u=h(e,g);c=c&&c.signal;if(!q)return m.resolve();e.categories&&(b.categories=e.categories);q.outSpatialReference=
f;if(f=g&&g.get("extent.center"))b.location=f;if(!l.trim())return m.resolve();f=e.prefix;g=e.suffix;b.text=""+(void 0===f?"":f)+l+(void 0===g?"":g);u&&(b.searchExtent=d.unwrap(u));b.maxSuggestions=n;e.countryCode&&(b.countryCode=e.countryCode);return q.suggestLocations(b,{signal:c}).then(function(b){return a(b,p)})};g.isArcGISWorldGeocoder=function(a){return a?/(?:arcgis\.com\/arcgis\/rest\/services\/world\/geocodeserver).*/gi.test(a)||/(?:\/servers\/[\da-z\.-]+\/rest\/services\/world\/geocodeserver).*/gi.test(a):
!1}})},"*now":function(q){q(['dojo/i18n!*preload*esri/widgets/nls/Search*["ar","bs","ca","cs","da","de","el","en-au","en-ca","en-gb","en-us","es","es-mx","et","fi","fr","he","hr","hu","id","it","ja","ko","lt","lv","nl","nb","pl","pt","pt-br","pt-pt","ro","ru","sl","sr","sv","th","tr","uk","vi","zh-cn","zh-hk","zh-tw","ROOT"]'])},"*noref":1}});
define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper @dojo/framework/shim/array dojo/i18n!../nls/common dojo/i18n!./Search/nls/Search ../intl ../../esri/core/promiseUtils ../core/events ../core/Handles ../core/string ../core/watchUtils ../core/accessorSupport/decorators ./Widget ./Search/SearchResultRenderer ./Search/SearchViewModel ./support/widget".split(" "),function(q,g,p,d,m,c,f,h,n,a,b,e,l,k,r,C,y,t){var x=/<[a-z/][\s\S]*>/i;return function(g){function q(a){var c=
g.call(this,a)||this;c._handles=new b;c._inputNode=null;c._sourceMenuButtonNode=null;c._sourceListNode=null;c._suggestionListNode=null;c._searchResultRenderer=new C;c._relatedTarget=null;c.activeMenu="none";c.activeSource=null;c.activeSourceIndex=null;c.allPlaceholder=null;c.allSources=null;c.autoNavigate=null;c.autoSelect=null;c.defaultSources=null;c.goToOverride=null;c.iconClass="esri-icon-search";c.includeDefaultSources=null;c.label=f.widgetLabel;c.locationEnabled=null;c.maxResults=null;c.maxSuggestions=
null;c.minSuggestCharacters=null;c.popupEnabled=null;c.popupTemplate=null;c.portal=null;c.resultGraphic=null;c.resultGraphicEnabled=null;c.results=null;c.searchAllEnabled=null;c.searchTerm=null;c.selectedResult=null;c.sources=null;c.suggestions=null;c.suggestionsEnabled=null;c.view=null;c.viewModel=new y;c.own(l.watch(c,"searchTerm",function(a){if(a&&"warning"===c.activeMenu||!a&&!c.get("viewModel.selectedSuggestion.location"))c.activeMenu="none"}),l.on(c,"viewModel.allSources","change",function(){return c._watchSourceChanges()}),
l.init(c,["viewModel.popupTemplate","viewModel.popupTemplate.content"],function(){"{Match_addr}"===c.get("viewModel.popupTemplate.content")&&(c.viewModel.popupTemplate.content=c._renderSearchResultsContent.bind(c))}));return c}p(q,g);q.prototype.postInitialize=function(){this.viewModel.load()};q.prototype.destroy=function(){this._handles.destroy();this._handles=null;this._cancelSuggest();this._cancelSearch();this._searchResultRenderer&&(this._searchResultRenderer.viewModel=null,this._searchResultRenderer.destroy(),
this._searchResultRenderer=null)};q.prototype.clear=function(){};q.prototype.focus=function(){this._inputNode&&(this.activeMenu="suggestion",this._inputNode.focus(),this.emit("search-focus"))};q.prototype.blur=function(a){this._inputNode&&(this._inputNode.blur(),this._inputBlur(a),this.emit("search-blur"))};q.prototype.search=function(a){var b=this;this.activeMenu="none";this._cancelSuggest();this._cancelSearch();var c=n.createAbortController(),d=c.signal;this._searchController=c;return this.viewModel.search(a,
{signal:d}).catch(function(a){if(b._suggestController===c)return b.activeMenu="none",b._searchController=null,a}).then(function(a){if(b._suggestController===c)return b.activeMenu=a.numResults?"none":"warning",b._searchController=null,a})};q.prototype.suggest=function(a){var b=this;this._cancelSuggest();var c=n.createAbortController(),d=c.signal;this._suggestController=c;return this.viewModel.suggest(a,null,{signal:d}).then(function(a){if(b._suggestController===c)return b._suggestController=null,a.numResults&&
(b.activeMenu="suggestion"),b._scrollToTopSuggestion(),a}).catch(function(){if(b._suggestController===c)return b._suggestController=null})};q.prototype.render=function(){var a=this,b,d,e=this.viewModel,g=e.activeSourceIndex,k=e.suggestions,l=e.maxInputLength,m=e.placeholder,n=e.searchTerm,q=e.searchAllEnabled,p=e.allSources,r=this._getSourceName(g),u=(""+n).trim(),x=this.activeMenu,z=this.id,C=this.viewModel.state,I=this.id+"-suggest-menu",l=t.tsx("input",{bind:this,placeholder:m,"aria-label":f.searchButtonTitle,
maxlength:l,autocomplete:"off",type:"text",tabindex:"0",class:this.classes("esri-input","esri-search__input"),"aria-autocomplete":"list",value:n,"aria-haspopup":"true","aria-owns":I,role:"textbox",onkeydown:this._handleInputKeydown,onkeyup:this._handleInputKeyup,onclick:this._handleInputClick,oninput:this._handleInputPaste,onpaste:this._handleInputPaste,afterCreate:t.storeNode,"data-node-ref":"_inputNode",onfocusout:this._storeRelatedTarget,onfocus:this.focus,onblur:this.blur,title:n?"":m}),l=t.tsx("form",
{key:"esri-search__form",bind:this,class:"esri-search__form",onsubmit:this._formSubmit,role:"search"},l),m=n?t.tsx("div",{key:"esri-search__clear-button",bind:this,role:"button",class:this.classes("esri-search__clear-button","esri-widget--button"),tabindex:"0",title:f.clearButtonTitle,onfocus:this._clearButtonFocus,onclick:this._handleClearButtonClick,onkeydown:this._handleClearButtonClick},t.tsx("span",{"aria-hidden":"true",class:"esri-icon-close"})):null,K=this.locationEnabled&&!u?t.tsx("ul",{key:"esri-search__suggestion-list-current-location",
class:this.classes("esri-menu__list","esri-search__suggestions-list","esri-search__suggestions-list--current-location")},t.tsx("li",{bind:this,onclick:this._handleUseCurrentLocationClick,onkeydown:this._handleUseCurrentLocationClick,onkeyup:this._handleSuggestionKeyup,role:"menuitem",class:"esri-menu__list-item",tabindex:"-1"},t.tsx("span",{"aria-hidden":"true",role:"presentation",class:"esri-icon-locate-circled"})," ",f.useCurrentLocation)):null,S=1<p.length&&g===y.ALL_INDEX,g=k?k.map(function(b){var c=
b.sourceIndex,d=b.results.length,e=d&&S?a._getSuggestionHeaderNode(c):null;b=b.results.map(function(b,c){return a._getSuggestionNode(b,c)});c=d?t.tsx("ul",{key:"esri-search__suggestion-list-"+c,class:a.classes("esri-menu__list","esri-search__suggestions-list")},b):null;return[e,c]}):null,I=t.tsx("div",{id:I,"aria-expanded":"suggestion"===x,key:"esri-search__suggestions-menu",class:this.classes("esri-menu","esri-search__suggestions-menu"),role:"menu",bind:this,afterCreate:t.storeNode,"data-node-ref":"_suggestionListNode"},
K,g),I=t.tsx("div",{key:"esri-search__input-container",class:"esri-search__input-container"},l,I,m),g=t.tsx("div",{key:"esri-search__submit-button",bind:this,role:"button",title:f.searchButtonTitle,class:this.classes("esri-search__submit-button","esri-widget--button"),tabindex:"0",onclick:this._handleSearchButtonClick,onkeydown:this._handleSearchButtonClick},t.tsx("span",{"aria-hidden":"true",role:"presentation",class:"esri-icon-search"}),t.tsx("span",{class:"esri-icon-font-fallback-text"},f.searchButtonTitle)),
n=u?h.substitute(f.noResultsFoundForValue,{value:'"'+n+'"'}):f.noResultsFound,n=e.get("selectedSuggestion.location")||u?t.tsx("div",{key:"esri-search__no_results"},t.tsx("div",{class:"esri-search__warning-header"},f.noResults),t.tsx("div",{class:"esri-search__warning-text"},n)):null,e=e.get("selectedSuggestion.location")||u?null:t.tsx("div",{key:"esri-search__empty-search"},t.tsx("span",{"aria-hidden":"true",class:"esri-icon-notice-triangle"}),t.tsx("span",{class:"esri-search__no-value-text"},f.emptyValue)),
e=t.tsx("div",{key:"esri-search__error-menu",class:this.classes("esri-menu","esri-search__warning-menu")},t.tsx("div",{class:"esri-search__warning-body"},n,e)),u=1<p.length,p=p&&p.toArray(),q=q?this._getSourceNode(y.ALL_INDEX):null,z=z+"-source-menu",r=u?t.tsx("div",{key:"esri-search__source-menu-button",bind:this,role:"button",title:f.searchIn,"aria-haspopup":"true","aria-expanded":"source"===x,"aria-controls":z,class:this.classes("esri-search__sources-button","esri-widget--button"),tabindex:"0",
onkeydown:this._handleSourceMenuButtonKeydown,onclick:this._handleSourcesMenuToggleClick,onkeyup:this._handleSourceMenuButtonKeyup,onblur:this._sourcesButtonBlur,afterCreate:t.storeNode,"data-node-ref":"_sourceMenuButtonNode"},t.tsx("span",{"aria-hidden":"true",role:"presentation",class:"esri-icon-down-arrow esri-search__sources-button--down"}),t.tsx("span",{"aria-hidden":"true",role:"presentation",class:"esri-icon-up-arrow esri-search__sources-button--up"}),t.tsx("span",{class:"esri-search__source-name"},
r)):null,q=u?t.tsx("ul",{bind:this,afterCreate:t.storeNode,"data-node-ref":"_sourceListNode",class:"esri-menu__list"},q,p.map(function(b,c){return a._getSourceNode(c)})):null,z=t.tsx("div",{id:z,key:"esri-search__source-menu",class:this.classes("esri-menu","esri-search__sources-menu"),role:"menu"},q),x=(b={},b["esri-search--multiple-sources"]=u,b["esri-search--loading"]="loading"===C,b["esri-search--searching"]="searching"===C,b["esri-search--warning"]="warning"===x,b["esri-search--sources"]="source"===
x,b["esri-search--show-suggestions"]="suggestion"===x,b);b=(d={},d["esri-disabled"]="disabled"===C,d);d="loading"===C?t.tsx("div",{role:"presentation",class:"esri-widget__loader",key:"base-loader"},t.tsx("span",{"aria-hidden":"true",role:"presentation",class:"esri-widget__loader-animation"}),t.tsx("span",{class:"esri-icon-font-fallback-text"},f.searchButtonTitle),t.tsx("span",{class:"esri-widget__loader-text"},c.loading)):t.tsx("div",{role:"presentation",class:this.classes(x,"esri-search__container"),
key:"base-container"},r,z,I,g,e);return t.tsx("div",{class:this.classes("esri-search esri-widget",b)},d)};q.prototype._watchSourceChanges=function(){var a=this,b=this._handles,c=this.viewModel.allSources;b.remove("sources");c.forEach(function(c){return b.add(l.watch(c,"name",function(){return a.scheduleRender()}),"sources")})};q.prototype._handleSourceMenuButtonKeydown=function(b){var c=a.eventKey(b);"ArrowUp"===c||"ArrowDown"===c||"End"===c||"Home"===c?(b.preventDefault(),b.stopPropagation(),this.activeMenu=
"source"):this._handleSourcesMenuToggleClick(b)};q.prototype._handleSourcesMenuToggleClick=function(b){var c="source"===this.activeMenu;this.activeMenu=c?"none":"source";this.renderNow();c?this._sourceMenuButtonNode&&this._sourceMenuButtonNode.focus():(c=this._sourceListNode?this._sourceListNode.getElementsByTagName("li"):null)&&(b="End"===a.eventKey(b)?c[c.length-1]:c[0])&&b.focus()};q.prototype._handleClearButtonClick=function(){this.viewModel.clear();this._focus()};q.prototype._handleSearchButtonClick=
function(){this.search()};q.prototype._handleSuggestionClick=function(a){if(a=a.currentTarget["data-suggestion"])this._focus(),this.search(a)};q.prototype._handleUseCurrentLocationClick=function(){var a=this;this._focus("none");this._cancelSuggest();this._cancelSearch();var b=n.createAbortController(),c=b.signal;this._searchController=b;this.viewModel.searchNearby({signal:c}).catch().then(function(){a._searchController=null})};q.prototype._handleSourceClick=function(a){this.viewModel.activeSourceIndex=
a.currentTarget["data-source-index"];this._focus("none")};q.prototype._sourcesButtonBlur=function(a){this._removeActiveMenu(a&&a.relatedTarget,this._sourceListNode)};q.prototype._inputBlur=function(a){a=a&&a.relatedTarget;this._removeActiveMenu(a?a:this._relatedTarget,this._suggestionListNode)};q.prototype._storeRelatedTarget=function(a){this._relatedTarget=a.relatedTarget};q.prototype._clearButtonFocus=function(){this.activeMenu="none"};q.prototype._removeActiveMenu=function(a,b){!a||a&&b&&b.contains(a)||
(this.activeMenu="none")};q.prototype._cancelSuggest=function(){this._suggestController&&(this._suggestController.abort(),this._suggestController=null)};q.prototype._cancelSearch=function(){this._searchController&&(this._searchController.abort(),this._searchController=null)};q.prototype._handleInputKeydown=function(b){var c=a.eventKey(b);("Tab"===c||"Escape"===c||b.shiftKey&&"Tab"===c)&&this._cancelSuggest()};q.prototype._handleInputKeyup=function(b){var c=a.eventKey(b),d=b.ctrlKey||b.metaKey||"Copy"===
c||"ArrowLeft"===c||"ArrowRight"===c||"Enter"===c||"Shift"===c,e=this._suggestionListNode?this._suggestionListNode.getElementsByTagName("li"):null;d||("Tab"===c||"Escape"===c||b.shiftKey&&"Tab"===c?(this._cancelSuggest(),"Escape"===c&&(this.activeMenu="none")):"ArrowUp"!==c&&"ArrowDown"!==c||!e?this.viewModel.searchTerm&&this.suggest():(this.activeMenu="suggestion",b.stopPropagation(),b.preventDefault(),this._cancelSuggest(),(b=e["ArrowUp"===c?e.length-1:0])&&b.focus()))};q.prototype._scrollToTopSuggestion=
function(){this._suggestionListNode&&(this._suggestionListNode.scrollTop=0)};q.prototype._handleInputClick=function(){this.activeMenu="suggestion"};q.prototype._handleInputPaste=function(a){a=a.target;this.viewModel.searchTerm!==a.value&&(this.viewModel.searchTerm=a.value);this.viewModel.searchTerm&&this.suggest()};q.prototype._handleSourceMenuButtonKeyup=function(b){var c=a.eventKey(b);if("ArrowUp"===c||"ArrowDown"===c||"Home"===c||"End"===c)b.stopPropagation(),b.preventDefault(),(b=this._sourceListNode?
this._sourceListNode.getElementsByTagName("li"):null)&&(c=b["ArrowUp"===c||"End"===c?b.length-1:0])&&c.focus()};q.prototype._handleSourceKeyup=function(b){var c=b.target,d=this._sourceListNode?m.from(this._sourceListNode.getElementsByTagName("li")):null,e=a.eventKey(b);if("Escape"===e)this._focus("none"),this._sourceMenuButtonNode&&this._sourceMenuButtonNode.focus();else if(d){c=d.indexOf(c);if("Home"===e||"End"===e||"ArrowUp"===e||"ArrowDown"===e)b.stopPropagation(),b.preventDefault();"Home"===e?
(d=d[0])&&d.focus():"End"===e?(d=d[d.length-1])&&d.focus():"ArrowUp"===e?(b=c-1,(d=0>b?this._sourceMenuButtonNode:d[b])&&d.focus()):"ArrowDown"===e&&(b=c+1,(d=b>=d.length?this._sourceMenuButtonNode:d[b])&&d.focus())}};q.prototype._handleSuggestionKeyup=function(b){var c=b.target,d=this._suggestionListNode?m.from(this._suggestionListNode.getElementsByTagName("li")):null,c=d.indexOf(c),e=a.eventKey(b);this._cancelSuggest();if("Backspace"===e||"Delete"===e)this._focus();else if("Escape"===e)this._focus("none");
else if(d){if("Home"===e||"End"===e||"ArrowUp"===e||"ArrowDown"===e)b.stopPropagation(),b.preventDefault();"Home"===e&&(b=d[0])&&b.focus();"End"===e&&(b=d[d.length-1])&&b.focus();"ArrowUp"===e?(--c,(d=0>c?d[d.length-1]:d[c])&&d.focus()):"ArrowDown"===e&&(c+=1,(d=c>=d.length?d[0]:d[c])&&d.focus())}};q.prototype._focus=function(a){this.focus();a&&(this.activeMenu=a)};q.prototype._formSubmit=function(a){a.preventDefault();this.search()};q.prototype._getSourceName=function(a){var b=this.viewModel.allSources.getItemAt(a);
return a===y.ALL_INDEX?f.all:b?b.name||f.untitledSource:f.untitledSource};q.prototype._getSuggestionHeaderNode=function(a){var b=this._getSourceName(a);return t.tsx("div",{key:"esri-search__suggestion-header-"+a,class:"esri-menu__header"},b)};q.prototype._splitResult=function(a,b){b=e.escapeRegExpString(b);return a.replace(new RegExp("(^|)("+b+")(|$)","ig"),"$1|$2|$3").split("|")};q.prototype._getSuggestionNode=function(a,b){var c=this.viewModel.searchTerm;if(c){var d=a.text||f.untitledResult,e=[];
if(x.test(d))e.push(t.tsx("div",{innerHTML:d}));else{var d=this._splitResult(d,c),g=c.toLowerCase();d.forEach(function(a,b){a&&a.length&&(a.toLowerCase()===g?e.push(t.tsx("strong",{key:b},a)):e.push(a))})}return t.tsx("li",{bind:this,onclick:this._handleSuggestionClick,onkeydown:this._handleSuggestionClick,onkeyup:this._handleSuggestionKeyup,key:"esri-search__suggestion$-{sourceIndex}_"+b,"data-suggestion":a,role:"menuitem",class:"esri-menu__list-item",tabindex:"-1"},e)}};q.prototype._getSourceNode=
function(a){var b,c=(b={},b["esri-menu__list-item--active"]=a===this.viewModel.activeSourceIndex,b);return t.tsx("li",{bind:this,key:"esri-search__source-"+a,onclick:this._handleSourceClick,onkeydown:this._handleSourceClick,onkeyup:this._handleSourceKeyup,"data-source-index":a,role:"menuitem",class:this.classes("esri-search__source","esri-menu__list-item",c),tabindex:"-1"},this._getSourceName(a))};q.prototype._renderSearchResultsContent=function(){this._searchResultRenderer.showMoreResultsOpen=!1;
this._searchResultRenderer.viewModel=this.viewModel;return this._searchResultRenderer};d([k.property(),t.renderable()],q.prototype,"activeMenu",void 0);d([k.aliasOf("viewModel.activeSource"),t.renderable()],q.prototype,"activeSource",void 0);d([k.aliasOf("viewModel.activeSourceIndex"),t.renderable()],q.prototype,"activeSourceIndex",void 0);d([k.aliasOf("viewModel.allPlaceholder"),t.renderable()],q.prototype,"allPlaceholder",void 0);d([k.aliasOf("viewModel.allSources")],q.prototype,"allSources",void 0);
d([k.aliasOf("viewModel.autoNavigate")],q.prototype,"autoNavigate",void 0);d([k.aliasOf("viewModel.autoSelect")],q.prototype,"autoSelect",void 0);d([k.aliasOf("viewModel.defaultSources")],q.prototype,"defaultSources",void 0);d([k.aliasOf("viewModel.goToOverride")],q.prototype,"goToOverride",void 0);d([k.property()],q.prototype,"iconClass",void 0);d([k.aliasOf("viewModel.includeDefaultSources")],q.prototype,"includeDefaultSources",void 0);d([k.property()],q.prototype,"label",void 0);d([t.renderable(),
k.aliasOf("viewModel.locationEnabled")],q.prototype,"locationEnabled",void 0);d([k.aliasOf("viewModel.maxResults")],q.prototype,"maxResults",void 0);d([k.aliasOf("viewModel.maxSuggestions")],q.prototype,"maxSuggestions",void 0);d([k.aliasOf("viewModel.minSuggestCharacters")],q.prototype,"minSuggestCharacters",void 0);d([k.aliasOf("viewModel.popupEnabled")],q.prototype,"popupEnabled",void 0);d([k.aliasOf("viewModel.popupTemplate")],q.prototype,"popupTemplate",void 0);d([k.aliasOf("viewModel.portal")],
q.prototype,"portal",void 0);d([k.aliasOf("viewModel.resultGraphic")],q.prototype,"resultGraphic",void 0);d([k.aliasOf("viewModel.resultGraphicEnabled")],q.prototype,"resultGraphicEnabled",void 0);d([k.aliasOf("viewModel.results"),t.renderable()],q.prototype,"results",void 0);d([k.aliasOf("viewModel.searchAllEnabled"),t.renderable()],q.prototype,"searchAllEnabled",void 0);d([k.aliasOf("viewModel.searchTerm"),t.renderable()],q.prototype,"searchTerm",void 0);d([k.aliasOf("viewModel.selectedResult")],
q.prototype,"selectedResult",void 0);d([k.aliasOf("viewModel.sources")],q.prototype,"sources",void 0);d([k.aliasOf("viewModel.suggestions"),t.renderable()],q.prototype,"suggestions",void 0);d([k.aliasOf("viewModel.suggestionsEnabled")],q.prototype,"suggestionsEnabled",void 0);d([k.aliasOf("viewModel.view"),t.renderable()],q.prototype,"view",void 0);d([t.vmEvent("search-complete search-clear search-start select-result suggest-start suggest-complete".split(" ")),k.property({type:y}),t.renderable(["viewModel.allSources",
"viewModel.activeSource.placeholder","viewModel.activeSource.name","viewModel.state"])],q.prototype,"viewModel",void 0);d([k.aliasOf("viewModel.clear")],q.prototype,"clear",null);d([t.accessibleHandler()],q.prototype,"_handleSourcesMenuToggleClick",null);d([t.accessibleHandler()],q.prototype,"_handleClearButtonClick",null);d([t.accessibleHandler()],q.prototype,"_handleSearchButtonClick",null);d([t.accessibleHandler()],q.prototype,"_handleSuggestionClick",null);d([t.accessibleHandler()],q.prototype,
"_handleUseCurrentLocationClick",null);d([t.accessibleHandler()],q.prototype,"_handleSourceClick",null);return q=d([k.subclass("esri.widgets.Search")],q)}(k.declared(r))});