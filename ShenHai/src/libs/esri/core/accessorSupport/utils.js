// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.14/esri/copyright.txt for details.
//>>built
define(["require","exports","../lang"],function(r,c,p){function h(a,b,d){return b?Object.keys(b).reduce(function(a,e){var c=null,f="merge";d&&(c=d.path?d.path+"."+e:e,f=d.policy(c));if("replace"===f)return a[e]=b[e],a;if(void 0===a[e])return a[e]=p.clone(b[e]),a;var g=a[e],f=b[e];if(g===f)return a;if(Array.isArray(f)||Array.isArray(a))g=g?Array.isArray(g)?a[e]=g.concat():a[e]=[g]:a[e]=[],f&&(Array.isArray(f)||(f=[f]),f.forEach(function(a){-1===g.indexOf(a)&&g.push(a)}));else if(f&&"object"===typeof f)if(d){var q=
d.path;d.path=c;a[e]=h(g,f,d);d.path=q}else a[e]=h(g,f,null);else if(!a.hasOwnProperty(e)||b.hasOwnProperty(e))a[e]=f;return a},a||{}):a}function k(a){return Array.isArray(a)?a:a.split(".")}function l(a){if(Array.isArray(a)||-1<a.indexOf(",")){a=Array.isArray(a)?a:a.split(",");for(var b=0;b<a.length;b++)a[b]=a[b].trim();return 1===a.length?a[0]:a}return a.trim()}function m(a){return{remove:n(function(){return a.forEach(function(a){return a.remove()})})}}function n(a){var b=!1;return function(){b||
(b=!0,a())}}Object.defineProperty(c,"__esModule",{value:!0});c.getProperties=function(a){return a?a.__accessor__?a.__accessor__:a.propertyInvalidated?a:null:null};c.isPropertyDeclared=function(a,b){return a&&a.metadatas&&null!=a.metadatas[b]};c.merge=function(a,b,d){return d?h(a,b,{policy:d,path:""}):h(a,b,null)};c.pathToStringOrArray=function(a){return!a||"string"===typeof a&&-1===a.indexOf(".")?a:k(a)};c.pathToArray=k;c.splitPath=l;c.parseConditionalPath=function(a){if(-1===a.indexOf("?"))return null;
a=k(a);for(var b=Array(a.length),d=0;d<a.length;d++){var c=a[d];b[d]="?"===c[c.length-1];b[d]&&(a[d]=c.slice(0,-1))}return{fullPath:a.join("."),conditional:b}};c.handlesGroup=m;c.parse=function(a,b,d,c){b=l(b);return Array.isArray(b)?(b=b.map(function(b){return c(a,b.trim(),d)}),m(b)):c(a,b.trim(),d)};c.once=n});