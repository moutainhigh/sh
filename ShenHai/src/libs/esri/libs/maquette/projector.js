// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.14/esri/copyright.txt for details.
//>>built
define(["require","exports","./dom"],function(v,l,m){Object.defineProperty(l,"__esModule",{value:!0});var q;q=Array.prototype.find?function(e,d){return e.find(d)}:function(e,d){return e.filter(d)[0]};var r=function(e,d){var c=e;d.forEach(function(d){c=c&&c.children?q(c.children,function(c){return c.domNode===d}):void 0});return c},t=function(e,d,c){var f=function(g){c("domEvent",g);var a=d(),b;b=g.currentTarget;for(var f=a.domNode,h=[];b!==f;)h.push(b),b=b.parentNode;b=h;b.reverse();a=r(a.getLastRender(),
b);e.scheduleRender();var k;a&&(k=a.properties["on"+g.type].apply(a.properties.bind||this,arguments));c("domEventProcessed",g);return k};return function(c,a,d,e){return f}};l.createProjector=function(e){var d,c=m.applyDefaultProjectionOptions(e),f=c.performanceLogger,g=!0,a,b=!1,n=[],h=[],k=function(u,p,a){var b;c.eventHandlerInterceptor=t(d,function(){return b},f);b=u(p,a(),c);n.push(b);h.push(a)},l=function(){a=void 0;if(g){g=!1;f("renderStart",void 0);for(var b=0;b<n.length;b++){var p=h[b]();f("rendered",
void 0);n[b].update(p);f("patched",void 0)}f("renderDone",void 0);g=!0}};return d={renderNow:l,scheduleRender:function(){a||b||(a=requestAnimationFrame(l))},stop:function(){a&&(cancelAnimationFrame(a),a=void 0);b=!0},resume:function(){b=!1;g=!0;d.scheduleRender()},append:function(b,a){k(m.dom.append,b,a)},insertBefore:function(b,a){k(m.dom.insertBefore,b,a)},merge:function(b,a){k(m.dom.merge,b,a)},replace:function(b,a){k(m.dom.replace,b,a)},detach:function(b){for(var a=0;a<h.length;a++)if(h[a]===
b)return h.splice(a,1),n.splice(a,1)[0];throw Error("renderFunction was not found");}}}});