// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.14/esri/copyright.txt for details.
//>>built
require({cache:{"esri/identity/IdentityManagerDialog":function(){define("../core/declare dojo/dom-attr dojo/keys dijit/registry dijit/Dialog ../kernel ../core/lang ../core/Error ../core/domUtils ../core/promiseUtils ../intl/substitute ./IdentityManagerBase dojo/i18n!./nls/identity dijit/form/Button dijit/form/Form dijit/form/ValidationTextBox".split(" "),function(n,h,m,l,e,c,b,f,k,a,d,q,p){var x=d.substitute,w=q.Credential;return n([q.IdentityManagerBase],{declaredClass:"esri.identity.IdentityManager",
constructor:function(a){b.mixin(this,a)},_dialogContent:"\x3cdiv data-dojo-type\x3d'dijit.form.Form' data-dojo-props\x3d'\"class\":\"esriIdForm\"'\x3e\x3cdiv class\x3d'dijitDialogPaneContentArea'\x3e\x3cdiv style\x3d'padding-bottom: 5px; word-wrap: break-word;'\x3e{info}\x3c/div\x3e\x3cdiv style\x3d'margin: 0px; padding: 0px; height: 10px;'\x3e\x3c/div\x3e\x3cdiv class\x3d'esriErrorMsg' style\x3d'display: none; color: white; background-color: #D46464; text-align: center; padding-top: 3px; padding-bottom: 3px;'\x3e{invalidUser}\x3c/div\x3e\x3cdiv style\x3d'margin: 0px; padding: 0px; height: 10px;'\x3e\x3c/div\x3e\x3ctable style\x3d'width: 100%;'\x3e\x3ctr\x3e\x3ctd\x3e\x3clabel\x3e{lblUser}\x3cbr/\x3e\x3cinput data-dojo-type\x3d'dijit.form.ValidationTextBox' data-dojo-props\x3d'type:\"text\", \"class\":\"esriIdUser\", required:true, trim:true, style:\"width: 100%;\", autocapitalize:\"none\", autocorrect:\"off\", spellcheck:false' /\x3e\x3c/label\x3e\x3c/td\x3e\x3c/tr\x3e\x3ctr\x3e\x3ctd\x3e\x3clabel\x3e{lblPwd}\x3cbr/\x3e\x3cinput data-dojo-type\x3d'dijit.form.ValidationTextBox' data-dojo-props\x3d'type:\"password\", \"class\":\"esriIdPwd\", required:true, style:\"width: 100%;\"' /\x3e\x3c/label\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e\x3c/div\x3e\x3cdiv class\x3d'dijitDialogPaneActionBar'\x3e\x3cbutton data-dojo-type\x3d'dijit.form.Button' data-dojo-props\x3d'type:\"button\", \"class\":\"esriIdSubmit\"'\x3e{lblOk}\x3c/button\x3e\x3cbutton data-dojo-type\x3d'dijit.form.Button' data-dojo-props\x3d'type:\"button\", \"class\":\"esriIdCancel\"'\x3e{lblCancel}\x3c/button\x3e\x3c/div\x3e\x3c/div\x3e",
signIn:function(d,e,c){this._nls||(this._nls=p);this._loginDialog||(this._loginDialog=this.dialog=this._createLoginDialog(),this.emit("dialog-create"));var b=this._loginDialog,q=c&&c.error,v=c&&c.token,r=a.createResolver();if(c&&c.signal)a.onAbort(c.signal,function(){b.onCancel()});if(b.open)return d=new f("identity-manager:busy","BUSY"),r.reject(d),r.promise;k.hide(b.errMsg_);q&&q.details&&403==q.details.httpStatus&&v&&(h.set(b.errMsg_,"innerHTML",this._nls.forbidden),k.show(b.errMsg_));b.dfd_=r;
b.serverInfo_=e;b.resUrl_=d;b.admin_=c&&c.isAdmin;b.signal_=c&&c.signal;h.set(b.resLink_,{title:d,innerHTML:"("+(this.getResourceName(d)||this._nls.lblItem)+")"});h.set(b.serverLink_,{title:e.server,innerHTML:(-1!==e.server.toLowerCase().indexOf("arcgis.com")?"ArcGIS Online":e.server)+" "});b.txtPwd_.set("value","");b.show();return r.promise},_createLoginDialog:function(){var a=this._nls,d=x(this._dialogContent,a),d=x(d,{resource:"\x3cspan class\x3d'resLink' style\x3d'word-wrap: break-word;'\x3e\x3c/span\x3e",
server:"\x3cspan class\x3d'serverLink' style\x3d'word-wrap: break-word;'\x3e\x3c/span\x3e"}),b=new e({title:a.title,content:d,"class":" esri-widget esriSignInDialog esriIdentityDialog",style:"width: 18em;",esriIdMgr_:this,onShow:function(){this.domNode.classList.add("esriIdentityDialog--visible")},onHide:function(){this.domNode.classList.remove("esriIdentityDialog--visible")},keypressed_:function(a){a.charOrCode===m.ENTER&&this.execute_()},execute_:function(){var b=this.txtUser_.get("value"),d=this.txtPwd_.get("value"),
f=this.dfd_,r=this;if(this.form_.validate()&&b&&d){this.btnSubmit_.set("label",a.lblSigning);var q=c.id.findCredential(r.resUrl_,b),p=function(d){r.btnSubmit_.set("label",a.lblOk);r.btnSubmit_.set("disabled",!1);k.hide(r.errMsg_);r.hide();e._DialogLevelManager.hide(r);var c=r.serverInfo_;r.dfd_=r.serverInfo_=r.generateDfd_=r.resUrl_=r.signal_=null;var p,v,g=q,A;d&&(p=d.token,v=null!=d.expires?Number(d.expires):null,A=!!d.ssl,g?(g.userId=b,g.token=p,g.expires=v,g.validity=d.validity,g.ssl=A,g.creationTime=
Date.now()):g=new w({userId:b,server:c.server,token:p,expires:v,ssl:A,isAdmin:r.admin_,validity:d.validity}));f.resolve(g)};q&&!q._enqueued?p():(r.btnSubmit_.set("disabled",!0),r.generateDfd_=c.id.generateToken(this.serverInfo_,{username:b,password:d},{isAdmin:this.admin_,signal:this.signal_}).then(p,function(b){r.btnSubmit_.set("disabled",!1);r.generateDfd_=null;r.btnSubmit_.set("label",a.lblOk);h.set(r.errMsg_,"innerHTML",b&&b.details&&b.details.httpStatus?a.invalidUser:a.noAuthService);k.show(r.errMsg_)}))}},
cancel_:function(){var a=b.dfd_,d=b.resUrl_,c=b.serverInfo_;b.btnSubmit_.set("disabled",!1);b.dfd_=b.serverInfo_=b.generateDfd_=b.resUrl_=b.signal_=null;k.hide(b.errMsg_);e._DialogLevelManager.hide(b);b.esriIdMgr_.emit("dialog-cancel",{resourceUrl:d,serverInfo:c});d=new f("identity-manager:user-aborted","ABORTED");a.reject(d)}}),d=b.domNode;b.form_=l.byNode(d.getElementsByClassName("esriIdForm")[0]);b.txtUser_=l.byNode(d.getElementsByClassName("esriIdUser")[0]);b.txtPwd_=l.byNode(d.getElementsByClassName("esriIdPwd")[0]);
b.btnSubmit_=l.byNode(d.getElementsByClassName("esriIdSubmit")[0]);b.btnCancel_=l.byNode(d.getElementsByClassName("esriIdCancel")[0]);b.resLink_=d.getElementsByClassName("resLink")[0];b.serverLink_=d.getElementsByClassName("serverLink")[0];b.errMsg_=d.getElementsByClassName("esriErrorMsg")[0];b.connect(b.txtUser_,"onKeyPress",b.keypressed_);b.connect(b.txtPwd_,"onKeyPress",b.keypressed_);b.connect(b.btnSubmit_,"onClick",b.execute_);b.connect(b.btnCancel_,"onClick",b.onCancel);b.connect(b,"onCancel",
b.cancel_);return b}})})},"dijit/registry":function(){define(["dojo/_base/array","dojo/_base/window","./main"],function(n,h,m){var l={},e={},c={length:0,add:function(b){if(e[b.id])throw Error("Tried to register widget with id\x3d\x3d"+b.id+" but that id is already registered");e[b.id]=b;this.length++},remove:function(b){e[b]&&(delete e[b],this.length--)},byId:function(b){return"string"==typeof b?e[b]:b},byNode:function(b){return e[b.getAttribute("widgetId")]},toArray:function(){var b=[],f;for(f in e)b.push(e[f]);
return b},getUniqueId:function(b){var f;do f=b+"_"+(b in l?++l[b]:l[b]=0);while(e[f]);return"dijit"==m._scopeName?f:m._scopeName+"_"+f},findWidgets:function(b,f){function k(b){for(b=b.firstChild;b;b=b.nextSibling)if(1==b.nodeType){var d=b.getAttribute("widgetId");d?(d=e[d])&&a.push(d):b!==f&&k(b)}}var a=[];k(b);return a},_destroyAll:function(){m._curFocus=null;m._prevFocus=null;m._activeStack=[];n.forEach(c.findWidgets(h.body()),function(b){b._destroyed||(b.destroyRecursive?b.destroyRecursive():b.destroy&&
b.destroy())})},getEnclosingWidget:function(b){for(;b;){var f=1==b.nodeType&&b.getAttribute("widgetId");if(f)return e[f];b=b.parentNode}return null},_hash:e};return m.registry=c})},"dijit/main":function(){define(["dojo/_base/kernel"],function(n){return n.dijit})},"dijit/Dialog":function(){define("require dojo/_base/array dojo/aspect dojo/_base/declare dojo/Deferred dojo/dom dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/_base/fx dojo/i18n dojo/keys dojo/_base/lang dojo/on dojo/ready dojo/sniff dojo/touch dojo/window dojo/dnd/Moveable dojo/dnd/TimedMoveable ./focus ./_base/manager ./_Widget ./_TemplatedMixin ./_CssStateMixin ./form/_FormMixin ./_DialogMixin ./DialogUnderlay ./layout/ContentPane ./layout/utils dojo/text!./templates/Dialog.html ./a11yclick dojo/i18n!./nls/common".split(" "),
function(n,h,m,l,e,c,b,f,k,a,d,q,p,x,w,v,C,D,u,t,z,r,E,H,I,G,L,J,g,A,B){function y(){}var N=new e;N.resolve(!0);r=l("dijit._DialogBase"+(v("dojo-bidi")?"_NoBidi":""),[H,G,L,I],{templateString:B,baseClass:"dijitDialog",cssStateNodes:{closeButtonNode:"dijitDialogCloseIcon"},_setTitleAttr:{node:"titleNode",type:"innerHTML"},open:!1,duration:r.defaultDuration,refocus:!0,autofocus:!0,_firstFocusItem:null,_lastFocusItem:null,draggable:!0,_setDraggableAttr:function(g){this._set("draggable",g)},maxRatio:.9,
closable:!0,_setClosableAttr:function(g){this.closeButtonNode.style.display=g?"":"none";this._set("closable",g)},postMixInProperties:function(){var g=d.getLocalization("dijit","common");p.mixin(this,g);this.inherited(arguments)},postCreate:function(){k.set(this.domNode,{display:"none",position:"absolute"});this.ownerDocumentBody.appendChild(this.domNode);this.inherited(arguments);m.after(this,"onExecute",p.hitch(this,"hide"),!0);m.after(this,"onCancel",p.hitch(this,"hide"),!0);x(this.closeButtonNode,
C.press,function(g){g.stopPropagation()});this._modalconnects=[]},onLoad:function(){this.resize();this._position();this.autofocus&&P.isTop(this)&&(this._getFocusItems(),z.focus(this._firstFocusItem));this.inherited(arguments)},focus:function(){this._getFocusItems();z.focus(this._firstFocusItem)},_endDrag:function(){var g=f.position(this.domNode),a=D.getBox(this.ownerDocument);g.y=Math.min(Math.max(g.y,0),a.h-g.h);g.x=Math.min(Math.max(g.x,0),a.w-g.w);this._relativePosition=g;this._position()},_setup:function(){var g=
this.domNode;this.titleBar&&this.draggable?(this._moveable=new (6==v("ie")?t:u)(g,{handle:this.titleBar}),m.after(this._moveable,"onMoveStop",p.hitch(this,"_endDrag"),!0)):b.add(g,"dijitDialogFixed");this.underlayAttrs={dialogId:this.id,"class":h.map(this["class"].split(/\s/),function(g){return g+"_underlay"}).join(" "),_onKeyDown:p.hitch(this,"_onKey"),ownerDocument:this.ownerDocument}},_size:function(){this.resize()},_position:function(){if(!b.contains(this.ownerDocumentBody,"dojoMove")){var g=
this.domNode,a=D.getBox(this.ownerDocument),d=this._relativePosition,c=f.position(g);k.set(g,{left:Math.floor(a.l+(d?Math.min(d.x,a.w-c.w):(a.w-c.w)/2))+"px",top:Math.floor(a.t+(d?Math.min(d.y,a.h-c.h):(a.h-c.h)/2))+"px"})}},_onKey:function(g){if(g.keyCode==q.TAB){this._getFocusItems();var a=g.target;this._firstFocusItem==this._lastFocusItem?(g.stopPropagation(),g.preventDefault()):a==this._firstFocusItem&&g.shiftKey?(z.focus(this._lastFocusItem),g.stopPropagation(),g.preventDefault()):a!=this._lastFocusItem||
g.shiftKey||(z.focus(this._firstFocusItem),g.stopPropagation(),g.preventDefault())}else this.closable&&g.keyCode==q.ESCAPE&&(this.onCancel(),g.stopPropagation(),g.preventDefault())},show:function(){if(this.open)return N.promise;this._started||this.startup();this._alreadyInitialized||(this._setup(),this._alreadyInitialized=!0);this._fadeOutDeferred&&(this._fadeOutDeferred.cancel(),P.hide(this));var g=D.get(this.ownerDocument);this._modalconnects.push(x(g,"scroll",p.hitch(this,"resize",null)));this._modalconnects.push(x(this.domNode,
"keydown",p.hitch(this,"_onKey")));k.set(this.domNode,{opacity:0,display:""});this._set("open",!0);this._onShow();this.resize();this._position();var b;this._fadeInDeferred=new e(p.hitch(this,function(){b.stop();delete this._fadeInDeferred}));this._fadeInDeferred.then(void 0,y);g=this._fadeInDeferred.promise;b=a.fadeIn({node:this.domNode,duration:this.duration,beforeBegin:p.hitch(this,function(){P.show(this,this.underlayAttrs)}),onEnd:p.hitch(this,function(){this.autofocus&&P.isTop(this)&&(this._getFocusItems(),
z.focus(this._firstFocusItem));this._fadeInDeferred.resolve(!0);delete this._fadeInDeferred})}).play();return g},hide:function(){if(!this._alreadyInitialized||!this.open)return N.promise;this._fadeInDeferred&&this._fadeInDeferred.cancel();var g;this._fadeOutDeferred=new e(p.hitch(this,function(){g.stop();delete this._fadeOutDeferred}));this._fadeOutDeferred.then(void 0,y);this._fadeOutDeferred.then(p.hitch(this,"onHide"));var b=this._fadeOutDeferred.promise;g=a.fadeOut({node:this.domNode,duration:this.duration,
onEnd:p.hitch(this,function(){this.domNode.style.display="none";P.hide(this);this._fadeOutDeferred.resolve(!0);delete this._fadeOutDeferred})}).play();this._scrollConnected&&(this._scrollConnected=!1);for(var d;d=this._modalconnects.pop();)d.remove();this._relativePosition&&delete this._relativePosition;this._set("open",!1);return b},resize:function(g){if("none"!=this.domNode.style.display){this._checkIfSingleChild();if(!g){this._shrunk&&(this._singleChild&&"undefined"!=typeof this._singleChildOriginalStyle&&
(this._singleChild.domNode.style.cssText=this._singleChildOriginalStyle,delete this._singleChildOriginalStyle),h.forEach([this.domNode,this.containerNode,this.titleBar,this.actionBarNode],function(g){g&&k.set(g,{position:"static",width:"auto",height:"auto"})}),this.domNode.style.position="absolute");var a=D.getBox(this.ownerDocument);a.w*=this.maxRatio;a.h*=this.maxRatio;var b=f.position(this.domNode);this._shrunk=!1;b.w>=a.w&&(g={w:a.w},f.setMarginBox(this.domNode,g),b=f.position(this.domNode),this._shrunk=
!0);b.h>=a.h&&(g||(g={w:b.w}),g.h=a.h,this._shrunk=!0);g&&(g.w||(g.w=b.w),g.h||(g.h=b.h))}if(g){f.setMarginBox(this.domNode,g);a=[];this.titleBar&&a.push({domNode:this.titleBar,region:"top"});this.actionBarNode&&a.push({domNode:this.actionBarNode,region:"bottom"});b={domNode:this.containerNode,region:"center"};a.push(b);var d=A.marginBox2contentBox(this.domNode,g);A.layoutChildren(this.domNode,d,a);this._singleChild?(a=A.marginBox2contentBox(this.containerNode,b),this._singleChild.resize({w:a.w,h:a.h})):
(this.containerNode.style.overflow="auto",this._layoutChildren())}else this._layoutChildren();v("touch")||g||this._position()}},_layoutChildren:function(){h.forEach(this.getChildren(),function(g){g.resize&&g.resize()})},destroy:function(){this._fadeInDeferred&&this._fadeInDeferred.cancel();this._fadeOutDeferred&&this._fadeOutDeferred.cancel();this._moveable&&this._moveable.destroy();for(var g;g=this._modalconnects.pop();)g.remove();P.hide(this);this.inherited(arguments)}});v("dojo-bidi")&&(r=l("dijit._DialogBase",
r,{_setTitleAttr:function(g){this._set("title",g);this.titleNode.innerHTML=g;this.applyTextDir(this.titleNode)},_setTextDirAttr:function(g){this._created&&this.textDir!=g&&(this._set("textDir",g),this.set("title",this.title))}}));var F=l("dijit.Dialog",[g,r],{});F._DialogBase=r;var P=F._DialogLevelManager={_beginZIndex:950,show:function(g,a){K[K.length-1].focus=z.curNode;var b=K[K.length-1].dialog?K[K.length-1].zIndex+2:F._DialogLevelManager._beginZIndex;k.set(g.domNode,"zIndex",b);J.show(a,b-1);
K.push({dialog:g,underlayAttrs:a,zIndex:b})},hide:function(g){if(K[K.length-1].dialog==g){K.pop();var a=K[K.length-1];1==K.length?J.hide():J.show(a.underlayAttrs,a.zIndex-1);if(g.refocus&&(g=a.focus,!a.dialog||g&&c.isDescendant(g,a.dialog.domNode)||(a.dialog._getFocusItems(),g=a.dialog._firstFocusItem),g))try{g.focus()}catch(O){}}else a=h.indexOf(h.map(K,function(g){return g.dialog}),g),-1!=a&&K.splice(a,1)},isTop:function(g){return K[K.length-1].dialog==g}},K=F._dialogStack=[{dialog:null,focus:null,
underlayAttrs:null}];z.watch("curNode",function(g,a,d){g=K[K.length-1].dialog;if(d&&g&&!g._fadeOutDeferred&&d.ownerDocument==g.ownerDocument){do if(d==g.domNode||b.contains(d,"dijitPopup"))return;while(d=d.parentNode);g.focus()}});v("dijit-legacy-requires")&&w(0,function(){n(["dijit/TooltipDialog"])});return F})},"dojo/touch":function(){define("./_base/kernel ./aspect ./dom ./dom-class ./_base/lang ./on ./has ./mouse ./domReady ./_base/window".split(" "),function(n,h,m,l,e,c,b,f,k,a){function d(g,
a,b){return w&&b?function(g,a){return c(g,b,a)}:C?function(b,d){var k=c(b,a,function(g){d.call(this,g);L=(new Date).getTime()}),f=c(b,g,function(g){(!L||(new Date).getTime()>L+1E3)&&d.call(this,g)});return{remove:function(){k.remove();f.remove()}}}:function(a,b){return c(a,g,b)}}function q(g){do if(void 0!==g.dojoClick)return g;while(g=g.parentNode)}function p(g,b,d){if(!f.isRight(g)){var k=q(g.target);if(u=!g.target.disabled&&k&&k.dojoClick)if(z=(t="useTarget"==u)?k:g.target,t&&g.preventDefault(),
r=g.changedTouches?g.changedTouches[0].pageX-a.global.pageXOffset:g.clientX,E=g.changedTouches?g.changedTouches[0].pageY-a.global.pageYOffset:g.clientY,H=("object"==typeof u?u.x:"number"==typeof u?u:0)||4,I=("object"==typeof u?u.y:"number"==typeof u?u:0)||4,!D){g=function(g){a.doc.addEventListener(g,function(a){var b=a.target;u&&!a._dojo_click&&(new Date).getTime()<=G+1E3&&("INPUT"!=b.tagName||!l.contains(b,"dijitOffScreen"))&&(a.stopPropagation(),a.stopImmediatePropagation&&a.stopImmediatePropagation(),
"click"==g&&("INPUT"!=b.tagName||"radio"==b.type&&(l.contains(b,"dijitCheckBoxInput")||l.contains(b,"mblRadioButton"))||"checkbox"==b.type&&(l.contains(b,"dijitCheckBoxInput")||l.contains(b,"mblCheckBox")))&&"TEXTAREA"!=b.tagName&&"AUDIO"!=b.tagName&&"VIDEO"!=b.tagName&&a.preventDefault())},!0)};var e=function(g){u=t?m.isDescendant(a.doc.elementFromPoint(g.changedTouches?g.changedTouches[0].pageX-a.global.pageXOffset:g.clientX,g.changedTouches?g.changedTouches[0].pageY-a.global.pageYOffset:g.clientY),
z):u&&(g.changedTouches?g.changedTouches[0].target:g.target)==z&&Math.abs((g.changedTouches?g.changedTouches[0].pageX-a.global.pageXOffset:g.clientX)-r)<=H&&Math.abs((g.changedTouches?g.changedTouches[0].pageY-a.global.pageYOffset:g.clientY)-E)<=I};D=!0;a.doc.addEventListener(b,function(g){f.isRight(g)||(e(g),t&&g.preventDefault())},!0);a.doc.addEventListener(d,function(g){if(!f.isRight(g)&&(e(g),u)){var a=function(a){var b=document.createEvent("MouseEvents");b._dojo_click=!0;b.initMouseEvent(a,!0,
!0,g.view,g.detail,d.screenX,d.screenY,d.clientX,d.clientY,g.ctrlKey,g.altKey,g.shiftKey,g.metaKey,0,null);return b};G=(new Date).getTime();var b=t?z:g.target;"LABEL"===b.tagName&&(b=m.byId(b.getAttribute("for"))||b);var d=g.changedTouches?g.changedTouches[0]:g,k=a("mousedown"),A=a("mouseup"),r=a("click");setTimeout(function(){c.emit(b,"mousedown",k);c.emit(b,"mouseup",A);c.emit(b,"click",r);G=(new Date).getTime()},0)}},!0);g("click");g("mousedown");g("mouseup")}}}var x=5>b("ios"),w=b("pointer-events")||
0,v=function(){var g={},a;for(a in{down:1,move:1,up:1,cancel:1,over:1,out:1})g[a]="pointer"+a;return g}(),C=b("touch-events"),D,u,t=!1,z,r,E,H,I,G,L,J;b("touch")&&(w?k(function(){a.doc.addEventListener(v.down,function(g){p(g,v.move,v.up)},!0)}):k(function(){function g(g){var a=e.delegate(g,{bubbles:!0});6<=b("ios")&&(a.touches=g.touches,a.altKey=g.altKey,a.changedTouches=g.changedTouches,a.ctrlKey=g.ctrlKey,a.metaKey=g.metaKey,a.shiftKey=g.shiftKey,a.targetTouches=g.targetTouches);return a}J=a.body();
a.doc.addEventListener("touchstart",function(g){L=(new Date).getTime();var a=J;J=g.target;c.emit(a,"dojotouchout",{relatedTarget:J,bubbles:!0});c.emit(J,"dojotouchover",{relatedTarget:a,bubbles:!0});p(g,"touchmove","touchend")},!0);c(a.doc,"touchmove",function(b){L=(new Date).getTime();var d=a.doc.elementFromPoint(b.pageX-(x?0:a.global.pageXOffset),b.pageY-(x?0:a.global.pageYOffset));d&&(J!==d&&(c.emit(J,"dojotouchout",{relatedTarget:d,bubbles:!0}),c.emit(d,"dojotouchover",{relatedTarget:J,bubbles:!0}),
J=d),c.emit(d,"dojotouchmove",g(b))||b.preventDefault())});c(a.doc,"touchend",function(b){L=(new Date).getTime();var d=a.doc.elementFromPoint(b.pageX-(x?0:a.global.pageXOffset),b.pageY-(x?0:a.global.pageYOffset))||a.body();c.emit(d,"dojotouchend",g(b))})}));h={press:d("mousedown","touchstart",v.down),move:d("mousemove","dojotouchmove",v.move),release:d("mouseup","dojotouchend",v.up),cancel:d(f.leave,"touchcancel",w?v.cancel:null),over:d("mouseover","dojotouchover",v.over),out:d("mouseout","dojotouchout",
v.out),enter:f._eventHandler(d("mouseover","dojotouchover",v.over)),leave:f._eventHandler(d("mouseout","dojotouchout",v.out))};return n.touch=h})},"dojo/window":function(){define("./_base/lang ./sniff ./_base/window ./dom ./dom-geometry ./dom-style ./dom-construct".split(" "),function(n,h,m,l,e,c,b){h.add("rtl-adjust-position-for-verticalScrollBar",function(k,a){k=m.body(a);a=b.create("div",{style:{overflow:"scroll",overflowX:"visible",direction:"rtl",visibility:"hidden",position:"absolute",left:"0",
top:"0",width:"64px",height:"64px"}},k,"last");var d=b.create("div",{style:{overflow:"hidden",direction:"ltr"}},a,"last"),c=0!=e.position(d).x;a.removeChild(d);k.removeChild(a);return c});h.add("position-fixed-support",function(k,a){k=m.body(a);a=b.create("span",{style:{visibility:"hidden",position:"fixed",left:"1px",top:"1px"}},k,"last");var d=b.create("span",{style:{position:"fixed",left:"0",top:"0"}},a,"last"),c=e.position(d).x!=e.position(a).x;a.removeChild(d);k.removeChild(a);return c});var f=
{getBox:function(b){b=b||m.doc;var a="BackCompat"==b.compatMode?m.body(b):b.documentElement,d=e.docScroll(b);if(h("touch")){var k=f.get(b);b=k.innerWidth||a.clientWidth;a=k.innerHeight||a.clientHeight}else b=a.clientWidth,a=a.clientHeight;return{l:d.x,t:d.y,w:b,h:a}},get:function(b){if(h("ie")&&f!==document.parentWindow){b.parentWindow.execScript("document._parentWindow \x3d window;","Javascript");var a=b._parentWindow;b._parentWindow=null;return a}return b.parentWindow||b.defaultView},scrollIntoView:function(b,
a){try{b=l.byId(b);var d=b.ownerDocument||m.doc,k=m.body(d),f=d.documentElement||k.parentNode,x=h("ie")||h("trident"),w=h("webkit");if(b!=k&&b!=f)if(!(h("mozilla")||x||w||h("opera")||h("trident")||h("edge"))&&"scrollIntoView"in b)b.scrollIntoView(!1);else{var v="BackCompat"==d.compatMode,C=Math.min(k.clientWidth||f.clientWidth,f.clientWidth||k.clientWidth),n=Math.min(k.clientHeight||f.clientHeight,f.clientHeight||k.clientHeight),d=w||v?k:f,u=a||e.position(b),t=b.parentNode;a=function(g){return 6>=
x||7==x&&v?!1:h("position-fixed-support")&&"fixed"==c.get(g,"position").toLowerCase()};var z=this,w=function(g,a,b){"BODY"==g.tagName||"HTML"==g.tagName?z.get(g.ownerDocument).scrollBy(a,b):(a&&(g.scrollLeft+=a),b&&(g.scrollTop+=b))};if(!a(b))for(;t;){t==k&&(t=d);var r=e.position(t),E=a(t),H="rtl"==c.getComputedStyle(t).direction.toLowerCase();if(t==d)r.w=C,r.h=n,d==f&&(x||h("trident"))&&H&&(r.x+=d.offsetWidth-r.w),r.x=0,r.y=0;else{var I=e.getPadBorderExtents(t);r.w-=I.w;r.h-=I.h;r.x+=I.l;r.y+=I.t;
var G=t.clientWidth,L=r.w-G;0<G&&0<L&&(H&&h("rtl-adjust-position-for-verticalScrollBar")&&(r.x+=L),r.w=G);G=t.clientHeight;L=r.h-G;0<G&&0<L&&(r.h=G)}E&&(0>r.y&&(r.h+=r.y,r.y=0),0>r.x&&(r.w+=r.x,r.x=0),r.y+r.h>n&&(r.h=n-r.y),r.x+r.w>C&&(r.w=C-r.x));var J=u.x-r.x,g=u.y-r.y,A=J+u.w-r.w,B=g+u.h-r.h,y,N;0<A*J&&(t.scrollLeft||t==d||t.scrollWidth>t.offsetHeight)&&(y=Math[0>J?"max":"min"](J,A),H&&(8==x&&!v||5<=h("trident"))&&(y=-y),N=t.scrollLeft,w(t,y,0),y=t.scrollLeft-N,u.x-=y);0<B*g&&(t.scrollTop||t==
d||t.scrollHeight>t.offsetHeight)&&(y=Math.ceil(Math[0>g?"max":"min"](g,B)),N=t.scrollTop,w(t,0,y),y=t.scrollTop-N,u.y-=y);t=t!=d&&!E&&t.parentNode}}}catch(F){console.error("scrollIntoView: "+F),b.scrollIntoView(!1)}}};n.setObject("dojo.window",f);return f})},"dojo/dnd/Moveable":function(){define("../_base/array ../_base/declare ../_base/lang ../dom ../dom-class ../Evented ../has ../on ../topic ../touch ./common ./Mover ../_base/window".split(" "),function(n,h,m,l,e,c,b,f,k,a,d,q,p){var x,w=function(){},
w=function(a,b){"touchAction"in document.body.style?x="touchAction":"msTouchAction"in document.body.style&&(x="msTouchAction");w=function(a,b){a.style[x]=b};w(a,b)};return h("dojo.dnd.Moveable",[c],{handle:"",delay:0,skip:!1,constructor:function(b,d){this.node=l.byId(b);w(this.node,"none");d||(d={});this.handle=d.handle?l.byId(d.handle):null;this.handle||(this.handle=this.node);this.delay=0<d.delay?d.delay:0;this.skip=d.skip;this.mover=d.mover?d.mover:q;this.events=[f(this.handle,a.press,m.hitch(this,
"onMouseDown")),f(this.handle,"dragstart",m.hitch(this,"onSelectStart")),f(this.handle,"selectstart",m.hitch(this,"onSelectStart"))]},markupFactory:function(a,b,d){return new d(b,a)},destroy:function(){n.forEach(this.events,function(a){a.remove()});w(this.node,"");this.events=this.node=this.handle=null},onMouseDown:function(b){if(!this.skip||!d.isFormElement(b)){if(this.delay)this.events.push(f(this.handle,a.move,m.hitch(this,"onMouseMove")),f(this.handle.ownerDocument,a.release,m.hitch(this,"onMouseUp"))),
this._lastX=b.pageX,this._lastY=b.pageY;else this.onDragDetected(b);b.stopPropagation();b.preventDefault()}},onMouseMove:function(a){if(Math.abs(a.pageX-this._lastX)>this.delay||Math.abs(a.pageY-this._lastY)>this.delay)this.onMouseUp(a),this.onDragDetected(a);a.stopPropagation();a.preventDefault()},onMouseUp:function(a){for(var b=0;2>b;++b)this.events.pop().remove();a.stopPropagation();a.preventDefault()},onSelectStart:function(a){this.skip&&d.isFormElement(a)||(a.stopPropagation(),a.preventDefault())},
onDragDetected:function(a){new this.mover(this.node,a,this)},onMoveStart:function(a){k.publish("/dnd/move/start",a);e.add(p.body(),"dojoMove");e.add(this.node,"dojoMoveItem")},onMoveStop:function(a){k.publish("/dnd/move/stop",a);e.remove(p.body(),"dojoMove");e.remove(this.node,"dojoMoveItem")},onFirstMove:function(){},onMove:function(a,b){this.onMoving(a,b);var d=a.node.style;d.left=b.l+"px";d.top=b.t+"px";this.onMoved(a,b)},onMoving:function(){},onMoved:function(){}})})},"dojo/dnd/common":function(){define(["../sniff",
"../_base/kernel","../_base/lang","../dom"],function(n,h,m,l){var e=m.getObject("dojo.dnd",!0);e.getCopyKeyState=function(c){return c[n("mac")?"metaKey":"ctrlKey"]};e._uniqueId=0;e.getUniqueId=function(){var c;do c=h._scopeName+"Unique"+ ++e._uniqueId;while(l.byId(c));return c};e._empty={};e.isFormElement=function(c){c=c.target;3==c.nodeType&&(c=c.parentNode);return 0<=" a button textarea input select option ".indexOf(" "+c.tagName.toLowerCase()+" ")};return e})},"dojo/dnd/Mover":function(){define("../_base/array ../_base/declare ../_base/lang ../sniff ../_base/window ../dom ../dom-geometry ../dom-style ../Evented ../on ../touch ./common ./autoscroll".split(" "),
function(n,h,m,l,e,c,b,f,k,a,d,q,p){return h("dojo.dnd.Mover",[k],{constructor:function(b,k,f){function e(a){a.preventDefault();a.stopPropagation()}this.node=c.byId(b);this.marginBox={l:k.pageX,t:k.pageY};this.mouseButton=k.button;k=this.host=f;b=b.ownerDocument;this.events=[a(b,d.move,m.hitch(this,"onFirstMove")),a(b,d.move,m.hitch(this,"onMouseMove")),a(b,d.release,m.hitch(this,"onMouseUp")),a(b,"dragstart",e),a(b.body,"selectstart",e)];p.autoScrollStart(b);if(k&&k.onMoveStart)k.onMoveStart(this)},
onMouseMove:function(a){p.autoScroll(a);var b=this.marginBox;this.host.onMove(this,{l:b.l+a.pageX,t:b.t+a.pageY},a);a.preventDefault();a.stopPropagation()},onMouseUp:function(a){(l("webkit")&&l("mac")&&2==this.mouseButton?0==a.button:this.mouseButton==a.button)&&this.destroy();a.preventDefault();a.stopPropagation()},onFirstMove:function(a){var d=this.node.style,k,c=this.host;switch(d.position){case "relative":case "absolute":k=Math.round(parseFloat(d.left))||0;d=Math.round(parseFloat(d.top))||0;break;
default:d.position="absolute";d=b.getMarginBox(this.node);k=e.doc.body;var p=f.getComputedStyle(k),q=b.getMarginBox(k,p),p=b.getContentBox(k,p);k=d.l-(p.l-q.l);d=d.t-(p.t-q.t)}this.marginBox.l=k-this.marginBox.l;this.marginBox.t=d-this.marginBox.t;if(c&&c.onFirstMove)c.onFirstMove(this,a);this.events.shift().remove()},destroy:function(){n.forEach(this.events,function(a){a.remove()});var a=this.host;if(a&&a.onMoveStop)a.onMoveStop(this);this.events=this.node=this.host=null}})})},"dojo/dnd/autoscroll":function(){define("../_base/lang ../sniff ../_base/window ../dom-geometry ../dom-style ../window".split(" "),
function(n,h,m,l,e,c){var b={};n.setObject("dojo.dnd.autoscroll",b);b.getViewport=c.getBox;b.V_TRIGGER_AUTOSCROLL=32;b.H_TRIGGER_AUTOSCROLL=32;b.V_AUTOSCROLL_VALUE=16;b.H_AUTOSCROLL_VALUE=16;var f,k=m.doc,a=Infinity,d=Infinity;b.autoScrollStart=function(b){k=b;f=c.getBox(k);b=m.body(k).parentNode;a=Math.max(b.scrollHeight-f.h,0);d=Math.max(b.scrollWidth-f.w,0)};b.autoScroll=function(e){var p=f||c.getBox(k),q=m.body(k).parentNode,l=0,v=0;e.clientX<b.H_TRIGGER_AUTOSCROLL?l=-b.H_AUTOSCROLL_VALUE:e.clientX>
p.w-b.H_TRIGGER_AUTOSCROLL&&(l=Math.min(b.H_AUTOSCROLL_VALUE,d-q.scrollLeft));e.clientY<b.V_TRIGGER_AUTOSCROLL?v=-b.V_AUTOSCROLL_VALUE:e.clientY>p.h-b.V_TRIGGER_AUTOSCROLL&&(v=Math.min(b.V_AUTOSCROLL_VALUE,a-q.scrollTop));window.scrollBy(l,v)};b._validNodes={div:1,p:1,td:1};b._validOverflow={auto:1,scroll:1};b.autoScrollNodes=function(a){for(var d,k,f,c,q,n=0,u=0,t=a.target;t;){if(1==t.nodeType&&t.tagName.toLowerCase()in b._validNodes){f=e.getComputedStyle(t);q=f.overflowX.toLowerCase()in b._validOverflow;
c=f.overflowY.toLowerCase()in b._validOverflow;if(q||c)d=l.getContentBox(t,f),k=l.position(t,!0);if(q){f=Math.min(b.H_TRIGGER_AUTOSCROLL,d.w/2);q=a.pageX-k.x;if(h("webkit")||h("opera"))q+=m.body().scrollLeft;n=0;0<q&&q<d.w&&(q<f?n=-f:q>d.w-f&&(n=f),t.scrollLeft+=n)}if(c){c=Math.min(b.V_TRIGGER_AUTOSCROLL,d.h/2);f=a.pageY-k.y;if(h("webkit")||h("opera"))f+=m.body().scrollTop;u=0;0<f&&f<d.h&&(f<c?u=-c:f>d.h-c&&(u=c),t.scrollTop+=u)}if(n||u)return}try{t=t.parentNode}catch(z){t=null}}b.autoScroll(a)};
return b})},"dojo/dnd/TimedMoveable":function(){define(["../_base/declare","./Moveable"],function(n,h){var m=h.prototype.onMove;return n("dojo.dnd.TimedMoveable",h,{timeout:40,constructor:function(l,e){e||(e={});e.timeout&&"number"==typeof e.timeout&&0<=e.timeout&&(this.timeout=e.timeout)},onMoveStop:function(l){l._timer&&(clearTimeout(l._timer),m.call(this,l,l._leftTop));h.prototype.onMoveStop.apply(this,arguments)},onMove:function(l,e){l._leftTop=e;if(!l._timer){var c=this;l._timer=setTimeout(function(){l._timer=
null;m.call(c,l,l._leftTop)},this.timeout)}}})})},"dijit/focus":function(){define("dojo/aspect dojo/_base/declare dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/Evented dojo/_base/lang dojo/on dojo/domReady dojo/sniff dojo/Stateful dojo/_base/window dojo/window ./a11y ./registry ./main".split(" "),function(n,h,m,l,e,c,b,f,k,a,d,q,p,x,w,v,C){var D,u,t=new (h([q,b],{curNode:null,activeStack:[],constructor:function(){var a=f.hitch(this,function(a){m.isDescendant(this.curNode,a)&&this.set("curNode",
null);m.isDescendant(this.prevNode,a)&&this.set("prevNode",null)});n.before(c,"empty",a);n.before(c,"destroy",a)},registerIframe:function(a){return this.registerWin(a.contentWindow,a)},registerWin:function(a,b){var f=this,c=a.document&&a.document.body;if(c){var e=d("pointer-events")?"pointerdown":d("touch-events")?"mousedown, touchstart":"mousedown",r=k(a.document,e,function(g){g&&g.target&&null==g.target.parentNode||f._onTouchNode(b||g.target,"mouse")}),p=k(c,"focusin",function(g){if(g.target.tagName){var a=
g.target.tagName.toLowerCase();"#document"!=a&&"body"!=a&&(w.isFocusable(g.target)?f._onFocusNode(b||g.target):f._onTouchNode(b||g.target))}}),g=k(c,"focusout",function(g){f._onBlurNode(b||g.target)});return{remove:function(){r.remove();p.remove();g.remove();c=r=p=g=null}}}},_onBlurNode:function(a){a=(new Date).getTime();a<D+100||(this._clearFocusTimer&&clearTimeout(this._clearFocusTimer),this._clearFocusTimer=setTimeout(f.hitch(this,function(){this.set("prevNode",this.curNode);this.set("curNode",
null)}),0),this._clearActiveWidgetsTimer&&clearTimeout(this._clearActiveWidgetsTimer),a<u+100||(this._clearActiveWidgetsTimer=setTimeout(f.hitch(this,function(){delete this._clearActiveWidgetsTimer;this._setStack([])}),0)))},_onTouchNode:function(a,b){u=(new Date).getTime();this._clearActiveWidgetsTimer&&(clearTimeout(this._clearActiveWidgetsTimer),delete this._clearActiveWidgetsTimer);e.contains(a,"dijitPopup")&&(a=a.firstChild);var d=[];try{for(;a;){var k=l.get(a,"dijitPopupParent");if(k)a=v.byId(k).domNode;
else if(a.tagName&&"body"==a.tagName.toLowerCase()){if(a===p.body())break;a=x.get(a.ownerDocument).frameElement}else{var f=a.getAttribute&&a.getAttribute("widgetId"),c=f&&v.byId(f);!c||"mouse"==b&&c.get("disabled")||d.unshift(f);a=a.parentNode}}}catch(J){}this._setStack(d,b)},_onFocusNode:function(a){a&&9!=a.nodeType&&(D=(new Date).getTime(),this._clearFocusTimer&&(clearTimeout(this._clearFocusTimer),delete this._clearFocusTimer),this._onTouchNode(a),a!=this.curNode&&(this.set("prevNode",this.curNode),
this.set("curNode",a)))},_setStack:function(a,b){var d=this.activeStack,f=d.length-1,k=a.length-1;if(a[k]!=d[f]){this.set("activeStack",a);var c;for(c=f;0<=c&&d[c]!=a[c];c--)if(f=v.byId(d[c]))f._hasBeenBlurred=!0,f.set("focused",!1),f._focusManager==this&&f._onBlur(b),this.emit("widget-blur",f,b);for(c++;c<=k;c++)if(f=v.byId(a[c]))f.set("focused",!0),f._focusManager==this&&f._onFocus(b),this.emit("widget-focus",f,b)}},focus:function(a){if(a)try{a.focus()}catch(E){}}}));a(function(){var a=t.registerWin(x.get(document));
d("ie")&&k(window,"unload",function(){a&&(a.remove(),a=null)})});C.focus=function(a){t.focus(a)};for(var z in t)/^_/.test(z)||(C.focus[z]="function"==typeof t[z]?f.hitch(t,z):t[z]);t.watch(function(a,b,d){C.focus[a]=d});return t})},"dojo/Stateful":function(){define(["./_base/declare","./_base/lang","./_base/array","./when"],function(n,h,m,l){return n("dojo.Stateful",null,{_attrPairNames:{},_getAttrNames:function(e){var c=this._attrPairNames;return c[e]?c[e]:c[e]={s:"_"+e+"Setter",g:"_"+e+"Getter"}},
postscript:function(e){e&&this.set(e)},_get:function(e,c){return"function"===typeof this[c.g]?this[c.g]():this[e]},get:function(e){return this._get(e,this._getAttrNames(e))},set:function(e,c){if("object"===typeof e){for(var b in e)e.hasOwnProperty(b)&&"_watchCallbacks"!=b&&this.set(b,e[b]);return this}b=this._getAttrNames(e);var f=this._get(e,b);b=this[b.s];var k;"function"===typeof b?k=b.apply(this,Array.prototype.slice.call(arguments,1)):this[e]=c;if(this._watchCallbacks){var a=this;l(k,function(){a._watchCallbacks(e,
f,c)})}return this},_changeAttrValue:function(e,c){var b=this.get(e);this[e]=c;this._watchCallbacks&&this._watchCallbacks(e,b,c);return this},watch:function(e,c){var b=this._watchCallbacks;if(!b)var f=this,b=this._watchCallbacks=function(a,d,k,c){var e=function(b){if(b){b=b.slice();for(var c=0,e=b.length;c<e;c++)b[c].call(f,a,d,k)}};e(b["_"+a]);c||e(b["*"])};c||"function"!==typeof e?e="_"+e:(c=e,e="*");var k=b[e];"object"!==typeof k&&(k=b[e]=[]);k.push(c);e={};e.unwatch=e.remove=function(){var a=
m.indexOf(k,c);-1<a&&k.splice(a,1)};return e}})})},"dijit/a11y":function(){define("dojo/_base/array dojo/dom dojo/dom-attr dojo/dom-style dojo/_base/lang dojo/sniff ./main".split(" "),function(n,h,m,l,e,c,b){var f={_isElementShown:function(b){var a=l.get(b);return"hidden"!=a.visibility&&"collapsed"!=a.visibility&&"none"!=a.display&&"hidden"!=m.get(b,"type")},hasDefaultTabStop:function(b){switch(b.nodeName.toLowerCase()){case "a":return m.has(b,"href");case "area":case "button":case "input":case "object":case "select":case "textarea":return!0;
case "iframe":var a;try{var d=b.contentDocument;if("designMode"in d&&"on"==d.designMode)return!0;a=d.body}catch(q){try{a=b.contentWindow.document.body}catch(p){return!1}}return a&&("true"==a.contentEditable||a.firstChild&&"true"==a.firstChild.contentEditable);default:return"true"==b.contentEditable}},effectiveTabIndex:function(b){if(!m.get(b,"disabled"))return m.has(b,"tabIndex")?+m.get(b,"tabIndex"):f.hasDefaultTabStop(b)?0:void 0},isTabNavigable:function(b){return 0<=f.effectiveTabIndex(b)},isFocusable:function(b){return-1<=
f.effectiveTabIndex(b)},_getTabNavigable:function(b){function a(a){return a&&"input"==a.tagName.toLowerCase()&&a.type&&"radio"==a.type.toLowerCase()&&a.name&&a.name.toLowerCase()}function d(b){return n[a(b)]||b}var k,e,l,h,v,C,n={},u=f._isElementShown,t=f.effectiveTabIndex,z=function(b){for(b=b.firstChild;b;b=b.nextSibling)if(!(1!=b.nodeType||9>=c("ie")&&"HTML"!==b.scopeName)&&u(b)){var d=t(b);if(0<=d){if(0==d)k||(k=b),e=b;else if(0<d){if(!l||d<h)h=d,l=b;if(!v||d>=C)C=d,v=b}d=a(b);m.get(b,"checked")&&
d&&(n[d]=b)}"SELECT"!=b.nodeName.toUpperCase()&&z(b)}};u(b)&&z(b);return{first:d(k),last:d(e),lowest:d(l),highest:d(v)}},getFirstInTabbingOrder:function(b,a){b=f._getTabNavigable(h.byId(b,a));return b.lowest?b.lowest:b.first},getLastInTabbingOrder:function(b,a){b=f._getTabNavigable(h.byId(b,a));return b.last?b.last:b.highest}};e.mixin(b,f);return f})},"dijit/_base/manager":function(){define(["dojo/_base/array","dojo/_base/config","dojo/_base/lang","../registry","../main"],function(n,h,m,l,e){var c=
{};n.forEach("byId getUniqueId findWidgets _destroyAll byNode getEnclosingWidget".split(" "),function(b){c[b]=l[b]});m.mixin(c,{defaultDuration:h.defaultDuration||200});m.mixin(e,c);return e})},"dijit/_Widget":function(){define("dojo/aspect dojo/_base/config dojo/_base/connect dojo/_base/declare dojo/has dojo/_base/kernel dojo/_base/lang dojo/query dojo/ready ./registry ./_WidgetBase ./_OnDijitClickMixin ./_FocusMixin dojo/uacss ./hccss".split(" "),function(n,h,m,l,e,c,b,f,k,a,d,q,p){function x(){}
function w(a){return function(d,f,c,e){return d&&"string"==typeof f&&d[f]==x?d.on(f.substring(2).toLowerCase(),b.hitch(c,e)):a.apply(m,arguments)}}n.around(m,"connect",w);c.connect&&n.around(c,"connect",w);n=l("dijit._Widget",[d,q,p],{onClick:x,onDblClick:x,onKeyDown:x,onKeyPress:x,onKeyUp:x,onMouseDown:x,onMouseMove:x,onMouseOut:x,onMouseOver:x,onMouseLeave:x,onMouseEnter:x,onMouseUp:x,constructor:function(a){this._toConnect={};for(var b in a)this[b]===x&&(this._toConnect[b.replace(/^on/,"").toLowerCase()]=
a[b],delete a[b])},postCreate:function(){this.inherited(arguments);for(var a in this._toConnect)this.on(a,this._toConnect[a]);delete this._toConnect},on:function(a,b){return this[this._onMap(a)]===x?m.connect(this.domNode,a.toLowerCase(),this,b):this.inherited(arguments)},_setFocusedAttr:function(a){this._focused=a;this._set("focused",a)},setAttribute:function(a,b){c.deprecated(this.declaredClass+"::setAttribute(attr, value) is deprecated. Use set() instead.","","2.0");this.set(a,b)},attr:function(a,
b){return 2<=arguments.length||"object"===typeof a?this.set.apply(this,arguments):this.get(a)},getDescendants:function(){c.deprecated(this.declaredClass+"::getDescendants() is deprecated. Use getChildren() instead.","","2.0");return this.containerNode?f("[widgetId]",this.containerNode).map(a.byNode):[]},_onShow:function(){this.onShow()},onShow:function(){},onHide:function(){},onClose:function(){return!0}});e("dijit-legacy-requires")&&k(0,function(){require(["dijit/_base"])});return n})},"dijit/_WidgetBase":function(){define("require dojo/_base/array dojo/aspect dojo/_base/config dojo/_base/connect dojo/_base/declare dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/has dojo/_base/kernel dojo/_base/lang dojo/on dojo/ready dojo/Stateful dojo/topic dojo/_base/window ./Destroyable dojo/has!dojo-bidi?./_BidiMixin ./registry".split(" "),
function(n,h,m,l,e,c,b,f,k,a,d,q,p,x,w,v,C,D,u,t,z,r,E){function H(a){return function(b){f[b?"set":"remove"](this.domNode,a,b);this._set(a,b)}}p.add("dijit-legacy-requires",!x.isAsync);p.add("dojo-bidi",!1);p("dijit-legacy-requires")&&C(0,function(){n(["dijit/_base/manager"])});var I={};l=c("dijit._WidgetBase",[D,z],{id:"",_setIdAttr:"domNode",lang:"",_setLangAttr:H("lang"),dir:"",_setDirAttr:H("dir"),"class":"",_setClassAttr:{node:"domNode",type:"class"},_setTypeAttr:null,style:"",title:"",tooltip:"",
baseClass:"",srcNodeRef:null,domNode:null,containerNode:null,ownerDocument:null,_setOwnerDocumentAttr:function(a){this._set("ownerDocument",a)},attributeMap:{},_blankGif:l.blankGif||n.toUrl("dojo/resources/blank.gif"),textDir:"",_introspect:function(){var a=this.constructor;if(!a._setterAttrs){var b=a.prototype,d=a._setterAttrs=[],a=a._onMap={},g;for(g in b.attributeMap)d.push(g);for(g in b)/^on/.test(g)&&(a[g.substring(2).toLowerCase()]=g),/^_set[A-Z](.*)Attr$/.test(g)&&(g=g.charAt(4).toLowerCase()+
g.substr(5,g.length-9),b.attributeMap&&g in b.attributeMap||d.push(g))}},postscript:function(a,b){this.create(a,b)},create:function(a,d){this._introspect();this.srcNodeRef=b.byId(d);this._connects=[];this._supportingWidgets=[];this.srcNodeRef&&this.srcNodeRef.id&&"string"==typeof this.srcNodeRef.id&&(this.id=this.srcNodeRef.id);a&&(this.params=a,w.mixin(this,a));this.postMixInProperties();this.id||(this.id=E.getUniqueId(this.declaredClass.replace(/\./g,"_")),this.params&&delete this.params.id);this.ownerDocument=
this.ownerDocument||(this.srcNodeRef?this.srcNodeRef.ownerDocument:document);this.ownerDocumentBody=t.body(this.ownerDocument);E.add(this);this.buildRendering();var f;this.domNode&&(this._applyAttributes(),(a=this.srcNodeRef)&&a.parentNode&&this.domNode!==a&&(a.parentNode.replaceChild(this.domNode,a),f=!0),this.domNode.setAttribute("widgetId",this.id));this.postCreate();f&&delete this.srcNodeRef;this._created=!0},_applyAttributes:function(){var a={},b;for(b in this.params||{})a[b]=this._get(b);h.forEach(this.constructor._setterAttrs,
function(b){if(!(b in a)){var g=this._get(b);g&&this.set(b,g)}},this);for(b in a)this.set(b,a[b])},postMixInProperties:function(){},buildRendering:function(){this.domNode||(this.domNode=this.srcNodeRef||this.ownerDocument.createElement("div"));if(this.baseClass){var a=this.baseClass.split(" ");this.isLeftToRight()||(a=a.concat(h.map(a,function(a){return a+"Rtl"})));k.add(this.domNode,a)}},postCreate:function(){},startup:function(){this._started||(this._started=!0,h.forEach(this.getChildren(),function(a){a._started||
a._destroyed||!w.isFunction(a.startup)||(a.startup(),a._started=!0)}))},destroyRecursive:function(a){this._beingDestroyed=!0;this.destroyDescendants(a);this.destroy(a)},destroy:function(a){function b(b){b.destroyRecursive?b.destroyRecursive(a):b.destroy&&b.destroy(a)}this._beingDestroyed=!0;this.uninitialize();h.forEach(this._connects,w.hitch(this,"disconnect"));h.forEach(this._supportingWidgets,b);this.domNode&&h.forEach(E.findWidgets(this.domNode,this.containerNode),b);this.destroyRendering(a);
E.remove(this.id);this._destroyed=!0},destroyRendering:function(b){this.bgIframe&&(this.bgIframe.destroy(b),delete this.bgIframe);this.domNode&&(b?f.remove(this.domNode,"widgetId"):a.destroy(this.domNode),delete this.domNode);this.srcNodeRef&&(b||a.destroy(this.srcNodeRef),delete this.srcNodeRef)},destroyDescendants:function(a){h.forEach(this.getChildren(),function(b){b.destroyRecursive&&b.destroyRecursive(a)})},uninitialize:function(){return!1},_setStyleAttr:function(a){var b=this.domNode;w.isObject(a)?
q.set(b,a):b.style.cssText=b.style.cssText?b.style.cssText+("; "+a):a;this._set("style",a)},_attrToDom:function(a,b,d){d=3<=arguments.length?d:this.attributeMap[a];h.forEach(w.isArray(d)?d:[d],function(g){var d=this[g.node||g||"domNode"];switch(g.type||"attribute"){case "attribute":w.isFunction(b)&&(b=w.hitch(this,b));g=g.attribute?g.attribute:/^on[A-Z][a-zA-Z]*$/.test(a)?a.toLowerCase():a;d.tagName?f.set(d,g,b):d.set(g,b);break;case "innerText":d.innerHTML="";d.appendChild(this.ownerDocument.createTextNode(b));
break;case "textContent":d.textContent=b;break;case "innerHTML":d.innerHTML=b;break;case "class":k.replace(d,b,this[a]);break;case "toggleClass":k.toggle(d,g.className||a,b)}},this)},get:function(a){var b=this._getAttrNames(a);return this[b.g]?this[b.g]():this._get(a)},set:function(a,b){if("object"===typeof a){for(var d in a)this.set(d,a[d]);return this}d=this._getAttrNames(a);var g=this[d.s];if(w.isFunction(g))var f=g.apply(this,Array.prototype.slice.call(arguments,1));else{var g=this.focusNode&&
!w.isFunction(this.focusNode)?"focusNode":"domNode",c=this[g]&&this[g].tagName,e;if((e=c)&&!(e=I[c])){e=this[g];var k={},p;for(p in e)k[p.toLowerCase()]=!0;e=I[c]=k}p=e;d=a in this.attributeMap?this.attributeMap[a]:d.s in this?this[d.s]:p&&d.l in p&&"function"!=typeof b||/^aria-|^data-|^role$/.test(a)?g:null;null!=d&&this._attrToDom(a,b,d);this._set(a,b)}return f||this},_attrPairNames:{},_getAttrNames:function(a){var b=this._attrPairNames;if(b[a])return b[a];var d=a.replace(/^[a-z]|-[a-zA-Z]/g,function(a){return a.charAt(a.length-
1).toUpperCase()});return b[a]={n:a+"Node",s:"_set"+d+"Attr",g:"_get"+d+"Attr",l:d.toLowerCase()}},_set:function(a,b){var d=this[a];this[a]=b;!this._created||d===b||d!==d&&b!==b||(this._watchCallbacks&&this._watchCallbacks(a,d,b),this.emit("attrmodified-"+a,{detail:{prevValue:d,newValue:b}}))},_get:function(a){return this[a]},emit:function(a,b,d){b=b||{};void 0===b.bubbles&&(b.bubbles=!0);void 0===b.cancelable&&(b.cancelable=!0);b.detail||(b.detail={});b.detail.widget=this;var g,f=this["on"+a];f&&
(g=f.apply(this,d?d:[b]));this._started&&!this._beingDestroyed&&v.emit(this.domNode,a.toLowerCase(),b);return g},on:function(a,b){var d=this._onMap(a);return d?m.after(this,d,b,!0):this.own(v(this.domNode,a,b))[0]},_onMap:function(a){var b=this.constructor,d=b._onMap;if(!d){var d=b._onMap={},g;for(g in b.prototype)/^on/.test(g)&&(d[g.replace(/^on/,"").toLowerCase()]=g)}return d["string"==typeof a&&a.toLowerCase()]},toString:function(){return"[Widget "+this.declaredClass+", "+(this.id||"NO ID")+"]"},
getChildren:function(){return this.containerNode?E.findWidgets(this.containerNode):[]},getParent:function(){return E.getEnclosingWidget(this.domNode.parentNode)},connect:function(a,b,d){return this.own(e.connect(a,b,this,d))[0]},disconnect:function(a){a.remove()},subscribe:function(a,b){return this.own(u.subscribe(a,w.hitch(this,b)))[0]},unsubscribe:function(a){a.remove()},isLeftToRight:function(){return this.dir?"ltr"==this.dir.toLowerCase():d.isBodyLtr(this.ownerDocument)},isFocusable:function(){return this.focus&&
"none"!=q.get(this.domNode,"display")},placeAt:function(d,f){var c=!d.tagName&&E.byId(d);!c||!c.addChild||f&&"number"!==typeof f?(d=c&&"domNode"in c?c.containerNode&&!/after|before|replace/.test(f||"")?c.containerNode:c.domNode:b.byId(d,this.ownerDocument),a.place(this.domNode,d,f),!this._started&&(this.getParent()||{})._started&&this.startup()):c.addChild(this,f);return this},defer:function(a,b){var d=setTimeout(w.hitch(this,function(){d&&(d=null,this._destroyed||w.hitch(this,a)())}),b||0);return{remove:function(){d&&
(clearTimeout(d),d=null);return null}}}});p("dojo-bidi")&&l.extend(r);return l})},"dijit/Destroyable":function(){define(["dojo/_base/array","dojo/aspect","dojo/_base/declare"],function(n,h,m){return m("dijit.Destroyable",null,{destroy:function(l){this._destroyed=!0},own:function(){var l=["destroyRecursive","destroy","remove"];n.forEach(arguments,function(e){function c(){f.remove();n.forEach(k,function(a){a.remove()})}var b,f=h.before(this,"destroy",function(a){e[b](a)}),k=[];e.then?(b="cancel",e.then(c,
c)):n.forEach(l,function(a){"function"===typeof e[a]&&(b||(b=a),k.push(h.after(e,a,c,!0)))})},this);return arguments}})})},"dijit/_OnDijitClickMixin":function(){define("dojo/on dojo/_base/array dojo/keys dojo/_base/declare dojo/has ./a11yclick".split(" "),function(n,h,m,l,e,c){n=l("dijit._OnDijitClickMixin",null,{connect:function(b,f,e){return this.inherited(arguments,[b,"ondijitclick"==f?c:f,e])}});n.a11yclick=c;return n})},"dijit/a11yclick":function(){define(["dojo/keys","dojo/mouse","dojo/on",
"dojo/touch"],function(n,h,m,l){function e(b){if((b.keyCode===n.ENTER||b.keyCode===n.SPACE)&&!/input|button|textarea/i.test(b.target.nodeName))for(b=b.target;b;b=b.parentNode)if(b.dojoClick)return!0}var c;m(document,"keydown",function(b){e(b)?(c=b.target,b.preventDefault()):c=null});m(document,"keyup",function(b){e(b)&&b.target==c&&(c=null,m.emit(b.target,"click",{cancelable:!0,bubbles:!0,ctrlKey:b.ctrlKey,shiftKey:b.shiftKey,metaKey:b.metaKey,altKey:b.altKey,_origType:b.type}))});var b=function(b,
c){b.dojoClick=!0;return m(b,"click",c)};b.click=b;b.press=function(b,c){var a=m(b,l.press,function(a){("mousedown"!=a.type||h.isLeft(a))&&c(a)}),d=m(b,"keydown",function(a){a.keyCode!==n.ENTER&&a.keyCode!==n.SPACE||c(a)});return{remove:function(){a.remove();d.remove()}}};b.release=function(b,c){var a=m(b,l.release,function(a){("mouseup"!=a.type||h.isLeft(a))&&c(a)}),d=m(b,"keyup",function(a){a.keyCode!==n.ENTER&&a.keyCode!==n.SPACE||c(a)});return{remove:function(){a.remove();d.remove()}}};b.move=
l.move;return b})},"dijit/_FocusMixin":function(){define(["./focus","./_WidgetBase","dojo/_base/declare","dojo/_base/lang"],function(n,h,m,l){l.extend(h,{focused:!1,onFocus:function(){},onBlur:function(){},_onFocus:function(){this.onFocus()},_onBlur:function(){this.onBlur()}});return m("dijit._FocusMixin",null,{_focusManager:n})})},"dojo/uacss":function(){define(["./dom-geometry","./_base/lang","./domReady","./sniff","./_base/window"],function(n,h,m,l,e){var c=e.doc.documentElement;e=l("ie");var b=
l("trident"),f=l("opera"),k=Math.floor,a=l("ff"),d=n.boxModel.replace(/-/,""),f={dj_quirks:0,dj_opera:f,dj_khtml:0,dj_webkit:l("webkit"),dj_safari:l("safari"),dj_chrome:l("chrome"),dj_edge:l("edge"),dj_gecko:l("mozilla"),dj_ios:l("ios"),dj_android:0};e&&(f.dj_ie=!0,f["dj_ie"+k(e)]=!0,f.dj_iequirks=0);b&&(f.dj_trident=!0,f["dj_trident"+k(b)]=!0);a&&(f["dj_ff"+k(a)]=!0);f["dj_"+d]=!0;var q="",p;for(p in f)f[p]&&(q+=p+" ");c.className=h.trim(c.className+" "+q);m(function(){if(!n.isBodyLtr()){var a="dj_rtl dijitRtl "+
q.replace(/ /g,"-rtl ");c.className=h.trim(c.className+" "+a+"dj_rtl dijitRtl "+q.replace(/ /g,"-rtl "))}});return l})},"dijit/hccss":function(){define(["dojo/dom-class","dojo/hccss","dojo/domReady","dojo/_base/window"],function(n,h,m,l){m(function(){h("highcontrast")&&n.add(l.body(),"dijit_a11y")});return h})},"dojo/hccss":function(){define("require ./_base/config ./dom-class ./dom-style ./has ./domReady ./_base/window".split(" "),function(n,h,m,l,e,c,b){e.add("highcontrast",function(){var c=b.doc.createElement("div");
try{c.style.cssText='border: 1px solid; border-color:red green; position: absolute; height: 5px; top: -999px;background-image: url("'+(h.blankGif||n.toUrl("./resources/blank.gif"))+'");';b.body().appendChild(c);var k=l.getComputedStyle(c),a=k.backgroundImage;return k.borderTopColor==k.borderRightColor||a&&("none"==a||"url(invalid-url:)"==a)}catch(d){return console.warn("hccss: exception detecting high-contrast mode, document is likely hidden: "+d.toString()),!1}finally{8>=e("ie")?c.outerHTML="":b.body().removeChild(c)}});
c(function(){e("highcontrast")&&m.add(b.body(),"dj_a11y")});return e})},"dijit/_TemplatedMixin":function(){define("dojo/cache dojo/_base/declare dojo/dom-construct dojo/_base/lang dojo/on dojo/sniff dojo/string ./_AttachMixin".split(" "),function(n,h,m,l,e,c,b,f){var k=h("dijit._TemplatedMixin",f,{templateString:null,templatePath:null,_skipNodeCache:!1,searchContainerNode:!0,_stringRepl:function(a){var d=this.declaredClass,c=this;return b.substitute(a,this,function(a,b){"!"==b.charAt(0)&&(a=l.getObject(b.substr(1),
!1,c));if("undefined"==typeof a)throw Error(d+" template:"+b);return null==a?"":"!"==b.charAt(0)?a:this._escapeValue(""+a)},this)},_escapeValue:function(a){return a.replace(/["'<>&]/g,function(a){return{"\x26":"\x26amp;","\x3c":"\x26lt;","\x3e":"\x26gt;",'"':"\x26quot;","'":"\x26#x27;"}[a]})},buildRendering:function(){if(!this._rendered){this.templateString||(this.templateString=n(this.templatePath,{sanitize:!0}));var a=k.getCachedTemplate(this.templateString,this._skipNodeCache,this.ownerDocument),
b;if(l.isString(a)){if(b=m.toDom(this._stringRepl(a),this.ownerDocument),1!=b.nodeType)throw Error("Invalid template: "+a);}else b=a.cloneNode(!0);this.domNode=b}this.inherited(arguments);this._rendered||this._fillContent(this.srcNodeRef);this._rendered=!0},_fillContent:function(a){var b=this.containerNode;if(a&&b)for(;a.hasChildNodes();)b.appendChild(a.firstChild)}});k._templateCache={};k.getCachedTemplate=function(a,d,c){var f=k._templateCache,e=a,l=f[e];if(l){try{if(!l.ownerDocument||l.ownerDocument==
(c||document))return l}catch(v){}m.destroy(l)}a=b.trim(a);if(d||a.match(/\$\{([^\}]+)\}/g))return f[e]=a;d=m.toDom(a,c);if(1!=d.nodeType)throw Error("Invalid template: "+a);return f[e]=d};c("ie")&&e(window,"unload",function(){var a=k._templateCache,b;for(b in a){var c=a[b];"object"==typeof c&&m.destroy(c);delete a[b]}});return k})},"dojo/cache":function(){define(["./_base/kernel","./text"],function(n){return n.cache})},"dojo/text":function(){define(["./_base/kernel","require","./has","./has!host-browser?./request"],
function(n,h,m,l){var e;m("host-browser")?e=function(a,b,c){l(a,{sync:!!b,headers:{"X-Requested-With":null}}).then(c)}:h.getText?e=h.getText:console.error("dojo/text plugin failed to load because loader does not support getText");var c={},b=function(a){if(a){a=a.replace(/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,"");var b=a.match(/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im);b&&(a=b[1])}else a="";return a},f={},k={};n.cache=function(a,d,f){var k;"string"==typeof a?/\//.test(a)?(k=a,f=d):
k=h.toUrl(a.replace(/\./g,"/")+(d?"/"+d:"")):(k=a+"",f=d);a=void 0!=f&&"string"!=typeof f?f.value:f;f=f&&f.sanitize;if("string"==typeof a)return c[k]=a,f?b(a):a;if(null===a)return delete c[k],null;k in c||e(k,!0,function(a){c[k]=a});return f?b(c[k]):c[k]};return{dynamic:!0,normalize:function(a,b){a=a.split("!");var d=a[0];return(/^\./.test(d)?b(d):d)+(a[1]?"!"+a[1]:"")},load:function(a,d,l){a=a.split("!");var p=1<a.length,q=a[0],h=d.toUrl(a[0]);a="url:"+h;var m=f,n=function(a){l(p?b(a):a)};q in c?
m=c[q]:d.cache&&a in d.cache?m=d.cache[a]:h in c&&(m=c[h]);if(m===f)if(k[h])k[h].push(n);else{var D=k[h]=[n];e(h,!d.async,function(a){c[q]=c[h]=a;for(var b=0;b<D.length;)D[b++](a);delete k[h]})}else n(m)}}})},"dojo/string":function(){define(["./_base/kernel","./_base/lang"],function(n,h){var m=/[&<>'"\/]/g,l={"\x26":"\x26amp;","\x3c":"\x26lt;","\x3e":"\x26gt;",'"':"\x26quot;","'":"\x26#x27;","/":"\x26#x2F;"},e={};h.setObject("dojo.string",e);e.escape=function(c){return c?c.replace(m,function(b){return l[b]}):
""};e.rep=function(c,b){if(0>=b||!c)return"";for(var f=[];;){b&1&&f.push(c);if(!(b>>=1))break;c+=c}return f.join("")};e.pad=function(c,b,f,k){f||(f="0");c=String(c);b=e.rep(f,Math.ceil((b-c.length)/f.length));return k?c+b:b+c};e.substitute=function(c,b,f,e){e=e||n.global;f=f?h.hitch(e,f):function(a){return a};return c.replace(/\$\{([^\s\:\}]*)(?:\:([^\s\:\}]+))?\}/g,function(a,d,c){if(""==d)return"$";a=h.getObject(d,!1,b);c&&(a=h.getObject(c,!1,e).call(e,a,d));c=f(a,d);if("undefined"===typeof c)throw Error('string.substitute could not find key "'+
d+'" in template');return c.toString()})};e.trim=String.prototype.trim?h.trim:function(c){c=c.replace(/^\s+/,"");for(var b=c.length-1;0<=b;b--)if(/\S/.test(c.charAt(b))){c=c.substring(0,b+1);break}return c};return e})},"dijit/_AttachMixin":function(){define("require dojo/_base/array dojo/_base/connect dojo/_base/declare dojo/_base/lang dojo/mouse dojo/on dojo/touch ./_WidgetBase".split(" "),function(n,h,m,l,e,c,b,f,k){var a=e.delegate(f,{mouseenter:c.enter,mouseleave:c.leave,keypress:m._keypress}),
d;m=l("dijit._AttachMixin",null,{constructor:function(){this._attachPoints=[];this._attachEvents=[]},buildRendering:function(){this.inherited(arguments);this._attachTemplateNodes(this.domNode);this._beforeFillContent()},_beforeFillContent:function(){},_attachTemplateNodes:function(a){for(var b=a;;)if(1==b.nodeType&&(this._processTemplateNode(b,function(a,b){return a.getAttribute(b)},this._attach)||this.searchContainerNode)&&b.firstChild)b=b.firstChild;else{if(b==a)break;for(;!b.nextSibling;)if(b=
b.parentNode,b==a)return;b=b.nextSibling}},_processTemplateNode:function(a,b,d){var c=!0,f=this.attachScope||this,k=b(a,"dojoAttachPoint")||b(a,"data-dojo-attach-point");if(k)for(var l=k.split(/\s*,\s*/);k=l.shift();)e.isArray(f[k])?f[k].push(a):f[k]=a,c="containerNode"!=k,this._attachPoints.push(k);if(b=b(a,"dojoAttachEvent")||b(a,"data-dojo-attach-event"))for(k=b.split(/\s*,\s*/),l=e.trim;b=k.shift();)if(b){var p=null;-1!=b.indexOf(":")?(p=b.split(":"),b=l(p[0]),p=l(p[1])):b=l(b);p||(p=b);this._attachEvents.push(d(a,
b,e.hitch(f,p)))}return c},_attach:function(c,f,e){f=f.replace(/^on/,"").toLowerCase();f="dijitclick"==f?d||(d=n("./a11yclick")):a[f]||f;return b(c,f,e)},_detachTemplateNodes:function(){var a=this.attachScope||this;h.forEach(this._attachPoints,function(b){delete a[b]});this._attachPoints=[];h.forEach(this._attachEvents,function(a){a.remove()});this._attachEvents=[]},destroyRendering:function(){this._detachTemplateNodes();this.inherited(arguments)}});e.extend(k,{dojoAttachEvent:"",dojoAttachPoint:""});
return m})},"dijit/_CssStateMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/dom dojo/dom-class dojo/has dojo/_base/lang dojo/on dojo/domReady dojo/touch dojo/_base/window ./a11yclick ./registry".split(" "),function(n,h,m,l,e,c,b,f,k,a,d,q){h=h("dijit._CssStateMixin",[],{hovering:!1,active:!1,_applyAttributes:function(){this.inherited(arguments);n.forEach("disabled readOnly checked selected focused state hovering active _opened".split(" "),function(a){this.watch(a,c.hitch(this,"_setStateClass"))},
this);for(var a in this.cssStateNodes||{})this._trackMouseState(this[a],this.cssStateNodes[a]);this._trackMouseState(this.domNode,this.baseClass);this._setStateClass()},_cssMouseEvent:function(a){if(!this.disabled)switch(a.type){case "mouseover":case "MSPointerOver":case "pointerover":this._set("hovering",!0);this._set("active",this._mouseDown);break;case "mouseout":case "MSPointerOut":case "pointerout":this._set("hovering",!1);this._set("active",!1);break;case "mousedown":case "touchstart":case "MSPointerDown":case "pointerdown":case "keydown":this._set("active",
!0);break;case "mouseup":case "dojotouchend":case "MSPointerUp":case "pointerup":case "keyup":this._set("active",!1)}},_setStateClass:function(){function a(a){b=b.concat(n.map(b,function(b){return b+a}),"dijit"+a)}var b=this.baseClass.split(" ");this.isLeftToRight()||a("Rtl");var d="mixed"==this.checked?"Mixed":this.checked?"Checked":"";this.checked&&a(d);this.state&&a(this.state);this.selected&&a("Selected");this._opened&&a("Opened");this.disabled?a("Disabled"):this.readOnly?a("ReadOnly"):this.active?
a("Active"):this.hovering&&a("Hover");this.focused&&a("Focused");var d=this.stateNode||this.domNode,c={};n.forEach(d.className.split(" "),function(a){c[a]=!0});"_stateClasses"in this&&n.forEach(this._stateClasses,function(a){delete c[a]});n.forEach(b,function(a){c[a]=!0});var f=[],e;for(e in c)f.push(e);d.className=f.join(" ");this._stateClasses=b},_subnodeCssMouseEvent:function(a,b,d){function c(d){l.toggle(a,b+"Active",d)}if(!this.disabled&&!this.readOnly)switch(d.type){case "mouseover":case "MSPointerOver":case "pointerover":l.toggle(a,
b+"Hover",!0);break;case "mouseout":case "MSPointerOut":case "pointerout":l.toggle(a,b+"Hover",!1);c(!1);break;case "mousedown":case "touchstart":case "MSPointerDown":case "pointerdown":case "keydown":c(!0);break;case "mouseup":case "MSPointerUp":case "pointerup":case "dojotouchend":case "keyup":c(!1);break;case "focus":case "focusin":l.toggle(a,b+"Focused",!0);break;case "blur":case "focusout":l.toggle(a,b+"Focused",!1)}},_trackMouseState:function(a,b){a._cssState=b}});f(function(){function c(a,
b,d){if(!d||!m.isDescendant(d,b))for(;b&&b!=d;b=b.parentNode)if(b._cssState){var c=q.getEnclosingWidget(b);c&&(b==c.domNode?c._cssMouseEvent(a):c._subnodeCssMouseEvent(b,b._cssState,a))}}var f=a.body(),e;b(f,k.over,function(a){c(a,a.target,a.relatedTarget)});b(f,k.out,function(a){c(a,a.target,a.relatedTarget)});b(f,d.press,function(a){e=a.target;c(a,e)});b(f,d.release,function(a){c(a,e);e=null});b(f,"focusin, focusout",function(a){var b=a.target;if(b._cssState&&!b.getAttribute("widgetId")){var d=
q.getEnclosingWidget(b);d&&d._subnodeCssMouseEvent(b,b._cssState,a)}})});return h})},"dijit/form/_FormMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/kernel dojo/_base/lang dojo/on dojo/window".split(" "),function(n,h,m,l,e,c){return h("dijit.form._FormMixin",null,{state:"",_getDescendantFormWidgets:function(b){var c=[];n.forEach(b||this.getChildren(),function(b){"value"in b?c.push(b):c=c.concat(this._getDescendantFormWidgets(b.getChildren()))},this);return c},reset:function(){n.forEach(this._getDescendantFormWidgets(),
function(b){b.reset&&b.reset()})},validate:function(){var b=!1;return n.every(n.map(this._getDescendantFormWidgets(),function(f){f._hasBeenBlurred=!0;var e=f.disabled||!f.validate||f.validate();e||b||(c.scrollIntoView(f.containerNode||f.domNode),f.focus(),b=!0);return e}),function(b){return b})},setValues:function(b){m.deprecated(this.declaredClass+"::setValues() is deprecated. Use set('value', val) instead.","","2.0");return this.set("value",b)},_setValueAttr:function(b){var c={};n.forEach(this._getDescendantFormWidgets(),
function(a){a.name&&(c[a.name]||(c[a.name]=[])).push(a)});for(var e in c)if(c.hasOwnProperty(e)){var a=c[e],d=l.getObject(e,!1,b);void 0!==d&&(d=[].concat(d),"boolean"==typeof a[0].checked?n.forEach(a,function(a){a.set("value",-1!=n.indexOf(d,a._get("value")))}):a[0].multiple?a[0].set("value",d):n.forEach(a,function(a,b){a.set("value",d[b])}))}},getValues:function(){m.deprecated(this.declaredClass+"::getValues() is deprecated. Use get('value') instead.","","2.0");return this.get("value")},_getValueAttr:function(){var b=
{};n.forEach(this._getDescendantFormWidgets(),function(c){var e=c.name;if(e&&!c.disabled){var a=c.get("value");"boolean"==typeof c.checked?/Radio/.test(c.declaredClass)?!1!==a?l.setObject(e,a,b):(a=l.getObject(e,!1,b),void 0===a&&l.setObject(e,null,b)):(c=l.getObject(e,!1,b),c||(c=[],l.setObject(e,c,b)),!1!==a&&c.push(a)):(c=l.getObject(e,!1,b),"undefined"!=typeof c?l.isArray(c)?c.push(a):l.setObject(e,[c,a],b):l.setObject(e,a,b))}});return b},isValid:function(){return""==this.state},onValidStateChange:function(){},
_getState:function(){var b=n.map(this._descendants,function(b){return b.get("state")||""});return 0<=n.indexOf(b,"Error")?"Error":0<=n.indexOf(b,"Incomplete")?"Incomplete":""},disconnectChildren:function(){},connectChildren:function(b){this._descendants=this._getDescendantFormWidgets();n.forEach(this._descendants,function(b){b._started||b.startup()});b||this._onChildChange()},_onChildChange:function(b){b&&"state"!=b&&"disabled"!=b||this._set("state",this._getState());b&&"value"!=b&&"disabled"!=b&&
"checked"!=b||(this._onChangeDelayTimer&&this._onChangeDelayTimer.remove(),this._onChangeDelayTimer=this.defer(function(){delete this._onChangeDelayTimer;this._set("value",this.get("value"))},10))},startup:function(){this.inherited(arguments);this._descendants=this._getDescendantFormWidgets();this.value=this.get("value");this.state=this._getState();var b=this;this.own(e(this.containerNode,"attrmodified-state, attrmodified-disabled, attrmodified-value, attrmodified-checked",function(c){c.target!=b.domNode&&
b._onChildChange(c.type.replace("attrmodified-",""))}));this.watch("state",function(b,c,a){this.onValidStateChange(""==a)})},destroy:function(){this.inherited(arguments)}})})},"dijit/_DialogMixin":function(){define(["dojo/_base/declare","./a11y"],function(n,h){return n("dijit._DialogMixin",null,{actionBarTemplate:"",execute:function(){},onCancel:function(){},onExecute:function(){},_onSubmit:function(){this.onExecute();this.execute(this.get("value"))},_getFocusItems:function(){var m=h._getTabNavigable(this.domNode);
this._firstFocusItem=m.lowest||m.first||this.closeButtonNode||this.domNode;this._lastFocusItem=m.last||m.highest||this._firstFocusItem}})})},"dijit/DialogUnderlay":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/dom-attr dojo/dom-style dojo/on dojo/window ./_Widget ./_TemplatedMixin ./BackgroundIframe ./Viewport ./main".split(" "),function(n,h,m,l,e,c,b,f,k,a,d,q){var p=n("dijit.DialogUnderlay",[f,k],{templateString:"\x3cdiv class\x3d'dijitDialogUnderlayWrapper'\x3e\x3cdiv class\x3d'dijitDialogUnderlay' tabIndex\x3d'-1' data-dojo-attach-point\x3d'node'\x3e\x3c/div\x3e\x3c/div\x3e",
dialogId:"","class":"",_modalConnects:[],_setDialogIdAttr:function(a){l.set(this.node,"id",a+"_underlay");this._set("dialogId",a)},_setClassAttr:function(a){this.node.className="dijitDialogUnderlay "+a;this._set("class",a)},postCreate:function(){this.ownerDocumentBody.appendChild(this.domNode);this.own(c(this.domNode,"keydown",h.hitch(this,"_onKeyDown")));this.inherited(arguments)},layout:function(){var a=this.node.style,d=this.domNode.style;d.display="none";var c=b.getBox(this.ownerDocument);d.top=
c.t+"px";d.left=c.l+"px";a.width=c.w+"px";a.height=c.h+"px";d.display="block"},show:function(){this.domNode.style.display="block";this.open=!0;this.layout();this.bgIframe=new a(this.domNode);var e=b.get(this.ownerDocument);this._modalConnects=[d.on("resize",h.hitch(this,"layout")),c(e,"scroll",h.hitch(this,"layout"))]},hide:function(){this.bgIframe.destroy();delete this.bgIframe;for(this.domNode.style.display="none";this._modalConnects.length;)this._modalConnects.pop().remove();this.open=!1},destroy:function(){for(;this._modalConnects.length;)this._modalConnects.pop().remove();
this.inherited(arguments)},_onKeyDown:function(){}});p.show=function(a,b){var d=p._singleton;!d||d._destroyed?d=q._underlay=p._singleton=new p(a):a&&d.set(a);e.set(d.domNode,"zIndex",b);d.open||d.show()};p.hide=function(){var a=p._singleton;a&&!a._destroyed&&a.hide()};return p})},"dijit/BackgroundIframe":function(){define("require ./main dojo/_base/config dojo/dom-construct dojo/dom-style dojo/_base/lang dojo/on dojo/sniff".split(" "),function(n,h,m,l,e,c,b,f){f.add("config-bgIframe",(f("ie")||f("trident"))&&
!/IEMobile\/10\.0/.test(navigator.userAgent));var k=new function(){var a=[];this.pop=function(){var b;a.length?(b=a.pop(),b.style.display=""):(9>f("ie")?(b=m.dojoBlankHtmlUrl||n.toUrl("dojo/resources/blank.html")||'javascript:""',b=document.createElement("\x3ciframe src\x3d'"+b+"' role\x3d'presentation' style\x3d'position: absolute; left: 0px; top: 0px;z-index: -1; filter:Alpha(Opacity\x3d\"0\");'\x3e")):(b=l.create("iframe"),b.src='javascript:""',b.className="dijitBackgroundIframe",b.setAttribute("role",
"presentation"),e.set(b,"opacity",.1)),b.tabIndex=-1);return b};this.push=function(b){b.style.display="none";a.push(b)}};h.BackgroundIframe=function(a){if(!a.id)throw Error("no id");if(f("config-bgIframe")){var d=this.iframe=k.pop();a.appendChild(d);7>f("ie")?(this.resize(a),this._conn=b(a,"resize",c.hitch(this,"resize",a))):e.set(d,{width:"100%",height:"100%"})}};c.extend(h.BackgroundIframe,{resize:function(a){this.iframe&&e.set(this.iframe,{width:a.offsetWidth+"px",height:a.offsetHeight+"px"})},
destroy:function(){this._conn&&(this._conn.remove(),this._conn=null);this.iframe&&(this.iframe.parentNode.removeChild(this.iframe),k.push(this.iframe),delete this.iframe)}});return h.BackgroundIframe})},"dijit/Viewport":function(){define(["dojo/Evented","dojo/on","dojo/domReady","dojo/sniff","dojo/window"],function(n,h,m,l,e){var c=new n,b;m(function(){var f=e.getBox();c._rlh=h(window,"resize",function(){var a=e.getBox();if(f.h!=a.h||f.w!=a.w)f=a,c.emit("resize")});if(8==l("ie")){var k=screen.deviceXDPI;
setInterval(function(){screen.deviceXDPI!=k&&(k=screen.deviceXDPI,c.emit("resize"))},500)}l("ios")&&(h(document,"focusin",function(a){b=a.target}),h(document,"focusout",function(a){b=null}))});c.getEffectiveBox=function(c){c=e.getBox(c);var f=b&&b.tagName&&b.tagName.toLowerCase();l("ios")&&b&&!b.readOnly&&("textarea"==f||"input"==f&&/^(color|email|number|password|search|tel|text|url)$/.test(b.type))&&(c.h*=0==orientation||180==orientation?.66:.4,f=b.getBoundingClientRect(),c.h=Math.max(c.h,f.top+
f.height));return c};return c})},"dijit/layout/ContentPane":function(){define("dojo/_base/kernel dojo/_base/lang ../_Widget ../_Container ./_ContentPaneResizeMixin dojo/string dojo/html dojo/_base/array dojo/_base/declare dojo/_base/Deferred dojo/dom dojo/dom-attr dojo/dom-construct dojo/_base/xhr dojo/i18n dojo/when dojo/i18n!../nls/loading".split(" "),function(n,h,m,l,e,c,b,f,k,a,d,q,p,x,w,v){return k("dijit.layout.ContentPane",[m,l,e],{href:"",content:"",extractContent:!1,parseOnLoad:!0,parserScope:n._scopeName,
preventCache:!1,preload:!1,refreshOnShow:!1,loadingMessage:"\x3cspan class\x3d'dijitContentPaneLoading'\x3e\x3cspan class\x3d'dijitInline dijitIconLoading'\x3e\x3c/span\x3e${loadingState}\x3c/span\x3e",errorMessage:"\x3cspan class\x3d'dijitContentPaneError'\x3e\x3cspan class\x3d'dijitInline dijitIconError'\x3e\x3c/span\x3e${errorState}\x3c/span\x3e",isLoaded:!1,baseClass:"dijitContentPane",ioArgs:{},onLoadDeferred:null,_setTitleAttr:null,stopParser:!0,template:!1,markupFactory:function(a,b,d){var c=
new d(a,b);return!c.href&&c._contentSetter&&c._contentSetter.parseDeferred&&!c._contentSetter.parseDeferred.isFulfilled()?c._contentSetter.parseDeferred.then(function(){return c}):c},create:function(a,b){if(!(a&&a.template||!b||"href"in a||"content"in a)){b=d.byId(b);for(var c=b.ownerDocument.createDocumentFragment();b.firstChild;)c.appendChild(b.firstChild);a=h.delegate(a,{content:c})}this.inherited(arguments,[a,b])},postMixInProperties:function(){this.inherited(arguments);var a=w.getLocalization("dijit",
"loading",this.lang);this.loadingMessage=c.substitute(this.loadingMessage,a);this.errorMessage=c.substitute(this.errorMessage,a)},buildRendering:function(){this.inherited(arguments);this.containerNode||(this.containerNode=this.domNode);this.domNode.removeAttribute("title")},startup:function(){this.inherited(arguments);this._contentSetter&&f.forEach(this._contentSetter.parseResults,function(a){a._started||a._destroyed||!h.isFunction(a.startup)||(a.startup(),a._started=!0)},this)},_startChildren:function(){f.forEach(this.getChildren(),
function(a){a._started||a._destroyed||!h.isFunction(a.startup)||(a.startup(),a._started=!0)});this._contentSetter&&f.forEach(this._contentSetter.parseResults,function(a){a._started||a._destroyed||!h.isFunction(a.startup)||(a.startup(),a._started=!0)},this)},setHref:function(a){n.deprecated("dijit.layout.ContentPane.setHref() is deprecated. Use set('href', ...) instead.","","2.0");return this.set("href",a)},_setHrefAttr:function(b){this.cancel();this.onLoadDeferred=new a(h.hitch(this,"cancel"));this.onLoadDeferred.then(h.hitch(this,
"onLoad"));this._set("href",b);this.preload||this._created&&this._isShown()?this._load():this._hrefChanged=!0;return this.onLoadDeferred},setContent:function(a){n.deprecated("dijit.layout.ContentPane.setContent() is deprecated.  Use set('content', ...) instead.","","2.0");this.set("content",a)},_setContentAttr:function(b){this._set("href","");this.cancel();this.onLoadDeferred=new a(h.hitch(this,"cancel"));this._created&&this.onLoadDeferred.then(h.hitch(this,"onLoad"));this._setContent(b||"");this._isDownloaded=
!1;return this.onLoadDeferred},_getContentAttr:function(){return this.containerNode.innerHTML},cancel:function(){this._xhrDfd&&-1==this._xhrDfd.fired&&this._xhrDfd.cancel();delete this._xhrDfd;this.onLoadDeferred=null},destroy:function(){this.cancel();this.inherited(arguments)},destroyRecursive:function(a){this._beingDestroyed||this.inherited(arguments)},_onShow:function(){this.inherited(arguments);if(this.href&&!this._xhrDfd&&(!this.isLoaded||this._hrefChanged||this.refreshOnShow))return this.refresh()},
refresh:function(){this.cancel();this.onLoadDeferred=new a(h.hitch(this,"cancel"));this.onLoadDeferred.then(h.hitch(this,"onLoad"));this._load();return this.onLoadDeferred},_load:function(){this._setContent(this.onDownloadStart(),!0);var a=this,b={preventCache:this.preventCache||this.refreshOnShow,url:this.href,handleAs:"text"};h.isObject(this.ioArgs)&&h.mixin(b,this.ioArgs);var d=this._xhrDfd=(this.ioMethod||x.get)(b),c;d.then(function(b){c=b;try{return a._isDownloaded=!0,a._setContent(b,!1)}catch(r){a._onError("Content",
r)}},function(b){d.canceled||a._onError("Download",b);delete a._xhrDfd;return b}).then(function(){a.onDownloadEnd();delete a._xhrDfd;return c});delete this._hrefChanged},_onLoadHandler:function(a){this._set("isLoaded",!0);try{this.onLoadDeferred.resolve(a)}catch(D){console.error("Error "+(this.widgetId||this.id)+" running custom onLoad code: "+D.message)}},_onUnloadHandler:function(){this._set("isLoaded",!1);try{this.onUnload()}catch(C){console.error("Error "+this.widgetId+" running custom onUnload code: "+
C.message)}},destroyDescendants:function(a){this.isLoaded&&this._onUnloadHandler();var b=this._contentSetter;f.forEach(this.getChildren(),function(b){b.destroyRecursive?b.destroyRecursive(a):b.destroy&&b.destroy(a);b._destroyed=!0});b&&(f.forEach(b.parseResults,function(b){b._destroyed||(b.destroyRecursive?b.destroyRecursive(a):b.destroy&&b.destroy(a),b._destroyed=!0)}),delete b.parseResults);a||p.empty(this.containerNode);delete this._singleChild},_setContent:function(a,d){a=this.preprocessContent(a);
this.destroyDescendants();var c=this._contentSetter;c&&c instanceof b._ContentSetter||(c=this._contentSetter=new b._ContentSetter({node:this.containerNode,_onError:h.hitch(this,this._onError),onContentError:h.hitch(this,function(a){a=this.onContentError(a);try{this.containerNode.innerHTML=a}catch(E){console.error("Fatal "+this.id+" could not change content due to "+E.message,E)}})}));var e=h.mixin({cleanContent:this.cleanContent,extractContent:this.extractContent,parseContent:!a.domNode&&this.parseOnLoad,
parserScope:this.parserScope,startup:!1,dir:this.dir,lang:this.lang,textDir:this.textDir},this._contentSetterParams||{}),e=c.set(h.isObject(a)&&a.domNode?a.domNode:a,e),f=this;return v(e&&e.then?e:c.parseDeferred,function(){delete f._contentSetterParams;d||(f._started&&(f._startChildren(),f._scheduleLayout()),f._onLoadHandler(a))})},preprocessContent:function(a){return a},_onError:function(a,b,d){this.onLoadDeferred.reject(b);a=this["on"+a+"Error"].call(this,b);d?console.error(d,b):a&&this._setContent(a,
!0)},onLoad:function(){},onUnload:function(){},onDownloadStart:function(){return this.loadingMessage},onContentError:function(){},onDownloadError:function(){return this.errorMessage},onDownloadEnd:function(){}})})},"dijit/_Container":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/dom-construct","dojo/_base/kernel"],function(n,h,m,l){return h("dijit._Container",null,{buildRendering:function(){this.inherited(arguments);this.containerNode||(this.containerNode=this.domNode)},addChild:function(e,
c){var b=this.containerNode;if(0<c){for(b=b.firstChild;0<c;)1==b.nodeType&&c--,b=b.nextSibling;b?c="before":(b=this.containerNode,c="last")}m.place(e.domNode,b,c);this._started&&!e._started&&e.startup()},removeChild:function(e){"number"==typeof e&&(e=this.getChildren()[e]);e&&(e=e.domNode)&&e.parentNode&&e.parentNode.removeChild(e)},hasChildren:function(){return 0<this.getChildren().length},_getSiblingOfChild:function(e,c){var b=this.getChildren();e=n.indexOf(b,e);return b[e+c]},getIndexOfChild:function(e){return n.indexOf(this.getChildren(),
e)}})})},"dijit/layout/_ContentPaneResizeMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/_base/lang dojo/query ../registry ../Viewport ./utils".split(" "),function(n,h,m,l,e,c,b,f,k,a){return h("dijit.layout._ContentPaneResizeMixin",null,{doLayout:!0,isLayoutContainer:!0,startup:function(){if(!this._started){var a=this.getParent();this._childOfLayoutWidget=a&&a.isLayoutContainer;this._needLayout=!this._childOfLayoutWidget;this.inherited(arguments);
this._isShown()&&this._onShow();this._childOfLayoutWidget||this.own(k.on("resize",c.hitch(this,"resize")))}},_checkIfSingleChild:function(){if(this.doLayout){var a=[],c=!1;b("\x3e *",this.containerNode).some(function(b){var d=f.byNode(b);d&&d.resize?a.push(d):!/script|link|style/i.test(b.nodeName)&&b.offsetHeight&&(c=!0)});this._singleChild=1!=a.length||c?null:a[0];m.toggle(this.containerNode,this.baseClass+"SingleChild",!!this._singleChild)}},resize:function(a,b){this._resizeCalled=!0;this._scheduleLayout(a,
b)},_scheduleLayout:function(a,b){this._isShown()?this._layout(a,b):(this._needLayout=!0,this._changeSize=a,this._resultSize=b)},_layout:function(b,e){delete this._needLayout;this._wasShown||!1===this.open||this._onShow();b&&l.setMarginBox(this.domNode,b);var d=this.containerNode;d===this.domNode?(e=e||{},c.mixin(e,b||{}),"h"in e&&"w"in e||(e=c.mixin(l.getMarginBox(d),e)),this._contentBox=a.marginBox2contentBox(d,e)):this._contentBox=l.getContentBox(d);this._layoutChildren()},_layoutChildren:function(){this._checkIfSingleChild();
if(this._singleChild&&this._singleChild.resize){var a=this._contentBox||l.getContentBox(this.containerNode);this._singleChild.resize({w:a.w,h:a.h})}else for(var a=this.getChildren(),b,c=0;b=a[c++];)b.resize&&b.resize()},_isShown:function(){if(this._childOfLayoutWidget)return this._resizeCalled&&"open"in this?this.open:this._resizeCalled;if("open"in this)return this.open;var a=this.domNode,b=this.domNode.parentNode;return"none"!=a.style.display&&"hidden"!=a.style.visibility&&!m.contains(a,"dijitHidden")&&
b&&b.style&&"none"!=b.style.display},_onShow:function(){this._wasShown=!0;this._needLayout&&this._layout(this._changeSize,this._resultSize);this.inherited(arguments)}})})},"dijit/layout/utils":function(){define(["dojo/_base/array","dojo/dom-class","dojo/dom-geometry","dojo/dom-style","dojo/_base/lang"],function(n,h,m,l,e){function c(b){return b.substring(0,1).toUpperCase()+b.substring(1)}function b(b,a){var c=b.resize?b.resize(a):m.setMarginBox(b.domNode,a);c?e.mixin(b,c):(e.mixin(b,m.getMarginBox(b.domNode)),
e.mixin(b,a))}var f={marginBox2contentBox:function(b,a){var c=l.getComputedStyle(b),e=m.getMarginExtents(b,c),f=m.getPadBorderExtents(b,c);return{l:l.toPixelValue(b,c.paddingLeft),t:l.toPixelValue(b,c.paddingTop),w:a.w-(e.w+f.w),h:a.h-(e.h+f.h)}},layoutChildren:function(f,a,d,l,m){a=e.mixin({},a);h.add(f,"dijitLayoutContainer");d=n.filter(d,function(a){return"center"!=a.region&&"client"!=a.layoutAlign}).concat(n.filter(d,function(a){return"center"==a.region||"client"==a.layoutAlign}));n.forEach(d,
function(d){var e=d.domNode,f=d.region||d.layoutAlign;if(!f)throw Error("No region setting for "+d.id);var k=e.style;k.left=a.l+"px";k.top=a.t+"px";k.position="absolute";h.add(e,"dijitAlign"+c(f));e={};l&&l==d.id&&(e["top"==d.region||"bottom"==d.region?"h":"w"]=m);"leading"==f&&(f=d.isLeftToRight()?"left":"right");"trailing"==f&&(f=d.isLeftToRight()?"right":"left");"top"==f||"bottom"==f?(e.w=a.w,b(d,e),a.h-=d.h,"top"==f?a.t+=d.h:k.top=a.t+a.h+"px"):"left"==f||"right"==f?(e.h=a.h,b(d,e),a.w-=d.w,"left"==
f?a.l+=d.w:k.left=a.l+a.w+"px"):"client"!=f&&"center"!=f||b(d,a)})}};e.setObject("dijit.layout.utils",f);return f})},"dojo/html":function(){define("./_base/kernel ./_base/lang ./_base/array ./_base/declare ./dom ./dom-construct ./parser".split(" "),function(n,h,m,l,e,c,b){var f=0,k={_secureForInnerHtml:function(a){return a.replace(/(?:\s*<!DOCTYPE\s[^>]+>|<title[^>]*>[\s\S]*?<\/title>)/ig,"")},_emptyNode:c.empty,_setNodeContent:function(a,b){c.empty(a);if(b)if("number"==typeof b&&(b=b.toString()),
"string"==typeof b&&(b=c.toDom(b,a.ownerDocument)),!b.nodeType&&h.isArrayLike(b))for(var d=b.length,e=0;e<b.length;e=d==b.length?e+1:0)c.place(b[e],a,"last");else c.place(b,a,"last");return a},_ContentSetter:l("dojo.html._ContentSetter",null,{node:"",content:"",id:"",cleanContent:!1,extractContent:!1,parseContent:!1,parserScope:n._scopeName,startup:!0,constructor:function(a,b){h.mixin(this,a||{});b=this.node=e.byId(this.node||b);this.id||(this.id=["Setter",b?b.id||b.tagName:"",f++].join("_"))},set:function(a,
b){void 0!==a&&(this.content=a);"number"==typeof a&&(a=a.toString());b&&this._mixin(b);this.onBegin();this.setContent();return(a=this.onEnd())&&a.then?a:this.node},setContent:function(){var a=this.node;if(!a)throw Error(this.declaredClass+": setContent given no node");try{a=k._setNodeContent(a,this.content)}catch(q){var b=this.onContentError(q);try{a.innerHTML=b}catch(p){console.error("Fatal "+this.declaredClass+".setContent could not change content due to "+p.message,p)}}this.node=a},empty:function(){this.parseDeferred&&
(this.parseDeferred.isResolved()||this.parseDeferred.cancel(),delete this.parseDeferred);this.parseResults&&this.parseResults.length&&(m.forEach(this.parseResults,function(a){a.destroy&&a.destroy()}),delete this.parseResults);c.empty(this.node)},onBegin:function(){var a=this.content;if(h.isString(a)&&(this.cleanContent&&(a=k._secureForInnerHtml(a)),this.extractContent)){var b=a.match(/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im);b&&(a=b[1])}this.empty();this.content=a;return this.node},onEnd:function(){this.parseContent&&
this._parse();return this.node},tearDown:function(){delete this.parseResults;delete this.parseDeferred;delete this.node;delete this.content},onContentError:function(a){return"Error occurred setting content: "+a},onExecError:function(a){return"Error occurred executing scripts: "+a},_mixin:function(a){var b={},c;for(c in a)c in b||(this[c]=a[c])},_parse:function(){var a=this.node;try{var c={};m.forEach(["dir","lang","textDir"],function(a){this[a]&&(c[a]=this[a])},this);var e=this;this.parseDeferred=
b.parse({rootNode:a,noStart:!this.startup,inherited:c,scope:this.parserScope}).then(function(a){return e.parseResults=a},function(a){e._onError("Content",a,"Error parsing in _ContentSetter#"+e.id)})}catch(p){this._onError("Content",p,"Error parsing in _ContentSetter#"+this.id)}},_onError:function(a,b,c){a=this["on"+a+"Error"].call(this,b);c?console.error(c,b):a&&k._setNodeContent(this.node,a,!0)}}),set:function(a,b,c){void 0==b&&(console.warn("dojo.html.set: no cont argument provided, using empty string"),
b="");"number"==typeof b&&(b=b.toString());return c?(new k._ContentSetter(h.mixin(c,{content:b,node:a}))).set():k._setNodeContent(a,b,!0)}};h.setObject("dojo.html",k);return k})},"dojo/parser":function(){define("require ./_base/kernel ./_base/lang ./_base/array ./_base/config ./dom ./_base/window ./_base/url ./aspect ./promise/all ./date/stamp ./Deferred ./has ./query ./on ./ready".split(" "),function(n,h,m,l,e,c,b,f,k,a,d,q,p,x,w,v){function C(a){return eval("("+a+")")}function D(a){var b=a._nameCaseMap,
c=a.prototype;if(!b||b._extendCnt<t){var b=a._nameCaseMap={},d;for(d in c)"_"!==d.charAt(0)&&(b[d.toLowerCase()]=d);b._extendCnt=t}return b}function u(a,b){b||(b=n);var c=b._dojoParserCtorMap||(b._dojoParserCtorMap={}),d=a.join();if(!c[d]){for(var e=[],f=0,k=a.length;f<k;f++){var l=a[f];e[e.length]=c[l]=c[l]||m.getObject(l)||~l.indexOf("/")&&b(l)}a=e.shift();c[d]=e.length?a.createSubclass?a.createSubclass(e):a.extend.apply(a,e):a}return c[d]}new Date("X");var t=0;k.after(m,"extend",function(){t++},
!0);p={_clearCache:function(){t++;_ctorMap={}},_functionFromScript:function(a,b){var c="",d="",e=a.getAttribute(b+"args")||a.getAttribute("args");b=a.getAttribute("with");e=(e||"").split(/\s*,\s*/);b&&b.length&&l.forEach(b.split(/\s*,\s*/),function(a){c+="with("+a+"){";d+="}"});return new Function(e,c+a.innerHTML+d)},instantiate:function(a,b,c){b=b||{};c=c||{};var d=(c.scope||h._scopeName)+"Type",e="data-"+(c.scope||h._scopeName)+"-",f=e+"type",k=e+"mixins",m=[];l.forEach(a,function(a){var g=d in
b?b[d]:a.getAttribute(f)||a.getAttribute(d);if(g){var c=a.getAttribute(k),g=c?[g].concat(c.split(/\s*,\s*/)):[g];m.push({node:a,types:g})}});return this._instantiate(m,b,c)},_instantiate:function(b,c,d,e){function f(a){c._started||d.noStart||l.forEach(a,function(a){"function"!==typeof a.startup||a._started||a.startup()});return a}b=l.map(b,function(a){var b=a.ctor||u(a.types,d.contextRequire);if(!b)throw Error("Unable to resolve constructor for: '"+a.types.join()+"'");return this.construct(b,a.node,
c,d,a.scripts,a.inherited)},this);return e?a(b).then(f):f(b)},construct:function(a,b,c,e,l,n){function r(a){v&&m.setObject(v,a);for(q=0;q<O.length;q++)k[O[q].advice||"after"](a,O[q].method,m.hitch(a,O[q].func),!0);for(q=0;q<E.length;q++)E[q].call(a);for(q=0;q<z.length;q++)a.watch(z[q].prop,z[q].func);for(q=0;q<H.length;q++)w(a,H[q].event,H[q].func);return a}var p=a&&a.prototype;e=e||{};var g={};e.defaults&&m.mixin(g,e.defaults);n&&m.mixin(g,n);var A;A=b.attributes;var B=e.scope||h._scopeName;n="data-"+
B+"-";var y={};"dojo"!==B&&(y[n+"props"]="data-dojo-props",y[n+"type"]="data-dojo-type",y[n+"mixins"]="data-dojo-mixins",y[B+"type"]="dojotype",y[n+"id"]="data-dojo-id");for(var q=0,F,B=[],v,t;F=A[q++];){var u=F.name,M=u.toLowerCase();F=F.value;switch(y[M]||M){case "data-dojo-type":case "dojotype":case "data-dojo-mixins":break;case "data-dojo-props":t=F;break;case "data-dojo-id":case "jsid":v=F;break;case "data-dojo-attach-point":case "dojoattachpoint":g.dojoAttachPoint=F;break;case "data-dojo-attach-event":case "dojoattachevent":g.dojoAttachEvent=
F;break;case "class":g["class"]=b.className;break;case "style":g.style=b.style&&b.style.cssText;break;default:if(u in p||(u=D(a)[M]||u),u in p)switch(typeof p[u]){case "string":g[u]=F;break;case "number":g[u]=F.length?Number(F):NaN;break;case "boolean":g[u]="false"!=F.toLowerCase();break;case "function":""===F||-1!=F.search(/[^\w\.]+/i)?g[u]=new Function(F):g[u]=m.getObject(F,!1)||new Function(F);B.push(u);break;default:M=p[u],g[u]=M&&"length"in M?F?F.split(/\s*,\s*/):[]:M instanceof Date?""==F?new Date(""):
"now"==F?new Date:d.fromISOString(F):M instanceof f?h.baseUrl+F:C(F)}else g[u]=F}}for(A=0;A<B.length;A++)y=B[A].toLowerCase(),b.removeAttribute(y),b[y]=null;if(t)try{t=C.call(e.propsThis,"{"+t+"}"),m.mixin(g,t)}catch(Q){throw Error(Q.toString()+" in data-dojo-props\x3d'"+t+"'");}m.mixin(g,c);l||(l=a&&(a._noScript||p._noScript)?[]:x("\x3e script[type^\x3d'dojo/']",b));var O=[],E=[],z=[],H=[];if(l)for(q=0;q<l.length;q++)y=l[q],b.removeChild(y),c=y.getAttribute(n+"event")||y.getAttribute("event"),e=
y.getAttribute(n+"prop"),t=y.getAttribute(n+"method"),B=y.getAttribute(n+"advice"),A=y.getAttribute("type"),y=this._functionFromScript(y,n),c?"dojo/connect"==A?O.push({method:c,func:y}):"dojo/on"==A?H.push({event:c,func:y}):g[c]=y:"dojo/aspect"==A?O.push({method:t,advice:B,func:y}):"dojo/watch"==A?z.push({prop:e,func:y}):E.push(y);a=(l=a.markupFactory||p.markupFactory)?l(g,b,a):new a(g,b);return a.then?a.then(r):r(a)},scan:function(a,b){function c(a){if(!a.inherited){a.inherited={};var b=a.node,g=
c(a.parent),b={dir:b.getAttribute("dir")||g.dir,lang:b.getAttribute("lang")||g.lang,textDir:b.getAttribute(A)||g.textDir},d;for(d in b)b[d]&&(a.inherited[d]=b[d])}return a.inherited}var d=[],e=[],f={},k=(b.scope||h._scopeName)+"Type",m="data-"+(b.scope||h._scopeName)+"-",g=m+"type",A=m+"textdir",m=m+"mixins",B=a.firstChild,y=b.inherited;if(!y){var p=function(a,b){return a.getAttribute&&a.getAttribute(b)||a.parentNode&&p(a.parentNode,b)},y={dir:p(a,"dir"),lang:p(a,"lang"),textDir:p(a,A)},r;for(r in y)y[r]||
delete y[r]}r={inherited:y};for(var w,v;;)if(B)if(1!=B.nodeType)B=B.nextSibling;else if(w&&"script"==B.nodeName.toLowerCase())(y=B.getAttribute("type"))&&/^dojo\/\w/i.test(y)&&w.push(B),B=B.nextSibling;else if(v)B=B.nextSibling;else if(y=B.getAttribute(g)||B.getAttribute(k),a=B.firstChild,y||a&&(3!=a.nodeType||a.nextSibling)){v=null;if(y){var x=B.getAttribute(m);w=x?[y].concat(x.split(/\s*,\s*/)):[y];try{v=u(w,b.contextRequire)}catch(O){}v||l.forEach(w,function(a){~a.indexOf("/")&&!f[a]&&(f[a]=!0,
e[e.length]=a)});x=v&&!v.prototype._noScript?[]:null;r={types:w,ctor:v,parent:r,node:B,scripts:x};r.inherited=c(r);d.push(r)}else r={node:B,scripts:w,parent:r};w=x;v=B.stopParser||v&&v.prototype.stopParser&&!b.template;B=a}else B=B.nextSibling;else{if(!r||!r.node)break;B=r.node.nextSibling;v=!1;r=r.parent;w=r.scripts}var M=new q;e.length?(b.contextRequire||n)(e,function(){M.resolve(l.filter(d,function(a){if(!a.ctor)try{a.ctor=u(a.types,b.contextRequire)}catch(R){}for(var g=a.parent;g&&!g.types;)g=
g.parent;var c=a.ctor&&a.ctor.prototype;a.instantiateChildren=!(c&&c.stopParser&&!b.template);a.instantiate=!g||g.instantiate&&g.instantiateChildren;return a.instantiate}))}):M.resolve(d);return M.promise},_require:function(a,b){a=C("{"+a.innerHTML+"}");var c=[],d=[],e=new q;b=b&&b.contextRequire||n;for(var f in a)c.push(f),d.push(a[f]);b(d,function(){for(var a=0;a<c.length;a++)m.setObject(c[a],arguments[a]);e.resolve(arguments)});return e.promise},_scanAmd:function(a,b){var c=new q,d=c.promise;c.resolve(!0);
var e=this;x("script[type\x3d'dojo/require']",a).forEach(function(a){d=d.then(function(){return e._require(a,b)});a.parentNode.removeChild(a)});return d},parse:function(a,d){!a||"string"==typeof a||"nodeType"in a||(d=a,a=d.rootNode);var e=a?c.byId(a):b.body();d=d||{};var f=d.template?{template:!0}:{},k=[],l=this;a=this._scanAmd(e,d).then(function(){return l.scan(e,d)}).then(function(a){return l._instantiate(a,f,d,!0)}).then(function(a){return k=k.concat(a)}).otherwise(function(a){console.error("dojo/parser::parse() error",
a);throw a;});m.mixin(k,a);return k}};h.parser=p;e.parseOnLoad&&v(100,p,"parse");return p})},"dojo/_base/url":function(){define(["./kernel"],function(n){var h=/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/,m=/^((([^\[:]+):)?([^@]+)@)?(\[([^\]]+)\]|([^\[:]*))(:([0-9]+))?$/,l=function(){for(var e=arguments,c=[e[0]],b=1;b<e.length;b++)if(e[b]){var f=new l(e[b]+""),c=new l(c[0]+"");if(""==f.path&&!f.scheme&&!f.authority&&!f.query)null!=f.fragment&&(c.fragment=f.fragment),f=c;else if(!f.scheme&&
(f.scheme=c.scheme,!f.authority&&(f.authority=c.authority,"/"!=f.path.charAt(0)))){for(var c=(c.path.substring(0,c.path.lastIndexOf("/")+1)+f.path).split("/"),k=0;k<c.length;k++)"."==c[k]?k==c.length-1?c[k]="":(c.splice(k,1),k--):0<k&&(1!=k||""!=c[0])&&".."==c[k]&&".."!=c[k-1]&&(k==c.length-1?(c.splice(k,1),c[k-1]=""):(c.splice(k-1,2),k-=2));f.path=c.join("/")}c=[];f.scheme&&c.push(f.scheme,":");f.authority&&c.push("//",f.authority);c.push(f.path);f.query&&c.push("?",f.query);f.fragment&&c.push("#",
f.fragment)}this.uri=c.join("");e=this.uri.match(h);this.scheme=e[2]||(e[1]?"":null);this.authority=e[4]||(e[3]?"":null);this.path=e[5];this.query=e[7]||(e[6]?"":null);this.fragment=e[9]||(e[8]?"":null);null!=this.authority&&(e=this.authority.match(m),this.user=e[3]||null,this.password=e[4]||null,this.host=e[6]||e[7],this.port=e[9]||null)};l.prototype.toString=function(){return this.uri};return n._Url=l})},"dojo/date/stamp":function(){define(["../_base/lang","../_base/array"],function(n,h){var m=
{};n.setObject("dojo.date.stamp",m);m.fromISOString=function(l,e){m._isoRegExp||(m._isoRegExp=/^(?:(\d{4})(?:-(\d{2})(?:-(\d{2}))?)?)?(?:T(\d{2}):(\d{2})(?::(\d{2})(.\d+)?)?((?:[+-](\d{2}):(\d{2}))|Z)?)?$/);var c=m._isoRegExp.exec(l);l=null;if(c){c.shift();c[1]&&c[1]--;c[6]&&(c[6]*=1E3);e&&(e=new Date(e),h.forEach(h.map("FullYear Month Date Hours Minutes Seconds Milliseconds".split(" "),function(b){return e["get"+b]()}),function(b,a){c[a]=c[a]||b}));l=new Date(c[0]||1970,c[1]||0,c[2]||1,c[3]||0,c[4]||
0,c[5]||0,c[6]||0);100>c[0]&&l.setFullYear(c[0]||1970);var b=0,f=c[7]&&c[7].charAt(0);"Z"!=f&&(b=60*(c[8]||0)+(Number(c[9])||0),"-"!=f&&(b*=-1));f&&(b-=l.getTimezoneOffset());b&&l.setTime(l.getTime()+6E4*b)}return l};m.toISOString=function(l,e){var c=function(a){return 10>a?"0"+a:a};e=e||{};var b=[],f=e.zulu?"getUTC":"get",k="";"time"!=e.selector&&(k=l[f+"FullYear"](),k=["0000".substr((k+"").length)+k,c(l[f+"Month"]()+1),c(l[f+"Date"]())].join("-"));b.push(k);"date"!=e.selector&&(k=[c(l[f+"Hours"]()),
c(l[f+"Minutes"]()),c(l[f+"Seconds"]())].join(":"),f=l[f+"Milliseconds"](),e.milliseconds&&(k+="."+(100>f?"0":"")+c(f)),e.zulu?k+="Z":"time"!=e.selector&&(l=l.getTimezoneOffset(),e=Math.abs(l),k+=(0<l?"-":"+")+c(Math.floor(e/60))+":"+c(e%60)),b.push(k));return b.join("T")};return m})},"esri/identity/IdentityManagerBase":function(){define("require exports ../core/tsSupport/assignHelper ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../config ../kernel ../request ../core/cookie ../core/Error ../core/Evented ../core/global ../core/lang ../core/object ../core/promiseUtils ../core/string ../core/urlUtils ../core/urlUtils ../core/accessorSupport/decorators ./OAuthCredential ./OAuthInfo ./ServerInfo".split(" "),
function(n,h,m,l,e,c,b,f,k,a,d,q,p,x,w,v,C,D,u,t,z,r){Object.defineProperty(h,"__esModule",{value:!0});var E={},H=function(a){var b=(new D.Url(a.owningSystemUrl)).host;a=(new D.Url(a.server)).host;var g=/.+\.arcgis\.com$/i;return g.test(b)&&g.test(a)},I=function(a,b){return!!(H(a)&&b&&b.some(function(b){return b.test(a.server)}))};n=function(d){function h(){var a=d.call(this)||this;a._portalConfig=q.esriGeowConfig;a.serverInfos=[];a.oAuthInfos=[];a.credentials=[];a._soReqs=[];a._xoReqs=[];a._portals=
[];a.defaultOAuthInfo=null;a.defaultTokenValidity=60;a.tokenValidity=null;a.signInPage=null;a.useSignInPage=!0;a.normalizeWebTierAuth=!1;a._busy=null;a._rejectOnPersistedPageShow=!1;a._oAuthHash=null;a._gwTokenUrl="/sharing/rest/generateToken";a._agsRest="/rest/services";a._agsPortal=/\/sharing(\/|$)/i;a._agsAdmin=/(https?:\/\/[^\/]+\/[^\/]+)\/admin\/?(\/.*)?$/i;a._adminSvcs=/\/rest\/admin\/services(\/|$)/i;a._agolSuffix=".arcgis.com";a._gwDomains=[{regex:/^https?:\/\/www\.arcgis\.com/i,tokenServiceUrl:"https://www.arcgis.com/sharing/rest/generateToken"},
{regex:/^https?:\/\/dev\.arcgis\.com/i,tokenServiceUrl:"https://dev.arcgis.com/sharing/rest/generateToken"},{regex:/^https?:\/\/[\w\.]*dev[^.]*\.arcgis\.com/i,tokenServiceUrl:"https://devext.arcgis.com/sharing/rest/generateToken"},{regex:/^https?:\/\/[\w\.]*qa[^.]*\.arcgis\.com/i,tokenServiceUrl:"https://qaext.arcgis.com/sharing/rest/generateToken"},{regex:/^https?:\/\/[\w\.]*\.arcgis\.com/i,tokenServiceUrl:"https://www.arcgis.com/sharing/rest/generateToken"}];a._legacyFed=[];a._regexSDirUrl=/http.+\/rest\/services\/?/gi;
a._regexServerType=/(\/(MapServer|GeocodeServer|GPServer|GeometryServer|ImageServer|NAServer|FeatureServer|GeoDataServer|GlobeServer|MobileServer|GeoenrichmentServer|VectorTileServer|SceneServer)).*/gi;a._gwUser=/http.+\/users\/([^\/]+)\/?.*/i;a._gwItem=/http.+\/items\/([^\/]+)\/?.*/i;a._gwGroup=/http.+\/groups\/([^\/]+)\/?.*/i;a._rePortalTokenSvc=/\/sharing(\/rest)?\/generatetoken/i;a._createDefaultOAuthInfo=!0;a._hasTestedIfAppIsOnPortal=!1;a._getOAuthHash();window.addEventListener("pageshow",function(b){a._pageShowHandler(b)});
return a}l(h,d);h.prototype.registerServers=function(a){var b=this,g=this.serverInfos;g?(a=a.filter(function(a){return!b.findServerInfo(a.server)}),this.serverInfos=g.concat(a)):this.serverInfos=a;a.forEach(function(a){a.owningSystemUrl&&b._portals.push(a.owningSystemUrl);a.hasPortal&&b._portals.push(a.server)})};h.prototype.registerOAuthInfos=function(a){var b=this,g=this.oAuthInfos;g?(a=a.filter(function(a){return!b.findOAuthInfo(a.portalUrl)}),this.oAuthInfos=g.concat(a)):this.oAuthInfos=a};h.prototype.registerToken=
function(a){a=m({},a);var b=this._sanitizeUrl(a.server),g=this._isServerRsrc(b),c=this.findServerInfo(b),d=!0,e;c||(c=new r,c.server=this._getServerInstanceRoot(b),g?c.hasServer=!0:(c.tokenServiceUrl=this._getTokenSvcUrl(b),c.hasPortal=!0),this.registerServers([c]));(e=this._findCredential(b))?(delete a.server,p.mixin(e,a),d=!1):(e=new G({userId:a.userId,server:c.server,token:a.token,expires:a.expires,ssl:a.ssl,scope:g?"server":"portal"}),e.resources=[b],this.credentials.push(e));e.emitTokenChange(!1);
d||e.refreshServerTokens()};h.prototype.toJSON=function(){return p.fixJson({serverInfos:this.serverInfos.map(function(a){return a.toJSON()}),oAuthInfos:this.oAuthInfos.map(function(a){return a.toJSON()}),credentials:this.credentials.map(function(a){return a.toJSON()})})};h.prototype.initialize=function(a){var b=this;if(a){"string"===typeof a&&(a=JSON.parse(a));var g=a.serverInfos,c=a.oAuthInfos;a=a.credentials;if(g){var d=[];g.forEach(function(a){a.server&&a.tokenServiceUrl&&d.push(a.declaredClass?
a:new r(a))});d.length&&this.registerServers(d)}if(c){var e=[];c.forEach(function(a){a.appId&&e.push(a.declaredClass?a:new z(a))});e.length&&this.registerOAuthInfos(e)}a&&a.forEach(function(a){a.server&&a.token&&a.expires&&a.expires>Date.now()&&(a=a.declaredClass?a:new G(a),a.emitTokenChange(),b.credentials.push(a))})}};h.prototype.findServerInfo=function(a){var b;a=this._sanitizeUrl(a);for(var g=0,c=this.serverInfos;g<c.length;g++){var d=c[g];if(this._hasSameServerInstance(d.server,a)){b=d;break}}return b};
h.prototype.findOAuthInfo=function(a){var b;a=this._sanitizeUrl(a);for(var g=0,c=this.oAuthInfos;g<c.length;g++){var d=c[g];if(this._hasSameServerInstance(d.portalUrl,a)){b=d;break}}return b};h.prototype.findCredential=function(a,b){var g,c;a=this._sanitizeUrl(a);c=this._isServerRsrc(a)?"server":"portal";if(b)for(var d=0,e=this.credentials;d<e.length;d++){var f=e[d];if(this._hasSameServerInstance(f.server,a)&&b===f.userId&&f.scope===c){g=f;break}}else for(b=0,d=this.credentials;b<d.length;b++)if(f=
d[b],this._hasSameServerInstance(f.server,a)&&-1!==this._getIdenticalSvcIdx(a,f)&&f.scope===c){g=f;break}return g};h.prototype.getCredential=function(b,c){var g,d,e=!0;c&&(g=!!c.token,d=c.error,e=!1!==c.prompt);c=m({},c);b=this._sanitizeUrl(b);var f=w.createAbortController(),l=w.createResolver(function(){f.abort()});if(c&&c.signal)w.onAbort(c.signal,function(){f.abort()});w.onAbort(f,function(){l.reject(new a("identity-manager:user-aborted","ABORTED"))});if(w.isAborted(f))return l.promise;c.signal=
f.signal;var h=this._isAdminResource(b),A=g&&this._doPortalSignIn(b)?this._getEsriAuthCookie():null;if((g=g?this.findCredential(b):null)&&d&&d.details&&498===d.details.httpStatus)g.destroy(),A&&A.token===c.token&&(k.writeCookie("esri_auth",null,{expires:-1,path:"/",domain:document.domain}),v.endsWith(window.location.hostname,".arcgis.com")&&k.writeCookie("esri_auth",null,{expires:-1,path:"/",domain:"arcgis.com"}));else if(A||g)return b=new a("identity-manager:not-authorized","You are currently signed in as: '"+
(A&&A.email||g&&g.userId)+"'. You do not have access to this resource: "+b,{error:d}),l.reject(b),l.promise;if(d=this._findCredential(b,c))return l.resolve(d),l.promise;d=this.findServerInfo(b);if(d)!d.hasServer&&this._isServerRsrc(b)&&(d._restInfoPms=this._getTokenSvcUrl(b),d.hasServer=!0);else{A=this._getTokenSvcUrl(b);if(!A)return b=new a("identity-manager:unknown-resource","Unknown resource - could not find token service endpoint."),l.reject(b),l.promise;d=new r;d.server=this._getServerInstanceRoot(b);
"string"===typeof A?(d.tokenServiceUrl=A,d.hasPortal=!0):(d._restInfoPms=A,d.hasServer=!0);this.registerServers([d])}e&&d.hasPortal&&void 0===d._selfReq&&!this._findOAuthInfo(b)&&(d._selfReq={owningTenant:c&&c.owningTenant,selfDfd:this._getPortalSelf(d.tokenServiceUrl.replace(this._rePortalTokenSvc,"/sharing/rest/portals/self"),b)});return this._enqueue(b,d,c,l,h)};h.prototype.getResourceName=function(a){return this._isRESTService(a)?a.replace(this._regexSDirUrl,"").replace(this._regexServerType,
"")||"":this._gwUser.test(a)&&a.replace(this._gwUser,"$1")||this._gwItem.test(a)&&a.replace(this._gwItem,"$1")||this._gwGroup.test(a)&&a.replace(this._gwGroup,"$1")||""};h.prototype.generateToken=function(g,c,d){var e=this._rePortalTokenSvc.test(g.tokenServiceUrl),k=new D.Url(window.location.href.toLowerCase()),l=this._getEsriAuthCookie(),h=g.shortLivedTokenValidity,A,m,n,q,r,B,w,v;c&&(v=b.id.tokenValidity||h||b.id.defaultTokenValidity,v>h&&0<h&&(v=h));d&&(m=d.isAdmin,n=d.serverUrl,q=d.token,B=d.signal,
w=d.ssl,g.customParameters=d.customParameters);m?h=g.adminTokenServiceUrl:(h=g.tokenServiceUrl,r=new D.Url(h.toLowerCase()),l&&(A=(A=l.auth_tier)&&A.toLowerCase()),("web"===A||g.webTierAuth)&&d&&d.serverUrl&&!w&&"http"===k.scheme&&(C.hasSameOrigin(k.uri,h,!0)||"https"===r.scheme&&k.host===r.host&&"7080"===k.port&&"7443"===r.port)&&(h=h.replace(/^https:/i,"http:").replace(/:7443/i,":7080")));d=p.mixin({query:p.mixin({request:"getToken",username:c&&c.username,password:c&&c.password,serverUrl:n,token:q,
expiration:v,referer:m||e?window.location.host:null,client:m?"referer":null,f:"json"},g.customParameters),method:"post",authMode:"anonymous",useProxy:this._useProxy(g,d),responseType:"json",signal:B},d&&d.ioArgs);e||(d.withCredentials=!1);return f(h,d).then(function(b){b=b.data;if(!b||!b.token)return new a("identity-manager:authentication-failed","Unable to generate token");var d=g.server;E[d]||(E[d]={});c&&(E[d][c.username]=c.password);b.validity=v;return b})};h.prototype.isBusy=function(){return!!this._busy};
h.prototype.checkSignInStatus=function(a){return this.checkAppAccess(a,"").then(function(a){return a.credential})};h.prototype.checkAppAccess=function(b,c,d){var g=this,e=!1;return this.getCredential(b,{prompt:!1}).then(function(k){var l,h={f:"json"};if("portal"===k.scope)if(c&&(g._doPortalSignIn(b,!0)||d&&d.force))l=k.server+"/sharing/rest/oauth2/validateAppAccess",h.client_id=c;else if(k.token)l=k.server+"/sharing/rest";else return{credential:k};else if(k.token)l=k.server+"/rest/services";else return{credential:k};
k.token&&(h.token=k.token);return f(l,{query:h,authMode:"anonymous"}).then(function(b){if(!1===b.data.valid)throw new a("identity-manager:not-authorized","You are currently signed in as: '"+k.userId+"'.");e=!!b.data.viewOnlyUserTypeApp;return{credential:k}}).catch(function(b){if("identity-manager:not-authorized"===b.name)throw b;b=b.details&&b.details.httpStatus;if(498===b)throw k.destroy(),new a("identity-manager:not-authenticated","User is not signed in.");if(400===b)throw new a("identity-manager:invalid-request");
return{credential:k}})}).then(function(a){return{credential:a.credential,viewOnly:e}})};h.prototype.setRedirectionHandler=function(a){this._redirectFunc=a};h.prototype.setProtocolErrorHandler=function(a){this._protocolFunc=a};h.prototype.destroyCredentials=function(){this.credentials&&this.credentials.slice().forEach(function(a){a.destroy()});this.emit("credentials-destroy")};h.prototype._getOAuthHash=function(){var a=window.location.hash;if(a){"#"===a.charAt(0)&&(a=a.substring(1));var a=C.queryToObject(a),
b=!1;a.access_token&&a.expires_in&&a.state&&a.hasOwnProperty("username")?(a.state=JSON.parse(a.state),this._oAuthHash=a,b=!0):a.error&&a.error_description&&(console.log("IdentityManager OAuth Error: ",a.error," - ",a.error_description),"access_denied"===a.error&&(b=!0));b&&(window.location.hash="object"===typeof a.state&&a.state.hash||"")}};h.prototype._pageShowHandler=function(b){b.persisted&&this.isBusy()&&this._rejectOnPersistedPageShow&&(b=new a("identity-manager:user-aborted","ABORTED"),this._errbackFunc(b))};
h.prototype._findCredential=function(a,b){var c=this,d=-1,g,e,f,k=b&&b.token;b=b&&b.resource;var l=this._isServerRsrc(a)?"server":"portal",h=this.credentials.filter(function(b){return c._hasSameServerInstance(b.server,a)&&b.scope===l});a=b||a;if(h.length)if(1===h.length)if(b=h[0],e=(g=(f=this.findServerInfo(b.server))&&f.owningSystemUrl)&&this.findCredential(g,b.userId),d=this._getIdenticalSvcIdx(a,b),k)-1!==d&&(b.resources.splice(d,1),this._removeResource(a,e));else return-1===d&&b.resources.push(a),
this._addResource(a,e),b;else{var m,A;h.some(function(b){A=c._getIdenticalSvcIdx(a,b);return-1!==A?(m=b,e=(g=(f=c.findServerInfo(m.server))&&f.owningSystemUrl)&&c.findCredential(g,m.userId),d=A,!0):!1});if(k)m&&(m.resources.splice(d,1),this._removeResource(a,e));else if(m)return this._addResource(a,e),m}};h.prototype._findOAuthInfo=function(a){var b=this.findOAuthInfo(a);if(!b)for(var c=0,d=this.oAuthInfos;c<d.length;c++){var g=d[c];if(this._isIdProvider(g.portalUrl,a)){b=g;break}}return b};h.prototype._addResource=
function(a,b){b&&-1===this._getIdenticalSvcIdx(a,b)&&b.resources.push(a)};h.prototype._removeResource=function(a,b){var c=-1;b&&(c=this._getIdenticalSvcIdx(a,b),-1<c&&b.resources.splice(c,1))};h.prototype._useProxy=function(a,b){return b&&b.isAdmin&&!C.hasSameOrigin(a.adminTokenServiceUrl,window.location.href)||!this._isPortalDomain(a.tokenServiceUrl)&&"10.1"===String(a.currentVersion)&&!C.hasSameOrigin(a.tokenServiceUrl,window.location.href)};h.prototype._getOrigin=function(a){a=new D.Url(a);return a.scheme+
"://"+a.host+(null!=a.port?":"+a.port:"")};h.prototype._getServerInstanceRoot=function(a){var b=a.toLowerCase(),c=b.indexOf(this._agsRest);-1===c&&this._isAdminResource(a)&&(c=this._agsAdmin.test(a)?a.replace(this._agsAdmin,"$1").length:a.search(this._adminSvcs));-1===c&&(c=b.indexOf("/sharing"));-1===c&&"/"===b.substr(-1)&&(c=b.length-1);return-1<c?a.substring(0,c):a};h.prototype._hasSameServerInstance=function(a,b){"/"===a.substr(-1)&&(a=a.slice(0,-1));a=a.toLowerCase();b=this._getServerInstanceRoot(b).toLowerCase();
a=this._normalizeAGOLorgDomain(a);b=this._normalizeAGOLorgDomain(b);a=a.substr(a.indexOf(":"));b=b.substr(b.indexOf(":"));return a===b};h.prototype._normalizeAGOLorgDomain=function(a){var b=/^https?:\/\/.+\.maps\.arcgis\.com/i,c=/^https?:\/\/.+\.mapsdevext\.arcgis\.com/i,d=/^https?:\/\/.+\.mapsqa\.arcgis\.com/i;b.test(a)?a=a.replace(b,"https://www.arcgis.com"):c.test(a)?a=a.replace(c,"https://devext.arcgis.com"):d.test(a)&&(a=a.replace(d,"https://qaext.arcgis.com"));return a};h.prototype._sanitizeUrl=
function(a){var b=(c.request.proxyUrl||"").toLowerCase(),d=b?a.toLowerCase().indexOf(b+"?"):-1;-1!==d&&(a=a.substring(d+b.length+1));a=C.normalize(a);return C.urlToObject(a).path};h.prototype._isRESTService=function(a){return-1<a.indexOf(this._agsRest)};h.prototype._isAdminResource=function(a){return this._agsAdmin.test(a)||this._adminSvcs.test(a)};h.prototype._isServerRsrc=function(a){return this._isRESTService(a)||this._isAdminResource(a)};h.prototype._isIdenticalService=function(a,b){var c;this._isRESTService(a)&&
this._isRESTService(b)?(a=this._getSuffix(a).toLowerCase(),b=this._getSuffix(b).toLowerCase(),c=a===b,c||(c=/(.*)\/(MapServer|FeatureServer).*/gi,c=a.replace(c,"$1")===b.replace(c,"$1"))):this._isAdminResource(a)&&this._isAdminResource(b)?c=!0:this._isServerRsrc(a)||this._isServerRsrc(b)||!this._isPortalDomain(a)||(c=!0);return c};h.prototype._isPortalDomain=function(a){var b=this,d=new D.Url(a.toLowerCase()),g=this._portalConfig,e=d.authority&&-1!==d.authority.indexOf(this._agolSuffix);!e&&g&&(e=
this._hasSameServerInstance(this._getServerInstanceRoot(g.restBaseUrl),d.uri));e||c.portalUrl&&(e=C.hasSameOrigin(a,c.portalUrl,!0));e||(e=this._portals.some(function(a){return b._hasSameServerInstance(a,d.uri)}));return e=e||this._agsPortal.test(d.path)};h.prototype._isIdProvider=function(a,b){var c=-1,d=-1;this._gwDomains.forEach(function(e,g){-1===c&&e.regex.test(a)&&(c=g);-1===d&&e.regex.test(b)&&(d=g)});var e=!1;if(-1<c&&-1<d)if(0===c||4===c){if(0===d||4===d)e=!0}else if(1===c){if(1===d||2===
d)e=!0}else 2===c?2===d&&(e=!0):3===c&&3===d&&(e=!0);if(!e){var g=this.findServerInfo(b),f=g&&g.owningSystemUrl;f&&H(g)&&this._isPortalDomain(f)&&this._isIdProvider(a,f)&&(e=!0)}return e};h.prototype._getIdenticalSvcIdx=function(a,b){for(var c=-1,d=0;d<b.resources.length;d++)if(this._isIdenticalService(a,b.resources[d])){c=d;break}return c};h.prototype._getSuffix=function(a){return a.replace(this._regexSDirUrl,"").replace(this._regexServerType,"$1")};h.prototype._getTokenSvcUrl=function(a){var b=
this,c,d;if(this._isRESTService(a)||this._isAdminResource(a))return d=this._getServerInstanceRoot(a),c=d+"/admin/generateToken",a=d+"/rest/info",d=f(a,{query:{f:"json"},responseType:"json"}).then(function(a){return a.data}),{adminUrl:c,promise:d};if(this._isPortalDomain(a)){var e="";this._gwDomains.some(function(b){b.regex.test(a)&&(e=b.tokenServiceUrl);return!!e});e||this._portals.some(function(c){b._hasSameServerInstance(c,a)&&(e=c+b._gwTokenUrl);return!!e});e||(c=a.toLowerCase().indexOf("/sharing"),
-1!==c&&(e=a.substring(0,c)+this._gwTokenUrl));e||(e=this._getOrigin(a)+this._gwTokenUrl);e&&(c=(new D.Url(a)).port,/^http:\/\//i.test(a)&&"7080"===c&&(e=e.replace(/:7080/i,":7443")),e=e.replace(/http:/i,"https:"));return e}if(-1!==a.toLowerCase().indexOf("premium.arcgisonline.com"))return"https://premium.arcgisonline.com/server/tokens"};h.prototype._getPortalSelf=function(a,b){"https:"===window.location.protocol?a=a.replace(/^http:/i,"https:").replace(/:7080/i,":7443"):/^http:/i.test(b)&&(a=a.replace(/^https:/i,
"http:").replace(/:7443/i,":7080"));return f(a,{query:{f:"json"},authMode:"anonymous",responseType:"json",withCredentials:!0}).then(function(a){return a.data})};h.prototype._hasPortalSession=function(){return!!this._getEsriAuthCookie()};h.prototype._getEsriAuthCookie=function(){var a=null;if(navigator.cookieEnabled){for(var b=this._getAllCookies("esri_auth"),c=void 0,d=0;d<b.length;d++){var e=JSON.parse(b[d]);if(e.portalApp){a=e;break}c?c.push(e):c=[e]}if(!a&&c)for(b=0;b<c.length;b++)if(e=c[b],window.location.hostname===
e.urlKey+"."+e.customBaseUrl){a=e;break}}a&&(e=null,a.expires&&("number"===typeof a.expires?e=a.expires:"string"===typeof a.expires&&(e=Date.parse(a.expires)),isNaN(e)&&(e=null),a.expires=e),e&&e<Date.now()&&(a=null));return a};h.prototype._getAllCookies=function(a){var b=[];if(a=document.cookie.match(new RegExp("(?:^|; )"+v.escapeRegExpString(a)+"\x3d([^;]*)","g")))for(var c=0;c<a.length;c++){var d=a[c],e=d.indexOf("\x3d");-1<e&&(d=d.substring(e+1),b.push(decodeURIComponent(d)))}return b};h.prototype._doPortalSignIn=
function(a,b){if(navigator.cookieEnabled){var c=this._getEsriAuthCookie(),d=this._portalConfig,e=window.location.href,g=this.findServerInfo(a);if((b||this.useSignInPage)&&(d||this._isPortalDomain(e)||c)&&(g?g.hasPortal||g.owningSystemUrl&&this._isPortalDomain(g.owningSystemUrl):this._isPortalDomain(a))&&(this._isIdProvider(e,a)||d&&(this._hasSameServerInstance(this._getServerInstanceRoot(d.restBaseUrl),a)||this._isIdProvider(d.restBaseUrl,a))||C.hasSameOrigin(e,a,!0)))return!0}return!1};h.prototype._canUsePortalSignInWorkflow=
function(a){return this._doPortalSignIn(a)&&(window===window.top||this._hasPortalSession())};h.prototype._checkProtocol=function(b,c,d,e){var g=!0;e=e?c.adminTokenServiceUrl:c.tokenServiceUrl;0===e.trim().toLowerCase().indexOf("https:")&&0!==window.location.href.toLowerCase().indexOf("https:")&&C.getProxyRule(e)&&(g=this._protocolFunc?!!this._protocolFunc({resourceUrl:b,serverInfo:c}):!1,g||(b=new a("identity-manager:aborted","Aborted the Sign-In process to avoid sending password over insecure connection."),
d(b)));return g};h.prototype._enqueue=function(a,b,c,d,e,f){d||(d=w.createResolver());d.resUrl_=a;d.sinfo_=b;d.options_=c;d.admin_=e;d.refresh_=f;this._busy?this._hasSameServerInstance(this._getServerInstanceRoot(a),this._busy.resUrl_)?(this._oAuthDfd&&this._oAuthDfd.oAuthWin_&&this._oAuthDfd.oAuthWin_.focus(),this._soReqs.push(d)):this._xoReqs.push(d):this._doSignIn(d);return d.promise};h.prototype._doSignIn=function(b){var c=this;this._busy=b;this._rejectOnPersistedPageShow=!1;var d=function(a){var d=
b.options_&&b.options_.resource,e=b.resUrl_,f=b.refresh_,g=!1;-1===c.credentials.indexOf(a)&&(f&&-1!==c.credentials.indexOf(f)?(f.userId=a.userId,f.token=a.token,f.expires=a.expires,f.validity=a.validity,f.ssl=a.ssl,f.creationTime=a.creationTime,g=!0,a=f):c.credentials.push(a));a.resources||(a.resources=[]);a.resources.push(d||e);a.scope=c._isServerRsrc(e)?"server":"portal";a.emitTokenChange();var d=c._soReqs,k={};c._soReqs=[];d.forEach(function(b){if(!c._isIdenticalService(e,b.resUrl_)){var d=c._getSuffix(b.resUrl_);
k[d]||(k[d]=!0,a.resources.push(b.resUrl_))}});b.resolve(a);d.forEach(function(b){c._hasSameServerInstance(c._getServerInstanceRoot(e),b.resUrl_)?b.resolve(a):c._soReqs.push(b)});c._busy=b.resUrl_=b.sinfo_=b.refresh_=null;g||c.emit("credential-create",{credential:a});c._soReqs.length?c._doSignIn(c._soReqs.shift()):c._xoReqs.length&&c._doSignIn(c._xoReqs.shift())},e=function(a){b.reject(a);c._busy=b.resUrl_=b.sinfo_=b.refresh_=null;c._soReqs.length?c._doSignIn(c._soReqs.shift()):c._xoReqs.length&&
c._doSignIn(c._xoReqs.shift())},f=function(f,g,k,l){var h=b.sinfo_,m=!b.options_||!1!==b.options_.prompt,n=h.hasPortal&&c._findOAuthInfo(b.resUrl_);c._canUsePortalSignInWorkflow(b.resUrl_)?(f=c._getEsriAuthCookie(),n=c._portalConfig,f?(h.webTierAuth||"web"!==(f.auth_tier&&f.auth_tier.toLowerCase())||(h.webTierAuth=!0),d(new G({userId:f.email,server:h.server,token:h.webTierAuth?null:f.token,expires:f.expires}))):m?(m="",f=window.location.href,m=c.signInPage?c.signInPage:n?n.baseUrl+n.signin:c._isIdProvider(f,
b.resUrl_)?c._getOrigin(f)+"/home/signin.html":h.tokenServiceUrl.replace(c._rePortalTokenSvc,"")+"/home/signin.html",m=m.replace(/http:/i,"https:"),n&&!1===n.useSSL&&(m=m.replace(/https:/i,"http:")),0===f.toLowerCase().replace("https","http").indexOf(m.toLowerCase().replace("https","http"))?(h=new a("identity-manager:unexpected-error","Cannot redirect to Sign-In page from within Sign-In page. URL of the resource that triggered this workflow: "+b.resUrl_),e(h)):(c._rejectOnPersistedPageShow=!0,c._redirectFunc?
c._redirectFunc({signInPage:m,returnUrlParamName:"returnUrl",returnUrl:f,resourceUrl:b.resUrl_,serverInfo:h}):window.location.href=m+"?returnUrl\x3d"+encodeURIComponent(f))):(h=new a("identity-manager:not-authenticated","User is not signed in."),e(h))):f?d(new G({userId:f,server:h.server,token:k,expires:null!=l?Number(l):null,ssl:!!g})):n?(f=n._oAuthCred,f||(g=new t(n,window.localStorage),k=new t(n,window.sessionStorage),g.isValid()&&k.isValid()?g.expires>k.expires?(f=g,k.destroy()):(f=k,g.destroy()):
f=g.isValid()?g:k,n._oAuthCred=f),f.isValid()?d(new G({userId:f.userId,server:h.server,token:f.token,expires:f.expires,ssl:f.ssl,_oAuthCred:f})):c._oAuthHash&&c._oAuthHash.state.portalUrl===n.portalUrl?(m=c._oAuthHash,h=new G({userId:m.username,server:h.server,token:m.access_token,expires:Date.now()+1E3*Number(m.expires_in),ssl:"true"===m.ssl,oAuthState:m.state,_oAuthCred:f}),f.storage=m.persist?window.localStorage:window.sessionStorage,f.token=h.token,f.expires=h.expires,f.userId=h.userId,f.ssl=
h.ssl,f.save(),c._oAuthHash=null,d(h)):m?b._pendingDfd=c.oAuthSignIn(b.resUrl_,h,n,b.options_).then(d,e):(h=new a("identity-manager:not-authenticated","User is not signed in."),e(h))):m?c._checkProtocol(b.resUrl_,h,e,b.admin_)&&(m=b.options_,b.admin_&&(m=m||{},m.isAdmin=!0),b._pendingDfd=c.signIn(b.resUrl_,h,m).then(d,e)):(h=new a("identity-manager:not-authenticated","User is not signed in."),e(h))},g=function(){var a=b.sinfo_,f=a.owningSystemUrl,g=b.options_,k,l,h,m;g&&(k=g.token,l=g.error,h=g.prompt);
m=c._findCredential(f,{token:k,resource:b.resUrl_});if(!m)for(var g=0,n=c.credentials;g<n.length;g++){var p=n[g];if(c._isIdProvider(f,p.server)){m=p;break}}m?(f=c.findCredential(b.resUrl_,m.userId))?d(f):I(a,c._legacyFed)?(p=m.toJSON(),p.server=a.server,p.resources=null,d(new G(p))):(b._pendingDfd=c.generateToken(c.findServerInfo(m.server),null,{serverUrl:b.resUrl_,token:m.token,signal:b.options_.signal,ssl:m.ssl})).then(function(c){d(new G({userId:m.userId,server:a.server,token:c.token,expires:null!=
c.expires?Number(c.expires):null,ssl:!!c.ssl,isAdmin:b.admin_,validity:c.validity}))},e):(c._busy=null,k&&(b.options_.token=null),(b._pendingDfd=c.getCredential(f.replace(/\/?$/,"/sharing"),{resource:b.resUrl_,owningTenant:a.owningTenant,signal:b.options_.signal,token:k,error:l,prompt:h})).then(function(){c._enqueue(b.resUrl_,b.sinfo_,b.options_,b,b.admin_)},function(a){e(a)}))};this._errbackFunc=e;var k=b.sinfo_.owningSystemUrl,l=this._isServerRsrc(b.resUrl_),h=b.sinfo_._restInfoPms;h?h.promise.then(function(a){var d=
b.sinfo_;d._restInfoPms&&(d.adminTokenServiceUrl=d._restInfoPms.adminUrl,d._restInfoPms=null,d.tokenServiceUrl=x.getDeepValue("authInfo.tokenServicesUrl",a)||x.getDeepValue("authInfo.tokenServiceUrl",a)||x.getDeepValue("tokenServiceUrl",a),d.shortLivedTokenValidity=x.getDeepValue("authInfo.shortLivedTokenValidity",a),d.currentVersion=a.currentVersion,d.owningTenant=a.owningTenant,(a=d.owningSystemUrl=a.owningSystemUrl)&&c._portals.push(a));l&&d.owningSystemUrl?g():f()},function(){b.sinfo_._restInfoPms=
null;var c=new a("identity-manager:server-identification-failed","Unknown resource - could not find token service endpoint.");e(c)}):l&&k?g():b.sinfo_._selfReq?b.sinfo_._selfReq.selfDfd.then(function(a){var d={},e,f,g,k;a&&(e=a.user&&a.user.username,d.username=e,d.allSSL=a.allSSL,f=a.supportsOAuth,g=a.currentVersion,"multitenant"===a.portalMode&&(k=a.customBaseUrl));b.sinfo_.webTierAuth=!!e;return e&&c.normalizeWebTierAuth?c.generateToken(b.sinfo_,null,{ssl:d.allSSL}).catch(function(){return null}).then(function(a){d.portalToken=
a&&a.token;d.tokenExpiration=a&&a.expires;return d}):!e&&f&&4.4<=parseFloat(g)&&!c._canUsePortalSignInWorkflow(b.resUrl_)?c._generateOAuthInfo({portalUrl:b.sinfo_.server,customBaseUrl:k,owningTenant:b.sinfo_._selfReq.owningTenant}).catch(function(){return null}).then(function(){return d}):d}).catch(function(){return null}).then(function(a){b.sinfo_._selfReq=null;a?f(a.username,a.allSSL,a.portalToken,a.tokenExpiration):f()}):f()};h.prototype._generateOAuthInfo=function(a){var b=this,c,d=a.portalUrl,
e=a.customBaseUrl,g=a.owningTenant;if(a=!this.defaultOAuthInfo&&this._createDefaultOAuthInfo&&!this._hasTestedIfAppIsOnPortal){c=window.location.href;var k=c.indexOf("?");-1<k&&(c=c.slice(0,k));k=c.search(/\/(apps|home)\//);c=-1<k?c.slice(0,k):null}a&&c?(this._hasTestedIfAppIsOnPortal=!0,a=f(c+"/sharing/rest",{query:{f:"json"},responseType:"json"}).then(function(){b.defaultOAuthInfo=new z({appId:"arcgisonline",popup:!0,popupCallbackUrl:c+"/home/oauth-callback.html"})})):a=w.resolve();return a.then(function(){if(b.defaultOAuthInfo)return d=
d.replace(/^http:/i,"https:"),f(d+"/sharing/rest/oauth2/validateRedirectUri",{query:{accountId:g,client_id:b.defaultOAuthInfo.appId,redirect_uri:C.makeAbsolute(b.defaultOAuthInfo.popupCallbackUrl),f:"json"},responseType:"json"}).then(function(a){if(a.data.valid){var c=b.defaultOAuthInfo.clone();c.portalUrl=a.data.urlKey&&e?"https://"+a.data.urlKey+"."+e:d;b.oAuthInfos.push(c)}})})};return h=e([u.subclass("esri.identity.IdentityManagerBase")],h)}(u.declared(d));h.IdentityManagerBase=n;var G=function(a){function c(b){var c=
a.call(this,b)||this;c._oAuthCred=null;c.tokenRefreshBuffer=2;b&&b._oAuthCred&&(c._oAuthCred=b._oAuthCred);return c}l(c,a);c.prototype.initialize=function(){this.resources=this.resources||[];null==this.creationTime&&(this.creationTime=Date.now())};c.prototype.refreshToken=function(){var a=this,c=b.id.findServerInfo(this.server),d=c&&c.owningSystemUrl,e=!!d&&"server"===this.scope,f=e&&I(c,b.id._legacyFed),k=c.webTierAuth,l=k&&b.id.normalizeWebTierAuth,h=E[this.server],m=h&&h[this.userId],h=this.resources&&
this.resources[0],n=e&&b.id.findServerInfo(d),p={username:this.userId,password:m},q;if(!k||l)if(e&&!n&&b.id.serverInfos.some(function(a){b.id._isIdProvider(d,a.server)&&(n=a);return!!n}),k=n&&b.id.findCredential(n.server,this.userId),!e||k)if(f)k.refreshToken();else{if(e)q={serverUrl:h,token:k&&k.token,ssl:k&&k.ssl};else if(l)p=null,q={ssl:this.ssl};else if(m)this.isAdmin&&(q={isAdmin:!0});else return e=void 0,h&&(h=b.id._sanitizeUrl(h),this._enqueued=1,e=b.id._enqueue(h,c,null,null,this.isAdmin,
this),e.then(function(){a._enqueued=0;a.refreshServerTokens()}).catch(function(){a._enqueued=0})),e;return b.id.generateToken(e?n:c,e?null:p,q).then(function(b){a.token=b.token;a.expires=null!=b.expires?Number(b.expires):null;a.creationTime=Date.now();a.validity=b.validity;a.emitTokenChange();a.refreshServerTokens()}).catch(function(){})}};c.prototype.refreshServerTokens=function(){var a=this;"portal"===this.scope&&b.id.credentials.forEach(function(c){var d=b.id.findServerInfo(c.server),e=d&&d.owningSystemUrl;
c!==a&&c.userId===a.userId&&e&&"server"===c.scope&&(b.id._hasSameServerInstance(a.server,e)||b.id._isIdProvider(e,a.server))&&(I(d,b.id._legacyFed)?(c.token=a.token,c.expires=a.expires,c.creationTime=a.creationTime,c.validity=a.validity,c.emitTokenChange()):c.refreshToken())})};c.prototype.emitTokenChange=function(a){clearTimeout(this._refreshTimer);var c=this.server&&b.id.findServerInfo(this.server),d=(c=c&&c.owningSystemUrl)&&b.id.findServerInfo(c);!1===a||c&&"portal"!==this.scope&&(!d||!d.webTierAuth||
b.id.normalizeWebTierAuth)||null==this.expires&&null==this.validity||this._startRefreshTimer();this.emit("token-change")};c.prototype.destroy=function(){this.userId=this.server=this.token=this.expires=this.validity=this.resources=this.creationTime=null;this._oAuthCred&&(this._oAuthCred.destroy(),this._oAuthCred=null);var a=b.id.credentials.indexOf(this);-1<a&&b.id.credentials.splice(a,1);this.emitTokenChange();this.emit("destroy")};c.prototype.toJSON=function(){var a=p.fixJson({userId:this.userId,
server:this.server,token:this.token,expires:this.expires,validity:this.validity,ssl:this.ssl,isAdmin:this.isAdmin,creationTime:this.creationTime,scope:this.scope}),b=this.resources;b&&0<b.length&&(a.resources=b.slice());return a};c.prototype._startRefreshTimer=function(){clearTimeout(this._refreshTimer);var a=6E4*this.tokenRefreshBuffer,b=(this.validity?this.creationTime+6E4*this.validity:this.expires)-Date.now();0>b&&(b=0);this._refreshTimer=setTimeout(this.refreshToken.bind(this),b>a?b-a:b)};e([u.property()],
c.prototype,"creationTime",void 0);e([u.property()],c.prototype,"expires",void 0);e([u.property()],c.prototype,"isAdmin",void 0);e([u.property()],c.prototype,"oAuthState",void 0);e([u.property()],c.prototype,"resources",void 0);e([u.property()],c.prototype,"scope",void 0);e([u.property()],c.prototype,"server",void 0);e([u.property()],c.prototype,"ssl",void 0);e([u.property()],c.prototype,"token",void 0);e([u.property()],c.prototype,"tokenRefreshBuffer",void 0);e([u.property()],c.prototype,"userId",
void 0);e([u.property()],c.prototype,"validity",void 0);return c=e([u.subclass("esri.identity.Credential")],c)}(u.declared(d.EventedAccessor));h.Credential=G})},"esri/core/cookie":function(){define(["require","exports"],function(n,h){Object.defineProperty(h,"__esModule",{value:!0});h.writeCookie=function(h,l,e){void 0===e&&(e={});var c=e.expires;if("number"===typeof c){var b=new Date;b.setTime(b.getTime()+864E5*c);c=e.expires=b}"string"!==typeof c&&(e.expires=c.toUTCString());h=h+"\x3d"+encodeURIComponent(l);
for(var f in e)h+="; "+f,l=e[f],!0!==l&&(h+="\x3d"+l);document.cookie=h}})},"esri/identity/OAuthCredential":function(){define(["require","exports"],function(n,h){n=function(){function h(h,e){this.userId=this.token=this.ssl=this.expires=this.storage=this.oAuthInfo=null;this.oAuthInfo=h;this.storage=e;this._init()}h.prototype.isValid=function(){var h=!1;if(this.oAuthInfo&&this.token&&this.userId){var e=Date.now();this.expires>e&&(this.expires-e)/1E3>60*this.oAuthInfo.minTimeUntilExpiration&&(h=!0)}return h};
h.prototype.save=function(){if(this.storage){var h=this._load(),e=this.oAuthInfo;if(e&&e.authNamespace&&e.portalUrl){var c=h[e.authNamespace];c||(c=h[e.authNamespace]={});c[e.portalUrl]={expires:this.expires,ssl:this.ssl,token:this.token,userId:this.userId};try{this.storage.setItem("esriJSAPIOAuth",JSON.stringify(h))}catch(b){console.log(b)}}}};h.prototype.destroy=function(){var h=this._load(),e=this.oAuthInfo;if(e&&e.appId&&e.portalUrl&&this.token&&this.expires>Date.now()){var c=e.portalUrl.replace(/^http:/i,
"https:")+"/sharing/rest/oauth2/revokeToken",b=new FormData;b.append("f","json");b.append("auth_token",this.token);b.append("client_id",e.appId);b.append("token_type_hint","access_token");if("function"===typeof navigator.sendBeacon)navigator.sendBeacon(c,b);else{var f=new XMLHttpRequest;f.open("POST",c);f.send(b)}}if(e&&e.authNamespace&&e.portalUrl&&this.storage&&(c=h[e.authNamespace])){delete c[e.portalUrl];try{this.storage.setItem("esriJSAPIOAuth",JSON.stringify(h))}catch(k){console.log(k)}}e&&
(this.oAuthInfo=e._oAuthCred=null)};h.prototype._init=function(){var h=this._load(),e=this.oAuthInfo;e&&e.authNamespace&&e.portalUrl&&(h=h[e.authNamespace])&&(h=h[e.portalUrl])&&(this.expires=h.expires,this.ssl=h.ssl,this.token=h.token,this.userId=h.userId)};h.prototype._load=function(){var h={};if(this.storage){var e=this.storage.getItem("esriJSAPIOAuth");if(e)try{h=JSON.parse(e)}catch(c){console.log(c)}}return h};return h}();n.prototype.declaredClass="esri.identity.OAuthCredential";return n})},
"esri/identity/OAuthInfo":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/JSONSupport ../core/accessorSupport/decorators".split(" "),function(n,h,m,l,e,c){return function(b){function e(a){a=b.call(this,a)||this;a._oAuthCred=null;a.appId=null;a.authNamespace="/";a.expiration=20160;a.forceLogin=!1;a.locale=null;a.minTimeUntilExpiration=30;a.popup=!1;a.popupCallbackUrl="oauth-callback.html";a.popupWindowFeatures="height\x3d490,width\x3d800,resizable,scrollbars,status";
a.portalUrl="https://www.arcgis.com";a.preserveUrlHash=!1;return a}m(e,b);k=e;e.prototype.clone=function(){return k.fromJSON(this.toJSON())};var k;l([c.property({json:{write:!0}})],e.prototype,"appId",void 0);l([c.property({json:{write:!0}})],e.prototype,"authNamespace",void 0);l([c.property({json:{write:!0}})],e.prototype,"expiration",void 0);l([c.property({json:{write:!0}})],e.prototype,"forceLogin",void 0);l([c.property({json:{write:!0}})],e.prototype,"locale",void 0);l([c.property({json:{write:!0}})],
e.prototype,"minTimeUntilExpiration",void 0);l([c.property({json:{write:!0}})],e.prototype,"popup",void 0);l([c.property({json:{write:!0}})],e.prototype,"popupCallbackUrl",void 0);l([c.property({json:{write:!0}})],e.prototype,"popupWindowFeatures",void 0);l([c.property({json:{write:!0}})],e.prototype,"portalUrl",void 0);l([c.property({json:{write:!0}})],e.prototype,"preserveUrlHash",void 0);return e=k=l([c.subclass("esri.identity.OAuthInfo")],e)}(c.declared(e.JSONSupport))})},"esri/identity/ServerInfo":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/JSONSupport ../core/accessorSupport/decorators".split(" "),
function(n,h,m,l,e,c){return function(b){function e(c){c=b.call(this,c)||this;c.adminTokenServiceUrl=null;c.currentVersion=null;c.hasPortal=null;c.hasServer=null;c.owningSystemUrl=null;c.owningTenant=null;c.server=null;c.shortLivedTokenValidity=null;c.tokenServiceUrl=null;c.webTierAuth=null;return c}m(e,b);l([c.property({json:{write:!0}})],e.prototype,"adminTokenServiceUrl",void 0);l([c.property({json:{write:!0}})],e.prototype,"currentVersion",void 0);l([c.property({json:{write:!0}})],e.prototype,
"hasPortal",void 0);l([c.property({json:{write:!0}})],e.prototype,"hasServer",void 0);l([c.property({json:{write:!0}})],e.prototype,"owningSystemUrl",void 0);l([c.property({json:{write:!0}})],e.prototype,"owningTenant",void 0);l([c.property({json:{write:!0}})],e.prototype,"server",void 0);l([c.property({json:{write:!0}})],e.prototype,"shortLivedTokenValidity",void 0);l([c.property({json:{write:!0}})],e.prototype,"tokenServiceUrl",void 0);l([c.property({json:{write:!0}})],e.prototype,"webTierAuth",
void 0);return e=l([c.subclass("esri.identity.ServerInfo")],e)}(c.declared(e.JSONSupport))})},"dijit/form/Button":function(){define("require dojo/_base/declare dojo/dom-class dojo/has dojo/_base/kernel dojo/_base/lang dojo/ready ./_FormWidget ./_ButtonMixin dojo/text!./templates/Button.html ../a11yclick".split(" "),function(n,h,m,l,e,c,b,f,k,a){l("dijit-legacy-requires")&&b(0,function(){n(["dijit/form/DropDownButton","dijit/form/ComboButton","dijit/form/ToggleButton"])});b=h("dijit.form.Button"+(l("dojo-bidi")?
"_NoBidi":""),[f,k],{showLabel:!0,iconClass:"dijitNoIcon",_setIconClassAttr:{node:"iconNode",type:"class"},baseClass:"dijitButton",templateString:a,_setValueAttr:"valueNode",_setNameAttr:function(a){this.valueNode&&this.valueNode.setAttribute("name",a)},postCreate:function(){this.inherited(arguments);this._setLabelFromContainer()},_setLabelFromContainer:function(){this.containerNode&&!this.label&&(this.label=c.trim(this.containerNode.innerHTML),this.onLabelSet())},_setShowLabelAttr:function(a){this.containerNode&&
m.toggle(this.containerNode,"dijitDisplayNone",!a);this._set("showLabel",a)},setLabel:function(a){e.deprecated("dijit.form.Button.setLabel() is deprecated.  Use set('label', ...) instead.","","2.0");this.set("label",a)},onLabelSet:function(){this.inherited(arguments);this.showLabel||"title"in this.params||(this.titleNode.title=c.trim(this.containerNode.innerText||this.containerNode.textContent||""))}});l("dojo-bidi")&&(b=h("dijit.form.Button",b,{onLabelSet:function(){this.inherited(arguments);this.titleNode.title&&
this.applyTextDir(this.titleNode,this.titleNode.title)},_setTextDirAttr:function(a){this._created&&this.textDir!=a&&(this._set("textDir",a),this._setLabelAttr(this.label))}}));return b})},"dijit/form/_FormWidget":function(){define("dojo/_base/declare dojo/sniff dojo/_base/kernel dojo/ready ../_Widget ../_CssStateMixin ../_TemplatedMixin ./_FormWidgetMixin".split(" "),function(n,h,m,l,e,c,b,f){h("dijit-legacy-requires")&&l(0,function(){require(["dijit/form/_FormValueWidget"])});return n("dijit.form._FormWidget",
[e,b,c,f],{setDisabled:function(b){m.deprecated("setDisabled("+b+") is deprecated. Use set('disabled',"+b+") instead.","","2.0");this.set("disabled",b)},setValue:function(b){m.deprecated("dijit.form._FormWidget:setValue("+b+") is deprecated.  Use set('value',"+b+") instead.","","2.0");this.set("value",b)},getValue:function(){m.deprecated(this.declaredClass+"::getValue() is deprecated. Use get('value') instead.","","2.0");return this.get("value")},postMixInProperties:function(){this.nameAttrSetting=
this.name?'name\x3d"'+this.name.replace(/"/g,"\x26quot;")+'"':"";this.inherited(arguments)}})})},"dijit/form/_FormWidgetMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/dom-attr dojo/dom-style dojo/_base/lang dojo/mouse dojo/on dojo/sniff dojo/window ../a11y".split(" "),function(n,h,m,l,e,c,b,f,k,a){return h("dijit.form._FormWidgetMixin",null,{name:"",alt:"",value:"",type:"text","aria-label":"focusNode",tabIndex:"0",_setTabIndexAttr:"focusNode",disabled:!1,intermediateChanges:!1,
scrollOnFocus:!0,_setIdAttr:"focusNode",_setDisabledAttr:function(b){this._set("disabled",b);/^(button|input|select|textarea|optgroup|option|fieldset)$/i.test(this.focusNode.tagName)?(m.set(this.focusNode,"disabled",b),f("trident")&&"readOnly"in this&&m.set(this.focusNode,"readonly",b||this.readOnly)):this.focusNode.setAttribute("aria-disabled",b?"true":"false");this.valueNode&&m.set(this.valueNode,"disabled",b);b?(this._set("hovering",!1),this._set("active",!1),b="tabIndex"in this.attributeMap?this.attributeMap.tabIndex:
"_setTabIndexAttr"in this?this._setTabIndexAttr:"focusNode",n.forEach(e.isArray(b)?b:[b],function(b){b=this[b];f("webkit")||a.hasDefaultTabStop(b)?b.setAttribute("tabIndex","-1"):b.removeAttribute("tabIndex")},this)):""!=this.tabIndex&&this.set("tabIndex",this.tabIndex)},_onFocus:function(a){if("mouse"==a&&this.isFocusable())var c=this.own(b(this.focusNode,"focus",function(){h.remove();c.remove()}))[0],d=f("pointer-events")?"pointerup":f("touch-events")?"touchend, mouseup":"mouseup",h=this.own(b(this.ownerDocumentBody,
d,e.hitch(this,function(a){h.remove();c.remove();this.focused&&("touchend"==a.type?this.defer("focus"):this.focus())})))[0];this.scrollOnFocus&&this.defer(function(){k.scrollIntoView(this.domNode)});this.inherited(arguments)},isFocusable:function(){return!this.disabled&&this.focusNode&&"none"!=l.get(this.domNode,"display")},focus:function(){if(!this.disabled&&this.focusNode.focus)try{this.focusNode.focus()}catch(d){}},compare:function(a,b){return"number"==typeof a&&"number"==typeof b?isNaN(a)&&isNaN(b)?
0:a-b:a>b?1:a<b?-1:0},onChange:function(){},_onChangeActive:!1,_handleOnChange:function(a,b){void 0!=this._lastValueReported||null!==b&&this._onChangeActive||(this._resetValue=this._lastValueReported=a);this._pendingOnChange=this._pendingOnChange||typeof a!=typeof this._lastValueReported||0!=this.compare(a,this._lastValueReported);(this.intermediateChanges||b||void 0===b)&&this._pendingOnChange&&(this._lastValueReported=a,this._pendingOnChange=!1,this._onChangeActive&&(this._onChangeHandle&&this._onChangeHandle.remove(),
this._onChangeHandle=this.defer(function(){this._onChangeHandle=null;this.onChange(a)})))},create:function(){this.inherited(arguments);this._onChangeActive=!0},destroy:function(){this._onChangeHandle&&(this._onChangeHandle.remove(),this.onChange(this._lastValueReported));this.inherited(arguments)}})})},"dijit/form/_ButtonMixin":function(){define(["dojo/_base/declare","dojo/dom","dojo/has","../registry"],function(n,h,m,l){var e=n("dijit.form._ButtonMixin"+(m("dojo-bidi")?"_NoBidi":""),null,{label:"",
type:"button",__onClick:function(c){c.stopPropagation();c.preventDefault();this.disabled||this.valueNode.click(c);return!1},_onClick:function(c){if(this.disabled)return c.stopPropagation(),c.preventDefault(),!1;!1===this.onClick(c)&&c.preventDefault();var b=c.defaultPrevented;if(!b&&"submit"==this.type&&!(this.valueNode||this.focusNode).form)for(var e=this.domNode;e.parentNode;e=e.parentNode){var k=l.byNode(e);if(k&&"function"==typeof k._onSubmit){k._onSubmit(c);c.preventDefault();b=!0;break}}return!b},
postCreate:function(){this.inherited(arguments);h.setSelectable(this.focusNode,!1)},onClick:function(){return!0},_setLabelAttr:function(c){this._set("label",c);(this.containerNode||this.focusNode).innerHTML=c;this.onLabelSet()},onLabelSet:function(){}});m("dojo-bidi")&&(e=n("dijit.form._ButtonMixin",e,{onLabelSet:function(){this.inherited(arguments);this.applyTextDir(this.containerNode||this.focusNode)}}));return e})},"dijit/form/Form":function(){define("dojo/_base/declare dojo/dom-attr dojo/_base/kernel dojo/sniff ../_Widget ../_TemplatedMixin ./_FormMixin ../layout/_ContentPaneResizeMixin".split(" "),
function(n,h,m,l,e,c,b,f){return n("dijit.form.Form",[e,c,b,f],{name:"",action:"",method:"",encType:"","accept-charset":"",accept:"",target:"",templateString:"\x3cform data-dojo-attach-point\x3d'containerNode' data-dojo-attach-event\x3d'onreset:_onReset,onsubmit:_onSubmit' ${!nameAttrSetting}\x3e\x3c/form\x3e",postMixInProperties:function(){this.nameAttrSetting=this.name?"name\x3d'"+this.name+"'":"";this.inherited(arguments)},execute:function(){},onExecute:function(){},_setEncTypeAttr:function(b){h.set(this.domNode,
"encType",b);l("ie")&&(this.domNode.encoding=b);this._set("encType",b)},reset:function(b){var a={returnValue:!0,preventDefault:function(){this.returnValue=!1},stopPropagation:function(){},currentTarget:b?b.target:this.domNode,target:b?b.target:this.domNode};!1!==this.onReset(a)&&a.returnValue&&this.inherited(arguments,[])},onReset:function(){return!0},_onReset:function(b){this.reset(b);b.stopPropagation();b.preventDefault();return!1},_onSubmit:function(b){var a=this.constructor.prototype;if(this.execute!=
a.execute||this.onExecute!=a.onExecute)m.deprecated("dijit.form.Form:execute()/onExecute() are deprecated. Use onSubmit() instead.","","2.0"),this.onExecute(),this.execute(this.getValues());!1===this.onSubmit(b)&&(b.stopPropagation(),b.preventDefault())},onSubmit:function(){return this.isValid()},submit:function(){!1!==this.onSubmit()&&this.containerNode.submit()}})})},"dijit/form/ValidationTextBox":function(){define("dojo/_base/declare dojo/_base/kernel dojo/_base/lang dojo/i18n ./TextBox ../Tooltip dojo/text!./templates/ValidationTextBox.html dojo/i18n!./nls/validate".split(" "),
function(n,h,m,l,e,c,b){var f=n("dijit.form.ValidationTextBox",e,{templateString:b,required:!1,promptMessage:"",invalidMessage:"$_unset_$",missingMessage:"$_unset_$",message:"",constraints:{},pattern:".*",regExp:"",regExpGen:function(){},state:"",tooltipPosition:[],_deprecateRegExp:function(b,a){a!=f.prototype[b]&&(h.deprecated("ValidationTextBox id\x3d"+this.id+", set('"+b+"', ...) is deprecated.  Use set('pattern', ...) instead.","","2.0"),this.set("pattern",a))},_setRegExpGenAttr:function(b){this._deprecateRegExp("regExpGen",
b);this._set("regExpGen",this._computeRegexp)},_setRegExpAttr:function(b){this._deprecateRegExp("regExp",b)},_setValueAttr:function(){this.inherited(arguments);this._refreshState()},validator:function(b,a){return(new RegExp("^(?:"+this._computeRegexp(a)+")"+(this.required?"":"?")+"$")).test(b)&&(!this.required||!this._isEmpty(b))&&(this._isEmpty(b)||void 0!==this.parse(b,a))},_isValidSubset:function(){return 0==this.textbox.value.search(this._partialre)},isValid:function(){return this.validator(this.textbox.value,
this.get("constraints"))},_isEmpty:function(b){return(this.trim?/^\s*$/:/^$/).test(b)},getErrorMessage:function(){var b="$_unset_$"==this.invalidMessage?this.messages.invalidMessage:this.invalidMessage?this.invalidMessage:this.promptMessage,a="$_unset_$"==this.missingMessage?this.messages.missingMessage:this.missingMessage?this.missingMessage:b;return this.required&&this._isEmpty(this.textbox.value)?a:b},getPromptMessage:function(){return this.promptMessage},_maskValidSubsetError:!0,validate:function(b){var a=
"",c=this.disabled||this.isValid(b);c&&(this._maskValidSubsetError=!0);var e=this._isEmpty(this.textbox.value),f=!c&&b&&this._isValidSubset();this._set("state",c?"":((!this._hasBeenBlurred||b)&&e||f)&&(this._maskValidSubsetError||f&&!this._hasBeenBlurred&&b)?"Incomplete":"Error");this.focusNode.setAttribute("aria-invalid","Error"==this.state?"true":"false");"Error"==this.state?(this._maskValidSubsetError=b&&f,a=this.getErrorMessage(b)):"Incomplete"==this.state?(a=this.getPromptMessage(b),this._maskValidSubsetError=
!this._hasBeenBlurred||b):e&&(a=this.getPromptMessage(b));this.set("message",a);return c},displayMessage:function(b){b&&this.focused?c.show(b,this.domNode,this.tooltipPosition,!this.isLeftToRight()):c.hide(this.domNode)},_refreshState:function(){this._created&&this.validate(this.focused);this.inherited(arguments)},constructor:function(b){this.constraints=m.clone(this.constraints);this.baseClass+=" dijitValidationTextBox"},startup:function(){this.inherited(arguments);this._refreshState()},_setConstraintsAttr:function(b){!b.locale&&
this.lang&&(b.locale=this.lang);this._set("constraints",b);this._refreshState()},_setPatternAttr:function(b){this._set("pattern",b);this._refreshState()},_computeRegexp:function(b){var a=this.pattern;"function"==typeof a&&(a=a.call(this,b));if(a!=this._lastRegExp){var c="";this._lastRegExp=a;".*"!=a&&a.replace(/\\.|\[\]|\[.*?[^\\]{1}\]|\{.*?\}|\(\?[=:!]|./g,function(a){switch(a.charAt(0)){case "{":case "+":case "?":case "*":case "^":case "$":case "|":case "(":c+=a;break;case ")":c+="|$)";break;default:c+=
"(?:"+a+"|$)"}});try{"".search(c)}catch(q){c=this.pattern,console.warn("RegExp error in "+this.declaredClass+": "+this.pattern)}this._partialre="^(?:"+c+")$"}return a},postMixInProperties:function(){this.inherited(arguments);this.messages=l.getLocalization("dijit.form","validate",this.lang);this._setConstraintsAttr(this.constraints)},_setDisabledAttr:function(b){this.inherited(arguments);this._refreshState()},_setRequiredAttr:function(b){this._set("required",b);this.focusNode.setAttribute("aria-required",
b);this._refreshState()},_setMessageAttr:function(b){this._set("message",b);this.displayMessage(b)},reset:function(){this._maskValidSubsetError=!0;this.inherited(arguments)},_onBlur:function(){this.displayMessage("");this.inherited(arguments)},destroy:function(){c.hide(this.domNode);this.inherited(arguments)}});return f})},"dijit/form/TextBox":function(){define("dojo/_base/declare dojo/dom-construct dojo/dom-style dojo/_base/kernel dojo/_base/lang dojo/on dojo/sniff ./_FormValueWidget ./_TextBoxMixin dojo/text!./templates/TextBox.html ../main".split(" "),
function(n,h,m,l,e,c,b,f,k,a,d){f=n("dijit.form.TextBox"+(b("dojo-bidi")?"_NoBidi":""),[f,k],{templateString:a,_singleNodeTemplate:'\x3cinput class\x3d"dijit dijitReset dijitLeft dijitInputField" data-dojo-attach-point\x3d"textbox,focusNode" autocomplete\x3d"off" type\x3d"${type}" ${!nameAttrSetting} /\x3e',_buttonInputDisabled:b("ie")?"disabled":"",baseClass:"dijitTextBox",postMixInProperties:function(){var a=this.type.toLowerCase();if(this.templateString&&"input"==this.templateString.toLowerCase()||
("hidden"==a||"file"==a)&&this.templateString==this.constructor.prototype.templateString)this.templateString=this._singleNodeTemplate;this.inherited(arguments)},postCreate:function(){this.inherited(arguments);9>b("ie")&&this.defer(function(){try{var a=m.getComputedStyle(this.domNode);if(a){var b=a.fontFamily;if(b){var c=this.domNode.getElementsByTagName("INPUT");if(c)for(a=0;a<c.length;a++)c[a].style.fontFamily=b}}}catch(w){}})},_setPlaceHolderAttr:function(a){this._set("placeHolder",a);this._phspan||
(this._attachPoints.push("_phspan"),this._phspan=h.create("span",{className:"dijitPlaceHolder dijitInputField"},this.textbox,"after"),this.own(c(this._phspan,"mousedown",function(a){a.preventDefault()}),c(this._phspan,"touchend, pointerup, MSPointerUp",e.hitch(this,function(){this.focus()}))));this._phspan.innerHTML="";this._phspan.appendChild(this._phspan.ownerDocument.createTextNode(a));this._updatePlaceHolder()},_onInput:function(a){this.inherited(arguments);this._updatePlaceHolder()},_updatePlaceHolder:function(){this._phspan&&
(this._phspan.style.display=this.placeHolder&&!this.textbox.value?"":"none")},_setValueAttr:function(a,b,c){this.inherited(arguments);this._updatePlaceHolder()},getDisplayedValue:function(){l.deprecated(this.declaredClass+"::getDisplayedValue() is deprecated. Use get('displayedValue') instead.","","2.0");return this.get("displayedValue")},setDisplayedValue:function(a){l.deprecated(this.declaredClass+"::setDisplayedValue() is deprecated. Use set('displayedValue', ...) instead.","","2.0");this.set("displayedValue",
a)},_onBlur:function(a){this.disabled||(this.inherited(arguments),this._updatePlaceHolder(),b("mozilla")&&this.selectOnClick&&(this.textbox.selectionStart=this.textbox.selectionEnd=void 0))},_onFocus:function(a){this.disabled||this.readOnly||(this.inherited(arguments),this._updatePlaceHolder())}});9>b("ie")&&(f.prototype._isTextSelected=function(){var a=this.ownerDocument.selection.createRange();return a.parentElement()==this.textbox&&0<a.text.length},d._setSelectionRange=k._setSelectionRange=function(a,
b,c){a.createTextRange&&(a=a.createTextRange(),a.collapse(!0),a.moveStart("character",-99999),a.moveStart("character",b),a.moveEnd("character",c-b),a.select())});b("dojo-bidi")&&(f=n("dijit.form.TextBox",f,{_setPlaceHolderAttr:function(a){this.inherited(arguments);this.applyTextDir(this._phspan)}}));return f})},"dijit/form/_FormValueWidget":function(){define(["dojo/_base/declare","dojo/sniff","./_FormWidget","./_FormValueMixin"],function(n,h,m,l){return n("dijit.form._FormValueWidget",[m,l],{_layoutHackIE7:function(){if(7==
h("ie"))for(var e=this.domNode,c=e.parentNode,b=e.firstChild||e,f=b.style.filter,k=this;c&&0==c.clientHeight;)(function(){var a=k.connect(c,"onscroll",function(){k.disconnect(a);b.style.filter=(new Date).getMilliseconds();k.defer(function(){b.style.filter=f})})})(),c=c.parentNode}})})},"dijit/form/_FormValueMixin":function(){define("dojo/_base/declare dojo/dom-attr dojo/keys dojo/_base/lang dojo/on dojo/sniff ./_FormWidgetMixin".split(" "),function(n,h,m,l,e,c,b){return n("dijit.form._FormValueMixin",
b,{readOnly:!1,_setReadOnlyAttr:function(b){c("trident")&&"disabled"in this?h.set(this.focusNode,"readOnly",b||this.disabled):h.set(this.focusNode,"readOnly",b);this._set("readOnly",b)},postCreate:function(){this.inherited(arguments);void 0===this._resetValue&&(this._lastValueReported=this._resetValue=this.value)},_setValueAttr:function(b,c){this._handleOnChange(b,c)},_handleOnChange:function(b,c){this._set("value",b);this.inherited(arguments)},undo:function(){this._setValueAttr(this._lastValueReported,
!1)},reset:function(){this._hasBeenBlurred=!1;this._setValueAttr(this._resetValue,!0)}})})},"dijit/form/_TextBoxMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/dom dojo/sniff dojo/keys dojo/_base/lang dojo/on ../main".split(" "),function(n,h,m,l,e,c,b,f){var k=h("dijit.form._TextBoxMixin"+(l("dojo-bidi")?"_NoBidi":""),null,{trim:!1,uppercase:!1,lowercase:!1,propercase:!1,maxLength:"",selectOnClick:!1,placeHolder:"",_getValueAttr:function(){return this.parse(this.get("displayedValue"),
this.constraints)},_setValueAttr:function(a,b,c){var d;void 0!==a&&(d=this.filter(a),"string"!=typeof c&&(c=null===d||"number"==typeof d&&isNaN(d)?"":this.filter(this.format(d,this.constraints)),0!=this.compare(d,this.filter(this.parse(c,this.constraints)))&&(c=null)));null==c||"number"==typeof c&&isNaN(c)||this.textbox.value==c||(this.textbox.value=c,this._set("displayedValue",this.get("displayedValue")));this.inherited(arguments,[d,b])},displayedValue:"",_getDisplayedValueAttr:function(){return this.filter(this.textbox.value)},
_setDisplayedValueAttr:function(a){null==a?a="":"string"!=typeof a&&(a=String(a));this.textbox.value=a;this._setValueAttr(this.get("value"),void 0);this._set("displayedValue",this.get("displayedValue"))},format:function(a){return null==a?"":a.toString?a.toString():a},parse:function(a){return a},_refreshState:function(){},onInput:function(){},_onInput:function(a){this._lastInputEventValue=this.textbox.value;this._processInput(this._lastInputProducingEvent||a);delete this._lastInputProducingEvent;this.intermediateChanges&&
this._handleOnChange(this.get("value"),!1)},_processInput:function(){this._refreshState();this._set("displayedValue",this.get("displayedValue"))},postCreate:function(){this.textbox.setAttribute("value",this.textbox.value);this.inherited(arguments);this.own(b(this.textbox,"keydown, keypress, paste, cut, compositionend",c.hitch(this,function(a){var d;if("keydown"==a.type&&229!=a.keyCode){d=a.keyCode;switch(d){case e.SHIFT:case e.ALT:case e.CTRL:case e.META:case e.CAPS_LOCK:case e.NUM_LOCK:case e.SCROLL_LOCK:return}if(!a.ctrlKey&&
!a.metaKey&&!a.altKey){switch(d){case e.NUMPAD_0:case e.NUMPAD_1:case e.NUMPAD_2:case e.NUMPAD_3:case e.NUMPAD_4:case e.NUMPAD_5:case e.NUMPAD_6:case e.NUMPAD_7:case e.NUMPAD_8:case e.NUMPAD_9:case e.NUMPAD_MULTIPLY:case e.NUMPAD_PLUS:case e.NUMPAD_ENTER:case e.NUMPAD_MINUS:case e.NUMPAD_PERIOD:case e.NUMPAD_DIVIDE:return}if(65<=d&&90>=d||48<=d&&57>=d||d==e.SPACE)return;d=!1;for(var f in e)if(e[f]===a.keyCode){d=!0;break}if(!d)return}}(d=32<=a.charCode?String.fromCharCode(a.charCode):a.charCode)||
(d=65<=a.keyCode&&90>=a.keyCode||48<=a.keyCode&&57>=a.keyCode||a.keyCode==e.SPACE?String.fromCharCode(a.keyCode):a.keyCode);d||(d=229);if("keypress"==a.type){if("string"!=typeof d)return;if("a"<=d&&"z">=d||"A"<=d&&"Z">=d||"0"<=d&&"9">=d||" "===d)if(a.ctrlKey||a.metaKey||a.altKey)return}var h={faux:!0},k;for(k in a)/^(layer[XY]|returnValue|keyLocation)$/.test(k)||(f=a[k],"function"!=typeof f&&"undefined"!=typeof f&&(h[k]=f));c.mixin(h,{charOrCode:d,_wasConsumed:!1,preventDefault:function(){h._wasConsumed=
!0;a.preventDefault()},stopPropagation:function(){a.stopPropagation()}});this._lastInputProducingEvent=h;!1===this.onInput(h)&&(h.preventDefault(),h.stopPropagation());if(!h._wasConsumed&&9>=l("ie"))switch(a.keyCode){case e.TAB:case e.ESCAPE:case e.DOWN_ARROW:case e.UP_ARROW:case e.LEFT_ARROW:case e.RIGHT_ARROW:break;default:a.keyCode==e.ENTER&&"textarea"!=this.textbox.tagName.toLowerCase()||this.defer(function(){this.textbox.value!==this._lastInputEventValue&&b.emit(this.textbox,"input",{bubbles:!0})})}})),
b(this.textbox,"input",c.hitch(this,"_onInput")),b(this.domNode,"keypress",function(a){a.stopPropagation()}))},_blankValue:"",filter:function(a){if(null===a)return this._blankValue;if("string"!=typeof a)return a;this.trim&&(a=c.trim(a));this.uppercase&&(a=a.toUpperCase());this.lowercase&&(a=a.toLowerCase());this.propercase&&(a=a.replace(/[^\s]+/g,function(a){return a.substring(0,1).toUpperCase()+a.substring(1)}));return a},_setBlurValue:function(){this._setValueAttr(this.get("value"),!0)},_onBlur:function(a){this.disabled||
(this._setBlurValue(),this.inherited(arguments))},_isTextSelected:function(){return this.textbox.selectionStart!=this.textbox.selectionEnd},_onFocus:function(a){this.disabled||this.readOnly||(this.selectOnClick&&"mouse"==a&&(this._selectOnClickHandle=b.once(this.domNode,"mouseup, touchend",c.hitch(this,function(a){this._isTextSelected()||k.selectInputText(this.textbox)})),this.own(this._selectOnClickHandle),this.defer(function(){this._selectOnClickHandle&&(this._selectOnClickHandle.remove(),this._selectOnClickHandle=
null)},500)),this.inherited(arguments),this._refreshState())},reset:function(){this.textbox.value="";this.inherited(arguments)}});l("dojo-bidi")&&(k=h("dijit.form._TextBoxMixin",k,{_setValueAttr:function(){this.inherited(arguments);this.applyTextDir(this.focusNode)},_setDisplayedValueAttr:function(){this.inherited(arguments);this.applyTextDir(this.focusNode)},_onInput:function(){this.applyTextDir(this.focusNode);this.inherited(arguments)}}));k._setSelectionRange=f._setSelectionRange=function(a,b,
c){a.setSelectionRange&&a.setSelectionRange(b,c)};k.selectInputText=f.selectInputText=function(a,b,c){a=m.byId(a);isNaN(b)&&(b=0);isNaN(c)&&(c=a.value?a.value.length:0);try{a.focus(),k._setSelectionRange(a,b,c)}catch(p){}};return k})},"dijit/Tooltip":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/fx dojo/dom dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/_base/lang dojo/mouse dojo/on dojo/sniff ./_base/manager ./place ./_Widget ./_TemplatedMixin ./BackgroundIframe dojo/text!./templates/Tooltip.html ./main".split(" "),
function(n,h,m,l,e,c,b,f,k,a,d,q,p,x,w,v,C,D){function u(){}var t=h("dijit._MasterTooltip",[x,w],{duration:q.defaultDuration,templateString:C,postCreate:function(){this.ownerDocumentBody.appendChild(this.domNode);this.bgIframe=new v(this.domNode);this.fadeIn=m.fadeIn({node:this.domNode,duration:this.duration,onEnd:f.hitch(this,"_onShow")});this.fadeOut=m.fadeOut({node:this.domNode,duration:this.duration,onEnd:f.hitch(this,"_onHide")})},show:function(a,c,d,e,h,k,l){if(!this.aroundNode||this.aroundNode!==
c||this.containerNode.innerHTML!=a)if("playing"==this.fadeOut.status())this._onDeck=arguments;else{this.containerNode.innerHTML=a;h&&this.set("textDir",h);this.containerNode.align=e?"right":"left";var g=p.around(this.domNode,c,d&&d.length?d:z.defaultPosition,!e,f.hitch(this,"orient")),m=g.aroundNodePos;"M"==g.corner.charAt(0)&&"M"==g.aroundCorner.charAt(0)?(this.connectorNode.style.top=m.y+(m.h-this.connectorNode.offsetHeight>>1)-g.y+"px",this.connectorNode.style.left=""):"M"==g.corner.charAt(1)&&
"M"==g.aroundCorner.charAt(1)?this.connectorNode.style.left=m.x+(m.w-this.connectorNode.offsetWidth>>1)-g.x+"px":(this.connectorNode.style.left="",this.connectorNode.style.top="");b.set(this.domNode,"opacity",0);this.fadeIn.play();this.isShowingNow=!0;this.aroundNode=c;this.onMouseEnter=k||u;this.onMouseLeave=l||u}},orient:function(a,b,e,f,h){this.connectorNode.style.top="";var k=f.h;f=f.w;a.className="dijitTooltip "+{"MR-ML":"dijitTooltipRight","ML-MR":"dijitTooltipLeft","TM-BM":"dijitTooltipAbove",
"BM-TM":"dijitTooltipBelow","BL-TL":"dijitTooltipBelow dijitTooltipABLeft","TL-BL":"dijitTooltipAbove dijitTooltipABLeft","BR-TR":"dijitTooltipBelow dijitTooltipABRight","TR-BR":"dijitTooltipAbove dijitTooltipABRight","BR-BL":"dijitTooltipRight","BL-BR":"dijitTooltipLeft"}[b+"-"+e];this.domNode.style.width="auto";var l=c.position(this.domNode);if(d("ie")||d("trident"))l.w+=2;c.setMarginBox(this.domNode,{w:Math.min(Math.max(f,1),l.w)});"B"==e.charAt(0)&&"B"==b.charAt(0)?(a=c.position(a),b=this.connectorNode.offsetHeight,
a.h>k?(this.connectorNode.style.top=k-(h.h+b>>1)+"px",this.connectorNode.style.bottom=""):(this.connectorNode.style.bottom=Math.min(Math.max(h.h/2-b/2,0),a.h-b)+"px",this.connectorNode.style.top="")):(this.connectorNode.style.top="",this.connectorNode.style.bottom="");return Math.max(0,l.w-f)},_onShow:function(){d("ie")&&(this.domNode.style.filter="")},hide:function(a){this._onDeck&&this._onDeck[1]==a?this._onDeck=null:this.aroundNode===a&&(this.fadeIn.stop(),this.isShowingNow=!1,this.aroundNode=
null,this.fadeOut.play());this.onMouseEnter=this.onMouseLeave=u},_onHide:function(){this.domNode.style.cssText="";this.containerNode.innerHTML="";this._onDeck&&(this.show.apply(this,this._onDeck),this._onDeck=null)}});d("dojo-bidi")&&t.extend({_setAutoTextDir:function(a){this.applyTextDir(a);n.forEach(a.children,function(a){this._setAutoTextDir(a)},this)},_setTextDirAttr:function(a){this._set("textDir",a);"auto"==a?this._setAutoTextDir(this.containerNode):this.containerNode.dir=this.textDir}});D.showTooltip=
function(a,b,c,d,e,f,h){c&&(c=n.map(c,function(a){return{after:"after-centered",before:"before-centered"}[a]||a}));z._masterTT||(D._masterTT=z._masterTT=new t);return z._masterTT.show(a,b,c,d,e,f,h)};D.hideTooltip=function(a){return z._masterTT&&z._masterTT.hide(a)};var z=h("dijit.Tooltip",x,{label:"",showDelay:400,hideDelay:400,connectId:[],position:[],selector:"",_setConnectIdAttr:function(b){n.forEach(this._connections||[],function(a){n.forEach(a,function(a){a.remove()})},this);this._connectIds=
n.filter(f.isArrayLike(b)?b:b?[b]:[],function(a){return l.byId(a,this.ownerDocument)},this);this._connections=n.map(this._connectIds,function(b){b=l.byId(b,this.ownerDocument);var c=this.selector,d=c?function(b){return a.selector(c,b)}:function(a){return a},e=this;return[a(b,d(k.enter),function(){e._onHover(this)}),a(b,d("focusin"),function(){e._onHover(this)}),a(b,d(k.leave),f.hitch(e,"_onUnHover")),a(b,d("focusout"),f.hitch(e,"set","state","DORMANT"))]},this);this._set("connectId",b)},addTarget:function(a){a=
a.id||a;-1==n.indexOf(this._connectIds,a)&&this.set("connectId",this._connectIds.concat(a))},removeTarget:function(a){a=n.indexOf(this._connectIds,a.id||a);0<=a&&(this._connectIds.splice(a,1),this.set("connectId",this._connectIds))},buildRendering:function(){this.inherited(arguments);e.add(this.domNode,"dijitTooltipData")},startup:function(){this.inherited(arguments);var a=this.connectId;n.forEach(f.isArrayLike(a)?a:[a],this.addTarget,this)},getContent:function(a){return this.label||this.domNode.innerHTML},
state:"DORMANT",_setStateAttr:function(a){if(!(this.state==a||"SHOW TIMER"==a&&"SHOWING"==this.state||"HIDE TIMER"==a&&"DORMANT"==this.state)){this._hideTimer&&(this._hideTimer.remove(),delete this._hideTimer);this._showTimer&&(this._showTimer.remove(),delete this._showTimer);switch(a){case "DORMANT":this._connectNode&&(z.hide(this._connectNode),delete this._connectNode,this.onHide());break;case "SHOW TIMER":"SHOWING"!=this.state&&(this._showTimer=this.defer(function(){this.set("state","SHOWING")},
this.showDelay));break;case "SHOWING":var b=this.getContent(this._connectNode);if(!b){this.set("state","DORMANT");return}z.show(b,this._connectNode,this.position,!this.isLeftToRight(),this.textDir,f.hitch(this,"set","state","SHOWING"),f.hitch(this,"set","state","HIDE TIMER"));this.onShow(this._connectNode,this.position);break;case "HIDE TIMER":this._hideTimer=this.defer(function(){this.set("state","DORMANT")},this.hideDelay)}this._set("state",a)}},_onHover:function(a){this._connectNode&&a!=this._connectNode&&
this.set("state","DORMANT");this._connectNode=a;this.set("state","SHOW TIMER")},_onUnHover:function(a){this.set("state","HIDE TIMER")},open:function(a){this.set("state","DORMANT");this._connectNode=a;this.set("state","SHOWING")},close:function(){this.set("state","DORMANT")},onShow:function(){},onHide:function(){},destroy:function(){this.set("state","DORMANT");n.forEach(this._connections||[],function(a){n.forEach(a,function(a){a.remove()})},this);this.inherited(arguments)}});z._MasterTooltip=t;z.show=
D.showTooltip;z.hide=D.hideTooltip;z.defaultPosition=["after-centered","before-centered"];return z})},"dijit/place":function(){define("dojo/_base/array dojo/dom-geometry dojo/dom-style dojo/_base/kernel dojo/_base/window ./Viewport ./main".split(" "),function(n,h,m,l,e,c,b){function f(a,b,f,k){var d=c.getEffectiveBox(a.ownerDocument);a.parentNode&&"body"==String(a.parentNode.tagName).toLowerCase()||e.body(a.ownerDocument).appendChild(a);var l=null;n.some(b,function(b){var c=b.corner,e=b.pos,m=0,n=
{w:{L:d.l+d.w-e.x,R:e.x-d.l,M:d.w}[c.charAt(1)],h:{T:d.t+d.h-e.y,B:e.y-d.t,M:d.h}[c.charAt(0)]},p=a.style;p.left=p.right="auto";f&&(m=f(a,b.aroundCorner,c,n,k),m="undefined"==typeof m?0:m);var w=a.style,v=w.display,q=w.visibility;"none"==w.display&&(w.visibility="hidden",w.display="");p=h.position(a);w.display=v;w.visibility=q;v={L:e.x,R:e.x-p.w,M:Math.max(d.l,Math.min(d.l+d.w,e.x+(p.w>>1))-p.w)}[c.charAt(1)];q={T:e.y,B:e.y-p.h,M:Math.max(d.t,Math.min(d.t+d.h,e.y+(p.h>>1))-p.h)}[c.charAt(0)];e=Math.max(d.l,
v);w=Math.max(d.t,q);v=Math.min(d.l+d.w,v+p.w)-e;q=Math.min(d.t+d.h,q+p.h)-w;m+=p.w-v+(p.h-q);if(null==l||m<l.overflow)l={corner:c,aroundCorner:b.aroundCorner,x:e,y:w,w:v,h:q,overflow:m,spaceAvailable:n};return!m});l.overflow&&f&&f(a,l.aroundCorner,l.corner,l.spaceAvailable,k);b=l.y;var p=l.x,q=e.body(a.ownerDocument);/relative|absolute/.test(m.get(q,"position"))&&(b-=m.get(q,"marginTop"),p-=m.get(q,"marginLeft"));q=a.style;q.top=b+"px";q.left=p+"px";q.right="auto";return l}var k={TL:"BR",TR:"BL",
BL:"TR",BR:"TL"};return b.place={at:function(a,b,c,e,h){c=n.map(c,function(a){var c={corner:a,aroundCorner:k[a],pos:{x:b.x,y:b.y}};e&&(c.pos.x+="L"==a.charAt(1)?e.x:-e.x,c.pos.y+="T"==a.charAt(0)?e.y:-e.y);return c});return f(a,c,h)},around:function(a,b,c,e,k){function d(a,b){G.push({aroundCorner:a,corner:b,pos:{x:{L:r,R:r+H,M:r+(H>>1)}[a.charAt(1)],y:{T:E,B:E+I,M:E+(I>>1)}[a.charAt(0)]}})}var p;if("string"==typeof b||"offsetWidth"in b||"ownerSVGElement"in b){if(p=h.position(b,!0),/^(above|below)/.test(c[0])){var q=
h.getBorderExtents(b),x=b.firstChild?h.getBorderExtents(b.firstChild):{t:0,l:0,b:0,r:0},u=h.getBorderExtents(a),t=a.firstChild?h.getBorderExtents(a.firstChild):{t:0,l:0,b:0,r:0};p.y+=Math.min(q.t+x.t,u.t+t.t);p.h-=Math.min(q.t+x.t,u.t+t.t)+Math.min(q.b+x.b,u.b+t.b)}}else p=b;if(b.parentNode)for(q="absolute"==m.getComputedStyle(b).position,b=b.parentNode;b&&1==b.nodeType&&"BODY"!=b.nodeName;){x=h.position(b,!0);u=m.getComputedStyle(b);/relative|absolute/.test(u.position)&&(q=!1);if(!q&&/hidden|auto|scroll/.test(u.overflow)){var t=
Math.min(p.y+p.h,x.y+x.h),z=Math.min(p.x+p.w,x.x+x.w);p.x=Math.max(p.x,x.x);p.y=Math.max(p.y,x.y);p.h=t-p.y;p.w=z-p.x}"absolute"==u.position&&(q=!0);b=b.parentNode}var r=p.x,E=p.y,H="w"in p?p.w:p.w=p.width,I="h"in p?p.h:(l.deprecated("place.around: dijit/place.__Rectangle: { x:"+r+", y:"+E+", height:"+p.height+", width:"+H+" } has been deprecated.  Please use { x:"+r+", y:"+E+", h:"+p.height+", w:"+H+" }","","2.0"),p.h=p.height),G=[];n.forEach(c,function(a){var b=e;switch(a){case "above-centered":d("TM",
"BM");break;case "below-centered":d("BM","TM");break;case "after-centered":b=!b;case "before-centered":d(b?"ML":"MR",b?"MR":"ML");break;case "after":b=!b;case "before":d(b?"TL":"TR",b?"TR":"TL");d(b?"BL":"BR",b?"BR":"BL");break;case "below-alt":b=!b;case "below":d(b?"BL":"BR",b?"TL":"TR");d(b?"BR":"BL",b?"TR":"TL");break;case "above-alt":b=!b;case "above":d(b?"TL":"TR",b?"BL":"BR");d(b?"TR":"TL",b?"BR":"BL");break;default:d(a.aroundCorner,a.corner)}});a=f(a,G,k,{w:H,h:I});a.aroundNodePos=p;return a}}})},
"esri/identity/OAuthSignInHandler":function(){define("./Credential ../core/domUtils ../core/has ../core/Error ../core/promiseUtils ../core/urlUtils ../intl/substitute dijit/Dialog dijit/registry dojo/dom-attr dojo/i18n!./nls/identity dijit/form/Button".split(" "),function(n,h,m,l,e,c,b,f,k,a,d){var q=b.substitute;return{_oAuthIntervalId:0,_oAuthDialogContent:"\x3cdiv class\x3d'dijitDialogPaneContentArea'\x3e\x3cdiv style\x3d'padding-bottom: 5px; word-wrap: break-word;'\x3e{oAuthInfo}\x3c/div\x3e\x3cdiv style\x3d'margin: 0px; padding: 0px; height: 10px;'\x3e\x3c/div\x3e\x3cdiv class\x3d'esriErrorMsg' style\x3d'display: none; color: white; background-color: #D46464; text-align: center; padding-top: 3px; padding-bottom: 3px;'\x3e{invalidUser}\x3c/div\x3e\x3cdiv style\x3d'margin: 0px; padding: 0px; height: 10px;'\x3e\x3c/div\x3e\x3cdiv class\x3d'dijitDialogPaneActionBar'\x3e\x3cbutton data-dojo-type\x3d'dijit.form.Button' data-dojo-props\x3d'type:\"button\", \"class\":\"esriIdSubmit\"'\x3e{lblOk}\x3c/button\x3e\x3cbutton data-dojo-type\x3d'dijit.form.Button' data-dojo-props\x3d'type:\"button\", \"class\":\"esriIdCancel\"'\x3e{lblCancel}\x3c/button\x3e\x3c/div\x3e",
setOAuthRedirectionHandler:function(a){this._oAuthRedirectFunc=a},oAuthSignIn:function(b,c,f,k){var l=this._oAuthDfd=e.createResolver();if(k&&k.signal)e.onAbort(k.signal,function(){var a=this._oAuthDfd&&this._oAuthDfd.oAuthWin_;if(a&&!a.closed)a.close();else if(this.oAuthDialog)this.oAuthDialog.onCancel()}.bind(this));l.resUrl_=b;l.sinfo_=c;l.oinfo_=f;var m=!k||!1!==k.oAuthPopupConfirmation;if(!f.popup||!m)return this._doOAuthSignIn(b,c,f),l.promise;this._nls||(this._nls=d);this.oAuthDialog||(this.oAuthDialog=
this._createOAuthDialog());b=this.oAuthDialog;f=k&&k.error;k=k&&k.token;h.hide(b.errMsg_);f&&f.details&&403==f.details.httpStatus&&k&&(a.set(b.errMsg_,"innerHTML",this._nls.forbidden),h.show(b.errMsg_));a.set(b.serverLink_,{title:c.server,innerHTML:-1!==c.server.toLowerCase().indexOf("arcgis.com")?"ArcGIS Online":c.server});b.show();return l.promise},setOAuthResponseHash:function(a){var b=this._oAuthDfd;this._oAuthDfd=null;if(b&&a)if(clearInterval(this._oAuthIntervalId),"#"===a.charAt(0)&&(a=a.substring(1)),
a=c.queryToObject(a),a.error){var d="access_denied"===a.error;a=new l(d?"identity-manager:user-aborted":"identity-manager:authentication-failed",d?"ABORTED":"OAuth: "+a.error+" - "+a.error_description);b.reject(a)}else{var d=b.oinfo_._oAuthCred,e=new n({userId:a.username,server:b.sinfo_.server,token:a.access_token,expires:Date.now()+1E3*Number(a.expires_in),ssl:"true"===a.ssl,_oAuthCred:d});d.storage=a.persist?window.localStorage:window.sessionStorage;d.token=e.token;d.expires=e.expires;d.userId=
e.userId;d.ssl=e.ssl;d.save();b.resolve(e)}},_createOAuthDialog:function(){var a=this._nls,b=q(this._oAuthDialogContent,a),b=q(b,{server:"\x3cspan class\x3d'serverLink' style\x3d'word-wrap: break-word;'\x3e\x3c/span\x3e"}),c=new f({title:a.title,content:b,"class":"esri-widget esriOAuthSignInDialog esriIdentityDialog",style:"min-width: 18em;",esriIdMgr_:this,execute_:function(){var a=c.esriIdMgr_._oAuthDfd;c.hide_();c.esriIdMgr_._doOAuthSignIn(a.resUrl_,a.sinfo_,a.oinfo_)},cancel_:function(){var a=
c.esriIdMgr_._oAuthDfd;c.esriIdMgr_._oAuthDfd=null;c.hide_();var b=new l("identity-manager:user-aborted","ABORTED");a.reject(b)},hide_:function(){h.hide(c.errMsg_);c.hide();f._DialogLevelManager.hide(c)}}),a=c.domNode;c.btnSubmit_=k.byNode(a.getElementsByClassName("esriIdSubmit")[0]);c.btnCancel_=k.byNode(a.getElementsByClassName("esriIdCancel")[0]);c.serverLink_=a.getElementsByClassName("serverLink")[0];c.errMsg_=a.getElementsByClassName("esriErrorMsg")[0];c.connect(c.btnSubmit_,"onClick",c.execute_);
c.connect(c.btnCancel_,"onClick",c.onCancel);c.connect(c,"onCancel",c.cancel_);return c},_doOAuthSignIn:function(a,b,d){var e=this,f={portalUrl:d.portalUrl};!d.popup&&d.preserveUrlHash&&window.location.hash&&(f.hash=window.location.hash);f={client_id:d.appId,response_type:"token",state:JSON.stringify(f),expiration:d.expiration,locale:d.locale,redirect_uri:d.popup?c.makeAbsolute(d.popupCallbackUrl):window.location.href.replace(/#.*$/,"")};d.forceLogin&&(f.force_login=!0);var h=d.portalUrl.replace(/^http:/i,
"https:")+"/sharing/oauth2/authorize",k=h+"?"+c.objectToQuery(f);if(d.popup){var n;7===m("ie")?(n=window.open(d.popupCallbackUrl,"esriJSAPIOAuth",d.popupWindowFeatures),n.location=k):n=window.open(k,"esriJSAPIOAuth",d.popupWindowFeatures);n?(n.focus(),this._oAuthDfd.oAuthWin_=n,this._oAuthIntervalId=setInterval(function(){if(n.closed){clearInterval(e._oAuthIntervalId);var a=e._oAuthDfd;if(a){var b=new l("identity-manager:user-aborted","ABORTED");a.reject(b)}}},500)):(a=new l("identity-manager:popup-blocked",
"ABORTED"),this._oAuthDfd.reject(a))}else this._rejectOnPersistedPageShow=!0,this._oAuthRedirectFunc?this._oAuthRedirectFunc({authorizeParams:f,authorizeUrl:h,resourceUrl:a,serverInfo:b,oAuthInfo:d}):window.location=k}}})},"esri/identity/Credential":function(){define(["require","exports","./IdentityManagerBase"],function(n,h,m){return m.Credential})},"url:dijit/templates/Dialog.html":'\x3cdiv class\x3d"dijitDialog" role\x3d"dialog" aria-labelledby\x3d"${id}_title"\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"titleBar" class\x3d"dijitDialogTitleBar"\x3e\r\n\t\t\x3cspan data-dojo-attach-point\x3d"titleNode" class\x3d"dijitDialogTitle" id\x3d"${id}_title"\r\n\t\t\t\trole\x3d"heading" level\x3d"1"\x3e\x3c/span\x3e\r\n\t\t\x3cspan data-dojo-attach-point\x3d"closeButtonNode" class\x3d"dijitDialogCloseIcon" data-dojo-attach-event\x3d"ondijitclick: onCancel" title\x3d"${buttonCancel}" role\x3d"button" tabindex\x3d"-1"\x3e\r\n\t\t\t\x3cspan data-dojo-attach-point\x3d"closeText" class\x3d"closeText" title\x3d"${buttonCancel}"\x3ex\x3c/span\x3e\r\n\t\t\x3c/span\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"dijitDialogPaneContent"\x3e\x3c/div\x3e\r\n\t${!actionBarTemplate}\r\n\x3c/div\x3e\r\n\r\n',
"url:dijit/form/templates/Button.html":'\x3cspan class\x3d"dijit dijitReset dijitInline" role\x3d"presentation"\r\n\t\x3e\x3cspan class\x3d"dijitReset dijitInline dijitButtonNode"\r\n\t\tdata-dojo-attach-event\x3d"ondijitclick:__onClick" role\x3d"presentation"\r\n\t\t\x3e\x3cspan class\x3d"dijitReset dijitStretch dijitButtonContents"\r\n\t\t\tdata-dojo-attach-point\x3d"titleNode,focusNode"\r\n\t\t\trole\x3d"button" aria-labelledby\x3d"${id}_label"\r\n\t\t\t\x3e\x3cspan class\x3d"dijitReset dijitInline dijitIcon" data-dojo-attach-point\x3d"iconNode"\x3e\x3c/span\r\n\t\t\t\x3e\x3cspan class\x3d"dijitReset dijitToggleButtonIconChar"\x3e\x26#x25CF;\x3c/span\r\n\t\t\t\x3e\x3cspan class\x3d"dijitReset dijitInline dijitButtonText"\r\n\t\t\t\tid\x3d"${id}_label"\r\n\t\t\t\tdata-dojo-attach-point\x3d"containerNode"\r\n\t\t\t\x3e\x3c/span\r\n\t\t\x3e\x3c/span\r\n\t\x3e\x3c/span\r\n\t\x3e\x3cinput ${!nameAttrSetting} type\x3d"${type}" value\x3d"${value}" class\x3d"dijitOffScreen"\r\n\t\tdata-dojo-attach-event\x3d"onclick:_onClick"\r\n\t\ttabIndex\x3d"-1" aria-hidden\x3d"true" data-dojo-attach-point\x3d"valueNode"\r\n/\x3e\x3c/span\x3e\r\n',
"url:dijit/form/templates/TextBox.html":'\x3cdiv class\x3d"dijit dijitReset dijitInline dijitLeft" id\x3d"widget_${id}" role\x3d"presentation"\r\n\t\x3e\x3cdiv class\x3d"dijitReset dijitInputField dijitInputContainer"\r\n\t\t\x3e\x3cinput class\x3d"dijitReset dijitInputInner" data-dojo-attach-point\x3d\'textbox,focusNode\' autocomplete\x3d"off"\r\n\t\t\t${!nameAttrSetting} type\x3d\'${type}\'\r\n\t/\x3e\x3c/div\r\n\x3e\x3c/div\x3e\r\n',"url:dijit/templates/Tooltip.html":'\x3cdiv class\x3d"dijitTooltip dijitTooltipLeft" id\x3d"dojoTooltip" data-dojo-attach-event\x3d"mouseenter:onMouseEnter,mouseleave:onMouseLeave"\r\n\t\x3e\x3cdiv class\x3d"dijitTooltipConnector" data-dojo-attach-point\x3d"connectorNode"\x3e\x3c/div\r\n\t\x3e\x3cdiv class\x3d"dijitTooltipContainer dijitTooltipContents" data-dojo-attach-point\x3d"containerNode" role\x3d\'alert\'\x3e\x3c/div\r\n\x3e\x3c/div\x3e\r\n',
"url:dijit/form/templates/ValidationTextBox.html":'\x3cdiv class\x3d"dijit dijitReset dijitInline dijitLeft"\r\n\tid\x3d"widget_${id}" role\x3d"presentation"\r\n\t\x3e\x3cdiv class\x3d\'dijitReset dijitValidationContainer\'\r\n\t\t\x3e\x3cinput class\x3d"dijitReset dijitInputField dijitValidationIcon dijitValidationInner" value\x3d"\x26#935; " type\x3d"text" tabIndex\x3d"-1" readonly\x3d"readonly" role\x3d"presentation"\r\n\t/\x3e\x3c/div\r\n\t\x3e\x3cdiv class\x3d"dijitReset dijitInputField dijitInputContainer"\r\n\t\t\x3e\x3cinput class\x3d"dijitReset dijitInputInner" data-dojo-attach-point\x3d\'textbox,focusNode\' autocomplete\x3d"off"\r\n\t\t\t${!nameAttrSetting} type\x3d\'${type}\'\r\n\t/\x3e\x3c/div\r\n\x3e\x3c/div\x3e\r\n',
"*now":function(n){n(['dojo/i18n!*preload*esri/identity/nls/IdentityManager*["ar","bs","ca","cs","da","de","el","en-au","en-ca","en-gb","en-us","es","es-mx","et","fi","fr","he","hr","hu","id","it","ja","ko","lt","lv","nl","nb","pl","pt","pt-br","pt-pt","ro","ru","sl","sr","sv","th","tr","uk","vi","zh-cn","zh-hk","zh-tw","ROOT"]'])},"*noref":1}});
define("require exports ../kernel ../core/declare ./IdentityManagerDialog ./OAuthSignInHandler".split(" "),function(n,h,m,l,e,c){n=new e;l=l.safeMixin(n,c);return m.id=l});